(function(W,w){typeof exports=="object"&&typeof module<"u"?w(exports,require("cash-dom")):typeof define=="function"&&define.amd?define(["exports","cash-dom"],w):(W=typeof globalThis<"u"?globalThis:W||self,w(W.zui={},W.$))})(this,function(W,w){var ut,pt,gt,It,st,Q,mt,B,tt,X,vt,Qt,Pt,xt,et,Ct,Tt,De,nr,ze,or,He,rr,Oe,sr,te,An,Dt,zt,ee,ne,oe,re,Ht,Be,We,ir,je,lr,$e,cr,Ot,se,nt,jt,Ut,Rt,Ft,le,ce;"use strict";var Mn=(W,w,V)=>{if(!w.has(W))throw TypeError("Cannot "+V)};var x=(W,w,V)=>(Mn(W,w,"read from private field"),V?V.call(W):w.get(W)),P=(W,w,V)=>{if(w.has(W))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(W):w.set(W,V)},A=(W,w,V,he)=>(Mn(W,w,"write to private field"),he?he.call(W,V):w.set(W,V),V);var G=(W,w,V)=>(Mn(W,w,"access private method"),V);const V=`:root{--color-gray-50:#f8fafc;--color-gray-100:#f1f5f9;--color-gray-200:#e2e8f0;--color-gray-300:#cbd5e1;--color-gray-400:#94a3b8;--color-gray-500:#64748b;--color-gray-600:#475569;--color-gray-700:#334155;--color-gray-800:#1e293b;--color-gray-900:#0f172a;--color-gray-950:#020617;--color-gray-50-rgb:248,250,252;--color-gray-100-rgb:241,245,249;--color-gray-200-rgb:226,232,240;--color-gray-300-rgb:203,213,225;--color-gray-400-rgb:148,163,184;--color-gray-500-rgb:100,116,139;--color-gray-600-rgb:71,85,105;--color-gray-700-rgb:51,65,85;--color-gray-800-rgb:30,41,59;--color-gray-900-rgb:15,23,42;--color-gray-950-rgb:2,6,23;--color-primary-50:#eff6ff;--color-primary-100:#dbeafe;--color-primary-200:#bfdbfe;--color-primary-300:#93c5fd;--color-primary-400:#60a5fa;--color-primary-500:#3b82f6;--color-primary-600:#2563eb;--color-primary-700:#1d4ed8;--color-primary-800:#1e40af;--color-primary-900:#1e3a8a;--color-primary-950:#172554;--color-primary-50-rgb:239,246,255;--color-primary-100-rgb:219,234,254;--color-primary-200-rgb:191,219,254;--color-primary-300-rgb:147,197,253;--color-primary-400-rgb:96,165,250;--color-primary-500-rgb:59,130,246;--color-primary-600-rgb:37,99,235;--color-primary-700-rgb:29,78,216;--color-primary-800-rgb:30,64,175;--color-primary-900-rgb:30,58,138;--color-primary-950-rgb:23,37,84;--color-secondary-50:#f0f9ff;--color-secondary-100:#e0f2fe;--color-secondary-200:#bae6fd;--color-secondary-300:#7dd3fc;--color-secondary-400:#38bdf8;--color-secondary-500:#0ea5e9;--color-secondary-600:#0284c7;--color-secondary-700:#0369a1;--color-secondary-800:#075985;--color-secondary-900:#0c4a6e;--color-secondary-950:#082f49;--color-secondary-50-rgb:240,249,255;--color-secondary-100-rgb:224,242,254;--color-secondary-200-rgb:186,230,253;--color-secondary-300-rgb:125,211,252;--color-secondary-400-rgb:56,189,248;--color-secondary-500-rgb:14,165,233;--color-secondary-600-rgb:2,132,199;--color-secondary-700-rgb:3,105,161;--color-secondary-800-rgb:7,89,133;--color-secondary-900-rgb:12,74,110;--color-secondary-950-rgb:8,47,73;--color-success-50:#f0fdf4;--color-success-100:#dcfce7;--color-success-200:#bbf7d0;--color-success-300:#86efac;--color-success-400:#4ade80;--color-success-500:#22c55e;--color-success-600:#16a34a;--color-success-700:#15803d;--color-success-800:#166534;--color-success-900:#14532d;--color-success-950:#052e16;--color-success-50-rgb:240,253,244;--color-success-100-rgb:220,252,231;--color-success-200-rgb:187,247,208;--color-success-300-rgb:134,239,172;--color-success-400-rgb:74,222,128;--color-success-500-rgb:34,197,94;--color-success-600-rgb:22,163,74;--color-success-700-rgb:21,128,61;--color-success-800-rgb:22,101,52;--color-success-900-rgb:20,83,45;--color-success-950-rgb:5,46,22;--color-warning-50:#fffbeb;--color-warning-100:#fef3c7;--color-warning-200:#fde68a;--color-warning-300:#fcd34d;--color-warning-400:#fbbf24;--color-warning-500:#f59e0b;--color-warning-600:#d97706;--color-warning-700:#b45309;--color-warning-800:#92400e;--color-warning-900:#78350f;--color-warning-950:#451a03;--color-warning-50-rgb:255,251,235;--color-warning-100-rgb:254,243,199;--color-warning-200-rgb:253,230,138;--color-warning-300-rgb:252,211,77;--color-warning-400-rgb:251,191,36;--color-warning-500-rgb:245,158,11;--color-warning-600-rgb:217,119,6;--color-warning-700-rgb:180,83,9;--color-warning-800-rgb:146,64,14;--color-warning-900-rgb:120,53,15;--color-warning-950-rgb:69,26,3;--color-danger-50:#fef2f2;--color-danger-100:#fee2e2;--color-danger-200:#fecaca;--color-danger-300:#fca5a5;--color-danger-400:#f87171;--color-danger-500:#ef4444;--color-danger-600:#dc2626;--color-danger-700:#b91c1c;--color-danger-800:#991b1b;--color-danger-900:#7f1d1d;--color-danger-950:#450a0a;--color-danger-50-rgb:254,242,242;--color-danger-100-rgb:254,226,226;--color-danger-200-rgb:254,202,202;--color-danger-300-rgb:252,165,165;--color-danger-400-rgb:248,113,113;--color-danger-500-rgb:239,68,68;--color-danger-600-rgb:220,38,38;--color-danger-700-rgb:185,28,28;--color-danger-800-rgb:153,27,27;--color-danger-900-rgb:127,29,29;--color-danger-950-rgb:69,10,10;--color-important-50:#fdf2f8;--color-important-100:#fce7f3;--color-important-200:#fbcfe8;--color-important-300:#f9a8d4;--color-important-400:#f472b6;--color-important-500:#ec4899;--color-important-600:#db2777;--color-important-700:#be185d;--color-important-800:#9d174d;--color-important-900:#831843;--color-important-950:#500724;--color-important-50-rgb:253,242,248;--color-important-100-rgb:252,231,243;--color-important-200-rgb:251,207,232;--color-important-300-rgb:249,168,212;--color-important-400-rgb:244,114,182;--color-important-500-rgb:236,72,153;--color-important-600-rgb:219,39,119;--color-important-700-rgb:190,24,93;--color-important-800-rgb:157,23,77;--color-important-900-rgb:131,24,67;--color-important-950-rgb:80,7,36;--color-special-50:#faf5ff;--color-special-100:#f3e8ff;--color-special-200:#e9d5ff;--color-special-300:#d8b4fe;--color-special-400:#c084fc;--color-special-500:#a855f7;--color-special-600:#9333ea;--color-special-700:#7e22ce;--color-special-800:#6b21a8;--color-special-900:#581c87;--color-special-950:#3b0764;--color-special-50-rgb:250,245,255;--color-special-100-rgb:243,232,255;--color-special-200-rgb:233,213,255;--color-special-300-rgb:216,180,254;--color-special-400-rgb:192,132,252;--color-special-500-rgb:168,85,247;--color-special-600-rgb:147,51,234;--color-special-700-rgb:126,34,206;--color-special-800-rgb:107,33,168;--color-special-900-rgb:88,28,135;--color-special-950-rgb:59,7,100;--color-inherit:inherit;--color-transparent:transparent;--color-current:currentColor;--color-black:#000;--color-white:#fff;--color-canvas:#fff;--color-inverse:#000;--color-surface:#f1f5f9;--color-fore:#334155;--color-focus:#bfdbfe;--color-link:#3b82f6;--color-link-hover:#2563eb;--color-link-visited:#1d4ed8;--color-placeholder:#94a3b8;--color-border:#e2e8f0;--color-border-strong:#cbd5e1;--color-border-light:#f1f5f9;--color-black-rgb:0,0,0;--color-white-rgb:255,255,255;--color-canvas-rgb:255,255,255;--color-inverse-rgb:0,0,0;--color-surface-rgb:241,245,249;--color-fore-rgb:51,65,85;--color-focus-rgb:191,219,254;--color-link-rgb:59,130,246;--color-link-hover-rgb:37,99,235;--color-link-visited-rgb:29,78,216;--color-placeholder-rgb:148,163,184;--color-border-rgb:226,232,240;--color-border-strong-rgb:203,213,225;--color-border-light-rgb:241,245,249;--radius-none:0px;--radius-sm:2px;--radius:4px;--radius-md:6px;--radius-lg:8px;--radius-xl:12px;--radius-2xl:16px;--radius-3xl:24px;--radius-full:9999px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,.1),0 0 2px -1px rgba(0,0,0,.05);--shadow:0 1px 4px 0 rgba(0,0,0,.15),0 1px 2px -1px rgba(0,0,0,.1);--shadow-md:0 2px 6px -1px rgba(0,0,0,.2),0 1px 4px -2px rgba(0,0,0,.15);--shadow-lg:0 5px 15px -3px rgba(0,0,0,.2),0 2px 6px -4px rgba(0,0,0,.15);--shadow-xl:0 10px 25px -5px rgba(0,0,0,.2),0 4px 10px -6px rgba(0,0,0,.15);--shadow-2xl:0 10px 50px -10px rgba(0,0,0,.4),0 8px 20px -10px rgba(0,0,0,.3);--shadow-inner:inset 0 2px 4px 0 rgba(0,0,0,.05);--shadow-none:none;--space:4px;--font-size-root:16px;--font-size-page:13px,[object Object]}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }
`;window.$=w;function he(e,t){if(e==null)return[e,void 0];typeof t=="string"&&(t=t.split("."));const n=t.join(".");let o=e;const r=[o];for(;typeof o=="object"&&o!==null&&t.length;){let s=t.shift(),i;const l=s.indexOf("[");if(l>0&&l<s.length-1&&s.endsWith("]")&&(i=s.substring(l+1,s.length-1),s=s.substring(0,l)),o=o[s],r.push(o),i!==void 0)if(typeof o=="object"&&o!==null)o instanceof Map?o=o.get(i):o=o[i],r.push(o);else throw new Error(`Cannot access property "${s}[${i}]", the full path is "${n}".`)}if(t.length)throw new Error(`Cannot access property with rest path "${t.join(".")}", the full path is "${n}".`);return r}function ar(e,t,n){try{const o=he(e,t),r=o[o.length-1];return r===void 0?n:r}catch{return n}}function U(e,...t){if(t.length===0)return e;if(t.length===1&&typeof t[0]=="object"&&t[0]){const n=t[0];return Object.keys(n).forEach(o=>{const r=n[o]??"";e=e.replace(new RegExp(`\\{${o}\\}`,"g"),`${r}`)}),e}for(let n=0;n<t.length;n++){const o=t[n]??"";e=e.replace(new RegExp(`\\{${n}\\}`,"g"),`${o}`)}return e}let Ve=(document.documentElement.getAttribute("lang")||"zh_cn").toLowerCase().replace("-","_"),it;function hr(){return Ve}function fr(e){Ve=e.toLowerCase()}function Ln(e,t){it||(it={}),typeof e=="string"&&(e={[e]:t??{}}),w.extend(!0,it,e)}function lt(e,t,n,o,r,s){Array.isArray(e)?it&&e.unshift(it):e=it?[it,e]:[e],typeof n=="string"&&(s=r,r=o,o=n,n=void 0);const i=r||Ve;let l;for(const c of e){if(!c)continue;const h=c[i];if(!h)continue;const f=s&&c===it?`${s}.${t}`:t;if(l=ar(h,f),l!==void 0)break}return l===void 0?o:n?U(l,...Array.isArray(n)?n:[n]):l}function dr(e,t,n,o){return lt(void 0,e,t,n,o)}lt.addLang=Ln,lt.getLang=dr,lt.getCode=hr,lt.setCode=fr,Ln({zh_cn:{confirm:"确定",cancel:"取消",delete:"删除",add:"添加"},zh_tw:{confirm:"確定",cancel:"取消",delete:"刪除",add:"添加"},en:{confirm:"Confirm",cancel:"Cancel",delete:"Delete",add:"Add"}});function In(...e){const t=[],n=new Map,o=(r,s)=>{if(Array.isArray(r)&&(s=r[1],r=r[0]),!r.length)return;const i=n.get(r);typeof i=="number"?t[i][1]=!!s:(n.set(r,t.length),t.push([r,!!s]))};return e.forEach(r=>{typeof r=="function"&&(r=r()),Array.isArray(r)?In(...r).forEach(o):r&&typeof r=="object"?Object.entries(r).forEach(o):typeof r=="string"&&r.split(" ").forEach(s=>o(s,!0))}),t.sort((r,s)=>(n.get(r[0])||0)-(n.get(s[0])||0))}const I=(...e)=>In(...e).reduce((t,[n,o])=>(o&&t.push(n),t),[]).join(" ");w.classes=I,w.fn.setClass=function(e,...t){return this.each((n,o)=>{const r=w(o);e===!0?r.attr("class",I(r.attr("class"),...t)):r.addClass(I(e,...t))})};const Bt=new WeakMap;function Pn(e,t,n){const o=Bt.has(e),r=o?Bt.get(e):{};typeof t=="string"?r[t]=n:t===null?Object.keys(r).forEach(s=>{delete r[s]}):Object.assign(r,t),Object.keys(r).forEach(s=>{r[s]===void 0&&delete r[s]}),Object.keys(r).length?(!o&&e instanceof Element&&Object.assign(r,w(e).dataset(),r),Bt.set(e,r)):Bt.delete(e)}function Dn(e,t,n){let o=Bt.get(e)||{};return!n&&e instanceof Element&&(o=Object.assign({},w(e).dataset(),o)),t===void 0?o:o[t]}w.fn.dataset=w.fn.data,w.fn.data=function(...e){if(!this.length)return;const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?Dn(this[0],t):this.each((o,r)=>Pn(r,t,n))},w.fn.removeData=function(e=null){return this.each((t,n)=>Pn(n,e))},w.fn._attr=w.fn.attr,w.fn.extend({attr(...e){const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?this._attr.apply(this,e):typeof t=="object"?(t&&Object.keys(t).forEach(o=>{const r=t[o];r===null?this.removeAttr(o):this._attr(o,r)}),this):n===null?this.removeAttr(t):this._attr(t,n)}}),w.Event||(w.Event=(e,t)=>{const[n,...o]=e.split("."),r=new Event(n,{bubbles:!0,cancelable:!0});return r.namespace=o.join("."),r.___ot=n,r.___td=t,r});const ur={};w.share=ur;const fe=new Map;function zn(e){const{zui:t}=window;return(!fe.size||e&&!fe.has(e.toUpperCase()))&&Object.keys(t).forEach(n=>{const o=t[n];!o.NAME||!o.ZUI||fe.set(n.toLowerCase(),o)}),e?fe.get(e.toLowerCase()):void 0}function pr(e,t,n){const o=zn(e);return o?!o.MULTI_INSTANCE&&o.get(t)?(console.error(`[ZUI] cannot create component "${e}" on element which already has a component instance.`,{element:t,options:n}),null):new o(t,n):null}w.fn.zuiInit=function(){return this.find("[data-zui]").each(function(){const e=w(this);let t=e.dataset();const[n,o]=t.zui.split(":");e.zui(n)||(o?t=w.share[o]:delete t.zui,requestAnimationFrame(()=>pr(n,this,t)))}),this},w.fn.zui=function(e,t){const n=this[0];if(!n)return;if(typeof e!="string"){const r=Dn(n,void 0,!0),s={};let i;return Object.keys(r).forEach(l=>{if(l.startsWith("zui.")){const c=r[l];s[l]=c,(!i||i.gid<c.gid)&&(i=s[l])}}),e===!0?s:i}const o=zn(e);if(o)return t===!0?o.getAll(n):o.query(n,t)},w(()=>{w("body").zuiInit()});function Hn(e,t){const n=w(e)[0];if(!n)return!1;let{viewport:o}=t||{};const{left:r,top:s,width:i,height:l}=n.getBoundingClientRect();if(!o){const{innerHeight:d,innerWidth:g}=window,{clientHeight:y,clientWidth:m}=document.documentElement;o={left:0,top:0,width:g||m,height:d||y}}const{left:c,top:h,width:f,height:a}=o;if(t!=null&&t.fullyCheck)return r>=c&&s>=h&&r+i<=f&&s+l<=a;const u=r<=f&&r+i>=c;return s<=a&&s+l>=h&&u}w.fn.isVisible=function(e){return Hn(this,e)};function On(e,t,n=!1){const o=w(e);if(t!==void 0){if(t.length){const r=`zui-runjs-${w.guid++}`;o.append(`<script id="${r}">${t}<\/script>`),n&&o.find(`#${r}`).remove()}return}o.find("script").each((r,s)=>{On(o,s.innerHTML),s.remove()})}w.runJS=(e,...t)=>(e=e.trim(),!e.startsWith("return ")&&!e.endsWith(";")&&(e=`return ${e}`),new Function(...t.map(([o])=>o),e)(...t.map(([,o])=>o))),w.fn.runJS=function(e){return this.each((t,n)=>{On(n,e)})};function gr(e,t){const n=w(e),{ifNeeded:o=!0,...r}=t||{};return n.each((s,i)=>{o&&Hn(i,{viewport:i.getBoundingClientRect()})||i.scrollIntoView(r)}),n}w.fn.scrollIntoView=function(e){return this.each((t,n)=>{gr(n,e)})},w.setLibRoot=function(e){w.libRoot=e},w.registerLib=function(e,t){w.libMap||(w.libMap={}),!t.name&&t.id&&(t.id=`zui-lib-${e}`),w.libMap[e]=t},w.getLib=function(e,t,n){return new Promise((o,r)=>{let s=typeof e=="string"?{src:e}:w.extend({},e);typeof t=="function"?s.success=t:t&&w.extend(s,t),n&&(s.success=n);let{src:i}=s;if(!i)return r(new Error("[ZUI] No src provided for $.getLib."));const l=w.libMap&&w.libMap[i];l&&(s=w.extend({},l,s),i=l.src||s.src);const{root:c=w.libRoot}=s;c&&(i=`${c}/${i}`.replace("//","/"));const{success:h,name:f}=s,a=()=>f?window[f]:void 0,u=()=>{o(a()),h==null||h()};if(a()){u();return}const{id:p}=s,d=w(p?`#${p}`:`script[src="${i}"]`);if(d.length){if(d.dataset("loaded"))u();else{const k=d.data("loadCalls")||[];k.push(u),d.data("loadCalls",k)}return}const{async:g=!0,defer:y=!1,noModule:m=!1,type:b,integrity:T}=s,E=document.createElement("script");E.async=g,E.defer=y,E.noModule=m,b&&(E.type=b),T&&(E.integrity=T),E.onload=()=>{u(),(w(E).dataset("loaded",!0).data("loadCalls")||[]).forEach(R=>R()),w(E).removeData("loadCalls")},E.onerror=()=>{r(new Error(`[ZUI] Failed to load lib from: ${i}`))},E.src=i,w("head").append(E)})},w.getScript=w.getLib;var de,j,Wn,ct,yt,jn,$n,Ye,St={},Un=[],mr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ge=Array.isArray;function at(e,t){for(var n in t)e[n]=t[n];return e}function Fn(e){var t=e.parentNode;t&&t.removeChild(e)}function D(e,t,n){var o,r,s,i={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?de.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)i[s]===void 0&&(i[s]=e.defaultProps[s]);return ue(e,i,o,r,null)}function ue(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++Wn};return r==null&&j.vnode!=null&&j.vnode(s),s}function Nt(){return{current:null}}function Vt(e){return e.children}function F(e,t){this.props=e,this.context=t}function pe(e,t){if(t==null)return e.__?pe(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?pe(e):null}function Bn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Bn(e)}}function Vn(e){(!e.__d&&(e.__d=!0)&&yt.push(e)&&!ge.__r++||jn!==j.debounceRendering)&&((jn=j.debounceRendering)||$n)(ge)}function ge(){var e,t,n,o,r,s,i,l,c;for(yt.sort(Ye);e=yt.shift();)e.__d&&(t=yt.length,o=void 0,r=void 0,s=void 0,l=(i=(n=e).__v).__e,(c=n.__P)&&(o=[],r=[],(s=at({},i)).__v=i.__v+1,Ke(c,i,s,n.__n,c.ownerSVGElement!==void 0,i.__h!=null?[l]:null,o,l??pe(i),i.__h,r),Jn(o,i,r),i.__e!=l&&Bn(i)),yt.length>t&&yt.sort(Ye));ge.__r=0}function Yn(e,t,n,o,r,s,i,l,c,h,f){var a,u,p,d,g,y,m,b,T,E,k=0,R=o&&o.__k||Un,H=R.length,N=H,S=t.length;for(n.__k=[],a=0;a<S;a++)(d=n.__k[a]=(d=t[a])==null||typeof d=="boolean"||typeof d=="function"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?ue(null,d,null,null,d):Ge(d)?ue(Vt,{children:d},null,null,null):d.__b>0?ue(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null&&(d.__=n,d.__b=n.__b+1,(b=yr(d,R,m=a+k,N))===-1?p=St:(p=R[b]||St,R[b]=void 0,N--),Ke(e,d,p,r,s,i,l,c,h,f),g=d.__e,(u=d.ref)&&p.ref!=u&&(p.ref&&qe(p.ref,null,d),f.push(u,d.__c||g,d)),g!=null&&(y==null&&(y=g),E=!(T=p===St||p.__v===null)&&b===m,T?b==-1&&k--:b!==m&&(b===m+1?(k++,E=!0):b>m?N>S-m?(k+=b-m,E=!0):k--:k=b<m&&b==m-1?b-m:0),m=a+k,E=E||b==a&&!T,typeof d.type!="function"||b===m&&p.__k!==d.__k?typeof d.type=="function"||E?d.__d!==void 0?(c=d.__d,d.__d=void 0):c=g.nextSibling:c=Kn(e,g,c):c=Gn(d,c,e),typeof n.type=="function"&&(n.__d=c)));for(n.__e=y,a=H;a--;)R[a]!=null&&(typeof n.type=="function"&&R[a].__e!=null&&R[a].__e==n.__d&&(n.__d=R[a].__e.nextSibling),Qn(R[a],R[a]))}function Gn(e,t,n){for(var o,r=e.__k,s=0;r&&s<r.length;s++)(o=r[s])&&(o.__=e,t=typeof o.type=="function"?Gn(o,t,n):Kn(n,o.__e,t));return t}function Kn(e,t,n){return n==null||n.parentNode!==e?e.insertBefore(t,null):t==n&&t.parentNode!=null||e.insertBefore(t,n),t.nextSibling}function yr(e,t,n,o){var r=e.key,s=e.type,i=n-1,l=n+1,c=t[n];if(c===null||c&&r==c.key&&s===c.type)return n;if(o>(c!=null?1:0))for(;i>=0||l<t.length;){if(i>=0){if((c=t[i])&&r==c.key&&s===c.type)return i;i--}if(l<t.length){if((c=t[l])&&r==c.key&&s===c.type)return l;l++}}return-1}function br(e,t,n,o,r){var s;for(s in n)s==="children"||s==="key"||s in t||me(e,s,null,n[s],o);for(s in t)r&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===t[s]||me(e,s,t[s],n[s],o)}function qn(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||mr.test(t)?n:n+"px"}function me(e,t,n,o,r){var s;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||qn(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||qn(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o||e.addEventListener(t,s?Xn:Zn,s):e.removeEventListener(t,s?Xn:Zn,s);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Zn(e){return this.l[e.type+!1](j.event?j.event(e):e)}function Xn(e){return this.l[e.type+!0](j.event?j.event(e):e)}function Ke(e,t,n,o,r,s,i,l,c,h){var f,a,u,p,d,g,y,m,b,T,E,k,R,H,N,S=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,l=t.__e=n.__e,t.__h=null,s=[l]),(f=j.__b)&&f(t);try{t:if(typeof S=="function"){if(m=t.props,b=(f=S.contextType)&&o[f.__c],T=f?b?b.props.value:f.__:o,n.__c?y=(a=t.__c=n.__c).__=a.__E:("prototype"in S&&S.prototype.render?t.__c=a=new S(m,T):(t.__c=a=new F(m,T),a.constructor=S,a.render=_r),b&&b.sub(a),a.props=m,a.state||(a.state={}),a.context=T,a.__n=o,u=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),S.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=at({},a.__s)),at(a.__s,S.getDerivedStateFromProps(m,a.__s))),p=a.props,d=a.state,a.__v=t,u)S.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(S.getDerivedStateFromProps==null&&m!==p&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,T),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,T)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(M){M&&(M.__=t)}),E=0;E<a._sb.length;E++)a.__h.push(a._sb[E]);a._sb=[],a.__h.length&&i.push(a);break t}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,T),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(p,d,g)})}if(a.context=T,a.props=m,a.__P=e,a.__e=!1,k=j.__r,R=0,"prototype"in S&&S.prototype.render){for(a.state=a.__s,a.__d=!1,k&&k(t),f=a.render(a.props,a.state,a.context),H=0;H<a._sb.length;H++)a.__h.push(a._sb[H]);a._sb=[]}else do a.__d=!1,k&&k(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++R<25);a.state=a.__s,a.getChildContext!=null&&(o=at(at({},o),a.getChildContext())),u||a.getSnapshotBeforeUpdate==null||(g=a.getSnapshotBeforeUpdate(p,d)),Yn(e,Ge(N=f!=null&&f.type===Vt&&f.key==null?f.props.children:f)?N:[N],t,n,o,r,s,i,l,c,h),a.base=t.__e,t.__h=null,a.__h.length&&i.push(a),y&&(a.__E=a.__=null)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=wr(n.__e,t,n,o,r,s,i,c,h);(f=j.diffed)&&f(t)}catch(M){t.__v=null,(c||s!=null)&&(t.__e=l,t.__h=!!c,s[s.indexOf(l)]=null),j.__e(M,t,n)}}function Jn(e,t,n){for(var o=0;o<n.length;o++)qe(n[o],n[++o],n[++o]);j.__c&&j.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){j.__e(s,r.__v)}})}function wr(e,t,n,o,r,s,i,l,c){var h,f,a,u=n.props,p=t.props,d=t.type,g=0;if(d==="svg"&&(r=!0),s!=null){for(;g<s.length;g++)if((h=s[g])&&"setAttribute"in h==!!d&&(d?h.localName===d:h.nodeType===3)){e=h,s[g]=null;break}}if(e==null){if(d===null)return document.createTextNode(p);e=r?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),s=null,l=!1}if(d===null)u===p||l&&e.data===p||(e.data=p);else{if(s=s&&de.call(e.childNodes),f=(u=n.props||St).dangerouslySetInnerHTML,a=p.dangerouslySetInnerHTML,!l){if(s!=null)for(u={},g=0;g<e.attributes.length;g++)u[e.attributes[g].name]=e.attributes[g].value;(a||f)&&(a&&(f&&a.__html==f.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(br(e,p,u,r,l),a)t.__k=[];else if(Yn(e,Ge(g=t.props.children)?g:[g],t,n,o,r&&d!=="foreignObject",s,i,s?s[0]:n.__k&&pe(n,0),l,c),s!=null)for(g=s.length;g--;)s[g]!=null&&Fn(s[g]);l||("value"in p&&(g=p.value)!==void 0&&(g!==e.value||d==="progress"&&!g||d==="option"&&g!==u.value)&&me(e,"value",g,u.value,!1),"checked"in p&&(g=p.checked)!==void 0&&g!==e.checked&&me(e,"checked",g,u.checked,!1))}return e}function qe(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){j.__e(o,n)}}function Qn(e,t,n){var o,r;if(j.unmount&&j.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||qe(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){j.__e(s,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Qn(o[r],t,n||typeof e.type!="function");n||e.__e==null||Fn(e.__e),e.__=e.__e=e.__d=void 0}function _r(e,t,n){return this.constructor(e,n)}function vr(e,t,n){var o,r,s,i;j.__&&j.__(e,t),r=(o=typeof n=="function")?null:n&&n.__k||t.__k,s=[],i=[],Ke(t,e=(!o&&n||t).__k=D(Vt,null,[e]),r||St,St,t.ownerSVGElement!==void 0,!o&&n?[n]:r?null:t.firstChild?de.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o,i),Jn(s,e,i)}de=Un.slice,j={__e:function(e,t,n,o){for(var r,s,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(l){e=l}throw e}},Wn=0,ct=function(e){return e!=null&&e.constructor===void 0},F.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=at({},this.state),typeof e=="function"&&(e=e(at({},n),this.props)),e&&at(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Vn(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vn(this))},F.prototype.render=Vt,yt=[],$n=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ye=function(e,t){return e.__v.__b-t.__v.__b},ge.__r=0;var to=function(e,t,n,o){var r;t[0]=0;for(var s=1;s<t.length;s++){var i=t[s++],l=t[s]?(t[0]|=i?1:2,n[t[s++]]):t[++s];i===3?o[0]=l:i===4?o[1]=Object.assign(o[1]||{},l):i===5?(o[1]=o[1]||{})[t[++s]]=l:i===6?o[1][t[++s]]+=l+"":i?(r=e.apply(l,to(e,l,n,["",null])),o.push(r),l[0]?t[0]|=2:(t[s-2]=0,t[s]=r)):o.push(l)}return o},eo=new Map;function xr(e){var t=eo.get(this);return t||(t=new Map,eo.set(this,t)),(t=to(this,t.get(e)||(t.set(e,t=function(n){for(var o,r,s=1,i="",l="",c=[0],h=function(u){s===1&&(u||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,u,i):s===3&&(u||i)?(c.push(3,u,i),s=2):s===2&&i==="..."&&u?c.push(4,u,0):s===2&&i&&!u?c.push(5,0,!0,i):s>=5&&((i||!u&&s===5)&&(c.push(s,0,i,r),s=6),u&&(c.push(s,u,0,r),s=6)),i=""},f=0;f<n.length;f++){f&&(s===1&&h(),h(f));for(var a=0;a<n[f].length;a++)o=n[f][a],s===1?o==="<"?(h(),c=[c],s=3):i+=o:s===4?i==="--"&&o===">"?(s=1,i=""):i=o+i[0]:l?o===l?l="":i+=o:o==='"'||o==="'"?l=o:o===">"?(h(),s=1):s&&(o==="="?(s=5,r=i,i=""):o==="/"&&(s<5||n[f][a+1]===">")?(h(),s===3&&(c=c[0]),s=c,(c=c[0]).push(2,0,s),s=0):o===" "||o==="	"||o===`
`||o==="\r"?(h(),s=2):i+=o),s===3&&i==="!--"&&(s=4,c=c[0])}return h(),c}(e)),t),arguments,[])).length>1?t:t[0]}xr.bind(D);class Ze extends F{_getClassName(t){return[t.className,t.class]}_getProps(t){const{className:n,class:o,attrs:r,data:s,forwardRef:i,children:l,style:c,...h}=t,f=Object.keys(h).reduce((a,u)=>((u==="dangerouslySetInnerHTML"||/^(on[A-Z]|data-)[a-zA-Z-]+/.test(u))&&(a[u]=h[u]),a),{});return{ref:i,class:I(this._getClassName(t)),style:c,...f,...r}}_getComponent(t){return t.component||"div"}_getChildren(t){return t.children}_beforeRender(t){return t}render(t){return t=this._beforeRender(t)||t,D(this._getComponent(t),this._getProps(t),this._getChildren(t))}}var Cr=0;function _(e,t,n,o,r,s){var i,l,c={};for(l in t)l=="ref"?i=t[l]:c[l]=t[l];var h={type:e,props:c,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Cr,__source:r,__self:s};if(typeof e=="function"&&(i=e.defaultProps))for(l in i)c[l]===void 0&&(c[l]=i[l]);return j.vnode&&j.vnode(h),h}class Xe extends F{constructor(){super(...arguments),this._ref=Nt()}_runJS(){this.props.executeScript&&w(this._ref.current).runJS()}componentDidMount(){this._runJS()}componentDidUpdate(t){this.props.html!==t.html&&this._runJS()}render(t){const{executeScript:n,html:o,...r}=t;return _(Ze,{forwardRef:this._ref,dangerouslySetInnerHTML:{__html:o},...r})}}function Tr(e){const{tag:t,className:n,style:o,renders:r,generateArgs:s=[],generatorThis:i,generators:l,onGenerate:c,onRenderItem:h,...f}=e,a=[n],u={...o},p=[],d=[];return r.forEach(g=>{const y=[];if(typeof g=="string"&&l&&l[g]&&(g=l[g]),typeof g=="function")if(c)y.push(...c.call(i,g,p,...s));else{const m=g.call(i,p,...s);m&&(Array.isArray(m)?y.push(...m):y.push(m))}else y.push(g);y.forEach(m=>{m!=null&&(typeof m=="object"&&!ct(m)&&("html"in m||"__html"in m||"className"in m||"style"in m||"attrs"in m||"children"in m)?m.html?p.push(_("div",{className:I(m.className),style:m.style,dangerouslySetInnerHTML:{__html:m.html},...m.attrs??{}})):m.__html?d.push(m.__html):(m.style&&Object.assign(u,m.style),m.className&&a.push(m.className),m.children&&p.push(m.children),m.attrs&&Object.assign(f,m.attrs)):p.push(m))})}),d.length&&Object.assign(f,{dangerouslySetInnerHTML:{__html:d}}),[{className:I(a),style:u,...f},p]}function Je({tag:e="div",...t}){const[n,o]=Tr(t);return D(e,n,...o)}function no(e,t,n){return typeof e=="function"?e.call(t,...n||[]):Array.isArray(e)?e.map(o=>no(o,t,n)):ct(e)||e===null?e:typeof e=="object"?e.html?_(Xe,{...e}):_(Ze,{...e}):e}function ye(e){const{content:t,generatorThis:n,generatorArgs:o}=e,r=no(t,n,o);return r==null||typeof r=="boolean"?null:ct(r)?r:_(Vt,{children:r})}const oo=e=>e.startsWith("icon-")?e:`icon-${e}`;function Yt(e){const{icon:t,className:n,...o}=e;if(!t)return null;if(ct(t))return t;const r=["icon",n];if(typeof t=="string")r.push(oo(t));else if(typeof t=="object"){const{className:s,icon:i,...l}=t;r.push(s,i?oo(i):""),Object.assign(o,l)}return _("i",{className:I(r),...o})}function ro(e){return e.parentNode===document?!1:e.parentNode?ro(e.parentNode):!0}const Pe=class Pe{constructor(t,n){this._inited=!1,this._autoDestory=0;const{KEY:o,DATA_KEY:r,DEFAULT:s,MULTI_INSTANCE:i,NAME:l}=this.constructor;if(!l)throw new Error('[ZUI] The component must have a "NAME" static property.');const c=w(t);if(c.data(o)&&!i)throw new Error("[ZUI] The component has been initialized on element.");const h=c[0],f=w.guid++;if(this._gid=f,this._element=h,c.on("DOMNodeRemovedFromDocument",()=>{this._autoDestory&&clearTimeout(this._autoDestory),this._autoDestory=window.setTimeout(()=>{this._autoDestory=0,ro(h)&&this.destroy()},100)}),this._options={...s,...c.dataset()},this.setOptions(n),this._key=this.options.key??`__${f}`,c.data(o,this).attr(r,`${f}`),i){const a=`${o}:ALL`;let u=c.data(a);u||(u=new Map,c.data(a,u)),u.set(this._key,this)}this.init(),requestAnimationFrame(async()=>{this._inited=!0,await this.afterInit(),this.emit("inited",this.options)})}static get ZUI(){return this.NAME.replace(/(^[A-Z]+)/,t=>t.toLowerCase())}static get KEY(){return`zui.${this.NAME}`}static get NAMESPACE(){return`.zui.${this.ZUI}`}static get DATA_KEY(){return`data-zui-${this.NAME}`}get inited(){return this._inited}get element(){return this._element}get key(){return this._key}get options(){return this._options}get gid(){return this._gid}get $element(){return w(this.element)}get $emitter(){return this.$element}init(){}afterInit(){}render(t){this.setOptions(t)}destroy(){const{KEY:t,DATA_KEY:n,MULTI_INSTANCE:o}=this.constructor,{$element:r}=this;if(this.emit("destroyed"),r.off(this.namespace).removeData(t).attr(n,null),o){const s=this.$element.data(`${t}:ALL`);if(s)if(s.delete(this._key),s.size===0)this.$element.removeData(`${t}:ALL`);else{const i=s.values().next().value;r.data(t,i).attr(n,i.gid)}}this._options=void 0,this._element=void 0}setOptions(t){return t&&w.extend(this._options,t),this._options}emit(t,...n){const o=new w.Event(t);return o.__src=this,this.$emitter.trigger(o,[this,...n]),o}on(t,n,o){const r=this;this.$element[o!=null&&o.once?"one":"on"](this._wrapEvent(t),function(s,i){(!s.__src||s.__src===r)&&n.call(this,s,i)})}one(t,n){this.on(t,n,{once:!0})}off(t){this.$element.off(this._wrapEvent(t))}i18n(t,n,o){return lt(this.options.i18n,t,n,o,this.options.lang,this.constructor.NAME)??lt(this.options.i18n,t,n,o,this.options.lang)??`{i18n:${t}}`}get namespace(){return`${this.constructor.NAMESPACE}.${this._key}`}_wrapEvent(t){return t.split(" ").map(n=>n.includes(".")?n:`${n}${this.namespace}`).join(" ")}static get(t,n){const o=w(t);if(this.MULTI_INSTANCE&&n!==void 0){const r=o.data(`${this.KEY}:ALL`);return r?r.get(n):void 0}return o.data(this.KEY)}static ensure(t,n){const o=this.get(t,n==null?void 0:n.key);return o?(n&&o.setOptions(n),o):new this(t,n)}static getAll(t){const{MULTI_INSTANCE:n,DATA_KEY:o}=this,r=[];return w(t||document).find(`[${o}]`).each((s,i)=>{if(n){const c=w(i).data(`${this.KEY}:ALL`);if(c){r.push(...c.values());return}}const l=w(i).data(this.KEY);l&&r.push(l)}),r}static query(t,n){return t===void 0?this.getAll().sort((o,r)=>o.gid-r.gid)[0]:this.get(w(t).closest(`[${this.DATA_KEY}]`),n)}static defineFn(t){let n=t||this.ZUI;w.fn[n]&&(n=`zui${this.NAME}`);const o=this;w.fn.extend({[n](r,...s){const i=typeof r=="object"?r:void 0,l=typeof r=="string"?r:void 0;let c;return this.each((h,f)=>{let a=o.get(f);if(a?i&&a.render(i):a=new o(f,i),l){let u=a[l],p=a;u===void 0&&(p=a.$,u=p[l]),typeof u=="function"?c=u.call(p,...s):c=u}}),c!==void 0?c:this}})}};Pe.DEFAULT={},Pe.MULTI_INSTANCE=!1;let be=Pe;class so extends be{constructor(){super(...arguments),this.ref=Nt()}get $(){return this.ref.current}afterInit(){this.render()}destroy(){var t,n;(n=(t=this.$)==null?void 0:t.componentWillUnmount)==null||n.call(t),this.element&&(this.element.innerHTML=""),super.destroy()}render(t){vr(D(this.constructor.Component,{ref:this.ref,...this.setOptions(t)}),this.element)}}let Er=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const js="";class io extends F{constructor(n){super(n);P(this,ut,void 0);P(this,pt,void 0);A(this,ut,0),A(this,pt,null),this._handleWheel=o=>{const{wheelContainer:r}=this.props,s=o.target;if(!(!s||!r)&&(typeof r=="string"&&s.closest(r)||typeof r=="object")){const i=(this.props.type==="horz"?o.deltaX:o.deltaY)*(this.props.wheelSpeed??1);this.scrollOffset(i)&&o.preventDefault()}},this._handleMouseMove=o=>{const{dragStart:r}=this.state;r&&(x(this,ut)&&cancelAnimationFrame(x(this,ut)),A(this,ut,requestAnimationFrame(()=>{const s=this.props.type==="horz"?o.clientX-r.x:o.clientY-r.y;this.scroll(r.offset+s*this.props.scrollSize/this.props.clientSize),A(this,ut,0)})),o.preventDefault())},this._handleMouseUp=()=>{this.state.dragStart&&this.setState({dragStart:!1})},this._handleMouseDown=o=>{this.state.dragStart||this.setState({dragStart:{x:o.clientX,y:o.clientY,offset:this.scrollPos}}),o.stopPropagation()},this._handleClick=o=>{const r=o.currentTarget;if(!r)return;const s=r.getBoundingClientRect(),{type:i,clientSize:l,scrollSize:c}=this.props,h=(i==="horz"?o.clientX-s.left:o.clientY-s.top)-this.barSize/2;this.scroll(h*c/l),o.preventDefault()},this.state={scrollPos:this.props.defaultScrollPos??0,dragStart:!1}}get scrollPos(){return this.props.scrollPos??this.state.scrollPos}get controlled(){return this.props.scrollPos!==void 0}get maxScrollPos(){const{scrollSize:n,clientSize:o}=this.props;return Math.max(0,n-o)}get barSize(){const{clientSize:n,scrollSize:o,size:r=12,minBarSize:s=3*r}=this.props;return Math.max(Math.round(n*n/o),s)}componentDidMount(){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp);const{wheelContainer:n}=this.props;n&&(A(this,pt,typeof n=="string"?document:n.current),x(this,pt).addEventListener("wheel",this._handleWheel,{passive:!1}))}componentWillUnmount(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),x(this,pt)&&x(this,pt).removeEventListener("wheel",this._handleWheel)}scroll(n){return n=Math.max(0,Math.min(Math.round(n),this.maxScrollPos)),n===this.scrollPos?!1:(this.controlled?this._afterScroll(n):this.setState({scrollPos:n},this._afterScroll.bind(this,n)),!0)}scrollOffset(n){return this.scroll(this.scrollPos+n)}_afterScroll(n){const{onScroll:o}=this.props;o&&o(n,this.props.type??"vert")}render(){const{clientSize:n,type:o,size:r=12,className:s,style:i,left:l,top:c,bottom:h,right:f}=this.props,{maxScrollPos:a,scrollPos:u}=this,{dragStart:p}=this.state,d={left:l,top:c,bottom:h,right:f,...i},g={};return o==="horz"?(d.height=r,d.width=n,g.width=this.barSize,g.left=Math.round(Math.min(a,u)*(n-g.width)/a)):(d.width=r,d.height=n,g.height=this.barSize,g.top=Math.round(Math.min(a,u)*(n-g.height)/a)),_("div",{className:I("scrollbar",s,{"is-vert":o==="vert","is-horz":o==="horz","is-dragging":p}),style:d,onMouseDown:this._handleClick,children:_("div",{className:"scrollbar-bar",style:g,onMouseDown:this._handleMouseDown})})}}ut=new WeakMap,pt=new WeakMap;const we=new Map,_e=[];function lo(e,t){const{name:n}=e;if(!(t!=null&&t.override)&&we.has(n))throw new Error(`DTable: Plugin with name ${n} already exists`);we.set(n,e),t!=null&&t.buildIn&&!_e.includes(n)&&_e.push(n)}function K(e,t){lo(e,t);const n=o=>{if(!o)return e;const{defaultOptions:r,...s}=e;return{...s,defaultOptions:{...r,...o}}};return n.plugin=e,n}function co(e){return we.delete(e)}function kr(e){if(typeof e=="string"){const t=we.get(e);return t||console.warn(`DTable: Cannot found plugin "${e}"`),t}if(typeof e=="function"&&"plugin"in e)return e.plugin;if(typeof e=="object")return e;console.warn("DTable: Invalid plugin",e)}function ao(e,t,n){return t.forEach(o=>{var s;if(!o)return;const r=kr(o);r&&(n.has(r.name)||((s=r.plugins)!=null&&s.length&&ao(e,r.plugins,n),e.push(r),n.add(r.name)))}),e}function Rr(e=[],t=!0){return t&&_e.length&&e.unshift(..._e),e!=null&&e.length?ao([],e,new Set):[]}function ho(){return{cols:[],data:[],rowKey:"id",width:"100%",height:"auto",rowHeight:35,defaultColWidth:80,minColWidth:20,maxColWidth:9999,header:!0,footer:void 0,headerHeight:0,footerHeight:0,rowHover:!0,colHover:!1,cellHover:!1,bordered:!1,striped:!0,responsive:!1,scrollbarHover:!0,horzScrollbarPos:"outside"}}function Sr(e,t,n){return e&&(t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e))),e}function fo(e,t){return typeof e=="string"&&(e=e.endsWith("%")?parseFloat(e)/100:parseFloat(e)),typeof t=="number"&&(typeof e!="number"||isNaN(e))&&(e=t),e}function Qe(e,t=!1){if(!e.list.length)return;if(e.widthSetting&&e.width!==e.widthSetting){e.width=e.widthSetting;const o=e.width-e.totalWidth;if(!t&&o>0||t&&o!==0){const r=e.flexList.length?e.flexList:e.list,s=r.reduce((i,l)=>i+(l.flex||1),0);r.forEach(i=>{const l=Math[o<0?"max":"min"](o,Math.ceil(o*((i.flex||1)/s)));i.realWidth=i.width+l})}}let n=0;e.list.forEach(o=>{o.realWidth||(o.realWidth=o.width),o.left=n,n+=o.realWidth})}function Nr(e,t,n,o){const{defaultColWidth:r,minColWidth:s,maxColWidth:i,fixedLeftWidth:l=0,fixedRightWidth:c=0}=t,h=b=>(typeof b=="function"&&(b=b.call(e)),b=fo(b,0),b<1&&(b=Math.round(b*o)),b),f={width:0,list:[],flexList:[],widthSetting:0,totalWidth:0},a={...f,list:[],flexList:[],widthSetting:h(l)},u={...f,list:[],flexList:[],widthSetting:h(c)},p=[],d={};let g=!1;const y=[],m={};if(n.forEach(b=>{const{colTypes:T,onAddCol:E}=b;T&&Object.entries(T).forEach(([k,R])=>{m[k]||(m[k]=[]),m[k].push(R)}),E&&y.push(E)}),t.cols.forEach(b=>{if(b.hidden)return;const{type:T="",name:E}=b,k={fixed:!1,flex:!1,width:r,minWidth:s,maxWidth:i,...b,type:T},R={name:E,type:T,setting:k,flex:0,left:0,width:0,realWidth:0,visible:!0,index:p.length},H=m[T];H&&H.forEach(z=>{const O=typeof z=="function"?z.call(e,k):z;O&&Object.assign(k,O,b)});const{fixed:N,flex:S,minWidth:M=s,maxWidth:L=i}=k,C=fo(k.width||r,r);R.flex=S===!0?1:typeof S=="number"?S:0,R.width=Sr(C<1?Math.round(C*o):C,M,L),y.forEach(z=>z.call(e,R)),p.push(R),d[R.name]=R;const v=N?N==="left"?a:u:f;v.list.push(R),v.totalWidth+=R.width,v.width=v.totalWidth,R.flex&&v.flexList.push(R),typeof k.order=="number"&&(g=!0)}),g){const b=(T,E)=>(T.setting.order??0)-(E.setting.order??0);p.sort(b),a.list.sort(b),f.list.sort(b),u.list.sort(b)}return Qe(a,!0),Qe(u,!0),f.widthSetting=o-a.width-u.width,Qe(f),{list:p,map:d,left:a,center:f,right:u}}function Mr({col:e,className:t,height:n,row:o,onRenderCell:r,style:s,outerStyle:i,children:l,outerClass:c,width:h,left:f,top:a,...u}){var C;const p={left:f??e.left,top:a??o.top,width:h??e.realWidth,height:n,...i},{align:d,border:g}=e.setting,y={justifyContent:d?d==="left"?"start":d==="right"?"end":d:void 0,...e.setting.cellStyle,...s},m=["dtable-cell",c,t,e.setting.className,{"has-border-left":g===!0||g==="left","has-border-right":g===!0||g==="right"}],b=["dtable-cell-content",e.setting.cellClass],T=(C=o.data)==null?void 0:C[e.name],E=[l??T??""],k=r?r(E,{row:o,col:e,value:T},D):E,R=[],H=[],N={},S={};let M="div";k==null||k.forEach(v=>{if(typeof v=="object"&&v&&!ct(v)&&("html"in v||"className"in v||"style"in v||"attrs"in v||"children"in v||"tagName"in v)){const z=v.outer?R:H;v.html?z.push(_("div",{className:I("dtable-cell-html",v.className),style:v.style,dangerouslySetInnerHTML:{__html:v.html},...v.attrs??{}})):(v.style&&Object.assign(v.outer?p:y,v.style),v.className&&(v.outer?m:b).push(v.className),v.children&&z.push(v.children),v.attrs&&Object.assign(v.outer?N:S,v.attrs)),v.tagName&&!v.outer&&(M=v.tagName)}else H.push(v)});const L=M;return _("div",{className:I(m),style:p,"data-col":e.name,"data-row":o.id,"data-type":e.type||null,...u,...N,children:[H.length>0&&_(L,{className:I(b),style:y,...S,children:H}),R]})}function tn({rows:e=[],cols:t,rowHeight:n,scrollLeft:o=0,scrollTop:r=0,left:s=0,top:i=0,width:l,height:c="100%",className:h,CellComponent:f=Mr,onRenderCell:a}){var g;const u=Array.isArray(e)?e:[e],p=((g=u[0])==null?void 0:g.top)??0,d=u.length;return _("div",{className:I("dtable-cells",h),style:{top:i,left:s,width:l,height:c},children:_("div",{className:"dtable-cells-container",style:{left:-o,top:-r+p},children:u.reduce((y,m,b)=>{const T=t.length;return t.forEach((E,k)=>{y.push(_(f,{className:I(`is-${m.index%2?"odd":"even"}-row`,k?"":"is-first-in-row",k===T-1?"is-last-in-row":"",b?"":"is-first-row",b===d-1?"is-last-row":""),col:E,row:m,top:m.top-p,height:n,onRenderCell:a},`${m.index}:${E.name}`))}),y},[])})})}function uo({top:e,height:t,rowHeight:n,rows:o,cols:{left:r,center:s,right:i},scrollLeft:l,scrollTop:c,className:h,style:f,onRenderCell:a}){let u=null;r.list.length&&(u=_(tn,{className:"dtable-fixed-left",rows:o,scrollTop:c,cols:r.list,width:r.width,rowHeight:n,onRenderCell:a},"left"));let p=null;s.list.length&&(p=_(tn,{rows:o,className:"dtable-scroll-center",scrollLeft:l,scrollTop:c,cols:s.list,left:r.width,width:s.width,rowHeight:n,onRenderCell:a},"center"));let d=null;return i.list.length&&(d=_(tn,{className:"dtable-fixed-right",rows:o,scrollTop:c,cols:i.list,left:r.width+s.width,width:i.width,rowHeight:n,onRenderCell:a},"right")),_("div",{className:I("dtable-block",h),style:{...f,top:e,height:t},children:[u,p,d]})}let Ar=(Ot=class extends F{constructor(n){super(n);P(this,De);P(this,ze);P(this,He);P(this,Oe);P(this,te);P(this,Ht);P(this,We);P(this,je);P(this,$e);P(this,gt,void 0);P(this,It,void 0);P(this,st,void 0);P(this,Q,void 0);P(this,mt,void 0);P(this,B,void 0);P(this,tt,void 0);P(this,X,void 0);P(this,vt,void 0);P(this,Qt,void 0);P(this,Pt,void 0);P(this,xt,void 0);P(this,et,void 0);P(this,Ct,void 0);P(this,Tt,void 0);P(this,Dt,void 0);P(this,zt,void 0);P(this,ee,void 0);P(this,ne,void 0);P(this,oe,void 0);P(this,re,void 0);this.ref=Nt(),A(this,gt,0),A(this,st,!1),A(this,B,[]),A(this,X,new Map),A(this,vt,{}),A(this,Pt,[]),A(this,xt,{in:!1}),this.updateLayout=()=>{x(this,gt)&&cancelAnimationFrame(x(this,gt)),A(this,gt,requestAnimationFrame(()=>{this.update({dirtyType:"layout"}),A(this,gt,0)}))},A(this,et,(o,r)=>{r=r||o.type;const s=x(this,X).get(r);if(s!=null&&s.length){for(const i of s)if(i.call(this,o)===!1){o.stopPropagation(),o.preventDefault();break}}}),A(this,Ct,o=>{x(this,et).call(this,o,`window_${o.type}`)}),A(this,Tt,o=>{x(this,et).call(this,o,`document_${o.type}`)}),A(this,Dt,(o,r,s)=>{const{row:i,col:l}=r;r.value=this.getCellValue(i,l),o[0]=r.value;const c=i.id==="HEADER"?"onRenderHeaderCell":"onRenderCell";return x(this,B).forEach(h=>{h[c]&&(o=h[c].call(this,o,r,s))}),this.options[c]&&(o=this.options[c].call(this,o,r,s)),l.setting[c]&&(o=l.setting[c].call(this,o,r,s)),o}),A(this,zt,(o,r)=>{r==="horz"?this.scroll({scrollLeft:o}):this.scroll({scrollTop:o})}),A(this,ee,o=>{var c,h,f;const r=this.getPointerInfo(o);if(!r)return;const{rowID:s,colName:i,cellElement:l}=r;if(s==="HEADER")l&&((c=this.options.onHeaderCellClick)==null||c.call(this,o,{colName:i,element:l}),x(this,B).forEach(a=>{var u;(u=a.onHeaderCellClick)==null||u.call(this,o,{colName:i,element:l})}));else{const a=this.layout.visibleRows.find(u=>u.id===s);if(l){if(((h=this.options.onCellClick)==null?void 0:h.call(this,o,{colName:i,rowID:s,rowInfo:a,element:l}))===!0)return;for(const u of x(this,B))if(((f=u.onCellClick)==null?void 0:f.call(this,o,{colName:i,rowID:s,rowInfo:a,element:l}))===!0)return}}}),A(this,ne,o=>{const r=o.key.toLowerCase();if(["pageup","pagedown","home","end"].includes(r))return!this.scroll({to:r.replace("page","")})}),A(this,oe,o=>{const r=w(o.target).closest(".dtable-cell");if(!r.length)return G(this,Ht,Be).call(this,!1);G(this,Ht,Be).call(this,[r.attr("data-row"),r.attr("data-col")])}),A(this,re,()=>{G(this,Ht,Be).call(this,!1)}),A(this,It,n.id??`dtable-${Er(10)}`),this.state={scrollTop:0,scrollLeft:0,renderCount:0},A(this,mt,Object.freeze(Rr(n.plugins))),x(this,mt).forEach(o=>{var l;const{methods:r,data:s,state:i}=o;r&&Object.entries(r).forEach(([c,h])=>{typeof h=="function"&&Object.assign(this,{[c]:h.bind(this)})}),s&&Object.assign(x(this,vt),s.call(this)),i&&Object.assign(this.state,i.call(this)),(l=o.onCreate)==null||l.call(this,o)})}get options(){var n;return((n=x(this,tt))==null?void 0:n.options)||x(this,Q)||ho()}get plugins(){return x(this,B)}get layout(){return x(this,tt)}get id(){return x(this,It)}get data(){return x(this,vt)}get element(){return this.ref.current}get parent(){var n;return this.props.parent??((n=this.element)==null?void 0:n.parentElement)}get hoverInfo(){return x(this,xt)}componentWillReceiveProps(){A(this,Q,void 0)}componentDidMount(){x(this,st)?this.forceUpdate():G(this,te,An).call(this),x(this,B).forEach(o=>{let{events:r}=o;r&&(typeof r=="function"&&(r=r.call(this)),Object.entries(r).forEach(([s,i])=>{i&&this.on(s,i)}))}),this.on("click",x(this,ee)),this.on("keydown",x(this,ne));const{options:n}=this;if((n.rowHover||n.colHover)&&(this.on("mouseover",x(this,oe)),this.on("mouseleave",x(this,re))),n.responsive)if(typeof ResizeObserver<"u"){const{parent:o}=this;if(o){const r=new ResizeObserver(this.updateLayout);r.observe(o),A(this,Qt,r)}}else this.on("window_resize",this.updateLayout);x(this,B).forEach(o=>{var r;(r=o.onMounted)==null||r.call(this)})}componentDidUpdate(){x(this,st)?G(this,te,An).call(this):x(this,B).forEach(n=>{var o;(o=n.onUpdated)==null||o.call(this)})}componentWillUnmount(){var o;(o=x(this,Qt))==null||o.disconnect();const{element:n}=this;if(n)for(const r of x(this,X).keys())r.startsWith("window_")?window.removeEventListener(r.replace("window_",""),x(this,Ct)):r.startsWith("document_")?document.removeEventListener(r.replace("document_",""),x(this,Tt)):n.removeEventListener(r,x(this,et));x(this,B).forEach(r=>{var s;(s=r.onUnmounted)==null||s.call(this)}),x(this,mt).forEach(r=>{var s;(s=r.onDestory)==null||s.call(this)}),A(this,vt,{}),x(this,X).clear()}on(n,o,r){var i;r&&(n=`${r}_${n}`);const s=x(this,X).get(n);s?s.push(o):(x(this,X).set(n,[o]),n.startsWith("window_")?window.addEventListener(n.replace("window_",""),x(this,Ct)):n.startsWith("document_")?document.addEventListener(n.replace("document_",""),x(this,Tt)):(i=this.element)==null||i.addEventListener(n,x(this,et)))}off(n,o,r){var l;r&&(n=`${r}_${n}`);const s=x(this,X).get(n);if(!s)return;const i=s.indexOf(o);i>=0&&s.splice(i,1),s.length||(x(this,X).delete(n),n.startsWith("window_")?window.removeEventListener(n.replace("window_",""),x(this,Ct)):n.startsWith("document_")?document.removeEventListener(n.replace("document_",""),x(this,Tt)):(l=this.element)==null||l.removeEventListener(n,x(this,et)))}emitCustomEvent(n,o){x(this,et).call(this,o instanceof Event?o:new CustomEvent(n,{detail:o}),n)}scroll(n,o){const{scrollLeft:r,scrollTop:s,rowsHeightTotal:i,rowsHeight:l,rowHeight:c,cols:{center:{totalWidth:h,width:f}}}=this.layout,{to:a}=n;let{scrollLeft:u,scrollTop:p}=n;if(a==="up"||a==="down")p=s+(a==="down"?1:-1)*Math.floor(l/c)*c;else if(a==="left"||a==="right")u=r+(a==="right"?1:-1)*f;else if(a==="top")p=0;else if(a==="bottom")p=i-l;else if(a==="begin")u=0;else if(a==="end")u=h-f;else{const{offsetLeft:g,offsetTop:y}=n;typeof g=="number"&&(u=r+g),typeof y=="number"&&(u=s+y)}const d={};return typeof u=="number"&&(u=Math.max(0,Math.min(u,h-f)),u!==r&&(d.scrollLeft=u)),typeof p=="number"&&(p=Math.max(0,Math.min(p,i-l)),p!==s&&(d.scrollTop=p)),Object.keys(d).length?(this.setState(d,()=>{var g;(g=this.options.onScroll)==null||g.call(this,d),o==null||o.call(this,!0)}),!0):(o==null||o.call(this,!1),!1)}getColInfo(n){if(n===void 0)return;if(typeof n=="object")return n;const{cols:o}=this.layout;return typeof n=="number"?o.list[n]:o.map[n]}getRowInfo(n){if(n===void 0)return;if(typeof n=="object")return n;if(n===-1||n==="HEADER")return{id:"HEADER",index:-1,top:0};const{rows:o,rowsMap:r,allRows:s}=this.layout;return typeof n=="number"?o[n]:r[n]||s.find(i=>i.id===n)}getCellValue(n,o){var c;const r=typeof n=="object"?n:this.getRowInfo(n);if(!r)return;const s=typeof o=="object"?o:this.getColInfo(o);if(!s)return;let i=r.id==="HEADER"?s.setting.title:(c=r.data)==null?void 0:c[s.name];const{cellValueGetter:l}=this.options;return l&&(i=l.call(this,r,s,i)),i}getRowInfoByIndex(n){return this.layout.rows[n]}update(n={},o){if(!x(this,Q))return;typeof n=="function"&&(o=n,n={});const{dirtyType:r,state:s}=n;if(r==="layout")A(this,tt,void 0);else if(r==="options"){if(A(this,Q,void 0),!x(this,tt))return;A(this,tt,void 0)}this.setState(s??(i=>({renderCount:i.renderCount+1})),o)}getPointerInfo(n){const o=n.target;if(!o||o.closest(".no-cell-event"))return;const r=w(o).closest(".dtable-cell");if(!r.length)return;const s=r.attr("data-row"),i=r.attr("data-col");if(!(typeof i!="string"||typeof s!="string"))return{cellElement:r[0],colName:i,rowID:s,target:o}}i18n(n,o,r){return lt(x(this,Pt),n,o,r,this.options.lang)??`{i18n:${n}}`}getPlugin(n){return this.plugins.find(o=>o.name===n)}render(){const n=G(this,$e,cr).call(this),{className:o,rowHover:r,colHover:s,cellHover:i,bordered:l,striped:c,scrollbarHover:h}=this.options,f={},a=["dtable",o,{"dtable-hover-row":r,"dtable-hover-col":s,"dtable-hover-cell":i,"dtable-bordered":l,"dtable-striped":c,"scrollbar-hover":h}],u=[];return n&&(f.width=n.width,f.height=n.height,a.push({"dtable-scrolled-down":n.scrollTop>0,"dtable-scrolled-bottom":n.scrollTop>=n.rowsHeightTotal-n.rowsHeight,"dtable-scrolled-right":n.scrollLeft>0,"dtable-scrolled-end":n.scrollLeft>=n.cols.center.totalWidth-n.cols.center.width}),u.push(G(this,De,nr).call(this,n),G(this,ze,or).call(this,n),G(this,He,rr).call(this,n),G(this,Oe,sr).call(this,n)),x(this,B).forEach(p=>{var g;const d=(g=p.onRender)==null?void 0:g.call(this,n);d&&(d.style&&Object.assign(f,d.style),d.className&&a.push(d.className),d.children&&u.push(d.children))})),_("div",{id:x(this,It),className:I(a),style:f,ref:this.ref,tabIndex:-1,children:u})}},gt=new WeakMap,It=new WeakMap,st=new WeakMap,Q=new WeakMap,mt=new WeakMap,B=new WeakMap,tt=new WeakMap,X=new WeakMap,vt=new WeakMap,Qt=new WeakMap,Pt=new WeakMap,xt=new WeakMap,et=new WeakMap,Ct=new WeakMap,Tt=new WeakMap,De=new WeakSet,nr=function(n){const{header:o,cols:r,headerHeight:s,scrollLeft:i}=n;if(!o)return null;if(o===!0)return _(uo,{className:"dtable-header",cols:r,height:s,scrollLeft:i,rowHeight:s,scrollTop:0,rows:{id:"HEADER",index:-1,top:0},top:0,onRenderCell:x(this,Dt)},"header");const l=Array.isArray(o)?o:[o];return _(Je,{className:"dtable-header",style:{height:s},renders:l,generateArgs:[n],generatorThis:this},"header")},ze=new WeakSet,or=function(n){const{headerHeight:o,rowsHeight:r,visibleRows:s,rowHeight:i,cols:l,scrollLeft:c,scrollTop:h}=n;return _(uo,{className:"dtable-body",top:o,height:r,rows:s,rowHeight:i,scrollLeft:c,scrollTop:h,cols:l,onRenderCell:x(this,Dt)},"body")},He=new WeakSet,rr=function(n){let{footer:o}=n;if(typeof o=="function"&&(o=o.call(this,n)),!o)return null;const r=Array.isArray(o)?o:[o];return _(Je,{className:"dtable-footer",style:{height:n.footerHeight,top:n.rowsHeight+n.headerHeight},renders:r,generateArgs:[n],generatorThis:this,generators:n.footerGenerators},"footer")},Oe=new WeakSet,sr=function(n){const o=[],{scrollLeft:r,cols:{left:{width:s},center:{width:i,totalWidth:l}},scrollTop:c,rowsHeight:h,rowsHeightTotal:f,footerHeight:a,headerHeight:u}=n,{scrollbarSize:p=12,horzScrollbarPos:d}=this.options;return l>i&&o.push(_(io,{type:"horz",scrollPos:r,scrollSize:l,clientSize:i,onScroll:x(this,zt),left:s,bottom:(d==="inside"?0:-p)+a,size:p,wheelContainer:this.ref},"horz"),_("div",{className:"dtable-scroll-shadow is-left",style:{left:s,height:u+h}}),_("div",{className:"dtable-scroll-shadow is-right",style:{left:s+i,height:u+h}})),f>h&&o.push(_(io,{type:"vert",scrollPos:c,scrollSize:f,clientSize:h,onScroll:x(this,zt),right:0,size:p,top:u,wheelContainer:this.ref},"vert")),o.length?o:null},te=new WeakSet,An=function(){var n;A(this,st,!1),(n=this.options.afterRender)==null||n.call(this),x(this,B).forEach(o=>{var r;return(r=o.afterRender)==null?void 0:r.call(this)})},Dt=new WeakMap,zt=new WeakMap,ee=new WeakMap,ne=new WeakMap,oe=new WeakMap,re=new WeakMap,Ht=new WeakSet,Be=function(n){const{element:o,options:r}=this;if(!o)return;const s=w(o),i=n?{in:!0,row:n[0],col:n[1]}:{in:!1};r.colHover==="header"&&i.row!=="HEADER"&&(i.col=void 0);const l=x(this,xt);i.in!==l.in&&s.toggleClass("dtable-hover",i.in),i.row!==l.row&&(s.find(".is-hover-row").removeClass("is-hover-row"),i.row&&s.find(`.dtable-cell[data-row="${i.row}"]`).addClass("is-hover-row")),i.col!==l.col&&(s.find(".is-hover-col").removeClass("is-hover-col"),i.col&&s.find(`.dtable-cell[data-col="${i.col}"]`).addClass("is-hover-col")),A(this,xt,i)},We=new WeakSet,ir=function(){if(x(this,Q))return!1;const o={...ho(),...x(this,mt).reduce((r,s)=>{const{defaultOptions:i}=s;return i&&Object.assign(r,i),r},{}),...this.props};return A(this,Q,o),A(this,B,x(this,mt).reduce((r,s)=>{const{when:i,options:l}=s;let c=o;return l&&(c=Object.assign({...c},typeof l=="function"?l.call(this,o):l)),(!i||i(c))&&(c!==o&&Object.assign(o,c),r.push(s)),r},[])),A(this,Pt,[this.options.i18n,...this.plugins.map(r=>r.i18n)].filter(Boolean)),!0},je=new WeakSet,lr=function(){var M,L;const{plugins:n}=this;let o=x(this,Q);const r={flex:_("div",{style:"flex:auto"}),divider:_("div",{style:"width:1px;margin:var(--space);background:var(--color-border);height:50%"})};n.forEach(C=>{var z;const v=(z=C.beforeLayout)==null?void 0:z.call(this,o);v&&(o={...o,...v}),Object.assign(r,C.footer)});let s=o.width,i=0;if(typeof s=="function"&&(s=s.call(this)),s==="100%"){const{parent:C}=this;if(C)i=C.clientWidth;else{A(this,st,!0);return}}const l=Nr(this,o,n,i),{data:c,rowKey:h="id",rowHeight:f}=o,a=[],u=(C,v,z)=>{var $,q;const O={data:z??{[h]:C},id:C,index:a.length,top:0};if(z||(O.lazy=!0),a.push(O),(($=o.onAddRow)==null?void 0:$.call(this,O,v))!==!1){for(const ae of n)if(((q=ae.onAddRow)==null?void 0:q.call(this,O,v))===!1)return}};if(typeof c=="number")for(let C=0;C<c;C++)u(`${C}`,C);else Array.isArray(c)&&c.forEach((C,v)=>{typeof C=="object"?u(`${C[h]??""}`,v,C):u(`${C??""}`,v)});let p=a;const d={};if(o.onAddRows){const C=o.onAddRows.call(this,p);C&&(p=C)}for(const C of n){const v=(M=C.onAddRows)==null?void 0:M.call(this,p);v&&(p=v)}p.forEach((C,v)=>{d[C.id]=C,C.index=v,C.top=C.index*f});const{header:g,footer:y}=o,m=g?o.headerHeight||f:0,b=y?o.footerHeight||f:0;let T=o.height,E=0;const k=p.length*f,R=m+b+k;if(typeof T=="function"&&(T=T.call(this,R)),T==="auto")E=R;else if(typeof T=="object")E=Math.min(T.max,Math.max(T.min,R));else if(T==="100%"){const{parent:C}=this;if(C)E=C.clientHeight;else{E=0,A(this,st,!0);return}}else E=T;const H=E-m-b,N={options:o,allRows:a,width:i,height:E,rows:p,rowsMap:d,rowHeight:f,rowsHeight:H,rowsHeightTotal:k,header:g,footer:y,footerGenerators:r,headerHeight:m,footerHeight:b,cols:l},S=(L=o.onLayout)==null?void 0:L.call(this,N);S&&Object.assign(N,S),n.forEach(C=>{if(C.onLayout){const v=C.onLayout.call(this,N);v&&Object.assign(N,v)}}),A(this,tt,N)},$e=new WeakSet,cr=function(){(G(this,We,ir).call(this)||!x(this,tt))&&G(this,je,lr).call(this);const{layout:n}=this;if(!n)return;const{cols:{center:o}}=n;let{scrollLeft:r}=this.state;r=Math.min(Math.max(0,o.totalWidth-o.width),r);let s=0;o.list.forEach(y=>{y.left=s,s+=y.realWidth,y.visible=y.left+y.realWidth>=r&&y.left<=r+o.width});const{rowsHeightTotal:i,rowsHeight:l,rows:c,rowHeight:h}=n,f=Math.min(Math.max(0,i-l),this.state.scrollTop),a=Math.floor(f/h),u=f+l,p=Math.min(c.length,Math.ceil(u/h)),d=[],{rowDataGetter:g}=this.options;for(let y=a;y<p;y++){const m=c[y];m.lazy&&g&&(m.data=g([m.id])[0],m.lazy=!1),d.push(m)}return n.visibleRows=d,n.scrollTop=f,n.scrollLeft=r,n},Ot.addPlugin=lo,Ot.removePlugin=co,Ot);const en=e=>e?(e instanceof Date||(typeof e=="string"&&(e=e.trim(),/^\d+$/.test(e)&&(e=Number.parseInt(e,10))),typeof e=="number"&&e<1e10&&(e*=1e3),e=new Date(e)),e):new Date,Lr=(e,t=new Date)=>en(e).getFullYear()===en(t).getFullYear(),Ir=(e,t="yyyy-MM-dd hh:mm",n="")=>{if(e=en(e),Number.isNaN(e.getDay()))return n;const o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours()%12,"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};return/(y+)/i.test(t)&&(t.includes("[yyyy-]")&&(t=t.replace("[yyyy-]",Lr(e)?"":"yyyy-")),t=t.replace(RegExp.$1,`${e.getFullYear()}`.substring(4-RegExp.$1.length))),Object.keys(o).forEach(r=>{if(new RegExp(`(${r})`).test(t)){const s=`${o[r]}`;t=t.replace(RegExp.$1,RegExp.$1.length===1?s:`00${s}`.substring(s.length))}}),t},Pr={html:{component:Xe}},Dr=K({name:"custom",onRenderCell(e,t){const{col:n}=t;let{custom:o}=n.setting;if(typeof o=="function"&&(o=o.call(this,t)),!o)return e;const r=Array.isArray(o)?o:[o],{customMap:s}=this.options;return r.forEach(i=>{let l;typeof i=="string"?l=i.startsWith("<")?{component:Xe,props:{html:U(i,{value:t.value,...t.row.data,$value:t.value})}}:{component:i}:l=i;let{component:c}=l;const h=[l];typeof c=="string"&&h.unshift(Pr[c],s==null?void 0:s[c]);const f={};h.forEach(u=>{if(u){const{props:p}=u;p&&w.extend(f,typeof p=="function"?p.call(this,t):p),c=u.component||c}},{props:{}});const a=c;e[0]={outer:!0,className:"dtable-custom-cell",children:_(a,{...f})}}),e}}),Cn=class Cn extends F{render(t){const{percent:n=50,size:o=24,circleBg:r,circleColor:s,text:i,className:l,textStyle:c,textX:h,textY:f,children:a}=t,u=o/2;let{circleWidth:p=.2}=t;p<1&&(p=o*p);const d=(o-p)/2;return _("svg",{className:l,width:o,height:o,children:[_("circle",{cx:u,cy:u,r:d,"stroke-width":p,stroke:r,fill:"transparent"}),_("circle",{cx:u,cy:u,r:d,"stroke-width":p,stroke:s,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*d*2,"stroke-dashoffset":Math.PI*d*2*(100-n)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),i?_("text",{x:h??u,y:f??u+p/2,"dominant-baseline":"middle","text-anchor":"middle",style:c||{fontSize:`${d}px`},children:i===!0?Math.round(n):i}):null,a]})}};Cn.defaultProps={percent:50,size:24,circleWidth:.1,circleBg:"var(--color-surface)",circleColor:"var(--color-primary-500)",text:!0};let nn=Cn;const Tn=class Tn extends F{render(t){const{percent:n=50,color:o,background:r,height:s,width:i,children:l,className:c,style:h}=t;return _("div",{class:I("progress",c),style:{width:i,height:s,"--progress-bg":r,"--progress-bar-color":o,...h},children:[_("div",{class:"progress-bar",style:{width:`${n}%`}}),l]})}};Tn.defaultProps={percent:50,height:20,width:"auto"};let on=Tn;function rn(e,t,n,o){if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&e.length&&(e={url:e}),!e)return n;const{url:r,...s}=e,{setting:i}=t.col,l={};return i&&Object.keys(i).forEach(c=>{c.startsWith("data-")&&(l[c]=i[c])}),_("a",{href:U(r,t.row.data),...o,...s,...l,children:n})}function sn(e,t,n){var o;if(e!=null)return n=n??((o=t.row.data)==null?void 0:o[t.col.name]),typeof e=="function"?e(n,t):U(e,n)}function po(e,t,n,o){var r;return n?(n=n??((r=t.row.data)==null?void 0:r[t.col.name]),e===!1?n:(e===!0&&(e="[yyyy-]MM-dd hh:mm"),typeof e=="function"&&(e=e(n,t)),Ir(n,e,o??n))):o??n}function go(e,t){const{link:n}=t.col.setting,o=rn(n,t,e[0]);return o&&(e[0]=o),e}function mo(e,t){const{format:n}=t.col.setting;return n&&(e[0]=sn(n,t,e[0])),e}function yo(e,t){const{map:n}=t.col.setting;return typeof n=="function"?e[0]=n(e[0],t):typeof n=="object"&&n&&(e[0]=n[e[0]]??e[0]),e}function bo(e,t,n="[yyyy-]MM-dd hh:mm"){const{formatDate:o=n,invalidDate:r}=t.col.setting;return e[0]=po(o,t,e[0],r),e}function ln(e,t,n=!1){const{html:o=n}=t.col.setting;if(o===!1)return e;const r=e[0],s=o===!0?r:sn(o,t,r);return e[0]={html:s},e}const zr=K({name:"rich",colTypes:{html:{onRenderCell(e,t){return ln(e,t,!0)}},progress:{align:"center",onRenderCell(e,{col:t}){const{progressType:n,barColor:o,barHeight:r=6,barWidth:s=64,circleSize:i=24,circleBorderSize:l=1,circleBgColor:c="var(--color-border)",circleColor:h="var(--color-success-500)"}=t.setting,f=e[0];return e[0]=n==="bar"?_(on,{className:"rounded-full",width:s,height:r,color:o||h,percent:f}):_(nn,{percent:f,size:i,circleWidth:l,circleBg:c,circleColor:h,text:!0}),e}},datetime:{formatDate:"[yyyy-]MM-dd hh:mm"},date:{formatDate:"yyyy-MM-dd"},time:{formatDate:"hh:mm"}},onRenderCell(e,t){const{formatDate:n,html:o,hint:r}=t.col.setting;if(n&&(e=bo(e,t,n)),e=yo(e,t),e=mo(e,t),o?e=ln(e,t):e=go(e,t),r){let s=e[0];typeof r=="function"?s=r.call(this,t):typeof r=="string"&&(s=U(r,t.row.data)),e.push({attrs:{title:s}})}return e}},{buildIn:!0}),Fs="";function Hr(e,t,n=!1){var l,c;typeof e=="boolean"&&(t=e,e=void 0);const o=this.state.checkedRows,r={},{canRowCheckable:s}=this.options,i=(h,f)=>{const a=s?s.call(this,h):!0;!a||n&&a==="disabled"||!!o[h]===f||(f?o[h]=!0:delete o[h],r[h]=f)};if(e===void 0?(t===void 0&&(t=!wo.call(this)),(l=this.layout)==null||l.allRows.forEach(({id:h})=>{i(h,!!t)})):(Array.isArray(e)||(e=[e]),e.forEach(h=>{i(h,t??!o[h])})),Object.keys(r).length){const h=(c=this.options.beforeCheckRows)==null?void 0:c.call(this,e,r,o);h&&Object.keys(h).forEach(f=>{h[f]?o[f]=!0:delete o[f]}),this.setState({checkedRows:{...o}},()=>{var f;(f=this.options.onCheckChange)==null||f.call(this,r)})}return r}function Or(e){return this.state.checkedRows[e]??!1}function wo(){var o,r;const e=(o=this.layout)==null?void 0:o.allRows.length;if(!e)return!1;const t=this.getChecks().length,{canRowCheckable:n}=this.options;return n?t===((r=this.layout)==null?void 0:r.allRows.reduce((s,i)=>s+(n.call(this,i.id)?1:0),0)):t===e}function Wr(){return Object.keys(this.state.checkedRows)}function jr(e){const{checkable:t}=this.options;e===void 0&&(e=!t),t!==e&&this.setState({forceCheckable:e})}function _o(e,t,n=!1){return _("div",{class:`checkbox-primary dtable-checkbox${e?" checked":""}${n?" disabled":""}`,children:_("label",{})})}const vo='input[type="checkbox"],.dtable-checkbox',$r=K({name:"checkable",defaultOptions:{checkable:"auto",checkboxRender:_o},when:e=>!!e.checkable,options(e){const{forceCheckable:t}=this.state;return t!==void 0?e.checkable=t:e.checkable==="auto"&&(e.checkable=!!e.cols.some(n=>n.checkbox)),e},state(){return{checkedRows:{}}},methods:{toggleCheckRows:Hr,isRowChecked:Or,isAllRowChecked:wo,getChecks:Wr,toggleCheckable:jr},i18n:{zh_cn:{checkedCountInfo:"已选择 {selected} 项",totalCountInfo:"共 {total} 项"},zh_tw:{checkedCountInfo:"已選擇 {selected} 項",totalCountInfo:"共 {total} 項"},en:{checkedCountInfo:"Selected {selected} items",totalCountInfo:"Total {total} items"}},footer:{checkbox(){const e=this.isAllRowChecked();return[_("div",{style:{paddingRight:"calc(3*var(--space))",display:"flex",alignItems:"center"},onClick:()=>this.toggleCheckRows(),children:_o(e)})]},checkedInfo(e,t){const n=this.getChecks(),{checkInfo:o}=this.options;if(o)return[o.call(this,n)];const r=n.length,s=[];return r&&s.push(this.i18n("checkedCountInfo",{selected:r})),s.push(this.i18n("totalCountInfo",{total:t.allRows.length})),[_("div",{children:s.join(", ")})]}},onRenderCell(e,{row:t,col:n}){var h;const{id:o}=t,{canRowCheckable:r}=this.options,s=r?r.call(this,o):!0;if(!s)return e;const{checkbox:i}=n.setting,l=typeof i=="function"?i.call(this,o):i,c=this.isRowChecked(o);if(l){const f=(h=this.options.checkboxRender)==null?void 0:h.call(this,c,o,s==="disabled");e.unshift(f),e.push({outer:!0,className:"has-checkbox"})}return c&&e.push({outer:!0,className:"is-checked"}),e},onRenderHeaderCell(e,{row:t,col:n}){var i;const{id:o}=t,{checkbox:r}=n.setting;if(typeof r=="function"?r.call(this,o):r){const l=this.isAllRowChecked(),c=(i=this.options.checkboxRender)==null?void 0:i.call(this,l,o);e.unshift(c),e.push({outer:!0,className:"has-checkbox"})}return e},onHeaderCellClick(e){const t=e.target;if(!t)return;const n=t.closest(vo);n&&(this.toggleCheckRows(n.checked),e.stopPropagation())},onCellClick(e,{rowID:t}){const n=w(e.target);if(!n.length||n.closest("btn,a,button.not-checkable,.form-control,.btn").length)return;(n.closest(vo).not(".disabled").length||this.options.checkOnClickRow)&&this.toggleCheckRows(t,void 0,!0)}}),Vs="",Ys="";var xo=(e=>(e.unknown="",e.collapsed="collapsed",e.expanded="expanded",e.hidden="hidden",e.normal="normal",e))(xo||{});function ve(e){const t=this.data.nestedMap.get(e);if(!t||t.state!=="")return t??{state:"normal",level:-1};if(!t.parent&&!t.children)return t.state="normal",t;const n=this.state.collapsedRows,o=t.children&&n&&n[e];let r=!1,{parent:s}=t;for(;s;){const i=ve.call(this,s);if(i.state!=="expanded"){r=!0;break}s=i.parent}return t.state=r?"hidden":o?"collapsed":t.children?"expanded":"normal",t.level=t.parent?ve.call(this,t.parent).level+1:0,t}function Ur(e){return e!==void 0?ve.call(this,e):this.data.nestedMap}function Fr(e,t){let n=this.state.collapsedRows??{};const{nestedMap:o}=this.data;if(e==="HEADER")if(t===void 0&&(t=!Co.call(this)),t){const r=o.entries();for(const[s,i]of r)i.state==="expanded"&&(n[s]=!0)}else n={};else{const r=Array.isArray(e)?e:[e];t===void 0&&(t=!n[r[0]]),r.forEach(s=>{const i=o.get(s);t&&(i!=null&&i.children)?n[s]=!0:delete n[s]})}this.update({dirtyType:"layout",state:{collapsedRows:{...n}}},()=>{var r;(r=this.options.onNestedChange)==null||r.call(this)})}function Co(){const e=this.data.nestedMap.values();for(const t of e)if(t.state==="expanded")return!1;return!0}function To(e,t=0,n,o=0){var r;n||(n=[...e.keys()]);for(const s of n){const i=e.get(s);i&&(i.level===o&&(i.order=t++),(r=i.children)!=null&&r.length&&(t=To(e,t,i.children,o+1)))}return t}function Eo(e,t,n,o){const r=e.getNestedRowInfo(t);return!r||r.state===""||!r.children||r.children.forEach(s=>{o[s]=n,Eo(e,s,n,o)}),r}function ko(e,t,n,o,r){var l;const s=e.getNestedRowInfo(t);if(!s||s.state==="")return;((l=s.children)==null?void 0:l.every(c=>{const h=!!(o[c]!==void 0?o[c]:r[c]);return n===h}))&&(o[t]=n),s.parent&&ko(e,s.parent,n,o,r)}const Br=K({name:"nested",defaultOptions:{nested:"auto",nestedParentKey:"parent",asParentKey:"asParent",nestedIndent:20,canSortTo(e,t){const{nestedMap:n}=this.data,o=n.get(e.id),r=n.get(t.id);return(o==null?void 0:o.parent)===(r==null?void 0:r.parent)},beforeCheckRows(e,t,n){if(!this.options.checkable||!(e!=null&&e.length))return;const o={};return Object.entries(t).forEach(([r,s])=>{const i=Eo(this,r,s,o);i!=null&&i.parent&&ko(this,i.parent,s,o,n)}),o}},options(e){return e.nested==="auto"&&(e.nested=!!e.cols.some(t=>t.nestedToggle)),e},when:e=>!!e.nested,data(){return{nestedMap:new Map}},methods:{getNestedInfo:Ur,toggleRow:Fr,isAllCollapsed:Co,getNestedRowInfo:ve},beforeLayout(){var e;(e=this.data.nestedMap)==null||e.clear()},onAddRow(e){var r,s;const{nestedMap:t}=this.data,n=String((r=e.data)==null?void 0:r[this.options.nestedParentKey??"parent"]),o=t.get(e.id)??{state:"",level:0};if(o.parent=n==="0"?void 0:n,(s=e.data)!=null&&s[this.options.asParentKey??"asParent"]&&(o.children=[]),t.set(e.id,o),n){let i=t.get(n);i||(i={state:"",level:0},t.set(n,i)),i.children||(i.children=[]),i.children.push(e.id)}},onAddRows(e){return e=e.filter(t=>this.getNestedRowInfo(t.id).state!=="hidden"),To(this.data.nestedMap),e.sort((t,n)=>{const o=this.getNestedRowInfo(t.id),r=this.getNestedRowInfo(n.id),s=(o.order??0)-(r.order??0);return s===0?t.index-n.index:s}),e},onRenderCell(e,{col:t,row:n}){var l;const{id:o,data:r}=n,{nestedToggle:s}=t.setting,i=this.getNestedRowInfo(o);if(s&&(i.children||i.parent)&&e.unshift(((l=this.options.onRenderNestedToggle)==null?void 0:l.call(this,i,o,t,r))??_("a",{className:`dtable-nested-toggle state${i.children?"":" is-no-child"}`,children:_("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${i.state}`}),i.level){let{nestedIndent:c=s}=t.setting;c&&(c===!0&&(c=this.options.nestedIndent??12),e.unshift(_("div",{className:"dtable-nested-indent",style:{width:c*i.level+"px"}})))}return e},onRenderHeaderCell(e,{row:t,col:n}){var r;const{id:o}=t;return n.setting.nestedToggle&&e.unshift(((r=this.options.onRenderNestedToggle)==null?void 0:r.call(this,void 0,o,n,void 0))??_("a",{className:"dtable-nested-toggle state",children:_("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${this.isAllCollapsed()?"collapsed":"expanded"}`}),e},onHeaderCellClick(e){const t=e.target;if(!(!t||!t.closest(".dtable-nested-toggle")))return this.toggleRow("HEADER"),!0},onCellClick(e,{rowID:t}){const n=e.target;if(!(!n||!this.getNestedRowInfo(t).children||!n.closest(".dtable-nested-toggle")))return this.toggleRow(t),!0}});function Vr(e){if(e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)throw new Error(`Invalid HEX color "${e}".`);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Yr(e){const[t,n,o]=typeof e=="string"?Vr(e):e;return t*.299+n*.587+o*.114>186}function Ro(e,t){return Yr(e)?(t==null?void 0:t.dark)??"#333333":(t==null?void 0:t.light)??"#ffffff"}function So(e,t=255){return Math.min(Math.max(e,0),t)}function Gr(e,t,n){e=e%360/360,t=So(t),n=So(n);const o=n<=.5?n*(t+1):n+t-n*t,r=n*2-o,s=i=>(i=i<0?i+1:i>1?i-1:i,i*6<1?r+(o-r)*i*6:i*2<1?o:i*3<2?r+(o-r)*(2/3-i)*6:r);return[s(e+1/3)*255,s(e)*255,s(e-1/3)*255]}function Kr(e){let t=0;if(typeof e!="string"&&(e=String(e)),e&&e.length)for(let n=0;n<e.length;++n)t+=(n+1)*e.charCodeAt(n);return t}function qr(e,t){return/^[\u4e00-\u9fa5\s]+$/.test(e)?e.length<=t?e:e.substring(e.length-t):/^[A-Za-z\d\s]+$/.test(e)?e[0].toUpperCase():e.length<=t?e:e.substring(0,t)}class Zr extends F{render(){const{className:t,style:n,size:o="",circle:r,rounded:s,background:i,foreColor:l,text:c,code:h,maxTextLength:f=2,src:a,hueDistance:u=43,saturation:p=.4,lightness:d=.6,children:g,...y}=this.props,m=["avatar",t],b={...n,background:i,color:l};let T=32;o&&(typeof o=="number"?(b.width=`${o}px`,b.height=`${o}px`,b.fontSize=`${Math.max(12,Math.round(o/2))}px`,T=o):(m.push(`size-${o}`),T={xs:20,sm:24,lg:48,xl:80}[o])),r?m.push("circle"):s&&(typeof s=="number"?b.borderRadius=`${s}px`:m.push(`rounded-${s}`));let E;if(a)m.push("has-img"),E=_("img",{className:"avatar-img",src:a,alt:c});else if(c!=null&&c.length){const k=qr(c,f);if(m.push("has-text",`has-text-${k.length}`),i)!l&&i&&(b.color=Ro(i));else{const H=h??c,N=(typeof H=="number"?H:Kr(H))*u%360;if(b.background=`hsl(${N},${p*100}%,${d*100}%)`,!l){const S=Gr(N,p,d);b.color=Ro(S)}}let R;T&&T<14*k.length&&(R={transform:`scale(${T/(14*k.length)})`,whiteSpace:"nowrap"}),E=_("div",{"data-actualSize":T,className:"avatar-text",style:R,children:k})}return _("div",{className:I(m),style:b,...y,children:[E,g]})}}function cn(e,{row:t,col:n}){const{data:o}=t,r=o?o[n.name]:void 0;if(!(r!=null&&r.length))return e;const{avatarClass:s="rounded-full",avatarKey:i=`${n.name}Avatar`,avatarProps:l,avatarCodeKey:c,avatarNameKey:h=`${n.name}Name`}=n.setting,f=(o?o[h]:r)||e[0],a={size:"xs",className:I(s,l==null?void 0:l.className,"flex-none"),src:o?o[i]:void 0,text:f,code:c?o?o[c]:void 0:r,...l};if(e[0]=_(Zr,{...a}),n.type==="avatarBtn"){const{avatarBtnProps:u}=n.setting,p=typeof u=="function"?u(n,t):u;e[0]=_("button",{type:"button",className:"btn btn-avatar",...p,children:[e[0],_("div",{children:f})]})}else n.type==="avatarName"&&(e[0]=_("div",{className:"flex items-center gap-1",children:[e[0],_("span",{children:f})]}));return e}const Xr=K({name:"avatar",colTypes:{avatar:{onRenderCell:cn},avatarBtn:{onRenderCell:cn},avatarName:{onRenderCell:cn}}},{buildIn:!0}),Jr=K({name:"sort-type",onRenderHeaderCell(e,t){const{col:n}=t,{sortType:o}=n.setting;if(o){const r=o===!0?"none":o;e.push(_("div",{className:`dtable-sort dtable-sort-${r}`}),{outer:!0,attrs:{"data-sort":r}});let{sortLink:s=this.options.sortLink}=n.setting;if(s){const i=r==="asc"?"desc":"asc";typeof s=="function"&&(s=s.call(this,n,i,r)),typeof s=="string"&&(s={url:s});const{url:l,...c}=s;e[0]=_("a",{href:U(l,{...n.setting,sortType:i}),...c,children:e[0]})}}return e}},{buildIn:!0}),an=e=>{e.length!==1&&e.forEach((t,n)=>{!n||t.setting.border||t.setting.group===e[n-1].setting.group||(t.setting.border="left")})},Qr=K({name:"group",defaultOptions:{groupDivider:!0},when:e=>!!e.groupDivider,onLayout(e){if(!this.options.groupDivider)return;const{cols:t}=e;an(t.left.list),an(t.center.list),an(t.right.list)}}),ts=K({name:"cellspan",when:e=>!!e.getCellSpan,data(){return{cellSpanMap:new Map,overlayedCellSet:new Set}},onLayout(e){const{getCellSpan:t}=this.options;if(!t)return;const{cellSpanMap:n,overlayedCellSet:o}=this.data,{rows:r,cols:s,rowHeight:i}=e;n.clear(),o.clear();const l=(c,h,f)=>{const{index:a}=h;c.forEach((u,p)=>{const{index:d}=u,g=`C${d}R${a}`;if(o.has(g))return;const y=t.call(this,{row:h,col:u});if(!y)return;const m=Math.min(y.colSpan||1,c.length-p),b=Math.min(y.rowSpan||1,r.length-f);if(m<=1&&b<=1)return;let T=0;for(let E=0;E<m;E++){T+=c[p+E].realWidth;for(let k=0;k<b;k++){const R=`C${d+E}R${a+k}`;R!==g&&o.add(R)}}n.set(g,{colSpan:m,rowSpan:b,width:T,height:i*b})})};r.forEach((c,h)=>{["left","center","right"].forEach(f=>{l(s[f].list,c,h)})})},onRenderCell(e,{row:t,col:n}){const o=`C${n.index}R${t.index}`;if(this.data.overlayedCellSet.has(o))e.push({outer:!0,style:{display:"none",className:"cellspan-overlayed-cell"}});else{const r=this.data.cellSpanMap.get(o);r&&e.push({outer:!0,style:{width:r.width,height:r.height}})}return e}}),es=Object.freeze(Object.defineProperty({__proto__:null,NestedRowState:xo,avatar:Xr,cellspan:ts,checkable:$r,custom:Dr,group:Qr,nested:Br,renderDatetime:po,renderDatetimeCell:bo,renderFormat:sn,renderFormatCell:mo,renderHtmlCell:ln,renderLink:rn,renderLinkCell:go,renderMapCell:yo,rich:zr,sortType:Jr},Symbol.toStringTag,{value:"Module"})),Et=class Et extends so{};Et.NAME="DTable",Et.Component=Ar,Et.definePlugin=K,Et.removePlugin=co,Et.plugins=es;let xe=Et;xe.defineFn();const Js="",Qs="",ti="",ei="",ni="",oi="",ri="",si="",ii="";function ns({component:e="div",className:t,children:n,style:o,attrs:r}){return D(e,{className:I(t),style:o,...r},n)}function No({type:e,component:t="a",className:n,children:o,content:r,attrs:s,url:i,disabled:l,active:c,icon:h,text:f,target:a,trailingIcon:u,hint:p,checked:d,onClick:g,data:y,...m}){const b=[typeof d=="boolean"?_("div",{class:`checkbox-primary${d?" checked":""}`,children:_("label",{})}):null,_(Yt,{icon:h}),f?_("span",{className:"text",children:f}):null,_(ye,{content:r}),o,_(Yt,{icon:u})];return D(t,{className:I(n,{disabled:l,active:c}),title:p,[t==="a"?"href":"data-url"]:l?void 0:i,[t==="a"?"target":"data-target"]:l?void 0:a,onClick:g,...m,...s},...b)}function os({component:e="div",className:t,text:n,attrs:o,children:r,content:s,style:i,onClick:l}){return D(e,{className:I(t),style:i,onClick:l,...o},n,_(ye,{content:s}),r)}function rs({component:e="div",className:t,style:n,space:o,flex:r,attrs:s,onClick:i,children:l}){return D(e,{className:I(t),style:{width:o,height:o,flex:r,...n},onClick:i,...s},l)}function ss({type:e,...t}){return _(Je,{...t})}function Mo({component:e="div",className:t,children:n,content:o,style:r,attrs:s}){return D(e,{className:I(t),style:r,...s},_(ye,{content:o}),n)}const kt=class kt extends F{constructor(){super(...arguments),this.ref=Nt()}get name(){return this.props.name??this.constructor.NAME}componentDidMount(){this.afterRender(!0)}componentDidUpdate(){this.afterRender(!1)}componentWillUnmount(){var t,n;(n=(t=this.props).beforeDestroy)==null||n.call(t,{menu:this})}afterRender(t){var n,o;(o=(n=this.props).afterRender)==null||o.call(n,{menu:this,firstRender:t})}handleItemClick(t,n,o,r){o&&o.call(r.target,r,t,n);const{onClickItem:s}=this.props;s&&s({menu:this,item:t,index:n,event:r})}beforeRender(){var o;const t={...this.props};typeof t.items=="function"&&(t.items=t.items(this)),t.items||(t.items=[]);const n=(o=t.beforeRender)==null?void 0:o.call(t,{menu:this,options:t});return n&&Object.assign(t,n),t}getItemRenderProps(t,n,o){const{commonItemProps:r,onClickItem:s,itemRenderProps:i}=t;let l={...n};return r&&Object.assign(l,r[n.type||"item"]),(s||n.onClick)&&(l.onClick=this.handleItemClick.bind(this,l,o,n.onClick)),l.className=I(l.className),i&&(l=i(l)),l}renderItem(t,n,o){if(!n)return null;const r=this.getItemRenderProps(t,n,o),{itemRender:s}=t;if(s){if(typeof s=="object"){const g=s[n.type||"item"];if(g)return _(g,{...r})}else if(typeof s=="function"){const g=s.call(this,r,D);if(ct(g))return g;typeof g=="object"&&Object.assign(r,g)}}const{type:i="item",component:l,key:c=o,rootAttrs:h,rootClass:f,rootStyle:a,rootChildren:u,...p}=r;if(i==="html")return _("li",{className:I("action-menu-item",`${this.name}-html`,f,p.className),...h,style:a||p.style,dangerouslySetInnerHTML:{__html:p.html}},c);const d=!l||typeof l=="string"?this.constructor.ItemComponents&&this.constructor.ItemComponents[i]||kt.ItemComponents[i]:l;return Object.assign(p,{type:i,component:typeof l=="string"?l:void 0}),t.checkbox&&i==="item"&&p.checked===void 0&&(p.checked=!!p.active),this.renderTypedItem(d,{className:I(f),children:u,style:a,key:c,...h},{...p,type:i,component:typeof l=="string"?l:void 0})}renderTypedItem(t,n,o){const{children:r,className:s,key:i,...l}=n;return _("li",{className:I(`${this.constructor.NAME}-item`,`${this.name}-${o.type}`,s),...l,children:[_(t,{...o}),typeof r=="function"?r():r]},i)}render(){const t=this.beforeRender(),{name:n,style:o,commonItemProps:r,className:s,items:i,children:l,itemRender:c,onClickItem:h,beforeRender:f,afterRender:a,beforeDestroy:u,compact:p,...d}=t,g=this.constructor.ROOT_TAG;return _(g,{class:I(this.name,s,p?"compact":""),style:o,...d,ref:this.ref,children:[i&&i.map(this.renderItem.bind(this,t)),l]})}};kt.ItemComponents={divider:ns,item:No,heading:os,space:rs,custom:ss,basic:Mo},kt.ROOT_TAG="menu",kt.NAME="action-menu";let Ce=kt;const li="";class bt extends Ze{_beforeRender(t){const{text:n,loading:o,loadingText:r,caret:s,icon:i,trailingIcon:l,children:c}=t;this._isEmptyText=n==null||typeof n=="string"&&!n.length||o&&!r,this._onlyCaret=s&&this._isEmptyText&&!i&&!l&&!c&&!o}_getChildren(t){const{loading:n,loadingIcon:o,loadingText:r,icon:s,text:i,children:l,trailingIcon:c,caret:h}=t;return[n?_(Yt,{icon:o||"icon-spinner-snake",className:"spin"}):_(Yt,{icon:s}),this._isEmptyText?null:_("span",{className:"text",children:n?r:i}),n?null:l,n?null:_(Yt,{icon:c}),n?null:h?_("span",{className:typeof h=="string"?`caret-${h}`:"caret"}):null]}_getClassName(t){const{type:n,className:o,disabled:r,loading:s,active:i,children:l,square:c,size:h,rounded:f}=t;return I("btn",n,o,{"btn-caret":this._onlyCaret,disabled:r||s,active:i,loading:s,square:c===void 0?!this._onlyCaret&&!l&&this._isEmptyText:c},h?`size-${h}`:"",typeof f=="string"?f:{rounded:f})}_getComponent(t){return t.component||(t.url?"a":"button")}_getProps(t){const n=this._getComponent(t),{url:o,target:r,disabled:s,btnType:i="button",hint:l}=t,c={...super._getProps(t),disabled:s,title:l,type:n==="button"?i:void 0};return s||(o!==void 0&&(c[n==="a"?"href":"data-url"]=o),r!==void 0&&(c[n==="a"?"target":"data-target"]=r)),c}}function is({key:e,type:t,btnType:n,...o}){return _(bt,{type:n,...o})}const ci="",ai="";let ls=class extends F{render(t){const{id:n,popup:o,title:r,content:s,style:i,className:l,closeBtn:c,arrow:h,headingClass:f,titleClass:a,contentClass:u,arrowStyle:p,onlyInner:d}=t;let g=_(ye,{content:s},"content");(u||r)&&(g=_("div",{className:u,children:g},"content"));const y=[],m=c?_("button",{className:"btn ghost square size-sm btn-close","data-dismiss":"popover",children:_("span",{className:"close"})}):null;return r?y.push(_("div",{className:f,children:[r?_("div",{className:a,children:r}):null,m]},"heading")):y.push(m),y.push(g),h&&y.push(_("div",{className:typeof h=="string"?h:"arrow",style:p},"arrow")),d?y:_("div",{id:n,className:I("popover",l,{popup:o}),style:i,children:y})}};const Ue=class Ue extends so{};Ue.NAME="PopoverPanel",Ue.Component=ls;let hn=Ue;function Gt(e){return e.split("-")[1]}function fn(e){return e==="y"?"height":"width"}function wt(e){return e.split("-")[0]}function Kt(e){return["top","bottom"].includes(wt(e))?"x":"y"}function Ao(e,t,n){let{reference:o,floating:r}=e;const s=o.x+o.width/2-r.width/2,i=o.y+o.height/2-r.height/2,l=Kt(t),c=fn(l),h=o[c]/2-r[c]/2,f=l==="x";let a;switch(wt(t)){case"top":a={x:s,y:o.y-r.height};break;case"bottom":a={x:s,y:o.y+o.height};break;case"right":a={x:o.x+o.width,y:i};break;case"left":a={x:o.x-r.width,y:i};break;default:a={x:o.x,y:o.y}}switch(Gt(t)){case"start":a[l]-=h*(n&&f?-1:1);break;case"end":a[l]+=h*(n&&f?-1:1)}return a}const cs=async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:i}=n,l=s.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let h=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:f,y:a}=Ao(h,o,c),u=o,p={},d=0;for(let g=0;g<l.length;g++){const{name:y,fn:m}=l[g],{x:b,y:T,data:E,reset:k}=await m({x:f,y:a,initialPlacement:o,placement:u,strategy:r,middlewareData:p,rects:h,platform:i,elements:{reference:e,floating:t}});f=b??f,a=T??a,p={...p,[y]:{...p[y],...E}},k&&d<=50&&(d++,typeof k=="object"&&(k.placement&&(u=k.placement),k.rects&&(h=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):k.rects),{x:f,y:a}=Ao(h,u,c)),g=-1)}return{x:f,y:a,placement:u,strategy:r,middlewareData:p}};function qt(e,t){return typeof e=="function"?e(t):e}function Lo(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Te(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Io(e,t){var n;t===void 0&&(t={});const{x:o,y:r,platform:s,rects:i,elements:l,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:a="floating",altBoundary:u=!1,padding:p=0}=qt(t,e),d=Lo(p),g=l[u?a==="floating"?"reference":"floating":a],y=Te(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:c})),m=a==="floating"?{...i.floating,x:o,y:r}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),T=await(s.isElement==null?void 0:s.isElement(b))&&await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1},E=Te(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:b,strategy:c}):m);return{top:(y.top-E.top+d.top)/T.y,bottom:(E.bottom-y.bottom+d.bottom)/T.y,left:(y.left-E.left+d.left)/T.x,right:(E.right-y.right+d.right)/T.x}}const dn=Math.min,as=Math.max;function un(e,t,n){return as(e,dn(t,n))}const hs=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:s,platform:i,elements:l}=t,{element:c,padding:h=0}=qt(e,t)||{};if(c==null)return{};const f=Lo(h),a={x:n,y:o},u=Kt(r),p=fn(u),d=await i.getDimensions(c),g=u==="y",y=g?"top":"left",m=g?"bottom":"right",b=g?"clientHeight":"clientWidth",T=s.reference[p]+s.reference[u]-a[u]-s.floating[p],E=a[u]-s.reference[u],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let R=k?k[b]:0;R&&await(i.isElement==null?void 0:i.isElement(k))||(R=l.floating[b]||s.floating[p]);const H=T/2-E/2,N=R/2-d[p]/2-1,S=dn(f[y],N),M=dn(f[m],N),L=S,C=R-d[p]-M,v=R/2-d[p]/2+H,z=un(L,v,C),O=Gt(r)!=null&&v!=z&&s.reference[p]/2-(v<L?S:M)-d[p]/2<0?v<L?L-v:C-v:0;return{[u]:a[u]-O,data:{[u]:z,centerOffset:v-z+O}}}});["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const fs={left:"right",right:"left",bottom:"top",top:"bottom"};function Ee(e){return e.replace(/left|right|bottom|top/g,t=>fs[t])}function ds(e,t,n){n===void 0&&(n=!1);const o=Gt(e),r=Kt(e),s=fn(r);let i=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Ee(i)),{main:i,cross:Ee(i)}}const us={start:"end",end:"start"};function pn(e){return e.replace(/start|end/g,t=>us[t])}const Po=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:o,middlewareData:r,rects:s,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:a,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:d=!0,...g}=qt(e,t),y=wt(o),m=wt(i)===i,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=a||(m||!d?[Ee(i)]:function(L){const C=Ee(L);return[pn(L),C,pn(C)]}(i));a||p==="none"||T.push(...function(L,C,v,z){const O=Gt(L);let $=function(q,ae,Hs){const tr=["left","right"],er=["right","left"],Os=["top","bottom"],Ws=["bottom","top"];switch(q){case"top":case"bottom":return Hs?ae?er:tr:ae?tr:er;case"left":case"right":return ae?Os:Ws;default:return[]}}(wt(L),v==="start",z);return O&&($=$.map(q=>q+"-"+O),C&&($=$.concat($.map(pn)))),$}(i,d,p,b));const E=[i,...T],k=await Io(t,g),R=[];let H=((n=r.flip)==null?void 0:n.overflows)||[];if(h&&R.push(k[y]),f){const{main:L,cross:C}=ds(o,s,b);R.push(k[L],k[C])}if(H=[...H,{placement:o,overflows:R}],!R.every(L=>L<=0)){var N,S;const L=(((N=r.flip)==null?void 0:N.index)||0)+1,C=E[L];if(C)return{data:{index:L,overflows:H},reset:{placement:C}};let v=(S=H.filter(z=>z.overflows[0]<=0).sort((z,O)=>z.overflows[1]-O.overflows[1])[0])==null?void 0:S.placement;if(!v)switch(u){case"bestFit":{var M;const z=(M=H.map(O=>[O.placement,O.overflows.filter($=>$>0).reduce(($,q)=>$+q,0)]).sort((O,$)=>O[1]-$[1])[0])==null?void 0:M[0];z&&(v=z);break}case"initialPlacement":v=i}if(o!==v)return{reset:{placement:v}}}return{}}}},Do=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:o}=t,r=await async function(s,i){const{placement:l,platform:c,elements:h}=s,f=await(c.isRTL==null?void 0:c.isRTL(h.floating)),a=wt(l),u=Gt(l),p=Kt(l)==="x",d=["left","top"].includes(a)?-1:1,g=f&&p?-1:1,y=qt(i,s);let{mainAxis:m,crossAxis:b,alignmentAxis:T}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return u&&typeof T=="number"&&(b=u==="end"?-1*T:T),p?{x:b*g,y:m*d}:{x:m*d,y:b*g}}(t,e);return{x:n+r.x,y:o+r.y,data:r}}}};function ps(e){return e==="x"?"y":"x"}const zo=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:m,y:b}=y;return{x:m,y:b}}},...c}=qt(e,t),h={x:n,y:o},f=await Io(t,c),a=Kt(wt(r)),u=ps(a);let p=h[a],d=h[u];if(s){const y=a==="y"?"bottom":"right";p=un(p+f[a==="y"?"top":"left"],p,p-f[y])}if(i){const y=u==="y"?"bottom":"right";d=un(d+f[u==="y"?"top":"left"],d,d-f[y])}const g=l.fn({...t,[a]:p,[u]:d});return{...g,data:{x:g.x-n,y:g.y-o}}}}};function Y(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function J(e){return Y(e).getComputedStyle(e)}function Ho(e){return e instanceof Y(e).Node}function ht(e){return Ho(e)?(e.nodeName||"").toLowerCase():"#document"}function Z(e){return e instanceof HTMLElement||e instanceof Y(e).HTMLElement}function Oo(e){return typeof ShadowRoot<"u"&&(e instanceof Y(e).ShadowRoot||e instanceof ShadowRoot)}function Zt(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=J(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function gs(e){return["table","td","th"].includes(ht(e))}function gn(e){const t=mn(),n=J(e);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!t&&!!n.backdropFilter&&n.backdropFilter!=="none"||!t&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function mn(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ke(e){return["html","body","#document"].includes(ht(e))}const yn=Math.min,Mt=Math.max,Re=Math.round,Se=Math.floor,ft=e=>({x:e,y:e});function Wo(e){const t=J(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=Z(e),s=r?e.offsetWidth:n,i=r?e.offsetHeight:o,l=Re(n)!==s||Re(o)!==i;return l&&(n=s,o=i),{width:n,height:o,$:l}}function ot(e){return e instanceof Element||e instanceof Y(e).Element}function bn(e){return ot(e)?e:e.contextElement}function At(e){const t=bn(e);if(!Z(t))return ft(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:s}=Wo(t);let i=(s?Re(n.width):n.width)/o,l=(s?Re(n.height):n.height)/r;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}const ms=ft(0);function jo(e){const t=Y(e);return mn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ms}function _t(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=bn(e);let i=ft(1);t&&(o?ot(o)&&(i=At(o)):i=At(e));const l=function(u,p,d){return p===void 0&&(p=!1),!(!d||p&&d!==Y(u))&&p}(s,n,o)?jo(s):ft(0);let c=(r.left+l.x)/i.x,h=(r.top+l.y)/i.y,f=r.width/i.x,a=r.height/i.y;if(s){const u=Y(s),p=o&&ot(o)?Y(o):o;let d=u.frameElement;for(;d&&o&&p!==u;){const g=At(d),y=d.getBoundingClientRect(),m=getComputedStyle(d),b=y.left+(d.clientLeft+parseFloat(m.paddingLeft))*g.x,T=y.top+(d.clientTop+parseFloat(m.paddingTop))*g.y;c*=g.x,h*=g.y,f*=g.x,a*=g.y,c+=b,h+=T,d=Y(d).frameElement}}return Te({width:f,height:a,x:c,y:h})}function Ne(e){return ot(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function rt(e){var t;return(t=(Ho(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $o(e){return _t(rt(e)).left+Ne(e).scrollLeft}function Lt(e){if(ht(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oo(e)&&e.host||rt(e);return Oo(t)?t.host:t}function Uo(e){const t=Lt(e);return ke(t)?e.ownerDocument?e.ownerDocument.body:e.body:Z(t)&&Zt(t)?t:Uo(t)}function Me(e,t){var n;t===void 0&&(t=[]);const o=Uo(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),s=Y(o);return r?t.concat(s,s.visualViewport||[],Zt(o)?o:[]):t.concat(o,Me(o))}function Fo(e,t,n){let o;if(t==="viewport")o=function(r,s){const i=Y(r),l=rt(r),c=i.visualViewport;let h=l.clientWidth,f=l.clientHeight,a=0,u=0;if(c){h=c.width,f=c.height;const p=mn();(!p||p&&s==="fixed")&&(a=c.offsetLeft,u=c.offsetTop)}return{width:h,height:f,x:a,y:u}}(e,n);else if(t==="document")o=function(r){const s=rt(r),i=Ne(r),l=r.ownerDocument.body,c=Mt(s.scrollWidth,s.clientWidth,l.scrollWidth,l.clientWidth),h=Mt(s.scrollHeight,s.clientHeight,l.scrollHeight,l.clientHeight);let f=-i.scrollLeft+$o(r);const a=-i.scrollTop;return J(l).direction==="rtl"&&(f+=Mt(s.clientWidth,l.clientWidth)-c),{width:c,height:h,x:f,y:a}}(rt(e));else if(ot(t))o=function(r,s){const i=_t(r,!0,s==="fixed"),l=i.top+r.clientTop,c=i.left+r.clientLeft,h=Z(r)?At(r):ft(1);return{width:r.clientWidth*h.x,height:r.clientHeight*h.y,x:c*h.x,y:l*h.y}}(t,n);else{const r=jo(e);o={...t,x:t.x-r.x,y:t.y-r.y}}return Te(o)}function Bo(e,t){const n=Lt(e);return!(n===t||!ot(n)||ke(n))&&(J(n).position==="fixed"||Bo(n,t))}function ys(e,t,n){const o=Z(t),r=rt(t),s=n==="fixed",i=_t(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=ft(0);if(o||!o&&!s)if((ht(t)!=="body"||Zt(r))&&(l=Ne(t)),Z(t)){const h=_t(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&(c.x=$o(r));return{x:i.left+l.scrollLeft-c.x,y:i.top+l.scrollTop-c.y,width:i.width,height:i.height}}function Vo(e,t){return Z(e)&&J(e).position!=="fixed"?t?t(e):e.offsetParent:null}function Yo(e,t){const n=Y(e);if(!Z(e))return n;let o=Vo(e,t);for(;o&&gs(o)&&J(o).position==="static";)o=Vo(o,t);return o&&(ht(o)==="html"||ht(o)==="body"&&J(o).position==="static"&&!gn(o))?n:o||function(r){let s=Lt(r);for(;Z(s)&&!ke(s);){if(gn(s))return s;s=Lt(s)}return null}(e)||n}const bs={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:o}=e;const r=Z(n),s=rt(n);if(n===s)return t;let i={scrollLeft:0,scrollTop:0},l=ft(1);const c=ft(0);if((r||!r&&o!=="fixed")&&((ht(n)!=="body"||Zt(s))&&(i=Ne(n)),Z(n))){const h=_t(n);l=At(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-i.scrollLeft*l.x+c.x,y:t.y*l.y-i.scrollTop*l.y+c.y}},getDocumentElement:rt,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const s=[...n==="clippingAncestors"?function(c,h){const f=h.get(c);if(f)return f;let a=Me(c).filter(g=>ot(g)&&ht(g)!=="body"),u=null;const p=J(c).position==="fixed";let d=p?Lt(c):c;for(;ot(d)&&!ke(d);){const g=J(d),y=gn(d);y||g.position!=="fixed"||(u=null),(p?!y&&!u:!y&&g.position==="static"&&u&&["absolute","fixed"].includes(u.position)||Zt(d)&&!y&&Bo(c,d))?a=a.filter(m=>m!==d):u=g,d=Lt(d)}return h.set(c,a),a}(t,this._c):[].concat(n),o],i=s[0],l=s.reduce((c,h)=>{const f=Fo(t,h,r);return c.top=Mt(f.top,c.top),c.right=yn(f.right,c.right),c.bottom=yn(f.bottom,c.bottom),c.left=Mt(f.left,c.left),c},Fo(t,i,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Yo,getElementRects:async function(e){let{reference:t,floating:n,strategy:o}=e;const r=this.getOffsetParent||Yo,s=this.getDimensions;return{reference:ys(t,await r(n),o),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return Wo(e)},getScale:At,isElement:ot,isRTL:function(e){return getComputedStyle(e).direction==="rtl"}};function ws(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,h=bn(e),f=r||s?[...h?Me(h):[],...Me(t)]:[];f.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const a=h&&l?function(y,m){let b,T=null;const E=rt(y);function k(){clearTimeout(b),T&&T.disconnect(),T=null}return function R(H,N){H===void 0&&(H=!1),N===void 0&&(N=1),k();const{left:S,top:M,width:L,height:C}=y.getBoundingClientRect();if(H||m(),!L||!C)return;const v={rootMargin:-Se(M)+"px "+-Se(E.clientWidth-(S+L))+"px "+-Se(E.clientHeight-(M+C))+"px "+-Se(S)+"px",threshold:Mt(0,yn(1,N))||1};let z=!0;function O($){const q=$[0].intersectionRatio;if(q!==N){if(!z)return R();q?R(!1,q):b=setTimeout(()=>{R(!1,1e-7)},100)}z=!1}try{T=new IntersectionObserver(O,{...v,root:E.ownerDocument})}catch{T=new IntersectionObserver(O,v)}T.observe(y)}(!0),k}(h,n):null;let u,p=-1,d=null;i&&(d=new ResizeObserver(y=>{let[m]=y;m&&m.target===h&&d&&(d.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{d&&d.observe(t)})),n()}),h&&!c&&d.observe(h),d.observe(t));let g=c?_t(e):null;return c&&function y(){const m=_t(e);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,u=requestAnimationFrame(y)}(),n(),()=>{f.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),a&&a(),d&&d.disconnect(),d=null,c&&cancelAnimationFrame(u)}}const Go=(e,t,n)=>{const o=new Map,r={platform:bs,...n},s={...r.platform,_c:o};return cs(e,t,{...r,platform:s})},_s='[data-toggle="popover"]',Ko="show",qo="in",Wt=class Wt extends be{constructor(){super(...arguments),this._getClickBounding=()=>{const t=this._triggerEvent;return{x:t.clientX,y:t.clientY,left:t.clientX,top:t.clientY,width:0,height:0,bottom:t.clientY,right:t.clientX}},this._onClickDoc=t=>{const n=w(t.target);(!n.closest(`#${this._id}`).length&&this._targetElement!==n.closest(".popover")[0]||n.closest('[data-dismiss="popover"]').length)&&this.hide()}}get shown(){return this._shown}get id(){return this._id}afterInit(){const{trigger:t,id:n,triggerEvent:o}=this.options;this._triggerEvent=o,this._id=n||`popover_${this.gid}`;const r=this.getTriggerElement();if(r instanceof HTMLElement){const i=w(r),{namespace:l}=this;t==="hover"?i.on(`mouseenter${l}`,c=>{this.show({delay:!0,event:c})}).on(`mouseleave${l}`,()=>{this.delayHide()}):t&&i.on(`${t}${l}`,c=>{this.toggle({event:c}),c.preventDefault()})}const{show:s}=this.options;s&&this.show({delay:typeof s=="number"?s:!1})}getTriggerElement(){if(!this._triggerElement){let{element:t=this.element}=this.options;t===document.body&&(t={getBoundingClientRect:this._getClickBounding}),this._triggerElement=t,this._virtual=!(t instanceof HTMLElement)}return this._triggerElement}initTarget(){let t=this.options.target;return this._dynamic=!t,t?(typeof t=="function"&&(t=t()),w(t)[0]):this._createTarget()}show(t){const{delay:n,event:o}=t||{};if(o&&(this._triggerEvent=o),n)return this._resetTimer(()=>{this.show()},n===!0?this.options.delay:n);if(!this.inited){this.setOptions({show:!0});return}if(this._shown)return;const r=this.initTarget();if(!r)return;this._targetElement=r;const s=w(r),{animation:i,mask:l,onShow:c,onShown:h,trigger:f}=this.options;if(s.addClass(Ko),i&&s.addClass(i===!0?"fade":i),this._shown=!0,this.render(),c==null||c.call(this),this.emit("show"),f==="hover"){this._clearDelayHide();const{namespace:a}=this;s.on(`mouseenter${a}`,()=>{this._clearDelayHide()}).on(`mouseleave${a}`,()=>{this.delayHide()})}this._virtual||w(this._triggerElement).addClass("with-popover-show"),this._resetTimer(()=>{s.addClass(qo),this._resetTimer(()=>{h==null||h.call(this),this.emit("shown")},200),l&&w(document).on(`click${this.namespace}`,this._onClickDoc)},50)}hide(){(!this._shown||!this._targetElement)&&this._resetTimer();const{destroyOnHide:t,animation:n,onHide:o,onHidden:r,trigger:s}=this.options,i=w(this._targetElement);this._shown=!1,o==null||o.call(this),this.emit("hide"),i.removeClass(qo),s==="hover"&&(this._clearDelayHide(),i.off(this.namespace)),this._virtual||w(this._triggerElement).removeClass("with-popover-show").removeAttr("data-popover-placement"),w(document).off(this.namespace),this._resetTimer(()=>{r==null||r.call(this),this.emit("hidden"),i.removeClass(Ko),t&&this._resetTimer(()=>{this.destroy()},typeof t=="number"?t:0),this._destoryTarget()},n?200:0)}toggle(t){this._shown?this.hide():this.show(t)}destroy(){if(super.destroy(),w(document).off(this.namespace),!this._virtual){const{namespace:t}=this;w(this._triggerElement).off(t)}this._resetTimer(),this._destoryTarget(),this._clearDelayHide()}layout(){const t=this._triggerElement,n=this._targetElement,o=this._layoutWatcher;if(!n||!t||!this._shown){o&&(o(),this._layoutWatcher=void 0);return}o||(this._layoutWatcher=ws(t,n,()=>{const{width:r,animation:s,name:i="popover"}=this.options;r==="100%"&&!this._virtual&&w(n).css({width:w(t).width()}),Go(...this._getLayoutOptions()).then(({x:l,y:c,middlewareData:h,placement:f,strategy:a})=>{const u=w(n).css({position:a,left:l,top:c}),p=f.split("-")[0],d={top:"bottom",right:"left",bottom:"top",left:"right"}[p],g=h.arrow;g&&u.find(".arrow").css({left:g.x,top:g.y}).attr("class",`arrow ${i}-arrow arrow-${d}`),s===!0&&u.attr("class",`${u.attr("class").split(" ").filter(y=>y!=="fade"&&!y.startsWith("fade-from")).join(" ")} fade-from-${d}`),this._virtual||w(this._triggerElement).attr("data-popover-placement",p)})}))}render(t){super.render(t);const n=this._targetElement;if(!n)return;const o=this._getRenderOptions(),r=w(n);if(r.toggleClass("popup",o.popup).css(o.style),o.className&&r.setClass(o.className),this._dynamic){let s=this._panel;s&&s.element!==n&&(s.destroy(),s=void 0),s?s.render(o):(s=new hn(n,o),s.on("inited",()=>this.layout())),this._panel=s}else o.arrow&&(r.find(".arrow").length||r.append(w('<div class="arrow"></div>').css(o.arrowStyle))),this.layout()}delayHide(t=100){this._hideTimer=window.setTimeout(()=>{this._hideTimer=0,this.hide()},t)}_clearDelayHide(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=0)}_getLayoutOptions(){const t=this._triggerElement,n=this._targetElement,{placement:o,flip:r,shift:s,offset:i,arrow:l,strategy:c}=this.options,h=l?n.querySelector(".arrow"):null,f=h?typeof l=="number"?l:5:0;return[t,n,{placement:o,strategy:c,middleware:[r?Po():null,s?zo(typeof s=="object"?s:void 0):null,i||f?Do((i||0)+f):null,l?hs({element:h}):null].filter(Boolean)}]}_getRenderOptions(){const{name:t="popover"}=this.options,{popup:n,title:o,content:r,headingClass:s=`${t}-heading`,titleClass:i=`${t}-title`,contentClass:l=`${t}-content`,style:c,className:h=t,closeBtn:f,arrow:a}=this.options;return{popup:n,title:o,titleClass:i,headingClass:s,contentClass:l,content:r,style:{zIndex:this.constructor.Z_INDEX++,...c},className:h,closeBtn:f,arrow:a?`arrow ${t}-arrow`:!1,arrowStyle:{"--arrow-size":`${typeof a=="number"?a:5}px`},onlyInner:!0}}_destoryTarget(){var t,n,o;(t=this._layoutWatcher)==null||t.call(this),this._layoutWatcher=void 0,this._dynamic&&((n=this._panel)==null||n.destroy(),(o=this._targetElement)==null||o.remove(),this._panel=void 0,this._targetElement=void 0)}_resetTimer(t,n=0){this._timer&&clearTimeout(this._timer),t&&(this._timer=window.setTimeout(()=>{this._timer=0,t()},n))}_createTarget(){const{container:t="body"}=this.options,n=w(t);let o=n.find(`#${this._id}`);return o.length||(o=w("<div />").attr({id:this._id,class:"popover"}).appendTo(n)),o[0]}static show(t){const{element:n,event:o,...r}=t,s=n||(o==null?void 0:o.currentTarget);return this.ensure(s instanceof HTMLElement?s:document.body,{element:s,show:!0,destroyOnHide:!0,triggerEvent:o,...r})}};Wt.NAME="Popover",Wt.Z_INDEX=1700,Wt.MULTI_INSTANCE=!0,Wt.DEFAULT={placement:"top",strategy:"absolute",flip:!0,arrow:!0,offset:1,trigger:"click",mask:!0,delay:0,animation:!0,closeBtn:!0,popup:!0};let dt=Wt;w(document).on(`click${dt.NAMESPACE} mouseenter${dt.NAMESPACE}`,_s,e=>{const t=w(e.currentTarget);if(t.length&&!t.data(dt.KEY)){const n=t.data("trigger")||"click";if((e.type==="mouseover"?"hover":"click")!==n)return;dt.ensure(t,{show:!0,triggerEvent:e}),e.preventDefault()}});const fi="",Fe=class Fe extends dt{constructor(){super(...arguments),this._onClickDoc=t=>{w(t.target).closest(".not-hide-menu").length||this.hide()}}_getMenuOptions(){let{items:t=[]}=this.options;return typeof t=="function"&&(t=t(this)),{items:t,nestedTrigger:"hover",placement:this.options.placement,popup:!1,...this.options.menu}}_getRenderOptions(){return{...super._getRenderOptions(),contentClass:"",content:D(_n,this._getMenuOptions())}}};Fe.NAME="Dropdown",Fe.DEFAULT={...dt.DEFAULT,name:"dropdown",placement:"bottom-start",arrow:!1,closeBtn:!1,animation:"fade"};let Ae=Fe;const En=class En extends bt{constructor(){super(...arguments),this._ref=Nt()}get triggerElement(){return this._ref.current}_updateData(){const{dropdown:t,items:n}=this.props,o=w(this.triggerElement),r=Ae.get(this.triggerElement),s={items:n,...t};r?r.setOptions(s):o.data(s)}componentDidMount(){this._updateData()}componentDidUpdate(){this._updateData()}componentWillUnmount(){var t;(t=Ae.get(this.triggerElement))==null||t.destroy()}_getProps(t){const{trigger:n,placement:o}=t;return{...super._getProps(t),"data-toggle":"dropdown","data-trigger":n,"data-placement":o,ref:this._ref}}};En.defaultProps={caret:!0};let Le=En;function vs({items:e,show:t,level:n,...o}){return _(No,{...o})}const kn=class kn extends Ce{constructor(n){super(n);P(this,se,new Set);P(this,nt,void 0);P(this,jt,(n,o,r)=>{w(r.target).closest(".not-nested-toggle").length||(this.toggle(n,o),r.preventDefault())});A(this,nt,n.nestedShow===void 0),x(this,nt)&&(this.state={nestedShow:n.defaultNestedShow??{}})}get nestedTrigger(){return this.props.nestedTrigger}beforeRender(){const n=super.beforeRender(),{nestedShow:o,nestedTrigger:r,defaultNestedShow:s,controlledMenu:i,indent:l,...c}=n;return typeof c.items=="function"&&(c.items=c.items(this)),c.items||(c.items=[]),c.items.some(h=>h.items)||(c.className=I(c.className,"no-nested-items")),!i&&l&&(c.style=Object.assign({[`--${this.name}-indent`]:`${l}px`},c.style)),c}getNestedMenuProps(n){const{name:o,controlledMenu:r,nestedShow:s,beforeDestroy:i,beforeRender:l,itemRender:c,onClickItem:h,afterRender:f,commonItemProps:a,level:u,itemRenderProps:p}=this.props;return{items:n,name:o,nestedShow:x(this,nt)?this.state.nestedShow:s,nestedTrigger:this.nestedTrigger,controlledMenu:r||this,commonItemProps:a,onClickItem:h,afterRender:f,beforeRender:l,beforeDestroy:i,itemRender:c,itemRenderProps:p,level:(u||0)+1}}renderNestedMenu(n){let{items:o}=n;if(!o||(typeof o=="function"&&(o=o(n,this)),!o.length))return;const r=this.constructor,s=this.getNestedMenuProps(o);return _(r,{...s,"data-level":s.level})}isNestedItem(n){return(!n.type||n.type==="item")&&!!n.items}renderToggleIcon(n,o){}getItemRenderProps(n,o,r){const s=super.getItemRenderProps(n,o,r);if(s.level=n.level||0,!this.isNestedItem(s))return s;const i=s.key??s.id??`${n.level||0}:${r}`;x(this,se).add(i);const l=this.isExpanded(i);if(l&&(s.rootChildren=[s.rootChildren,this.renderNestedMenu(o)]),this.nestedTrigger==="hover")s.rootAttrs={...s.rootAttrs,onMouseEnter:x(this,jt).bind(this,i,!0),onMouseLeave:x(this,jt).bind(this,i,!1)};else if(this.nestedTrigger==="click"){const{onClick:h}=s;s.onClick=f=>{x(this,jt).call(this,i,void 0,f),h==null||h(f)}}const c=this.renderToggleIcon(l,s);return c&&(s.children=[s.children,c]),s.show=l,s.rootClass=[s.rootClass,"has-nested-menu",l?"show":""],s}isExpanded(n){const o=x(this,nt)?this.state.nestedShow:this.props.nestedShow;return o&&typeof o=="object"?o[n]:!!o}toggle(n,o){const{controlledMenu:r}=this.props;if(r)return r.toggle(n,o);if(!x(this,nt))return!1;let{nestedShow:s={}}=this.state;if(typeof s=="boolean"&&(s===!0?s=[...x(this,se).values()].reduce((i,l)=>(i[l]=!0,i),{}):s={}),o===void 0)o=!s[n];else if(!!s[n]==!!o)return!1;return o?s[n]=o:delete s[n],this.setState({nestedShow:{...s}}),!0}expand(n){return this.toggle(n,!0)}collapse(n){return this.toggle(n,!1)}expandAll(){x(this,nt)&&this.setState({nestedShow:!0})}collapseAll(){x(this,nt)&&this.setState({nestedShow:!1})}};se=new WeakMap,nt=new WeakMap,jt=new WeakMap,kn.ItemComponents={item:vs};let wn=kn;const di="",Rn=class Rn extends wn{get nestedTrigger(){return this.props.nestedTrigger||"click"}get menuName(){return"menu-nested"}beforeRender(){const t=super.beforeRender();let{hasIcons:n}=t;return n===void 0&&(n=t.items.some(o=>o.icon)),t.className=I(t.className,this.menuName,{"has-icons":n,"has-nested-items":t.items.some(o=>this.isNestedItem(o)),popup:t.popup}),t}renderToggleIcon(t){return _("span",{class:`${this.name}-toggle-icon caret-${t?"down":"right"}`})}};Rn.NAME="menu";let Ie=Rn;const Sn=class Sn extends Ie{constructor(){super(...arguments),this._layoutTimer=0}get name(){return"menu"}get menuName(){return"dropdown-menu"}layout(){const t=this.ref.current,n=t==null?void 0:t.parentElement;!t||!n||Go(n,t,{placement:this.props.placement,middleware:[Po(),zo(),Do(1)]}).then(({x:o,y:r})=>{w(t).css({left:o,top:r})})}getNestedMenuProps(t){const n=super.getNestedMenuProps(t);return{...n,className:I("show",n.className),popup:!0}}afterRender(t){super.afterRender(t),this.props.controlledMenu&&(this.layout(),this._layoutTimer=window.setTimeout(this.layout.bind(this),100))}renderToggleIcon(){return _("span",{class:"dropdown-menu-toggle-icon caret-right ml-2"})}componentWillUnmount(){super.componentWillUnmount(),this._layoutTimer&&clearTimeout(this._layoutTimer)}};Sn.defaultProps={...Ie.defaultProps,popup:!0,nestedTrigger:"hover",placement:"right-start"};let _n=Sn;function Zo({key:e,type:t,btnType:n,...o}){return _(Le,{type:n,...o})}const ui="";class xs extends F{componentDidMount(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!0})}componentDidUpdate(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!1})}componentWillUnmount(){var t;(t=this.props.beforeDestroy)==null||t.call(this)}handleItemClick(t,n,o,r){o&&o.call(r.target,r);const{onClickItem:s}=this.props;s&&s.call(this,{item:t,index:n,event:r})}beforeRender(){var o;const t={...this.props},n=(o=t.beforeRender)==null?void 0:o.call(this,t);return n&&Object.assign(t,n),typeof t.items=="function"&&(t.items=t.items.call(this)),t}onRenderItem(t,n){const{key:o=n,...r}=t,s=t.dropdown||t.items?Le:bt;return _(s,{...r},o)}renderItem(t,n,o){const{itemRender:r,btnProps:s,onClickItem:i}=t,l={key:o,...n};if(s&&Object.assign(l,s),i&&(l.onClick=this.handleItemClick.bind(this,l,o,n.onClick)),r){const c=r.call(this,l,D);if(ct(c))return c;typeof c=="object"&&Object.assign(l,c)}return this.onRenderItem(l,o)}render(){const t=this.beforeRender(),{className:n,items:o,size:r,type:s,btnProps:i,children:l,itemRender:c,onClickItem:h,beforeRender:f,afterRender:a,beforeDestroy:u,...p}=t;return _("div",{className:I("btn-group",r?`size-${r}`:"",n),...p,children:[o&&o.map(this.renderItem.bind(this,t)),l]})}}function Cs({key:e,type:t,btnType:n,...o}){return _(xs,{type:n,...o})}const $t=class $t extends Ce{beforeRender(){const{gap:t,btnProps:n,wrap:o,...r}=super.beforeRender();return r.className=I(r.className,o?"flex-wrap":"",typeof t=="number"?`gap-${t}`:""),typeof t=="string"&&(r.style?r.style.gap=t:r.style={gap:t}),r}isBtnItem(t){return t==="item"||t==="dropdown"}renderTypedItem(t,n,o){const{type:r}=o,s=this.props.btnProps,i=this.isBtnItem(r)?{btnType:"ghost",...s}:{};i.type&&(i.btnType=i.type,delete i.type);const l={...n,...i,...o,className:I(`${this.name}-${r}`,n.className,i.className,o.className),style:Object.assign({},n.style,i.style,o.style)};return r==="btn-group"&&(l.btnProps=s),_(t,{...l})}};$t.ItemComponents={item:is,dropdown:Zo,"btn-group":Cs},$t.ROOT_TAG="nav",$t.NAME="toolbar",$t.defaultProps={btnProps:{btnType:"ghost"}};let Xt=$t;function Ts(e){const[t,n]=e.split(":"),o=t[0]==="-"?{name:t.substring(1),disabled:!0}:{name:t};return n!=null&&n.length&&(o.type="dropdown",o.items=n.split(",").reduce((r,s)=>(s=s.trim(),s.length&&r.push(s[0]==="-"?{name:s.substring(1),disabled:!0}:{name:s}),r),[])),o}const Es=(e,t)=>{var n;return e.url&&(e.url=U(e.url,t.row.data)),(n=e.dropdown)!=null&&n.items&&(e.dropdown.items=e.dropdown.items.map(o=>(o.url&&(o.url=U(o.url,t.row.data)),o))),e},Xo=e=>e?(typeof e=="string"&&(e=e.split("|")),e.map(t=>typeof t=="string"?Ts(t):t).filter(Boolean)):[],ks=K({name:"actions",colTypes:{actions:{onRenderCell(e,t){var f;const{row:n,col:o}=t,r=Xo(((f=n.data)==null?void 0:f[o.name])||o.setting.actions);if(!r.length)return e;const{actionsSetting:s,actionsMap:i,actionsCreator:l=this.options.actionsCreator,actionItemCreator:c=this.options.actionItemCreator||Es}=o.setting,h={items:(l==null?void 0:l(t))??r.map(a=>{const{name:u,items:p,...d}=a;if(i&&u){Object.assign(d,i[u],{...d});const{buildProps:g}=d;typeof g=="function"&&(delete d.buildProps,Object.assign(d,g(e,t)))}if(d.disabled&&(delete d.url,delete d["data-toggle"]),p&&d.type==="dropdown"){const{dropdown:g={placement:"bottom-end"}}=d;g.menu={className:"menu-dtable-actions",items:p.reduce((y,m)=>{const b=typeof m=="string"?{name:m}:{...m};return b!=null&&b.name&&(i&&"name"in b&&Object.assign(b,i[b.name],{...b}),y.push(b)),b.disabled?(delete b.url,delete b["data-toggle"]):b.url&&(b.url=U(b.url,n.data)),y},[])},d.dropdown=g}return c?c(d,t):d}),btnProps:{size:"sm",className:"text-primary"},...s};return e[0]=_(Xt,{...h}),e}}},beforeLayout(e){!Array.isArray(e.data)||!e.data.length||e.cols.forEach((t,n)=>{if(t.type!=="actions"||t.width)return;const{actionsMap:o={}}=t,s=Xo(e.data[0][t.name]).reduce((i,l)=>{const c=l.name?o[l.name]:null;return c&&c.type==="dropdown"&&c.caret&&!c.text?i+16:i+24},24);e.cols[n]={...t,width:s}})}}),gi="";function Jt(e,t){const n=e.pageTotal||Math.ceil(e.recTotal/e.recPerPage);return typeof t=="string"&&(t==="first"?t=1:t==="last"?t=n:t==="prev"?t=e.page-1:t==="next"?t=e.page+1:t==="current"?t=e.page:t=Number.parseInt(t,10)),t=t!==void 0?Math.max(1,Math.min(t<0?n+t:t,n)):e.page,{...e,pageTotal:n,page:t}}function Rs({key:e,type:t,btnType:n,page:o,format:r,pagerInfo:s,linkCreator:i,...l}){const c=Jt(s,o);return l.text===void 0&&!l.icon&&r&&(l.text=typeof r=="function"?r(c):U(r,c)),l.url===void 0&&i&&(l.url=typeof i=="function"?i(c):U(i,c)),l.disabled===void 0&&(l.disabled=o!==void 0&&c.page===s.page),_(bt,{type:n,...l})}function Ss({key:e,type:t,page:n,text:o="",pagerInfo:r,children:s,...i}){const l=Jt(r,n);return o=typeof o=="function"?o(l):U(o,l),_(Mo,{...i,children:[s,o]})}function Ns({key:e,type:t,btnType:n,count:o=12,pagerInfo:r,onClick:s,linkCreator:i,...l}){if(!r.pageTotal)return;const c={...l,square:!0},h=()=>(c.text="",c.icon="icon-ellipsis-h",c.disabled=!0,_(bt,{type:n,...c})),f=(u,p)=>{const d=[];for(let g=u;g<=p;g++){c.text=g,delete c.icon,c.disabled=!1;const y=Jt(r,g);i&&(c.url=typeof i=="function"?i(y):U(i,y)),d.push(_(bt,{type:n,...c,onClick:s}))}return d};let a=[];return a=[...f(1,1)],r.pageTotal<=1||(r.pageTotal<=o?a=[...a,...f(2,r.pageTotal)]:r.page<o-2?a=[...a,...f(2,o-2),h(),...f(r.pageTotal,r.pageTotal)]:r.page>r.pageTotal-o+3?a=[...a,h(),...f(r.pageTotal-o+3,r.pageTotal)]:a=[...a,h(),...f(r.page-Math.ceil((o-4)/2),r.page+Math.floor((o-4)/2)),h(),...f(r.pageTotal,r.pageTotal)]),a}function Ms({type:e,pagerInfo:t,linkCreator:n,items:o=[5,10,15,20,25,30,35,40,45,50,100,200,500,1e3,2e3],dropdown:r={},itemProps:s,...i}){var c;r.items=r.items||o.map(h=>{const f={...t,recPerPage:h};return{...s,text:`${h}`,active:h===t.recPerPage,url:typeof n=="function"?n(f):U(n,f)}});const{text:l=""}=i;return i.text=typeof l=="function"?l(t):U(l,t),r.menu={...r.menu,className:I((c=r.menu)==null?void 0:c.className,"pager-size-menu")},_(Zo,{type:"dropdown",dropdown:r,...i})}function As({key:e,page:t,type:n,btnType:o,pagerInfo:r,size:s,onClick:i,onChange:l,linkCreator:c,...h}){const f={...h};let a;const u=g=>{var y;a=Number((y=g.target)==null?void 0:y.value)||1,a=a>r.pageTotal?r.pageTotal:a},p=g=>{if(!(g!=null&&g.target))return;a=a<=r.pageTotal?a:r.pageTotal;const y=Jt(r,a);l&&!l({info:y,event:g})||(g.target.href=f.url=typeof c=="function"?c(y):U(c,y))},d=Jt(r,t||0);return f.url=typeof c=="function"?c(d):U(c,d),_("div",{className:I("input-group","pager-goto-group",s?`size-${s}`:""),children:[_("input",{type:"number",class:"form-control",max:r.pageTotal,min:"1",onInput:u}),_(bt,{type:o,...f,onClick:p})]})}const ie=class ie extends Xt{get pagerInfo(){const{page:t=1,recTotal:n=0,recPerPage:o=10}=this.props;return{page:+t,recTotal:+n,recPerPage:+o,pageTotal:o?Math.ceil(n/o):0}}isBtnItem(t){return t==="link"||t==="nav"||t==="size-menu"||t==="goto"||super.isBtnItem(t)}getItemRenderProps(t,n,o){const r=super.getItemRenderProps(t,n,o),s=n.type||"item",{pagerInfo:i}=this;return s==="info"?Object.assign(r,{pagerInfo:i}):(s==="link"||s==="size-menu"||s==="nav"||s==="goto")&&Object.assign(r,{pagerInfo:i,linkCreator:t.linkCreator}),r}};ie.NAME="pager",ie.defaultProps={btnProps:{btnType:"ghost",size:"sm"}},ie.ItemComponents={...Xt.ItemComponents,link:Rs,info:Ss,nav:Ns,"size-menu":Ms,goto:As};let vn=ie;const Ls=K({name:"pager",footer:{pager(){const{footPager:e}=this.options;return[e?_(vn,{...e}):null]}}});function Is(e){return typeof e=="string"?e.split(",").map(t=>{const n=parseFloat(t);return Number.isNaN(n)?null:n}):e}const Nn=class Nn extends F{constructor(){super(...arguments);P(this,Ut,Nt());P(this,Rt,0);P(this,Ft,void 0);P(this,le,void 0);P(this,ce,!1)}componentDidMount(){var o;this.tryDraw=this.tryDraw.bind(this),this.tryDraw();const n=(o=x(this,Ut).current)==null?void 0:o.parentElement;if(this.props.responsive!==!1){if(n&&typeof ResizeObserver<"u"){const r=new ResizeObserver(this.tryDraw);r.observe(n),A(this,Ft,r)}x(this,Ft)||window.addEventListener("resize",this.tryDraw)}if(n&&typeof IntersectionObserver<"u"){const r=new IntersectionObserver(s=>{x(this,ce)&&s.some(i=>i.isIntersecting)&&this.tryDraw()});r.observe(n),A(this,le,r)}}componentWillUnmount(){var n;(n=x(this,Ft))==null||n.disconnect(),window.removeEventListener("resize",this.tryDraw)}tryDraw(){x(this,Rt)&&cancelAnimationFrame(x(this,Rt)),A(this,Rt,requestAnimationFrame(()=>{this.draw(),A(this,Rt,0)}))}draw(){const n=x(this,Ut).current;if(!n)return;const o=n.parentElement,{width:r,height:s,responsive:i=!0}=this.props;let l=r||o.clientWidth,c=s||o.clientHeight;if(r&&s&&i&&(l=o.clientWidth,c=Math.floor(s*l/r)),n.style.width=`${l}px`,n.style.height=`${c}px`,l=l*(window.devicePixelRatio||1),c=c*(window.devicePixelRatio||1),n.width=l,n.height=c,!w(o).isVisible()&&x(this,le)){A(this,ce,!0);return}const{lineSize:h=1,scaleLine:f=!1,scaleLineSize:a,scaleLineGap:u=1,scaleLineDash:p,referenceLine:d,referenceLineSize:g,referenceLineDash:y,color:m="#2c78f1",fillColor:b=["rgba(46, 127, 255, 0.3)","rgba(46, 127, 255, 0.05)"],lineDash:T=[],bezier:E}=this.props,k=Is(this.props.data),R=Math.floor(l/(k.length-1)),H=Math.max(...k.filter(L=>L!==null)),N=k.map((L,C)=>{const v=typeof L!="number";return{x:C*R,y:v?c:Math.round((1-L/H)*(c-h)),empty:v}});let S=N[0];const M=n.getContext("2d");if(f){const L=typeof f=="string"?f:"rgba(100,100,100,.1)";M.strokeStyle=L,M.lineWidth=a||h,p&&M.setLineDash(p);for(let C=0;C<N.length;++C){if(C%u!==0)continue;const v=N[C];M.moveTo(v.x,0),M.lineTo(v.x,c)}M.stroke()}if(d&&N.length>1){const L=typeof d=="string"?d:"rgba(100,100,100,.2)",C=N[N.length-1];M.moveTo(C.x,C.y),M.strokeStyle=L,M.lineWidth=g||h,M.lineTo(S.x,S.y),y&&M.setLineDash(y),M.stroke()}for(M.setLineDash(T);N.length&&N[N.length-1].empty;)N.pop();if(b){const L=N[N.length-1];if(M.beginPath(),M.moveTo(0,c),M.lineTo(S.x,S.y),E){const C=Math.round(R/2);for(let v=1;v<N.length;++v){const z=N[v],O=Math.round((z.y-S.y)/5);M.bezierCurveTo(S.x+C,S.y+O,z.x-C,z.y-O,z.x,z.y),S=z}}else for(let C=1;C<N.length;++C)S=N[C],M.lineTo(S.x,S.y);if(M.lineTo(L.x,c),Array.isArray(b)){const C=M.createLinearGradient(0,0,0,c);for(let v=0;v<b.length;++v)C.addColorStop(v/(b.length-1),b[v]);M.fillStyle=C}else M.fillStyle=b;M.fill()}if(S=N[0],M.beginPath(),M.moveTo(S.x,S.y),E){const L=Math.round(R/2);for(let C=1;C<N.length;++C){const v=N[C],z=Math.round((v.y-S.y)/5);M.bezierCurveTo(S.x+L,S.y+z,v.x-L,v.y-z,v.x,v.y),S=v}}else for(let L=1;L<N.length;++L)S=N[L],M.lineTo(S.x,S.y);M.strokeStyle=m,M.lineWidth=h,M.stroke()}render(){const{style:n,className:o,canvasClass:r}=this.props;return D("div",{class:"center burn-chart",className:o,style:n},D("canvas",{className:r,ref:x(this,Ut)}))}};Ut=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,le=new WeakMap,ce=new WeakMap,Nn.defaultProps={responsive:!0,lineSize:1,scaleLine:!1,scaleLineSize:1,bezier:!0};let xn=Nn;function Ps({pri:e="",text:t,className:n}){return D("span",{className:I(`pri-${e}`,n)},t??e)}function Ds({severity:e="",text:t,className:n}){const o=t??e,r=`${Number.parseInt(o)}`!=`${e}`;return D("span",{className:I(`severity${r?" severity-label":""}`,n),"data-severity":e},r?o:"")}const yi="";function Jo(e,t,n){if(n){if(typeof n=="object"){const o=n[e];return typeof o=="string"?o:typeof o=="object"&&o?o.realname:""}if(typeof n=="function")return n(e,t)}}const Qo={name:"zentao",plugins:["group","checkable","nested",ks,Ls],defaultOptions:{colHover:!1,rowHeight:36,striped:!1,responsive:!0,checkable:"auto",nested:"auto",width:"100%",footer:void 0,showToolbarOnChecked:!0,checkOnClickRow:!0,groupDivider:!0,height(e){return Math.min(e,window.innerHeight-1-(w("#header").outerHeight()||0)-(w("#mainMenu").outerHeight()||0)-(w("#mainNavbar").outerHeight()||0))}},options(e){const{checkable:t,footToolbar:n,footPager:o,footer:r,sortLink:s}=e;if(r===void 0){const i=[];t&&i.push("checkbox"),t&&i.push("checkedInfo"),o&&i.push("flex","pager"),i.length&&(e.footer=i)}return typeof s=="string"&&(e.sortLink={url:s,"data-load":"table"}),e},i18n:{zh_cn:{unassigned:"未指派"},zh_tw:{unassigned:"未指派"},en:{unassigned:"Unassigned"}},colTypes:{id:{width:60,fixed:"left",align:"center",sortType:!0},checkID:{width:80,fixed:"left",align:"left",sortType:!0,checkbox:!0},title:{width:.44,fixed:"left",align:"left",sortType:!0,flex:1},shortTitle:{width:.2,align:"left",sortType:!0,fixed:"left",checkbox:!0,flex:1},nestedTitle:{width:.5,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},shortNestedTitle:{width:.33,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},status:{width:80,align:"center",sortType:!0,onRenderCell(e,{col:t,row:n}){var i,l;const o=(i=n.data)==null?void 0:i[t.name];let r,s;return typeof o=="string"?(r=o,s=(l=t.setting.statusMap)==null?void 0:l[o]):typeof o=="object"&&o&&({name:r,label:s}=o),e[0]=D("span",{class:`${t.setting.statusClassPrefix??"status-"}${r}`},s??r),e}},user:{width:80,align:"center",sortType:!0,onRenderCell(e,{col:t,row:n,value:o}){const{userMap:r=this.options.userMap}=t.setting,s=Jo(o,n,r);return s!==void 0&&(e[0]=s),e}},assign:{width:108,align:"left",sortType:!0,cellClass:"px-1.5",onRenderCell(e,t){const{col:n,row:o,value:r}=t,{userMap:s=this.options.userMap,currentUser:i,assignLink:l,unassignedText:c=this.i18n("unassigned")}=n.setting,h=!r,f=h?c:Jo(r,o,s)??r;return e[0]=rn(l,t,[D("i",{className:"icon icon-hand-right"}),D("span",null,f)],{"data-toggle":"modal",className:`dtable-assign-btn${i===r?" is-me":""}${h?" is-unassigned":""}`}),e}},avatar:{width:44,align:"center",sortType:!0},avatarName:{width:108,align:"left",sortType:!0},avatarBtn:{width:108,align:"left",sortType:!0},category:{width:80,align:"center",flex:1},desc:{width:160,align:"left",flex:1},text:{width:136,align:"left",flex:1},icon:{width:52,align:"center",cellClass:"px-1",onRenderCell(e,{row:t,col:n,value:o}){const{iconRender:r}=n.setting;let s={};if(typeof r=="function"){const i=r(o,t);typeof i=="string"?o=i:typeof i=="object"&&i&&({icon:o,...s}=i)}return typeof o=="string"?s.className=I(o,s.className):typeof o=="object"&&o&&Object.assign(s,o),e[0]=D("i",{...s}),e}},pri:{width:68,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(e,{value:t}){return e[0]=D(Ps,{pri:t}),e}},severity:{width:92,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(e){const t=e[0];return e[0]=D(Ds,{severity:t}),e}},burn:{width:88,align:"center",onRenderCell(e,{col:t}){const n=e[0];if(!n)return e;const{burn:o}=t.setting,r={data:n,className:"border-b",width:64,height:24,responsive:!1,...o};return e[0]=D(xn,{...r}),e}},date:{width:96,align:"center",sortType:!0},time:{width:64,align:"center",sortType:!0},datetime:{width:128,align:"center",sortType:!0},progress:{width:64,align:"center",sortType:!0},money:{width:96,align:"right",sortType:!0},count:{width:92,align:"right",sortType:!0},number:{width:64,align:"center",sortType:!0},percent:{width:64,align:"center",sortType:!0,format(e){return typeof e=="string"&&e.endsWith("%")?e:`${e}%`}},actions:{minWidth:120,align:"left",fixed:"right"}},onRenderCell(e,{row:t,col:n,value:o}){const{iconRender:r}=n.setting;if(typeof r=="function"&&n.type!=="icon"){const s=r(o,t);s&&e.unshift(typeof s=="object"?D("i",{...s}):D("i",{className:s}))}return e},onRender(){const{customCols:e}=this.options;if(!e)return;const{custom:t,setGlobal:n,reset:o,resetGlobal:r}=e;return{children:D("div",{className:"absolute gap-3 m-1.5 top-0 right-0 z-20 row"},D("div",{className:"w-px border-l my-1"}),D("a",{className:"btn ghost square size-sm rounded","data-toggle":"dropdown","data-placement":"bottom-end"},D("i",{class:"icon icon-cog-outline"})),D("menu",{class:"dropdown-menu menu"},t&&D("li",{class:"menu-item"},D("a",{href:t.url,"data-toggle":"modal"},t.text)),n&&D("li",{class:"menu-item"},D("a",{href:n.url},n.text)),o&&D("li",{class:"menu-item"},D("a",{href:o.url},o.text)),r&&D("li",{class:"menu-item"},D("a",{href:r.url},r.text))))}}},zs=K(Qo,{buildIn:!0});W.DTable=xe,W.zentao=zs,W.zentaoPlugin=Qo,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=zui.dtable.umd.cjs.map
