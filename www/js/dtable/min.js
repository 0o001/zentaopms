var vs=(z,y,K)=>{if(!y.has(z))throw TypeError("Cannot "+K)};var Dt=(z,y,K)=>(vs(z,y,"read from private field"),K?K.call(z):y.get(z)),Sn=(z,y,K)=>{if(y.has(z))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(z):y.set(z,K)},Wt=(z,y,K,ee)=>(vs(z,y,"write to private field"),ee?ee.call(z,K):y.set(z,K),K);(function(z,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("cash-dom")):typeof define=="function"&&define.amd?define(["exports","cash-dom"],y):(z=typeof globalThis<"u"?globalThis:z||self,y(z.zui={},z.$))})(this,function(z,y){var mt,yt;"use strict";const K=`:root{--color-gray-50:#fafafa;--color-gray-100:#f6f7f9;--color-gray-200:#eee;--color-gray-300:#d8dbde;--color-gray-400:#c4c4c4;--color-gray-500:#898b90;--color-gray-600:#53575b;--color-gray-700:#3d4349;--color-gray-800:#2e343a;--color-gray-900:#000;--color-gray-50-rgb:250,250,250;--color-gray-100-rgb:246,247,249;--color-gray-200-rgb:238,238,238;--color-gray-300-rgb:216,219,222;--color-gray-400-rgb:196,196,196;--color-gray-500-rgb:137,139,144;--color-gray-600-rgb:83,87,91;--color-gray-700-rgb:61,67,73;--color-gray-800-rgb:46,52,58;--color-gray-900-rgb:0,0,0;--color-slate-50:#fcfdfe;--color-slate-100:#f4f5f7;--color-slate-200:#edeef2;--color-slate-300:#e6eaf1;--color-slate-400:#e3e4e9;--color-slate-500:#9ea3b0;--color-slate-600:#838a9d;--color-slate-700:#5e626d;--color-slate-800:#313c52;--color-slate-900:#0b0f18;--color-slate-50-rgb:252,253,254;--color-slate-100-rgb:244,245,247;--color-slate-200-rgb:237,238,242;--color-slate-300-rgb:230,234,241;--color-slate-400-rgb:227,228,233;--color-slate-500-rgb:158,163,176;--color-slate-600-rgb:131,138,157;--color-slate-700-rgb:94,98,109;--color-slate-800-rgb:49,60,82;--color-slate-900-rgb:11,15,24;--color-primary-50:#e6f0ff;--color-primary-100:#d5e5ff;--color-primary-200:#a4c7ff;--color-primary-300:#66a2ff;--color-primary-400:#3785ff;--color-primary-500:#2e7fff;--color-primary-600:#1e6aeb;--color-primary-700:#2463c7;--color-primary-800:#1b54ad;--color-primary-900:#063072;--color-primary-50-rgb:230,240,255;--color-primary-100-rgb:213,229,255;--color-primary-200-rgb:164,199,255;--color-primary-300-rgb:102,162,255;--color-primary-400-rgb:55,133,255;--color-primary-500-rgb:46,127,255;--color-primary-600-rgb:30,106,235;--color-primary-700-rgb:36,99,199;--color-primary-800-rgb:27,84,173;--color-primary-900-rgb:6,48,114;--color-secondary-50:#e7f6ff;--color-secondary-100:#cdecff;--color-secondary-200:#9bd9ff;--color-secondary-300:#77cbff;--color-secondary-400:#60c2ff;--color-secondary-500:#37b2fe;--color-secondary-600:#18a6fd;--color-secondary-700:#1099ed;--color-secondary-800:#078ada;--color-secondary-900:#046bab;--color-secondary-50-rgb:231,246,255;--color-secondary-100-rgb:205,236,255;--color-secondary-200-rgb:155,217,255;--color-secondary-300-rgb:119,203,255;--color-secondary-400-rgb:96,194,255;--color-secondary-500-rgb:55,178,254;--color-secondary-600-rgb:24,166,253;--color-secondary-700-rgb:16,153,237;--color-secondary-800-rgb:7,138,218;--color-secondary-900-rgb:4,107,171;--color-success-50:#ecfff8;--color-success-100:#d0f6e8;--color-success-200:#b1ecd6;--color-success-300:#7adfba;--color-success-400:#48d1a0;--color-success-500:#22c98d;--color-success-600:#0dbb7d;--color-success-700:#0ca76f;--color-success-800:#0e8d60;--color-success-900:#186c4e;--color-success-50-rgb:236,255,248;--color-success-100-rgb:208,246,232;--color-success-200-rgb:177,236,214;--color-success-300-rgb:122,223,186;--color-success-400-rgb:72,209,160;--color-success-500-rgb:34,201,141;--color-success-600-rgb:13,187,125;--color-success-700-rgb:12,167,111;--color-success-800-rgb:14,141,96;--color-success-900-rgb:24,108,78;--color-warning-50:#fff4ea;--color-warning-100:#ffecdb;--color-warning-200:#ffd2a9;--color-warning-300:#ffbc7e;--color-warning-400:#ffaf65;--color-warning-500:#ff9f46;--color-warning-600:#f38f19;--color-warning-700:#ed8307;--color-warning-800:#d17100;--color-warning-900:#af5f01;--color-warning-50-rgb:255,244,234;--color-warning-100-rgb:255,236,219;--color-warning-200-rgb:255,210,169;--color-warning-300-rgb:255,188,126;--color-warning-400-rgb:255,175,101;--color-warning-500-rgb:255,159,70;--color-warning-600-rgb:243,143,25;--color-warning-700-rgb:237,131,7;--color-warning-800-rgb:209,113,0;--color-warning-900-rgb:175,95,1;--color-danger-50:#ffebeb;--color-danger-100:#ffd5d5;--color-danger-200:#ffb1b1;--color-danger-300:#ff9292;--color-danger-400:#ff7c7c;--color-danger-500:#fc5959;--color-danger-600:#fb2b2b;--color-danger-700:#d91b1b;--color-danger-800:#ba1313;--color-danger-900:#a20606;--color-danger-50-rgb:255,235,235;--color-danger-100-rgb:255,213,213;--color-danger-200-rgb:255,177,177;--color-danger-300-rgb:255,146,146;--color-danger-400-rgb:255,124,124;--color-danger-500-rgb:252,89,89;--color-danger-600-rgb:251,43,43;--color-danger-700-rgb:217,27,27;--color-danger-800-rgb:186,19,19;--color-danger-900-rgb:162,6,6;--color-important-50:#fff8f5;--color-important-100:#ffe2d9;--color-important-200:#ffcebf;--color-important-300:#ffb29b;--color-important-400:#ff8c68;--color-important-500:#ff8058;--color-important-600:#ff6f42;--color-important-700:#ff4912;--color-important-800:#c83509;--color-important-900:#611700;--color-important-50-rgb:255,248,245;--color-important-100-rgb:255,226,217;--color-important-200-rgb:255,206,191;--color-important-300-rgb:255,178,155;--color-important-400-rgb:255,140,104;--color-important-500-rgb:255,128,88;--color-important-600-rgb:255,111,66;--color-important-700-rgb:255,73,18;--color-important-800-rgb:200,53,9;--color-important-900-rgb:97,23,0;--color-special-50:#efecfa;--color-special-100:#e4dff7;--color-special-200:#c4b6ff;--color-special-300:#a38cff;--color-special-400:#8a6ff5;--color-special-500:#8166ee;--color-special-600:#7055df;--color-special-700:#513baa;--color-special-800:#452da5;--color-special-900:#30216e;--color-special-50-rgb:239,236,250;--color-special-100-rgb:228,223,247;--color-special-200-rgb:196,182,255;--color-special-300-rgb:163,140,255;--color-special-400-rgb:138,111,245;--color-special-500-rgb:129,102,238;--color-special-600-rgb:112,85,223;--color-special-700-rgb:81,59,170;--color-special-800-rgb:69,45,165;--color-special-900-rgb:48,33,110;--color-inherit:inherit;--color-transparent:transparent;--color-current:currentColor;--color-black:#000;--color-white:#fff;--color-canvas:#fff;--color-inverse:#000;--color-surface:#f6f7f9;--color-fore:#313c52;--color-focus:#9bd9ff;--color-link:#1e6aeb;--color-link-hover:#2e7fff;--color-link-visited:#1b54ad;--color-placeholder:#c4c4c4;--color-border:#e3e4e9;--color-border-strong:#d8dbde;--color-border-light:#eee;--color-black-rgb:0,0,0;--color-white-rgb:255,255,255;--color-canvas-rgb:255,255,255;--color-inverse-rgb:0,0,0;--color-surface-rgb:246,247,249;--color-fore-rgb:49,60,82;--color-focus-rgb:155,217,255;--color-link-rgb:30,106,235;--color-link-hover-rgb:46,127,255;--color-link-visited-rgb:27,84,173;--color-placeholder-rgb:196,196,196;--color-border-rgb:227,228,233;--color-border-strong-rgb:216,219,222;--color-border-light-rgb:238,238,238;--radius-none:0px;--radius-sm:1px;--radius:2px;--radius-md:4px;--radius-lg:6px;--radius-xl:8px;--radius-2xl:12px;--radius-3xl:16px;--radius-full:9999px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,.1),0 0 2px -1px rgba(0,0,0,.05);--shadow:0 1px 4px 0 rgba(0,0,0,.15),0 1px 2px -1px rgba(0,0,0,.1);--shadow-md:0 2px 6px -1px rgba(0,0,0,.2),0 1px 4px -2px rgba(0,0,0,.15);--shadow-lg:0 5px 15px -3px rgba(0,0,0,.2),0 2px 6px -4px rgba(0,0,0,.15);--shadow-xl:0 10px 25px -5px rgba(0,0,0,.2),0 4px 10px -6px rgba(0,0,0,.15);--shadow-2xl:0 10px 50px -10px rgba(0,0,0,.4),0 8px 20px -10px rgba(0,0,0,.3);--shadow-inner:inset 0 2px 4px 0 rgba(0,0,0,.05);--shadow-none:none;--space:4px;--font-size-root:16px;--font-size-page:13px,[object Object]}body{--btn-bg:var(--color-slate-50)}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }
`;window.$=y;function ee(e,t){if(e==null)return[e,void 0];typeof t=="string"&&(t=t.split("."));const n=t.join(".");let o=e;const s=[o];for(;typeof o=="object"&&o!==null&&t.length;){let r=t.shift(),i;const l=r.indexOf("[");if(l>0&&l<r.length-1&&r.endsWith("]")&&(i=r.substring(l+1,r.length-1),r=r.substring(0,l)),o=o[r],s.push(o),i!==void 0)if(typeof o=="object"&&o!==null)o instanceof Map?o=o.get(i):o=o[i],s.push(o);else throw new Error(`Cannot access property "${r}[${i}]", the full path is "${n}".`)}if(t.length)throw new Error(`Cannot access property with rest path "${t.join(".")}", the full path is "${n}".`);return s}function xs(e,t,n){try{const o=ee(e,t),s=o[o.length-1];return s===void 0?n:s}catch{return n}}function j(e,...t){if(t.length===0)return e;if(t.length===1&&typeof t[0]=="object"&&t[0]){const n=t[0];return Object.keys(n).forEach(o=>{const s=n[o]??"";e=e.replace(new RegExp(`\\{${o}\\}`,"g"),`${s}`)}),e}for(let n=0;n<t.length;n++){const o=t[n]??"";e=e.replace(new RegExp(`\\{${n}\\}`,"g"),`${o}`)}return e}let ze=(document.documentElement.getAttribute("lang")||"zh_cn").toLowerCase().replace("-","_"),lt;function Cs(){return ze}function Ts(e){ze=e.toLowerCase()}function An(e,t){lt||(lt={}),typeof e=="string"&&(e={[e]:t??{}}),y.extend(!0,lt,e)}function ct(e,t,n,o,s,r){Array.isArray(e)?lt&&e.unshift(lt):e=lt?[lt,e]:[e],typeof n=="string"&&(r=s,s=o,o=n,n=void 0);const i=s||ze;let l;for(const c of e){if(!c)continue;const h=c[i];if(!h)continue;const f=r&&c===lt?`${r}.${t}`:t;if(l=xs(h,f),l!==void 0)break}return l===void 0?o:n?j(l,...Array.isArray(n)?n:[n]):l}function ks(e,t,n,o){return ct(void 0,e,t,n,o)}ct.addLang=An,ct.getLang=ks,ct.getCode=Cs,ct.setCode=Ts,An({zh_cn:{confirm:"确定",cancel:"取消",delete:"删除",add:"添加"},zh_tw:{confirm:"確定",cancel:"取消",delete:"刪除",add:"添加"},en:{confirm:"Confirm",cancel:"Cancel",delete:"Delete",add:"Add"}});function Pn(e,t,n){e instanceof Headers?e.set(t,n):Array.isArray(e)?e.push([t,n]):e[t]=n}function In(e,t,n){n!=null&&(Array.isArray(n)?n.forEach(o=>In(e,t,o)):e.append(t,n instanceof Blob?n:String(n)))}function Es(e,t){if(e){const n={text:"text/plain",html:"text/html",json:"application/json",...t};for(const[o,s]of Object.entries(n))if(s.split(",").map(r=>r.trim()).includes(e))return o}return"text"}class Rs{get completed(){return this.data!==void 0||this.error!==void 0}get[Symbol.toStringTag](){return"Ajax"}constructor(t){this.setting=t,this._controller=new AbortController,this._callbacks={success:[],error:[],complete:[]}}on(t,n){return this._callbacks[t].push(n),this}success(t){return this.on("success",t)}done(t){return this.success(t)}fail(t){return this.on("error",t)}complete(t){return this.on("complete",t)}always(t){return this.complete(t)}then(t,n){return this.completed?n&&this.error?n(this.error):t(this.data):(this.success(o=>t(o)),n&&this.fail(n)),this}catch(t){return this.error?(t(this.error),this):this.on("error",n=>t(n))}finally(t){return this.completed?(t(),this):this.complete(()=>t())}abort(t){return this.completed?!1:(this._abortError=t,this._controller.abort(),!0)}getResponseHeader(t){var n;return(n=this.response)==null?void 0:n.headers.get(t)}_init(){if(this.completed)return;const{url:t,type:n,data:o,processData:s=!0,contentType:r,crossDomain:i,accepts:l,dataType:c,timeout:h,dataFilter:f,beforeSend:a,success:p,error:d,complete:u,...g}=this.setting;if((a==null?void 0:a(g))===!1)return;n&&(g.method=n);let _=o;_&&(s&&(y.isPlainObject(_)&&(_=Object.entries(_)),Array.isArray(_)&&(_=_.reduce((b,[x,C])=>(In(b,x,C),b),new FormData))),g.body=_),i&&(g.mode="cors");const m=g.headers||{};Pn(m,"X-Requested-With","XMLHttpRequest"),r&&Pn(m,"Content-Type",r),g.headers=m,g.signal&&g.signal.addEventListener("abort",()=>{this.abort()}),p&&this.success(p),d&&this.fail(d),u&&this.complete(u),g.signal=this._controller.signal,this.url=t,this.request=g}_emit(t,...n){this._callbacks[t].forEach(o=>{o(...n)})}async send(){if(this.completed)return[];this._init();const{timeout:t,dataType:n,accepts:o,dataFilter:s}=this.setting;t&&(this._timeoutID=window.setTimeout(()=>{this.abort(new Error("timeout"))},t));let r,i,l;try{r=await fetch(this.url,this.request),this.response=r;const{statusText:c}=r;if(r.ok){const h=n||Es(r.headers.get("Content-Type"),o);h==="blob"||h==="file"?l=await r.blob():h==="json"?l=await r.json():l=await r.text(),this.data=l;const f=(s==null?void 0:s(l,h))??l;this._emit("success",f,c,r)}else throw new Error(c)}catch(c){i=c;let h=!1;i.name==="AbortError"&&(this._abortError?i=this._abortError:h=!0),this.error=i,h||this._emit("error",i,r==null?void 0:r.statusText,i.message)}return this._timeoutID&&clearTimeout(this._timeoutID),this._emit("complete",r,r==null?void 0:r.statusText),[l,i,r]}}y.ajax=(e,t)=>{t=t||{},typeof e=="string"?t.url=e:y.extend(t,e);const n=new Rs(t);return n.send(),n},y.getJSON=(e,t,n)=>(typeof t=="function"&&(n=t,t=void 0),y.ajax({url:e,data:t,success:n,dataType:"json"})),y.get=(e,t,n,o,s="GET")=>{let r,i;return typeof t=="function"?(r=t,i=void 0):i=t,typeof n=="function"?(r=n,o=void 0):o=n,y.ajax({method:s,url:e,data:i,success:r,dataType:o})},y.post=(e,t,n,o)=>y.get(e,t,n,o,"POST");function Ln(...e){const t=[],n=new Map,o=(s,r)=>{if(Array.isArray(s)&&(r=s[1],s=s[0]),!s.length)return;const i=n.get(s);typeof i=="number"?t[i][1]=!!r:(n.set(s,t.length),t.push([s,!!r]))};return e.forEach(s=>{typeof s=="function"&&(s=s()),Array.isArray(s)?Ln(...s).forEach(o):s&&typeof s=="object"?Object.entries(s).forEach(o):typeof s=="string"&&s.split(" ").forEach(r=>o(r,!0))}),t.sort((s,r)=>(n.get(s[0])||0)-(n.get(r[0])||0))}const P=(...e)=>Ln(...e).reduce((t,[n,o])=>(o&&t.push(n),t),[]).join(" ");y.classes=P,y.fn.setClass=function(e,...t){return this.each((n,o)=>{const s=y(o);e===!0?s.attr("class",P(s.attr("class"),...t)):s.addClass(P(e,...t))})};const Ot=new WeakMap;function Dn(e,t,n){const o=Ot.has(e),s=o?Ot.get(e):{};typeof t=="string"?s[t]=n:t===null?Object.keys(s).forEach(r=>{delete s[r]}):Object.assign(s,t),Object.keys(s).forEach(r=>{s[r]===void 0&&delete s[r]}),Object.keys(s).length?(!o&&e instanceof Element&&Object.assign(s,y(e).dataset(),s),Ot.set(e,s)):Ot.delete(e)}function Wn(e,t,n){let o=Ot.get(e)||{};return!n&&e instanceof Element&&(o=Object.assign({},y(e).dataset(),o)),t===void 0?o:o[t]}y.fn.dataset=y.fn.data,y.fn.data=function(...e){if(!this.length)return;const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?Wn(this[0],t):this.each((o,s)=>Dn(s,t,n))},y.fn.removeData=function(e=null){return this.each((t,n)=>Dn(n,e))},y.fn._attr=y.fn.attr,y.fn.extend({attr(...e){const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?this._attr.apply(this,e):typeof t=="object"?(t&&Object.keys(t).forEach(o=>{const s=t[o];s===null?this.removeAttr(o):this._attr(o,s)}),this):n===null?this.removeAttr(t):this._attr(t,n)}}),y.Event||(y.Event=(e,t)=>{const[n,...o]=e.split("."),s=new Event(n,{bubbles:!0,cancelable:!0});return s.namespace=o.join("."),s.___ot=n,s.___td=t,s});const Ms={};y.share=Ms;const ne=new Map;function On(e){const{zui:t}=window;return(!ne.size||e&&!ne.has(e.toUpperCase()))&&Object.keys(t).forEach(n=>{const o=t[n];!o.NAME||!o.ZUI||ne.set(n.toLowerCase(),o)}),e?ne.get(e.toLowerCase()):void 0}function Ss(e,t,n){const o=On(e);return o?!o.MULTI_INSTANCE&&o.get(t)?(console.error(`[ZUI] cannot create component "${e}" on element which already has a component instance.`,{element:t,options:n}),null):new o(t,n):null}y.fn.zuiInit=function(){return this.find("[data-zui]").each(function(){const e=y(this);let t=e.dataset();const[n,o]=t.zui.split(":");e.zui(n)||(o?t=y.share[o]:delete t.zui,requestAnimationFrame(()=>Ss(n,this,t)))}),this.find(".hide-before-init").removeClass("invisible hidden opacity-0"),this.find(".scroll-into-view").scrollIntoView(),this},y.fn.zui=function(e,t){const n=this[0];if(!n)return;if(typeof e!="string"){const s=Wn(n,void 0,!0),r={};let i;return Object.keys(s).forEach(l=>{if(l.startsWith("zui.")){const c=s[l];r[l]=c,(!i||i.gid<c.gid)&&(i=r[l])}}),e===!0?r:i}const o=On(e);if(o)return t===!0?o.getAll(n):o.query(n,t)},y(()=>{y("body").zuiInit()});function Ns(e,t=!0){const n=y(e),o=n[0],s="zui-disable-scroll";if(t){if(n.data(s))return;const r=o===document.body?window.innerWidth-document.body.clientWidth:o.offsetWidth-o.clientWidth;if(!r)return;const i=n.css("paddingRight")||"0";n.data(s,{paddingRight:i,overflow:n.css("overflow")}).css({paddingRight:`${r+Number.parseInt(i,10)}px`,overflow:"hidden"})}else{const r=n.data(s);if(!r)return;n.css(r).removeData(s)}}y.fn.disableScroll=function(e=!0){return this.each((t,n)=>{Ns(n,e)})},y.fn.enableScroll=function(e=!0){return this.disableScroll(!e)};function zn(e,t){const n=y(e)[0];if(!n)return!1;let{viewport:o}=t||{};const{left:s,top:r,width:i,height:l}=n.getBoundingClientRect();if(!o){const{innerHeight:u,innerWidth:g}=window,{clientHeight:_,clientWidth:m}=document.documentElement;o={left:0,top:0,width:g||m,height:u||_}}const{left:c,top:h,width:f,height:a}=o;if(t!=null&&t.fullyCheck)return s>=c&&r>=h&&s+i<=f&&r+l<=a;const p=s<=f&&s+i>=c;return r<=a&&r+l>=h&&p}y.fn.isVisible=function(e){return zn(this,e)};function Hn(e,t,n=!1){const o=y(e);if(t!==void 0){if(t.length){const s=`zui-runjs-${y.guid++}`;o.append(`<script id="${s}">${t}<\/script>`),n&&o.find(`#${s}`).remove()}return}o.find("script").each((s,r)=>{Hn(o,r.innerHTML),r.remove()})}y.runJS=(e,...t)=>(e=e.trim(),!e.startsWith("return ")&&!e.endsWith(";")&&(e=`return ${e}`),new Function(...t.map(([o])=>o),e)(...t.map(([,o])=>o))),y.fn.runJS=function(e){return this.each((t,n)=>{Hn(n,e)})};function As(e,t){const n=y(e),{ifNeeded:o=!0,...s}=t||{};return n.each((r,i)=>{if(o){if(i.scrollIntoViewIfNeeded)return i.scrollIntoViewIfNeeded(s);if(zn(i,{viewport:i.getBoundingClientRect()}))return}i.scrollIntoView(s)}),n}y.fn.scrollIntoView=function(e){return this.each((t,n)=>{As(n,e)})},y.setLibRoot=function(e){y.libRoot=e},y.registerLib=function(e,t){y.libMap||(y.libMap={}),!t.name&&t.id&&(t.id=`zui-lib-${e}`),y.libMap[e]=t},y.getLib=function(e,t,n){return new Promise((o,s)=>{let r=typeof e=="string"?{src:e}:y.extend({},e);typeof t=="function"?r.success=t:t&&y.extend(r,t),n&&(r.success=n);let{src:i}=r;if(!i)return s(new Error("[ZUI] No src provided for $.getLib."));const l=y.libMap&&y.libMap[i];l&&(r=y.extend({},l,r),i=l.src||r.src);const{root:c=y.libRoot}=r;c&&(i=`${c}/${i}`.replace("//","/"));const{success:h,name:f}=r,a=()=>f?window[f]:void 0,p=()=>{o(a()),h==null||h()};if(a()){p();return}const{id:d}=r,u=y(d?`#${d}`:`script[src="${i}"]`);if(u.length){if(u.dataset("loaded"))p();else{const v=u.data("loadCalls")||[];v.push(p),u.data("loadCalls",v)}return}const{async:g=!0,defer:_=!1,noModule:m=!1,type:b,integrity:x}=r,C=document.createElement("script");C.async=g,C.defer=_,C.noModule=m,b&&(C.type=b),x&&(C.integrity=x),C.onload=()=>{p(),(y(C).dataset("loaded",!0).data("loadCalls")||[]).forEach(N=>N()),y(C).removeData("loadCalls")},C.onerror=()=>{s(new Error(`[ZUI] Failed to load lib from: ${i}`))},C.src=i,y("head").append(C)})},y.getScript=y.getLib;var oe,O,jn,at,wt,Bn,Fn,He,Mt={},Un=[],Ps=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,je=Array.isArray;function ht(e,t){for(var n in t)e[n]=t[n];return e}function Vn(e){var t=e.parentNode;t&&t.removeChild(e)}function L(e,t,n){var o,s,r,i={};for(r in t)r=="key"?o=t[r]:r=="ref"?s=t[r]:i[r]=t[r];if(arguments.length>2&&(i.children=arguments.length>3?oe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)i[r]===void 0&&(i[r]=e.defaultProps[r]);return se(e,i,o,s,null)}function se(e,t,n,o,s){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++jn};return s==null&&O.vnode!=null&&O.vnode(r),r}function bt(){return{current:null}}function zt(e){return e.children}function B(e,t){this.props=e,this.context=t}function Ht(e,t){if(t==null)return e.__?Ht(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Ht(e):null}function Yn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Yn(e)}}function Gn(e){(!e.__d&&(e.__d=!0)&&wt.push(e)&&!re.__r++||Bn!==O.debounceRendering)&&((Bn=O.debounceRendering)||Fn)(re)}function re(){var e,t,n,o,s,r,i,l,c;for(wt.sort(He);e=wt.shift();)e.__d&&(t=wt.length,o=void 0,s=void 0,r=void 0,l=(i=(n=e).__v).__e,(c=n.__P)&&(o=[],s=[],(r=ht({},i)).__v=i.__v+1,Be(c,i,r,n.__n,c.ownerSVGElement!==void 0,i.__h!=null?[l]:null,o,l??Ht(i),i.__h,s),Qn(o,i,s),i.__e!=l&&Yn(i)),wt.length>t&&wt.sort(He));re.__r=0}function qn(e,t,n,o,s,r,i,l,c,h,f){var a,p,d,u,g,_,m,b,x,C=0,v=o&&o.__k||Un,N=v.length,S=N,A=t.length;for(n.__k=[],a=0;a<A;a++)(u=n.__k[a]=(u=t[a])==null||typeof u=="boolean"||typeof u=="function"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?se(null,u,null,null,u):je(u)?se(zt,{children:u},null,null,null):u.__b>0?se(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u)!=null?(u.__=n,u.__b=n.__b+1,(b=Is(u,v,m=a+C,S))===-1?d=Mt:(d=v[b]||Mt,v[b]=void 0,S--),Be(e,u,d,s,r,i,l,c,h,f),g=u.__e,(p=u.ref)&&d.ref!=p&&(d.ref&&Fe(d.ref,null,u),f.push(p,u.__c||g,u)),g!=null&&(_==null&&(_=g),(x=d===Mt||d.__v===null)?b==-1&&C--:b!==m&&(b===m+1?C++:b>m?S>A-m?C+=b-m:C--:C=b<m&&b==m-1?b-m:0),m=a+C,typeof u.type!="function"||b===m&&d.__k!==u.__k?typeof u.type=="function"||b===m&&!x?u.__d!==void 0?(c=u.__d,u.__d=void 0):c=g.nextSibling:c=$n(e,g,c):c=Kn(u,c,e),typeof n.type=="function"&&(n.__d=c))):(d=v[a])&&d.key==null&&d.__e&&(d.__e==c&&(c=Ht(d)),Ue(d,d,!1),v[a]=null);for(n.__e=_,a=N;a--;)v[a]!=null&&(typeof n.type=="function"&&v[a].__e!=null&&v[a].__e==n.__d&&(n.__d=v[a].__e.nextSibling),Ue(v[a],v[a]))}function Kn(e,t,n){for(var o,s=e.__k,r=0;s&&r<s.length;r++)(o=s[r])&&(o.__=e,t=typeof o.type=="function"?Kn(o,t,n):$n(n,o.__e,t));return t}function $n(e,t,n){return n==null||n.parentNode!==e?e.insertBefore(t,null):t==n&&t.parentNode!=null||e.insertBefore(t,n),t.nextSibling}function Is(e,t,n,o){var s=e.key,r=e.type,i=n-1,l=n+1,c=t[n];if(c===null||c&&s==c.key&&r===c.type)return n;if(o>(c!=null?1:0))for(;i>=0||l<t.length;){if(i>=0){if((c=t[i])&&s==c.key&&r===c.type)return i;i--}if(l<t.length){if((c=t[l])&&s==c.key&&r===c.type)return l;l++}}return-1}function Ls(e,t,n,o,s){var r;for(r in n)r==="children"||r==="key"||r in t||ie(e,r,null,n[r],o);for(r in t)s&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||ie(e,r,t[r],n[r],o)}function Xn(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ps.test(t)?n:n+"px"}function ie(e,t,n,o,s){var r;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Xn(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Xn(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?Jn:Zn,r):e.removeEventListener(t,r?Jn:Zn,r);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Zn(e){return this.l[e.type+!1](O.event?O.event(e):e)}function Jn(e){return this.l[e.type+!0](O.event?O.event(e):e)}function Be(e,t,n,o,s,r,i,l,c,h){var f,a,p,d,u,g,_,m,b,x,C,v,N,S,A,R=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,l=t.__e=n.__e,t.__h=null,r=[l]),(f=O.__b)&&f(t);t:if(typeof R=="function")try{if(m=t.props,b=(f=R.contextType)&&o[f.__c],x=f?b?b.props.value:f.__:o,n.__c?_=(a=t.__c=n.__c).__=a.__E:("prototype"in R&&R.prototype.render?t.__c=a=new R(m,x):(t.__c=a=new B(m,x),a.constructor=R,a.render=Ws),b&&b.sub(a),a.props=m,a.state||(a.state={}),a.context=x,a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),R.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=ht({},a.__s)),ht(a.__s,R.getDerivedStateFromProps(m,a.__s))),d=a.props,u=a.state,a.__v=t,p)R.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(R.getDerivedStateFromProps==null&&m!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,x),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,x)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(T){T&&(T.__=t)}),C=0;C<a._sb.length;C++)a.__h.push(a._sb[C]);a._sb=[],a.__h.length&&i.push(a);break t}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,x),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,u,g)})}if(a.context=x,a.props=m,a.__P=e,a.__e=!1,v=O.__r,N=0,"prototype"in R&&R.prototype.render){for(a.state=a.__s,a.__d=!1,v&&v(t),f=a.render(a.props,a.state,a.context),S=0;S<a._sb.length;S++)a.__h.push(a._sb[S]);a._sb=[]}else do a.__d=!1,v&&v(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++N<25);a.state=a.__s,a.getChildContext!=null&&(o=ht(ht({},o),a.getChildContext())),p||a.getSnapshotBeforeUpdate==null||(g=a.getSnapshotBeforeUpdate(d,u)),qn(e,je(A=f!=null&&f.type===zt&&f.key==null?f.props.children:f)?A:[A],t,n,o,s,r,i,l,c,h),a.base=t.__e,t.__h=null,a.__h.length&&i.push(a),_&&(a.__E=a.__=null)}catch(T){t.__v=null,(c||r!=null)&&(t.__e=l,t.__h=!!c,r[r.indexOf(l)]=null),O.__e(T,t,n)}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Ds(n.__e,t,n,o,s,r,i,c,h);(f=O.diffed)&&f(t)}function Qn(e,t,n){for(var o=0;o<n.length;o++)Fe(n[o],n[++o],n[++o]);O.__c&&O.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(r){r.call(s)})}catch(r){O.__e(r,s.__v)}})}function Ds(e,t,n,o,s,r,i,l,c){var h,f,a,p=n.props,d=t.props,u=t.type,g=0;if(u==="svg"&&(s=!0),r!=null){for(;g<r.length;g++)if((h=r[g])&&"setAttribute"in h==!!u&&(u?h.localName===u:h.nodeType===3)){e=h,r[g]=null;break}}if(e==null){if(u===null)return document.createTextNode(d);e=s?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,d.is&&d),r=null,l=!1}if(u===null)p===d||l&&e.data===d||(e.data=d);else{if(r=r&&oe.call(e.childNodes),f=(p=n.props||Mt).dangerouslySetInnerHTML,a=d.dangerouslySetInnerHTML,!l){if(r!=null)for(p={},g=0;g<e.attributes.length;g++)p[e.attributes[g].name]=e.attributes[g].value;(a||f)&&(a&&(f&&a.__html==f.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(Ls(e,d,p,s,l),a)t.__k=[];else if(qn(e,je(g=t.props.children)?g:[g],t,n,o,s&&u!=="foreignObject",r,i,r?r[0]:n.__k&&Ht(n,0),l,c),r!=null)for(g=r.length;g--;)r[g]!=null&&Vn(r[g]);l||("value"in d&&(g=d.value)!==void 0&&(g!==e.value||u==="progress"&&!g||u==="option"&&g!==p.value)&&ie(e,"value",g,p.value,!1),"checked"in d&&(g=d.checked)!==void 0&&g!==e.checked&&ie(e,"checked",g,p.checked,!1))}return e}function Fe(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){O.__e(o,n)}}function Ue(e,t,n){var o,s;if(O.unmount&&O.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Fe(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){O.__e(r,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&Ue(o[s],t,n||typeof e.type!="function");n||e.__e==null||Vn(e.__e),e.__=e.__e=e.__d=void 0}function Ws(e,t,n){return this.constructor(e,n)}function Os(e,t,n){var o,s,r,i;O.__&&O.__(e,t),s=(o=typeof n=="function")?null:n&&n.__k||t.__k,r=[],i=[],Be(t,e=(!o&&n||t).__k=L(zt,null,[e]),s||Mt,Mt,t.ownerSVGElement!==void 0,!o&&n?[n]:s?null:t.firstChild?oe.call(t.childNodes):null,r,!o&&n?n:s?s.__e:t.firstChild,o,i),Qn(r,e,i)}oe=Un.slice,O={__e:function(e,t,n,o){for(var s,r,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,o||{}),i=s.__d),i)return s.__E=s}catch(l){e=l}throw e}},jn=0,at=function(e){return e!=null&&e.constructor===void 0},B.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ht({},this.state),typeof e=="function"&&(e=e(ht({},n),this.props)),e&&ht(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Gn(this))},B.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Gn(this))},B.prototype.render=zt,wt=[],Fn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,He=function(e,t){return e.__v.__b-t.__v.__b},re.__r=0;var to=function(e,t,n,o){var s;t[0]=0;for(var r=1;r<t.length;r++){var i=t[r++],l=t[r]?(t[0]|=i?1:2,n[t[r++]]):t[++r];i===3?o[0]=l:i===4?o[1]=Object.assign(o[1]||{},l):i===5?(o[1]=o[1]||{})[t[++r]]=l:i===6?o[1][t[++r]]+=l+"":i?(s=e.apply(l,to(e,l,n,["",null])),o.push(s),l[0]?t[0]|=2:(t[r-2]=0,t[r]=s)):o.push(l)}return o},eo=new Map;function zs(e){var t=eo.get(this);return t||(t=new Map,eo.set(this,t)),(t=to(this,t.get(e)||(t.set(e,t=function(n){for(var o,s,r=1,i="",l="",c=[0],h=function(p){r===1&&(p||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,p,i):r===3&&(p||i)?(c.push(3,p,i),r=2):r===2&&i==="..."&&p?c.push(4,p,0):r===2&&i&&!p?c.push(5,0,!0,i):r>=5&&((i||!p&&r===5)&&(c.push(r,0,i,s),r=6),p&&(c.push(r,p,0,s),r=6)),i=""},f=0;f<n.length;f++){f&&(r===1&&h(),h(f));for(var a=0;a<n[f].length;a++)o=n[f][a],r===1?o==="<"?(h(),c=[c],r=3):i+=o:r===4?i==="--"&&o===">"?(r=1,i=""):i=o+i[0]:l?o===l?l="":i+=o:o==='"'||o==="'"?l=o:o===">"?(h(),r=1):r&&(o==="="?(r=5,s=i,i=""):o==="/"&&(r<5||n[f][a+1]===">")?(h(),r===3&&(c=c[0]),r=c,(c=c[0]).push(2,0,r),r=0):o===" "||o==="	"||o===`
`||o==="\r"?(h(),r=2):i+=o),r===3&&i==="!--"&&(r=4,c=c[0])}return h(),c}(e)),t),arguments,[])).length>1?t:t[0]}zs.bind(L);class Ve extends B{_getClassName(t){return[t.className,t.class]}_getProps(t){const{className:n,class:o,attrs:s,data:r,forwardRef:i,children:l,style:c,...h}=t,f=Object.keys(h).reduce((a,p)=>((p==="dangerouslySetInnerHTML"||/^(on[A-Z]|data-)[a-zA-Z-]+/.test(p))&&(a[p]=h[p]),a),{});return{ref:i,class:P(this._getClassName(t)),style:c,...f,...s}}_getComponent(t){return t.component||"div"}_getChildren(t){return t.children}_beforeRender(t){return t}render(t){return t=this._beforeRender(t)||t,L(this._getComponent(t),this._getProps(t),this._getChildren(t))}}var Hs=0;function w(e,t,n,o,s,r){var i,l,c={};for(l in t)l=="ref"?i=t[l]:c[l]=t[l];var h={type:e,props:c,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Hs,__source:s,__self:r};if(typeof e=="function"&&(i=e.defaultProps))for(l in i)c[l]===void 0&&(c[l]=i[l]);return O.vnode&&O.vnode(h),h}class Ye extends B{constructor(){super(...arguments),this._ref=bt()}_runJS(){this.props.executeScript&&y(this._ref.current).runJS()}componentDidMount(){this._runJS()}componentDidUpdate(t){this.props.html!==t.html&&this._runJS()}render(t){const{executeScript:n,html:o,...s}=t;return w(Ve,{forwardRef:this._ref,dangerouslySetInnerHTML:{__html:o},...s})}}function js(e){const{tag:t,className:n,style:o,renders:s,generateArgs:r=[],generatorThis:i,generators:l,onGenerate:c,onRenderItem:h,...f}=e,a=[n],p={...o},d=[],u=[];return s.forEach(g=>{const _=[];if(typeof g=="string"&&l&&l[g]&&(g=l[g]),typeof g=="function")if(c)_.push(...c.call(i,g,d,...r));else{const m=g.call(i,d,...r);m&&(Array.isArray(m)?_.push(...m):_.push(m))}else _.push(g);_.forEach(m=>{m!=null&&(typeof m=="object"&&!at(m)&&("html"in m||"__html"in m||"className"in m||"style"in m||"attrs"in m||"children"in m)?m.html?d.push(w("div",{className:P(m.className),style:m.style,dangerouslySetInnerHTML:{__html:m.html},...m.attrs??{}})):m.__html?u.push(m.__html):(m.style&&Object.assign(p,m.style),m.className&&a.push(m.className),m.children&&d.push(m.children),m.attrs&&Object.assign(f,m.attrs)):d.push(m))})}),u.length&&Object.assign(f,{dangerouslySetInnerHTML:{__html:u}}),[{className:P(a),style:p,...f},d]}function Ge({tag:e="div",...t}){const[n,o]=js(t);return L(e,n,...o)}function no(e,t,n){return typeof e=="function"?e.call(t,...n||[]):Array.isArray(e)?e.map(o=>no(o,t,n)):at(e)||e===null?e:typeof e=="object"?e.html?w(Ye,{...e}):w(Ve,{...e}):e}function le(e){const{content:t,generatorThis:n,generatorArgs:o}=e,s=no(t,n,o);return s==null||typeof s=="boolean"?null:at(s)?s:w(zt,{children:s})}const oo=e=>e.startsWith("icon-")?e:`icon-${e}`;function ft(e){const{icon:t,className:n,...o}=e;if(!t)return null;if(at(t))return t;const s=["icon",n];if(typeof t=="string")s.push(oo(t));else if(typeof t=="object"){const{className:r,icon:i,...l}=t;s.push(r,i?oo(i):""),Object.assign(o,l)}return w("i",{className:P(s),...o})}function so(e){return e.parentNode===document?!1:e.parentNode?so(e.parentNode):!0}class ce{constructor(t,n){this._inited=!1,this._autoDestory=0;const{KEY:o,DATA_KEY:s,DEFAULT:r,MULTI_INSTANCE:i,NAME:l}=this.constructor;if(!l)throw new Error('[ZUI] The component must have a "NAME" static property.');const c=y(t);if(c.data(o)&&!i)throw new Error("[ZUI] The component has been initialized on element.");const h=c[0],f=y.guid++;this._gid=f,this._element=h;const a=c.parent();if(a.length&&(this._mobs=new MutationObserver(p=>{p.forEach(d=>{d.removedNodes.forEach(u=>{u===h&&(this._autoDestory&&clearTimeout(this._autoDestory),this._autoDestory=window.setTimeout(()=>{this._autoDestory=0,so(h)&&this.destroy()},100))})})}),this._mobs.observe(a[0],{childList:!0,subtree:!1})),this._options={...r,...c.dataset()},this.setOptions(n),this._key=this.options.key??`__${f}`,c.data(o,this).attr(s,`${f}`),i){const p=`${o}:ALL`;let d=c.data(p);d||(d=new Map,c.data(p,d)),d.set(this._key,this)}this.init(),requestAnimationFrame(async()=>{this._inited=!0,await this.afterInit(),this.emit("inited",this.options)})}static get ZUI(){return this.NAME.replace(/(^[A-Z]+)/,t=>t.toLowerCase())}static get KEY(){return`zui.${this.NAME}`}static get NAMESPACE(){return`.zui.${this.ZUI}`}static get DATA_KEY(){return`data-zui-${this.NAME}`}get inited(){return this._inited}get element(){return this._element}get key(){return this._key}get options(){return this._options}get gid(){return this._gid}get $element(){return y(this.element)}get $emitter(){return this.$element}init(){}afterInit(){}render(t){this.setOptions(t)}destroy(){var r;const{KEY:t,DATA_KEY:n,MULTI_INSTANCE:o}=this.constructor,{$element:s}=this;if(this.emit("destroyed"),(r=this._mobs)==null||r.disconnect(),s.off(this.namespace).removeData(t).attr(n,null),o){const i=this.$element.data(`${t}:ALL`);if(i)if(i.delete(this._key),i.size===0)this.$element.removeData(`${t}:ALL`);else{const l=i.values().next().value;s.data(t,l).attr(n,l.gid)}}}setOptions(t){return t&&y.extend(this._options,t),this._options}emit(t,...n){const o=new y.Event(t);return o.__src=this,this.$emitter.trigger(o,[this,...n]),o}on(t,n,o){const s=this;this.$element[o!=null&&o.once?"one":"on"](this._wrapEvent(t),function(r,i){(!r.__src||r.__src===s)&&n.call(this,r,i)})}one(t,n){this.on(t,n,{once:!0})}off(t){this.$element.off(this._wrapEvent(t))}i18n(t,n,o){return ct(this.options.i18n,t,n,o,this.options.lang,this.constructor.NAME)??ct(this.options.i18n,t,n,o,this.options.lang)??`{i18n:${t}}`}get namespace(){return`${this.constructor.NAMESPACE}.${this._key}`}_wrapEvent(t){return t.split(" ").map(n=>n.includes(".")?n:`${n}${this.namespace}`).join(" ")}static get(t,n){const o=y(t);if(this.MULTI_INSTANCE&&n!==void 0){const s=o.data(`${this.KEY}:ALL`);return s?s.get(n):void 0}return o.data(this.KEY)}static ensure(t,n){const o=this.get(t,n==null?void 0:n.key);return o?(n&&o.setOptions(n),o):new this(t,n)}static getAll(t){const{MULTI_INSTANCE:n,DATA_KEY:o}=this,s=[];return y(t||document).find(`[${o}]`).each((r,i)=>{if(n){const c=y(i).data(`${this.KEY}:ALL`);if(c){s.push(...c.values());return}}const l=y(i).data(this.KEY);l&&s.push(l)}),s}static query(t,n){return t===void 0?this.getAll().sort((o,s)=>o.gid-s.gid)[0]:this.get(y(t).closest(`[${this.DATA_KEY}]`),n)}static defineFn(t){let n=t||this.ZUI;y.fn[n]&&(n=`zui${this.NAME}`);const o=this;y.fn.extend({[n](s,...r){const i=typeof s=="object"?s:void 0,l=typeof s=="string"?s:void 0;let c;return this.each((h,f)=>{let a=o.get(f);if(a?i&&a.render(i):a=new o(f,i),l){let p=a[l],d=a;p===void 0&&(d=a.$,p=d[l]),typeof p=="function"?c=p.call(d,...r):c=p}}),c!==void 0?c:this}})}}ce.DEFAULT={},ce.MULTI_INSTANCE=!1;class ro extends ce{constructor(){super(...arguments),this.ref=bt()}get $(){return this.ref.current}afterInit(){this.render()}destroy(){var t,n;(n=(t=this.$)==null?void 0:t.componentWillUnmount)==null||n.call(t),this.element&&(this.element.innerHTML=""),super.destroy()}render(t){Os(L(this.constructor.Component,{ref:this.ref,...this.setOptions(t)}),this.element)}}let Bs=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const wi="";class io extends B{constructor(n){super(n);Sn(this,mt,void 0);Sn(this,yt,void 0);Wt(this,mt,0),Wt(this,yt,null),this._handleWheel=o=>{const{wheelContainer:s}=this.props,r=o.target;if(!(!r||!s)&&(typeof s=="string"&&r.closest(s)||typeof s=="object")){const i=(this.props.type==="horz"?o.deltaX:o.deltaY)*(this.props.wheelSpeed??1);this.scrollOffset(i)&&o.preventDefault()}},this._handleMouseMove=o=>{const{dragStart:s}=this.state;s&&(Dt(this,mt)&&cancelAnimationFrame(Dt(this,mt)),Wt(this,mt,requestAnimationFrame(()=>{const r=this.props.type==="horz"?o.clientX-s.x:o.clientY-s.y;this.scroll(s.offset+r*this.props.scrollSize/this.props.clientSize),Wt(this,mt,0)})),o.preventDefault())},this._handleMouseUp=()=>{this.state.dragStart&&this.setState({dragStart:!1})},this._handleMouseDown=o=>{this.state.dragStart||this.setState({dragStart:{x:o.clientX,y:o.clientY,offset:this.scrollPos}}),o.stopPropagation()},this._handleClick=o=>{const s=o.currentTarget;if(!s)return;const r=s.getBoundingClientRect(),{type:i,clientSize:l,scrollSize:c}=this.props,h=(i==="horz"?o.clientX-r.left:o.clientY-r.top)-this.barSize/2;this.scroll(h*c/l),o.preventDefault()},this.state={scrollPos:this.props.defaultScrollPos??0,dragStart:!1}}get scrollPos(){return this.props.scrollPos??this.state.scrollPos}get controlled(){return this.props.scrollPos!==void 0}get maxScrollPos(){const{scrollSize:n,clientSize:o}=this.props;return Math.max(0,n-o)}get barSize(){const{clientSize:n,scrollSize:o,size:s=12,minBarSize:r=3*s}=this.props;return Math.max(Math.round(n*n/o),r)}componentDidMount(){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp);const{wheelContainer:n}=this.props;n&&(Wt(this,yt,typeof n=="string"?document:n.current),Dt(this,yt).addEventListener("wheel",this._handleWheel,{passive:!1}))}componentWillUnmount(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),Dt(this,yt)&&Dt(this,yt).removeEventListener("wheel",this._handleWheel)}scroll(n){return n=Math.max(0,Math.min(Math.round(n),this.maxScrollPos)),n===this.scrollPos?!1:(this.controlled?this._afterScroll(n):this.setState({scrollPos:n},this._afterScroll.bind(this,n)),!0)}scrollOffset(n){return this.scroll(this.scrollPos+n)}_afterScroll(n){const{onScroll:o}=this.props;o&&o(n,this.props.type??"vert")}render(){const{clientSize:n,type:o,size:s=12,className:r,style:i,left:l,top:c,bottom:h,right:f}=this.props,{maxScrollPos:a,scrollPos:p}=this,{dragStart:d}=this.state,u={left:l,top:c,bottom:h,right:f,...i},g={};return o==="horz"?(u.height=s,u.width=n,g.width=this.barSize,g.left=Math.round(Math.min(a,p)*(n-g.width)/a)):(u.width=s,u.height=n,g.height=this.barSize,g.top=Math.round(Math.min(a,p)*(n-g.height)/a)),w("div",{className:P("scrollbar",r,{"is-vert":o==="vert","is-horz":o==="horz","is-dragging":d}),style:u,onMouseDown:this._handleClick,children:w("div",{className:"scrollbar-bar",style:g,onMouseDown:this._handleMouseDown})})}}mt=new WeakMap,yt=new WeakMap;const ae=new Map,he=[];function lo(e,t){const{name:n}=e;if(!(t!=null&&t.override)&&ae.has(n))throw new Error(`DTable: Plugin with name ${n} already exists`);ae.set(n,e),t!=null&&t.buildIn&&!he.includes(n)&&he.push(n)}function U(e,t){lo(e,t);const n=o=>{if(!o)return e;const{defaultOptions:s,...r}=e;return{...r,defaultOptions:{...s,...o}}};return n.plugin=e,n}function co(e){return ae.delete(e)}function Fs(e){if(typeof e=="string"){const t=ae.get(e);return t||console.warn(`DTable: Cannot found plugin "${e}"`),t}if(typeof e=="function"&&"plugin"in e)return e.plugin;if(typeof e=="object")return e;console.warn("DTable: Invalid plugin",e)}function ao(e,t,n){return t.forEach(o=>{var r;if(!o)return;const s=Fs(o);s&&(n.has(s.name)||((r=s.plugins)!=null&&r.length&&ao(e,s.plugins,n),e.push(s),n.add(s.name)))}),e}function Us(e=[],t=!0){return t&&he.length&&e.unshift(...he),e!=null&&e.length?ao([],e,new Set):[]}function ho(){return{cols:[],data:[],rowKey:"id",width:"100%",height:"auto",rowHeight:35,defaultColWidth:80,minColWidth:20,maxColWidth:9999,header:!0,footer:void 0,headerHeight:0,footerHeight:0,rowHover:!0,colHover:!1,cellHover:!1,bordered:!1,striped:!0,responsive:!1,scrollbarHover:!0,horzScrollbarPos:"outside"}}function Vs(e,t,n){return e&&(t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e))),e}function fo(e,t){return typeof e=="string"&&(e=e.endsWith("%")?parseFloat(e)/100:parseFloat(e)),typeof t=="number"&&(typeof e!="number"||isNaN(e))&&(e=t),e}function qe(e,t=!1){if(!e.list.length)return;if(e.widthSetting&&e.width!==e.widthSetting){e.width=e.widthSetting;const o=e.width-e.totalWidth;if(!t&&o>0||t&&o!==0){const s=e.flexList.length?e.flexList:e.list,r=s.reduce((i,l)=>i+(l.flex||1),0);s.forEach(i=>{const l=Math[o<0?"max":"min"](o,Math.ceil(o*((i.flex||1)/r)));i.realWidth=i.width+l})}}let n=0;e.list.forEach(o=>{o.realWidth||(o.realWidth=o.width),o.left=n,n+=o.realWidth})}function Ys(e,t,n,o){const{defaultColWidth:s,minColWidth:r,maxColWidth:i,fixedLeftWidth:l=0,fixedRightWidth:c=0}=t,h=b=>(typeof b=="function"&&(b=b.call(e)),b=fo(b,0),b<1&&(b=Math.round(b*o)),b),f={width:0,list:[],flexList:[],widthSetting:0,totalWidth:0},a={...f,list:[],flexList:[],widthSetting:h(l)},p={...f,list:[],flexList:[],widthSetting:h(c)},d=[],u={};let g=!1;const _=[],m={};if(n.forEach(b=>{const{colTypes:x,onAddCol:C}=b;x&&Object.entries(x).forEach(([v,N])=>{m[v]||(m[v]=[]),m[v].push(N)}),C&&_.push(C)}),t.cols.forEach(b=>{if(b.hidden)return;const{type:x="",name:C}=b,v={fixed:!1,flex:!1,width:s,minWidth:r,maxWidth:i,...b,type:x},N={name:C,type:x,setting:v,flex:0,left:0,width:0,realWidth:0,visible:!0,index:d.length},S=m[x];S&&S.forEach(W=>{const Y=typeof W=="function"?W.call(e,v):W;Y&&Object.assign(v,Y,b)});const{fixed:A,flex:R,minWidth:T=r,maxWidth:M=i}=v,I=fo(v.width||s,s);N.flex=R===!0?1:typeof R=="number"?R:0,N.width=Vs(I<1?Math.round(I*o):I,T,M),_.forEach(W=>W.call(e,N)),d.push(N),u[N.name]=N;const k=A?A==="left"?a:p:f;k.list.push(N),k.totalWidth+=N.width,k.width=k.totalWidth,N.flex&&k.flexList.push(N),typeof v.order=="number"&&(g=!0)}),g){const b=(x,C)=>(x.setting.order??0)-(C.setting.order??0);d.sort(b),a.list.sort(b),f.list.sort(b),p.list.sort(b)}return qe(a,!0),qe(p,!0),f.widthSetting=o-a.width-p.width,qe(f),{list:d,map:u,left:a,center:f,right:p}}function Gs({col:e,className:t,height:n,row:o,onRenderCell:s,style:r,outerStyle:i,children:l,outerClass:c,width:h,left:f,top:a,...p}){var I;const d={left:f??e.left,top:a??o.top,width:h??e.realWidth,height:n,...i},{align:u,border:g}=e.setting,_={justifyContent:u?u==="left"?"start":u==="right"?"end":u:void 0,...e.setting.cellStyle,...r},m=["dtable-cell",c,t,e.setting.className,{"has-border-left":g===!0||g==="left","has-border-right":g===!0||g==="right"}],b=["dtable-cell-content",e.setting.cellClass],x=(I=o.data)==null?void 0:I[e.name],C=[l??x??""],v=s?s(C,{row:o,col:e,value:x},L):C,N=[],S=[],A={},R={};let T="div";v==null||v.forEach(k=>{if(typeof k=="object"&&k&&!at(k)&&("html"in k||"className"in k||"style"in k||"attrs"in k||"children"in k||"tagName"in k)){const W=k.outer?N:S;k.html?W.push(w("div",{className:P("dtable-cell-html",k.className),style:k.style,dangerouslySetInnerHTML:{__html:k.html},...k.attrs??{}})):(k.style&&Object.assign(k.outer?d:_,k.style),k.className&&(k.outer?m:b).push(k.className),k.children&&W.push(k.children),k.attrs&&Object.assign(k.outer?A:R,k.attrs)),k.tagName&&!k.outer&&(T=k.tagName)}else S.push(k)});const M=T;return w("div",{className:P(m),style:d,"data-col":e.name,"data-row":o.id,"data-type":e.type||null,...p,...A,children:[S.length>0&&w(M,{className:P(b),style:_,...R,children:S}),N]})}function Ke({rows:e=[],cols:t,rowHeight:n,scrollLeft:o=0,scrollTop:s=0,left:r=0,top:i=0,width:l,height:c="100%",className:h,CellComponent:f=Gs,onRenderCell:a}){var g;const p=Array.isArray(e)?e:[e],d=((g=p[0])==null?void 0:g.top)??0,u=p.length;return w("div",{className:P("dtable-cells",h),style:{top:i,left:r,width:l,height:c},children:w("div",{className:"dtable-cells-container",style:{left:-o,top:-s+d},children:p.reduce((_,m,b)=>{const x=t.length;return t.forEach((C,v)=>{_.push(w(f,{className:P(`is-${m.index%2?"odd":"even"}-row`,v?"":"is-first-in-row",v===x-1?"is-last-in-row":"",b?"":"is-first-row",b===u-1?"is-last-row":""),col:C,row:m,top:m.top-d,height:n,onRenderCell:a},`${m.index}:${C.name}`))}),_},[])})})}function uo({top:e,height:t,rowHeight:n,rows:o,cols:{left:s,center:r,right:i},scrollLeft:l,scrollTop:c,className:h,style:f,onRenderCell:a,children:p}){let d=null;s.list.length&&(d=w(Ke,{className:"dtable-fixed-left",rows:o,scrollTop:c,cols:s.list,width:s.width,rowHeight:n,onRenderCell:a},"left"));let u=null;r.list.length&&(u=w(Ke,{rows:o,className:"dtable-scroll-center",scrollLeft:l,scrollTop:c,cols:r.list,left:s.width,width:r.width,rowHeight:n,onRenderCell:a},"center"));let g=null;return i.list.length&&(g=w(Ke,{className:"dtable-fixed-right",rows:o,scrollTop:c,cols:i.list,left:s.width+r.width,width:i.width,rowHeight:n,onRenderCell:a},"right")),w("div",{className:P("dtable-block",h),style:{...f,top:e,height:t},children:[d,u,g,p]})}var $e=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},E=(e,t,n)=>($e(e,t,"read from private field"),n?n.call(e):t.get(e)),D=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},H=(e,t,n,o)=>($e(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),G=(e,t,n)=>($e(e,t,"access private method"),n),St,jt,_t,tt,vt,F,et,nt,Bt,fe,de,Ft,dt,Ut,Vt,Xe,po,Ze,go,Je,mo,Qe,yo,ue,tn,pe,ge,en,nn,on,sn,Yt,me,rn,wo,ln,bo,cn,_o;let an=class extends B{constructor(t){super(t),D(this,Xe),D(this,Ze),D(this,Je),D(this,Qe),D(this,ue),D(this,Yt),D(this,rn),D(this,ln),D(this,cn),this.ref=bt(),D(this,St,0),D(this,jt,void 0),D(this,_t,!1),D(this,tt,void 0),D(this,vt,void 0),D(this,F,[]),D(this,et,void 0),D(this,nt,new Map),D(this,Bt,{}),D(this,fe,void 0),D(this,de,[]),D(this,Ft,{in:!1}),this.updateLayout=()=>{E(this,St)&&cancelAnimationFrame(E(this,St)),H(this,St,requestAnimationFrame(()=>{this.update({dirtyType:"layout"}),H(this,St,0)}))},D(this,dt,(n,o)=>{o=o||n.type;const s=E(this,nt).get(o);if(s!=null&&s.length){for(const r of s)if(r.call(this,n)===!1){n.stopPropagation(),n.preventDefault();break}}}),D(this,Ut,n=>{E(this,dt).call(this,n,`window_${n.type}`)}),D(this,Vt,n=>{E(this,dt).call(this,n,`document_${n.type}`)}),D(this,pe,(n,o,s)=>{const{row:r,col:i}=o;o.value=this.getCellValue(r,i),n[0]=o.value;const l=r.id==="HEADER"?"onRenderHeaderCell":"onRenderCell";return E(this,F).forEach(c=>{c[l]&&(n=c[l].call(this,n,o,s))}),this.options[l]&&(n=this.options[l].call(this,n,o,s)),i.setting[l]&&(n=i.setting[l].call(this,n,o,s)),n}),D(this,ge,(n,o)=>{o==="horz"?this.scroll({scrollLeft:n}):this.scroll({scrollTop:n})}),D(this,en,n=>{var l,c,h;const o=this.getPointerInfo(n);if(!o)return;const{rowID:s,colName:r,cellElement:i}=o;if(s==="HEADER")i&&((l=this.options.onHeaderCellClick)==null||l.call(this,n,{colName:r,element:i}),E(this,F).forEach(f=>{var a;(a=f.onHeaderCellClick)==null||a.call(this,n,{colName:r,element:i})}));else{const f=this.layout.visibleRows.find(a=>a.id===s);if(i){if(((c=this.options.onCellClick)==null?void 0:c.call(this,n,{colName:r,rowID:s,rowInfo:f,element:i}))===!0)return;for(const a of E(this,F))if(((h=a.onCellClick)==null?void 0:h.call(this,n,{colName:r,rowID:s,rowInfo:f,element:i}))===!0)return}}}),D(this,nn,n=>{const o=n.key.toLowerCase();if(["pageup","pagedown","home","end"].includes(o))return!this.scroll({to:o.replace("page","")})}),D(this,on,n=>{const o=y(n.target).closest(".dtable-cell");if(!o.length)return G(this,Yt,me).call(this,!1);G(this,Yt,me).call(this,[o.attr("data-row"),o.attr("data-col")])}),D(this,sn,()=>{G(this,Yt,me).call(this,!1)}),H(this,jt,t.id??`dtable-${Bs(10)}`),this.state={scrollTop:0,scrollLeft:0,renderCount:0},H(this,vt,Object.freeze(Us(t.plugins))),E(this,vt).forEach(n=>{var i;const{methods:o,data:s,state:r}=n;o&&Object.entries(o).forEach(([l,c])=>{typeof c=="function"&&Object.assign(this,{[l]:c.bind(this)})}),s&&Object.assign(E(this,Bt),s.call(this)),r&&Object.assign(this.state,r.call(this)),(i=n.onCreate)==null||i.call(this,n)})}get options(){var t;return((t=E(this,et))==null?void 0:t.options)||E(this,tt)||ho()}get plugins(){return E(this,F)}get layout(){return E(this,et)}get id(){return E(this,jt)}get data(){return E(this,Bt)}get element(){return this.ref.current}get parent(){var t;return this.props.parent??((t=this.element)==null?void 0:t.parentElement)}get hoverInfo(){return E(this,Ft)}componentWillReceiveProps(){H(this,tt,void 0)}componentDidMount(){E(this,_t)?this.forceUpdate():G(this,ue,tn).call(this),E(this,F).forEach(n=>{let{events:o}=n;o&&(typeof o=="function"&&(o=o.call(this)),Object.entries(o).forEach(([s,r])=>{r&&this.on(s,r)}))}),this.on("click",E(this,en)),this.on("keydown",E(this,nn));const{options:t}=this;if((t.rowHover||t.colHover)&&(this.on("mouseover",E(this,on)),this.on("mouseleave",E(this,sn))),t.responsive)if(typeof ResizeObserver<"u"){const{parent:n}=this;if(n){const o=new ResizeObserver(this.updateLayout);o.observe(n),H(this,fe,o)}}else this.on("window_resize",this.updateLayout);E(this,F).forEach(n=>{var o;(o=n.onMounted)==null||o.call(this)})}componentDidUpdate(){E(this,_t)?G(this,ue,tn).call(this):E(this,F).forEach(t=>{var n;(n=t.onUpdated)==null||n.call(this)})}componentWillUnmount(){var n;(n=E(this,fe))==null||n.disconnect();const{element:t}=this;if(t)for(const o of E(this,nt).keys())o.startsWith("window_")?window.removeEventListener(o.replace("window_",""),E(this,Ut)):o.startsWith("document_")?document.removeEventListener(o.replace("document_",""),E(this,Vt)):t.removeEventListener(o,E(this,dt));E(this,F).forEach(o=>{var s;(s=o.onUnmounted)==null||s.call(this)}),E(this,vt).forEach(o=>{var s;(s=o.onDestory)==null||s.call(this)}),H(this,Bt,{}),E(this,nt).clear()}on(t,n,o){var r;o&&(t=`${o}_${t}`);const s=E(this,nt).get(t);s?s.push(n):(E(this,nt).set(t,[n]),t.startsWith("window_")?window.addEventListener(t.replace("window_",""),E(this,Ut)):t.startsWith("document_")?document.addEventListener(t.replace("document_",""),E(this,Vt)):(r=this.element)==null||r.addEventListener(t,E(this,dt)))}off(t,n,o){var i;o&&(t=`${o}_${t}`);const s=E(this,nt).get(t);if(!s)return;const r=s.indexOf(n);r>=0&&s.splice(r,1),s.length||(E(this,nt).delete(t),t.startsWith("window_")?window.removeEventListener(t.replace("window_",""),E(this,Ut)):t.startsWith("document_")?document.removeEventListener(t.replace("document_",""),E(this,Vt)):(i=this.element)==null||i.removeEventListener(t,E(this,dt)))}emitCustomEvent(t,n){E(this,dt).call(this,n instanceof Event?n:new CustomEvent(t,{detail:n}),t)}scroll(t,n){const{scrollLeft:o,scrollTop:s,rowsHeightTotal:r,rowsHeight:i,rowHeight:l,cols:{center:{totalWidth:c,width:h}}}=this.layout,{to:f}=t;let{scrollLeft:a,scrollTop:p}=t;if(f==="up"||f==="down")p=s+(f==="down"?1:-1)*Math.floor(i/l)*l;else if(f==="left"||f==="right")a=o+(f==="right"?1:-1)*h;else if(f==="top")p=0;else if(f==="bottom")p=r-i;else if(f==="begin")a=0;else if(f==="end")a=c-h;else{const{offsetLeft:u,offsetTop:g}=t;typeof u=="number"&&(a=o+u),typeof g=="number"&&(a=s+g)}const d={};return typeof a=="number"&&(a=Math.max(0,Math.min(a,c-h)),a!==o&&(d.scrollLeft=a)),typeof p=="number"&&(p=Math.max(0,Math.min(p,r-i)),p!==s&&(d.scrollTop=p)),Object.keys(d).length?(this.setState(d,()=>{var u;(u=this.options.onScroll)==null||u.call(this,d),n==null||n.call(this,!0)}),!0):(n==null||n.call(this,!1),!1)}getColInfo(t){if(t===void 0)return;if(typeof t=="object")return t;const{cols:n}=this.layout;return typeof t=="number"?n.list[t]:n.map[t]}getRowInfo(t){if(t===void 0)return;if(typeof t=="object")return t;if(t===-1||t==="HEADER")return{id:"HEADER",index:-1,top:0};const{rows:n,rowsMap:o,allRows:s}=this.layout;return typeof t=="number"?n[t]:o[t]||s.find(r=>r.id===t)}getCellValue(t,n){var l;const o=typeof t=="object"?t:this.getRowInfo(t);if(!o)return;const s=typeof n=="object"?n:this.getColInfo(n);if(!s)return;let r=o.id==="HEADER"?s.setting.title:(l=o.data)==null?void 0:l[s.name];const{cellValueGetter:i}=this.options;return i&&(r=i.call(this,o,s,r)),r}getRowInfoByIndex(t){return this.layout.rows[t]}update(t={},n){if(!E(this,tt))return;typeof t=="function"&&(n=t,t={});const{dirtyType:o,state:s}=t;if(o==="layout")H(this,et,void 0);else if(o==="options"){if(H(this,tt,void 0),!E(this,et))return;H(this,et,void 0)}this.setState(s??(r=>({renderCount:r.renderCount+1})),n)}getPointerInfo(t){const n=t.target;if(!n||n.closest(".no-cell-event"))return;const o=y(n).closest(".dtable-cell");if(!o.length)return;const s=o.attr("data-row"),r=o.attr("data-col");if(!(typeof r!="string"||typeof s!="string"))return{cellElement:o[0],colName:r,rowID:s,target:n}}i18n(t,n,o){return ct(E(this,de),t,n,o,this.options.lang)??`{i18n:${t}}`}getPlugin(t){return this.plugins.find(n=>n.name===t)}render(){let t=G(this,cn,_o).call(this);const{className:n,rowHover:o,colHover:s,cellHover:r,bordered:i,striped:l,scrollbarHover:c,beforeRender:h}=this.options,f={},a=["dtable",n,{"dtable-hover-row":o,"dtable-hover-col":s,"dtable-hover-cell":r,"dtable-bordered":i,"dtable-striped":l,"scrollbar-hover":c}],p=[];if(t){if(a.push(t.className),h){const d=h.call(this,t);d&&(t=d)}E(this,F).forEach(d=>{var g;const u=(g=d.beforeRender)==null?void 0:g.call(this,t);u&&(t=u)}),f.width=t.width,f.height=t.height,f["--dtable-row-height"]=`${t.rowHeight}px`,a.push({"dtable-scrolled-down":t.scrollTop>0,"dtable-scrolled-bottom":t.scrollTop>=t.rowsHeightTotal-t.rowsHeight,"dtable-scrolled-right":t.scrollLeft>0,"dtable-scrolled-end":t.scrollLeft>=t.cols.center.totalWidth-t.cols.center.width}),t.children&&p.push(...t.children),p.push(G(this,Xe,po).call(this,t),G(this,Ze,go).call(this,t),G(this,Je,mo).call(this,t)),t.scrollable&&p.push(G(this,Qe,yo).call(this,t)),E(this,F).forEach(d=>{var g;const u=(g=d.onRender)==null?void 0:g.call(this,t);u&&(u.style&&Object.assign(f,u.style),u.className&&a.push(u.className),u.children&&p.push(u.children))})}return w("div",{id:E(this,jt),className:P(a),style:f,ref:this.ref,tabIndex:-1,children:p})}};St=new WeakMap,jt=new WeakMap,_t=new WeakMap,tt=new WeakMap,vt=new WeakMap,F=new WeakMap,et=new WeakMap,nt=new WeakMap,Bt=new WeakMap,fe=new WeakMap,de=new WeakMap,Ft=new WeakMap,dt=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,Xe=new WeakSet,po=function(e){const{header:t,cols:n,headerHeight:o,scrollLeft:s,headerChildren:r}=e;if(!t)return null;if(t===!0)return w(uo,{className:"dtable-header",cols:n,height:o,scrollLeft:s,rowHeight:o,scrollTop:0,rows:{id:"HEADER",index:-1,top:0},top:0,onRenderCell:E(this,pe),children:r},"header");const i=Array.isArray(t)?t:[t];return w(Ge,{className:"dtable-header",style:{height:o},renders:i,generateArgs:[e],generatorThis:this,children:r},"header")},Ze=new WeakSet,go=function(e){const{headerHeight:t,rowsHeight:n,visibleRows:o,rowHeight:s,cols:r,scrollLeft:i,scrollTop:l,bodyChildren:c}=e;return w(uo,{className:"dtable-body",top:t,height:n,rows:o,rowHeight:s,scrollLeft:i,scrollTop:l,cols:r,onRenderCell:E(this,pe),children:c},"body")},Je=new WeakSet,mo=function(e){let{footer:t}=e;if(typeof t=="function"&&(t=t.call(this,e)),!t)return null;const n=Array.isArray(t)?t:[t];return w(Ge,{className:"dtable-footer",style:{height:e.footerHeight,top:e.rowsHeight+e.headerHeight},renders:n,generateArgs:[e],generatorThis:this,generators:e.footerGenerators,children:e.footerChildren},"footer")},Qe=new WeakSet,yo=function(e){const t=[],{scrollLeft:n,cols:{left:{width:o},center:{width:s,totalWidth:r}},scrollTop:i,rowsHeight:l,rowsHeightTotal:c,footerHeight:h,headerHeight:f}=e,{scrollbarSize:a=12,horzScrollbarPos:p}=this.options;return r>s&&t.push(w(io,{type:"horz",scrollPos:n,scrollSize:r,clientSize:s,onScroll:E(this,ge),left:o,bottom:(p==="inside"?0:-a)+h,size:a,wheelContainer:this.ref},"horz"),w("div",{className:"dtable-scroll-shadow is-left",style:{left:o,height:f+l}}),w("div",{className:"dtable-scroll-shadow is-right",style:{left:o+s,height:f+l}})),c>l&&t.push(w(io,{type:"vert",scrollPos:i,scrollSize:c,clientSize:l,onScroll:E(this,ge),right:0,size:a,top:f,wheelContainer:this.ref},"vert")),t.length?t:null},ue=new WeakSet,tn=function(){var e;H(this,_t,!1),(e=this.options.afterRender)==null||e.call(this),E(this,F).forEach(t=>{var n;return(n=t.afterRender)==null?void 0:n.call(this)})},pe=new WeakMap,ge=new WeakMap,en=new WeakMap,nn=new WeakMap,on=new WeakMap,sn=new WeakMap,Yt=new WeakSet,me=function(e){const{element:t,options:n}=this;if(!t)return;const o=y(t),s=e?{in:!0,row:e[0],col:e[1]}:{in:!1};n.colHover==="header"&&s.row!=="HEADER"&&(s.col=void 0);const r=E(this,Ft);s.in!==r.in&&o.toggleClass("dtable-hover",s.in),s.row!==r.row&&(o.find(".is-hover-row").removeClass("is-hover-row"),s.row&&o.find(`.dtable-cell[data-row="${s.row}"]`).addClass("is-hover-row")),s.col!==r.col&&(o.find(".is-hover-col").removeClass("is-hover-col"),s.col&&o.find(`.dtable-cell[data-col="${s.col}"]`).addClass("is-hover-col")),H(this,Ft,s)},rn=new WeakSet,wo=function(){if(E(this,tt))return!1;const t={...ho(),...E(this,vt).reduce((n,o)=>{const{defaultOptions:s}=o;return s&&Object.assign(n,s),n},{}),...this.props};return H(this,tt,t),H(this,F,E(this,vt).reduce((n,o)=>{const{when:s,options:r}=o;let i=t;return r&&(i=Object.assign({...i},typeof r=="function"?r.call(this,t):r)),(!s||s(i))&&(i!==t&&Object.assign(t,i),n.push(o)),n},[])),H(this,de,[this.options.i18n,...this.plugins.map(n=>n.i18n)].filter(Boolean)),!0},ln=new WeakSet,bo=function(){var A,R;const{plugins:e}=this;let t=E(this,tt);const n={flex:w("div",{style:"flex:auto"}),divider:w("div",{style:"width:1px;margin:var(--space);background:var(--color-border);height:50%"})};e.forEach(T=>{var I;const M=(I=T.beforeLayout)==null?void 0:I.call(this,t);M&&(t={...t,...M}),Object.assign(n,T.footer)});let o=t.width,s=0;if(typeof o=="function"&&(o=o.call(this)),o==="100%"){const{parent:T}=this;if(T)s=T.clientWidth;else{H(this,_t,!0);return}}const r=Ys(this,t,e,s),{data:i,rowKey:l="id",rowHeight:c}=t,h=[],f=(T,M,I)=>{var W,Y;const k={data:I??{[l]:T},id:T,index:h.length,top:0};if(I||(k.lazy=!0),h.push(k),((W=t.onAddRow)==null?void 0:W.call(this,k,M))!==!1){for(const Q of e)if(((Y=Q.onAddRow)==null?void 0:Y.call(this,k,M))===!1)return}};if(typeof i=="number")for(let T=0;T<i;T++)f(`${T}`,T);else Array.isArray(i)&&i.forEach((T,M)=>{typeof T=="object"?f(`${T[l]??""}`,M,T):f(`${T??""}`,M)});let a=h;const p={};if(t.onAddRows){const T=t.onAddRows.call(this,a);T&&(a=T)}for(const T of e){const M=(A=T.onAddRows)==null?void 0:A.call(this,a);M&&(a=M)}a.forEach((T,M)=>{p[T.id]=T,T.index=M,T.top=T.index*c});const{header:d,footer:u}=t,g=d?t.headerHeight||c:0,_=u?t.footerHeight||c:0;let m=t.height,b=0;const x=a.length*c,C=g+_+x;if(typeof m=="function"&&(m=m.call(this,C)),m==="auto")b=C;else if(typeof m=="object")b=Math.min(m.max,Math.max(m.min,C));else if(m==="100%"){const{parent:T}=this;if(T)b=T.clientHeight;else{b=0,H(this,_t,!0);return}}else b=m;const v=b-g-_,N={options:t,allRows:h,width:s,height:b,rows:a,rowsMap:p,rowHeight:c,rowsHeight:v,rowsHeightTotal:x,header:d,footer:u,footerGenerators:n,headerHeight:g,footerHeight:_,cols:r},S=(R=t.onLayout)==null?void 0:R.call(this,N);S&&Object.assign(N,S),e.forEach(T=>{if(T.onLayout){const M=T.onLayout.call(this,N);M&&Object.assign(N,M)}}),H(this,et,N)},cn=new WeakSet,_o=function(){(G(this,rn,wo).call(this)||!E(this,et))&&G(this,ln,bo).call(this);const{layout:e}=this;if(!e)return;const{cols:{center:t}}=e;let{scrollLeft:n}=this.state;n=Math.min(Math.max(0,t.totalWidth-t.width),n);let o=0;t.list.forEach(u=>{u.left=o,o+=u.realWidth,u.visible=u.left+u.realWidth>=n&&u.left<=n+t.width});const{rowsHeightTotal:s,rowsHeight:r,rows:i,rowHeight:l}=e,c=Math.min(Math.max(0,s-r),this.state.scrollTop),h=Math.floor(c/l),f=c+r,a=Math.min(i.length,Math.ceil(f/l)),p=[],{rowDataGetter:d}=this.options;for(let u=h;u<a;u++){const g=i[u];g.lazy&&d&&(g.data=d([g.id])[0],g.lazy=!1),p.push(g)}return Object.assign(e,{visibleRows:p,scrollTop:c,scrollLeft:n,headerChildren:[],bodyChildren:[],footerChildren:[],children:[],className:"",scrollable:!0}),e},an.addPlugin=lo,an.removePlugin=co;const hn=e=>e?(e instanceof Date||(typeof e=="string"&&(e=e.trim(),/^\d+$/.test(e)&&(e=Number.parseInt(e,10))),typeof e=="number"&&e<1e10&&(e*=1e3),e=new Date(e)),e):new Date,qs=(e,t=new Date)=>hn(e).getFullYear()===hn(t).getFullYear(),Ks=(e,t="yyyy-MM-dd hh:mm",n="")=>{if(e=hn(e),Number.isNaN(e.getDay()))return n;const o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours()%12,"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};return/(y+)/i.test(t)&&(t.includes("[yyyy-]")&&(t=t.replace("[yyyy-]",qs(e)?"":"yyyy-")),t=t.replace(RegExp.$1,`${e.getFullYear()}`.substring(4-RegExp.$1.length))),Object.keys(o).forEach(s=>{if(new RegExp(`(${s})`).test(t)){const r=`${o[s]}`;t=t.replace(RegExp.$1,RegExp.$1.length===1?r:`00${r}`.substring(r.length))}}),t};class vo extends B{render(t){const{percent:n=50,size:o=24,circleBg:s,circleColor:r,text:i,className:l,textStyle:c,textX:h,textY:f,children:a}=t,p=o/2;let{circleWidth:d=.1}=t;d<1&&(d=o*d);const u=(o-d)/2;return w("svg",{className:l,width:o,height:o,children:[w("circle",{cx:p,cy:p,r:u,"stroke-width":d,stroke:s,fill:"transparent"}),w("circle",{cx:p,cy:p,r:u,"stroke-width":d,stroke:r,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*u*2,"stroke-dashoffset":Math.PI*u*2*(100-n)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),i?w("text",{x:h??p,y:f??p+d/2,"dominant-baseline":"middle","text-anchor":"middle",style:c||{fontSize:`${u}px`},children:i===!0?Math.round(n):i}):null,a]})}}vo.defaultProps={circleBg:"var(--color-surface)",circleColor:"var(--color-primary-500)",text:!0};class xo extends B{render(t){const{percent:n=50,color:o,background:s=null,height:r,width:i,children:l,className:c,style:h}=t;return w("div",{class:P("progress",c),style:{width:i,height:r,"--progress-bg":s,"--progress-bar-color":o,...h},children:[w("div",{class:"progress-bar",style:{width:`${n}%`}}),l]})}}xo.defaultProps={percent:50,height:20,width:"auto"};const bi="",_i="";function fn(e,t,n,o){if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&e.length&&(e={url:e}),!e)return n;const{url:s,...r}=e,{setting:i}=t.col,l={};return i&&Object.keys(i).forEach(c=>{c.startsWith("data-")&&(l[c]=i[c])}),w("a",{href:j(s,t.row.data),...o,...r,...l,children:n})}function dn(e,t,n){var o;if(e!=null)return n=n??((o=t.row.data)==null?void 0:o[t.col.name]),typeof e=="function"?e(n,t):j(e,n)}function Co(e,t,n,o){var s;return n?(n=n??((s=t.row.data)==null?void 0:s[t.col.name]),e===!1?n:(e===!0&&(e="[yyyy-]MM-dd hh:mm"),typeof e=="function"&&(e=e(n,t)),Ks(n,e,o??n))):o??n}function To(e,t){const{link:n}=t.col.setting,o=fn(n,t,e[0]);return o&&(e[0]=o),e}function ko(e,t){const{format:n}=t.col.setting;return n&&(e[0]=dn(n,t,e[0])),e}function Eo(e,t){const{map:n}=t.col.setting;return typeof n=="function"?e[0]=n(e[0],t):typeof n=="object"&&n&&(e[0]=n[e[0]]??e[0]),e}function Ro(e,t,n="[yyyy-]MM-dd hh:mm"){const{formatDate:o=n,invalidDate:s}=t.col.setting;return e[0]=Co(o,t,e[0],s),e}function un(e,t,n=!1){const{html:o=n}=t.col.setting;if(o===!1)return e;const s=e[0],r=o===!0?s:dn(o,t,s);return e[0]={html:r},e}const $s=U({name:"rich",colTypes:{html:{onRenderCell(e,t){return un(e,t,!0)}},progress:{align:"center",onRenderCell(e,{col:t}){const{progressType:n,barColor:o,barBgColor:s,barHeight:r=6,barWidth:i=64,circleSize:l=24,circleBorderSize:c=1,circleBgColor:h="var(--color-border)",circleColor:f="var(--color-success-500)"}=t.setting,a=e[0];return e[0]=n==="bar"?w(xo,{className:"rounded-full",width:i,height:r,color:o||f,background:s,percent:a}):w(vo,{percent:a,size:l,circleWidth:c,circleBg:h,circleColor:f,text:!0}),e}},datetime:{formatDate:"[yyyy-]MM-dd hh:mm"},date:{formatDate:"yyyy-MM-dd"},time:{formatDate:"hh:mm"}},onRenderCell(e,t){const{formatDate:n,html:o,hint:s}=t.col.setting;if(n&&(e=Ro(e,t,n)),e=Eo(e,t),e=ko(e,t),o?e=un(e,t):e=To(e,t),s){let r=e[0];typeof s=="function"?r=s.call(this,t):typeof s=="string"&&(r=j(s,t.row.data)),e.push({attrs:{title:r}})}return e}},{buildIn:!0}),Xs={html:{component:Ye}},Zs=U({name:"custom",onRenderCell(e,t){const{col:n}=t;let{custom:o}=n.setting;if(typeof o=="function"&&(o=o.call(this,t)),!o)return e;const s=Array.isArray(o)?o:[o],{customMap:r}=this.options;return s.forEach(i=>{let l;typeof i=="string"?l=i.startsWith("<")?{component:Ye,props:{html:j(i,{value:t.value,...t.row.data,$value:t.value})}}:{component:i}:l=i;let{component:c}=l;const h=[l];typeof c=="string"&&h.unshift(Xs[c],r==null?void 0:r[c]);const f={};h.forEach(p=>{if(p){const{props:d}=p;d&&y.extend(f,typeof d=="function"?d.call(this,t):d),c=p.component||c}},{props:{}});const a=c;e[0]={outer:!0,className:"dtable-custom-cell",children:w(a,{...f})}}),e}}),Ci="";function Js(e,t,n=!1){var l,c;typeof e=="boolean"&&(t=e,e=void 0);const o=this.state.checkedRows,s={},{canRowCheckable:r}=this.options,i=(h,f)=>{const a=r?r.call(this,h):!0;!a||n&&a==="disabled"||!!o[h]===f||(f?o[h]=!0:delete o[h],s[h]=f)};if(e===void 0?(t===void 0&&(t=!Mo.call(this)),(l=this.layout)==null||l.allRows.forEach(({id:h})=>{i(h,!!t)})):(Array.isArray(e)||(e=[e]),e.forEach(h=>{i(h,t??!o[h])})),Object.keys(s).length){const h=(c=this.options.beforeCheckRows)==null?void 0:c.call(this,e,s,o);h&&Object.keys(h).forEach(f=>{h[f]?o[f]=!0:delete o[f]}),this.setState({checkedRows:{...o}},()=>{var f;(f=this.options.onCheckChange)==null||f.call(this,s)})}return s}function Qs(e){return this.state.checkedRows[e]??!1}function Mo(){var o,s;const e=(o=this.layout)==null?void 0:o.allRows.length;if(!e)return!1;const t=this.getChecks().length,{canRowCheckable:n}=this.options;return n?t===((s=this.layout)==null?void 0:s.allRows.reduce((r,i)=>r+(n.call(this,i.id)?1:0),0)):t===e}function tr(){return Object.keys(this.state.checkedRows)}function er(e){const{checkable:t}=this.options;e===void 0&&(e=!t),t!==e&&this.setState({forceCheckable:e})}function So(e,t,n=!1){return w("div",{class:`checkbox-primary dtable-checkbox${e?" checked":""}${n?" disabled":""}`,children:w("label",{})})}const No='input[type="checkbox"],.dtable-checkbox',nr=U({name:"checkable",defaultOptions:{checkable:"auto",checkboxRender:So},when:e=>!!e.checkable,options(e){const{forceCheckable:t}=this.state;return t!==void 0?e.checkable=t:e.checkable==="auto"&&(e.checkable=!!e.cols.some(n=>n.checkbox)),e},state(){return{checkedRows:{}}},methods:{toggleCheckRows:Js,isRowChecked:Qs,isAllRowChecked:Mo,getChecks:tr,toggleCheckable:er},i18n:{zh_cn:{checkedCountInfo:"已选择 {selected} 项",totalCountInfo:"共 {total} 项"},zh_tw:{checkedCountInfo:"已選擇 {selected} 項",totalCountInfo:"共 {total} 項"},en:{checkedCountInfo:"Selected {selected} items",totalCountInfo:"Total {total} items"}},footer:{checkbox(){const e=this.isAllRowChecked();return[w("div",{style:{paddingRight:"calc(3*var(--space))",display:"flex",alignItems:"center"},onClick:()=>this.toggleCheckRows(),children:So(e)})]},checkedInfo(e,t){const n=this.getChecks(),{checkInfo:o}=this.options;if(o)return[o.call(this,n)];const s=n.length,r=[];return s&&r.push(this.i18n("checkedCountInfo",{selected:s})),r.push(this.i18n("totalCountInfo",{total:t.allRows.length})),[w("div",{children:r.join(", ")})]}},onRenderCell(e,{row:t,col:n}){var h;const{id:o}=t,{canRowCheckable:s}=this.options,r=s?s.call(this,o):!0;if(!r)return e;const{checkbox:i}=n.setting,l=typeof i=="function"?i.call(this,o):i,c=this.isRowChecked(o);if(l){const f=(h=this.options.checkboxRender)==null?void 0:h.call(this,c,o,r==="disabled");e.push(f,{outer:!0,className:"has-checkbox"})}return c&&e.push({outer:!0,className:"is-checked"}),e},onRenderHeaderCell(e,{row:t,col:n}){var i;const{id:o}=t,{checkbox:s}=n.setting;if(typeof s=="function"?s.call(this,o):s){const l=this.isAllRowChecked(),c=(i=this.options.checkboxRender)==null?void 0:i.call(this,l,o);e.push(c,{outer:!0,className:"has-checkbox"})}return e},onHeaderCellClick(e){const t=e.target;if(!t)return;const n=t.closest(No);n&&this.toggleCheckRows(n.checked)},onCellClick(e,{rowID:t}){const n=y(e.target);if(!n.length||n.closest("btn,a,button.not-checkable,.form-control,.btn").length)return;(n.closest(No).not(".disabled").length||this.options.checkOnClickRow)&&this.toggleCheckRows(t,void 0,!0)}}),ki="",Ei="";var Ao=(e=>(e.unknown="",e.collapsed="collapsed",e.expanded="expanded",e.hidden="hidden",e.normal="normal",e))(Ao||{});function ye(e){const t=this.data.nestedMap.get(e);if(!t||t.state!=="")return t??{state:"normal",level:-1};if(!t.parent&&!t.children)return t.state="normal",t;const n=this.state.collapsedRows,o=t.children&&n&&n[e];let s=!1,{parent:r}=t;for(;r;){const i=ye.call(this,r);if(i.state!=="expanded"){s=!0;break}r=i.parent}return t.state=s?"hidden":o?"collapsed":t.children?"expanded":"normal",t.level=t.parent?ye.call(this,t.parent).level+1:0,t}function or(e){return e!==void 0?ye.call(this,e):this.data.nestedMap}function sr(e,t){let n=this.state.collapsedRows??{};const{nestedMap:o}=this.data;if(e==="HEADER")if(t===void 0&&(t=!Po.call(this)),t){const s=o.entries();for(const[r,i]of s)i.state==="expanded"&&(n[r]=!0)}else n={};else{const s=Array.isArray(e)?e:[e];t===void 0&&(t=!n[s[0]]),s.forEach(r=>{const i=o.get(r);t&&(i!=null&&i.children)?n[r]=!0:delete n[r]})}this.update({dirtyType:"layout",state:{collapsedRows:{...n}}},()=>{var s;(s=this.options.onNestedChange)==null||s.call(this)})}function Po(){const e=this.data.nestedMap.values();for(const t of e)if(t.state==="expanded")return!1;return!0}function Io(e,t=0,n,o=0){var s;n||(n=[...e.keys()]);for(const r of n){const i=e.get(r);i&&(i.level===o&&(i.order=t++),(s=i.children)!=null&&s.length&&(t=Io(e,t,i.children,o+1)))}return t}function Lo(e,t,n,o){const s=e.getNestedRowInfo(t);return!s||s.state===""||!s.children||s.children.forEach(r=>{o[r]=n,Lo(e,r,n,o)}),s}function Do(e,t,n,o,s){var l;const r=e.getNestedRowInfo(t);if(!r||r.state==="")return;((l=r.children)==null?void 0:l.every(c=>{const h=!!(o[c]!==void 0?o[c]:s[c]);return n===h}))&&(o[t]=n),r.parent&&Do(e,r.parent,n,o,s)}const rr=U({name:"nested",defaultOptions:{nested:"auto",nestedParentKey:"parent",asParentKey:"asParent",nestedIndent:20,canSortTo(e,t){const{nestedMap:n}=this.data,o=n.get(e.id),s=n.get(t.id);return(o==null?void 0:o.parent)===(s==null?void 0:s.parent)},beforeCheckRows(e,t,n){if(!this.options.checkable||!(e!=null&&e.length))return;const o={};return Object.entries(t).forEach(([s,r])=>{const i=Lo(this,s,r,o);i!=null&&i.parent&&Do(this,i.parent,r,o,n)}),o}},options(e){return e.nested==="auto"&&(e.nested=!!e.cols.some(t=>t.nestedToggle)),e},when:e=>!!e.nested,data(){return{nestedMap:new Map}},methods:{getNestedInfo:or,toggleRow:sr,isAllCollapsed:Po,getNestedRowInfo:ye},beforeLayout(){var e;(e=this.data.nestedMap)==null||e.clear()},onAddRow(e){var s,r;const{nestedMap:t}=this.data,n=String((s=e.data)==null?void 0:s[this.options.nestedParentKey??"parent"]),o=t.get(e.id)??{state:"",level:0};if(o.parent=n==="0"?void 0:n,(r=e.data)!=null&&r[this.options.asParentKey??"asParent"]&&(o.children=[]),t.set(e.id,o),n){let i=t.get(n);i||(i={state:"",level:0},t.set(n,i)),i.children||(i.children=[]),i.children.push(e.id)}},onAddRows(e){return e=e.filter(t=>this.getNestedRowInfo(t.id).state!=="hidden"),Io(this.data.nestedMap),e.sort((t,n)=>{const o=this.getNestedRowInfo(t.id),s=this.getNestedRowInfo(n.id),r=(o.order??0)-(s.order??0);return r===0?t.index-n.index:r}),e},onRenderCell(e,{col:t,row:n}){var l;const{id:o,data:s}=n,{nestedToggle:r}=t.setting,i=this.getNestedRowInfo(o);if(r&&(i.children||i.parent)&&e.push(((l=this.options.onRenderNestedToggle)==null?void 0:l.call(this,i,o,t,s))??w("a",{className:`dtable-nested-toggle state${i.children?"":" is-no-child"}`,children:w("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${i.state}`}),i.level){let{nestedIndent:c=r}=t.setting;c&&(c===!0&&(c=this.options.nestedIndent??12),e.push(w("div",{className:"dtable-nested-indent",style:{width:c*i.level+"px"}})))}return e},onRenderHeaderCell(e,{row:t,col:n}){var s;const{id:o}=t;return n.setting.nestedToggle&&e.push(((s=this.options.onRenderNestedToggle)==null?void 0:s.call(this,void 0,o,n,void 0))??w("a",{className:"dtable-nested-toggle state",children:w("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${this.isAllCollapsed()?"collapsed":"expanded"}`}),e},onHeaderCellClick(e){const t=e.target;if(!(!t||!t.closest(".dtable-nested-toggle")))return this.toggleRow("HEADER"),!0},onCellClick(e,{rowID:t}){const n=e.target;if(!(!n||!this.getNestedRowInfo(t).children||!n.closest(".dtable-nested-toggle")))return this.toggleRow(t),!0}});function ir(e){if(e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)throw new Error(`Invalid HEX color "${e}".`);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function lr(e){const[t,n,o]=typeof e=="string"?ir(e):e;return t*.299+n*.587+o*.114>186}function Wo(e,t){return lr(e)?(t==null?void 0:t.dark)??"#333333":(t==null?void 0:t.light)??"#ffffff"}function Oo(e,t=255){return Math.min(Math.max(e,0),t)}function cr(e,t,n){e=e%360/360,t=Oo(t),n=Oo(n);const o=n<=.5?n*(t+1):n+t-n*t,s=n*2-o,r=i=>(i=i<0?i+1:i>1?i-1:i,i*6<1?s+(o-s)*i*6:i*2<1?o:i*3<2?s+(o-s)*(2/3-i)*6:s);return[r(e+1/3)*255,r(e)*255,r(e-1/3)*255]}function ar(e){let t=0;if(typeof e!="string"&&(e=String(e)),e&&e.length)for(let n=0;n<e.length;++n)t+=(n+1)*e.charCodeAt(n);return t}function hr(e,t){return/^[\u4e00-\u9fa5\s]+$/.test(e)?e.length<=t?e:e.substring(e.length-t):/^[A-Za-z\d\s]+$/.test(e)?e[0].toUpperCase():e.length<=t?e:e.substring(0,t)}class fr extends B{render(){const{className:t,style:n,size:o="",circle:s,rounded:r,background:i,foreColor:l,text:c,code:h,maxTextLength:f=2,src:a,hueDistance:p=43,saturation:d=.4,lightness:u=.6,children:g,..._}=this.props,m=["avatar",t],b={...n,background:i,color:l};let x=32;o&&(typeof o=="number"?(b.width=`${o}px`,b.height=`${o}px`,b.fontSize=`${Math.max(12,Math.round(o/2))}px`,x=o):(m.push(`size-${o}`),x={xs:20,sm:24,lg:48,xl:80}[o])),s?m.push("circle"):r&&(typeof r=="number"?b.borderRadius=`${r}px`:m.push(`rounded-${r}`));let C;if(a)m.push("has-img"),C=w("img",{className:"avatar-img",src:a,alt:c});else if(c!=null&&c.length){const v=hr(c,f);if(m.push("has-text",`has-text-${v.length}`),i)!l&&i&&(b.color=Wo(i));else{const S=h??c,A=(typeof S=="number"?S:ar(S))*p%360;if(b.background=`hsl(${A},${d*100}%,${u*100}%)`,!l){const R=cr(A,d,u);b.color=Wo(R)}}let N;x&&x<14*v.length&&(N={transform:`scale(${x/(14*v.length)})`,whiteSpace:"nowrap"}),C=w("div",{"data-actualSize":x,className:"avatar-text",style:N,children:v})}return w("div",{className:P(m),style:b,..._,children:[C,g]})}}function pn(e,{row:t,col:n}){const{data:o}=t,s=o?o[n.name]:void 0;if(!(s!=null&&s.length))return e;const{avatarClass:r="rounded-full",avatarKey:i=`${n.name}Avatar`,avatarProps:l,avatarCodeKey:c,avatarNameKey:h=`${n.name}Name`}=n.setting,f=(o?o[h]:s)||e[0],a={size:"xs",className:P(r,l==null?void 0:l.className,"flex-none"),src:o?o[i]:void 0,text:f,code:c?o?o[c]:void 0:s,...l};if(e[0]=w(fr,{...a}),n.type==="avatarBtn"){const{avatarBtnProps:p}=n.setting,d=typeof p=="function"?p(n,t):p;e[0]=w("button",{type:"button",className:"btn btn-avatar",...d,children:[e[0],w("div",{children:f})]})}else n.type==="avatarName"&&(e[0]=w("div",{className:"flex items-center gap-1",children:[e[0],w("span",{children:f})]}));return e}const dr=U({name:"avatar",colTypes:{avatar:{onRenderCell:pn},avatarBtn:{onRenderCell:pn},avatarName:{onRenderCell:pn}}},{buildIn:!0}),ur=U({name:"sort-type",onRenderHeaderCell(e,t){const{col:n}=t,{sortType:o}=n.setting;if(o){const s=o===!0?"none":o;e.push(w("div",{className:`dtable-sort dtable-sort-${s}`}),{outer:!0,attrs:{"data-sort":s}});let{sortLink:r=this.options.sortLink}=n.setting;if(r){const i=s==="asc"?"desc":"asc";typeof r=="function"&&(r=r.call(this,n,i,s)),typeof r=="string"&&(r={url:r});const{url:l,...c}=r;e[0]=w("a",{href:j(l,{...n.setting,sortType:i}),...c,children:e[0]})}}return e}},{buildIn:!0}),gn=e=>{e.length!==1&&e.forEach((t,n)=>{!n||t.setting.border||t.setting.group===e[n-1].setting.group||(t.setting.border="left")})},pr=U({name:"group",defaultOptions:{groupDivider:!0},when:e=>!!e.groupDivider,onLayout(e){if(!this.options.groupDivider)return;const{cols:t}=e;gn(t.left.list),gn(t.center.list),gn(t.right.list)}}),gr=U({name:"cellspan",when:e=>!!e.getCellSpan,data(){return{cellSpanMap:new Map,overlayedCellSet:new Set}},onLayout(e){const{getCellSpan:t}=this.options;if(!t)return;const{cellSpanMap:n,overlayedCellSet:o}=this.data,{rows:s,cols:r,rowHeight:i}=e;n.clear(),o.clear();const l=(c,h,f)=>{const{index:a}=h;c.forEach((p,d)=>{const{index:u}=p,g=`C${u}R${a}`;if(o.has(g))return;const _=t.call(this,{row:h,col:p});if(!_)return;const m=Math.min(_.colSpan||1,c.length-d),b=Math.min(_.rowSpan||1,s.length-f);if(m<=1&&b<=1)return;let x=0;for(let C=0;C<m;C++){x+=c[d+C].realWidth;for(let v=0;v<b;v++){const N=`C${u+C}R${a+v}`;N!==g&&o.add(N)}}n.set(g,{colSpan:m,rowSpan:b,width:x,height:i*b})})};s.forEach((c,h)=>{["left","center","right"].forEach(f=>{l(r[f].list,c,h)})})},onRenderCell(e,{row:t,col:n}){const o=`C${n.index}R${t.index}`;if(this.data.overlayedCellSet.has(o))e.push({outer:!0,style:{display:"none",className:"cellspan-overlayed-cell"}});else{const s=this.data.cellSpanMap.get(o);s&&e.push({outer:!0,style:{width:s.width,height:s.height}})}return e}}),mr=Object.freeze(Object.defineProperty({__proto__:null,NestedRowState:Ao,avatar:dr,cellspan:gr,checkable:nr,custom:Zs,group:pr,nested:rr,renderDatetime:Co,renderDatetimeCell:Ro,renderFormat:dn,renderFormatCell:ko,renderHtmlCell:un,renderLink:fn,renderLinkCell:To,renderMapCell:Eo,rich:$s,sortType:ur},Symbol.toStringTag,{value:"Module"}));class Nt extends ro{}Nt.NAME="DTable",Nt.Component=an,Nt.definePlugin=U,Nt.removePlugin=co,Nt.plugins=mr;const Pi="",Ii="",Li="",Di="",Wi="",Oi="",zi="",Hi="",ji="";function yr({component:e="div",className:t,children:n,style:o,attrs:s}){return L(e,{className:P(t),style:o,...s},n)}function zo({type:e,component:t="a",className:n,children:o,content:s,attrs:r,url:i,disabled:l,active:c,icon:h,text:f,target:a,trailingIcon:p,hint:d,checked:u,onClick:g,data:_,...m}){const b=[typeof u=="boolean"?w("div",{class:`checkbox-primary${u?" checked":""}`,children:w("label",{})}):null,w(ft,{icon:h}),f?w("span",{className:"text",children:f}):null,w(le,{content:s}),o,w(ft,{icon:p})];return L(t,{className:P(n,{disabled:l,active:c}),title:d,[t==="a"?"href":"data-url"]:l?void 0:i,[t==="a"?"target":"data-target"]:l?void 0:a,onClick:g,...m,...r},...b)}function wr({component:e="div",className:t,text:n,attrs:o,children:s,content:r,style:i,onClick:l}){return L(e,{className:P(t),style:i,onClick:l,...o},n,w(le,{content:r}),s)}function br({component:e="div",className:t,style:n,space:o,flex:s,attrs:r,onClick:i,children:l}){return L(e,{className:P(t),style:{width:o,height:o,flex:s,...n},onClick:i,...r},l)}function _r({type:e,...t}){return w(Ge,{...t})}function Ho({component:e="div",className:t,children:n,content:o,style:s,attrs:r}){return L(e,{className:P(t),style:s,...r},w(le,{content:o}),n)}const we=class Nn extends B{constructor(){super(...arguments),this.ref=bt()}get name(){return this.props.name??this.constructor.NAME}componentDidMount(){this.afterRender(!0)}componentDidUpdate(){this.afterRender(!1)}componentWillUnmount(){var t,n;(n=(t=this.props).beforeDestroy)==null||n.call(t,{menu:this})}afterRender(t){var n,o;(o=(n=this.props).afterRender)==null||o.call(n,{menu:this,firstRender:t})}handleItemClick(t,n,o,s){o&&o.call(s.target,s,t,n);const{onClickItem:r}=this.props;r&&r({menu:this,item:t,index:n,event:s})}beforeRender(){var o;const t={...this.props};typeof t.items=="function"&&(t.items=t.items(this)),t.items||(t.items=[]);const n=(o=t.beforeRender)==null?void 0:o.call(t,{menu:this,options:t});return n&&Object.assign(t,n),t}getItemRenderProps(t,n,o){const{commonItemProps:s,onClickItem:r,itemRenderProps:i}=t;let l={...n};return s&&Object.assign(l,s[n.type||"item"]),(r||n.onClick)&&(l.onClick=this.handleItemClick.bind(this,l,o,n.onClick)),l.className=P(l.className),i&&(l=i(l)),l}renderItem(t,n,o){if(!n)return null;const s=this.getItemRenderProps(t,n,o),{itemRender:r}=t;if(r){if(typeof r=="object"){const g=r[n.type||"item"];if(g)return w(g,{...s})}else if(typeof r=="function"){const g=r.call(this,s,L);if(at(g))return g;typeof g=="object"&&Object.assign(s,g)}}const{type:i="item",component:l,key:c=o,rootAttrs:h,rootClass:f,rootStyle:a,rootChildren:p,...d}=s;if(i==="html")return w("li",{className:P("action-menu-item",`${this.name}-html`,f,d.className),...h,style:a||d.style,dangerouslySetInnerHTML:{__html:d.html}},c);const u=!l||typeof l=="string"?this.constructor.ItemComponents&&this.constructor.ItemComponents[i]||Nn.ItemComponents[i]:l;return Object.assign(d,{type:i,component:typeof l=="string"?l:void 0}),t.checkbox&&i==="item"&&d.checked===void 0&&(d.checked=!!d.active),this.renderTypedItem(u,{className:P(f),children:p,style:a,key:c,...h},{...d,type:i,component:typeof l=="string"?l:void 0})}renderTypedItem(t,n,o){const{children:s,className:r,key:i,...l}=n;return w("li",{className:P(`${this.constructor.NAME}-item`,`${this.name}-${o.type}`,r),...l,children:[w(t,{...o}),typeof s=="function"?s():s]},i)}render(){const t=this.beforeRender(),{name:n,style:o,commonItemProps:s,className:r,items:i,children:l,itemRender:c,onClickItem:h,beforeRender:f,afterRender:a,beforeDestroy:p,compact:d,...u}=t,g=this.constructor.ROOT_TAG;return w(g,{class:P(this.name,r,d?"compact":""),style:o,...u,ref:this.ref,children:[i&&i.map(this.renderItem.bind(this,t)),l]})}};we.ItemComponents={divider:yr,item:zo,heading:wr,space:br,custom:_r,basic:Ho},we.ROOT_TAG="menu",we.NAME="action-menu";let jo=we;const Bi="";class xt extends Ve{_beforeRender(t){const{text:n,loading:o,loadingText:s,caret:r,icon:i,trailingIcon:l,children:c}=t;this._isEmptyText=n==null||typeof n=="string"&&!n.length||o&&!s,this._onlyCaret=r&&this._isEmptyText&&!i&&!l&&!c&&!o}_getChildren(t){const{loading:n,loadingIcon:o,loadingText:s,icon:r,text:i,children:l,trailingIcon:c,caret:h}=t;return[n?w(ft,{icon:o||"icon-spinner-snake",className:"spin"}):w(ft,{icon:r}),this._isEmptyText?null:w("span",{className:"text",children:n?s:i}),n?null:l,n?null:w(ft,{icon:c}),n?null:h?w("span",{className:typeof h=="string"?`caret-${h}`:"caret"}):null]}_getClassName(t){const{type:n,className:o,disabled:s,loading:r,active:i,children:l,square:c,size:h,rounded:f}=t;return P("btn",n,o,{"btn-caret":this._onlyCaret,disabled:s||r,active:i,loading:r,square:c===void 0?!this._onlyCaret&&!l&&this._isEmptyText:c},h?`size-${h}`:"",typeof f=="string"?f:{rounded:f})}_getComponent(t){return t.component||(t.url?"a":"button")}_getProps(t){const n=this._getComponent(t),{url:o,target:s,disabled:r,btnType:i="button",hint:l}=t,c={...super._getProps(t),disabled:r,title:l,type:n==="button"?i:void 0};return r||(o!==void 0&&(c[n==="a"?"href":"data-url"]=o),s!==void 0&&(c[n==="a"?"target":"data-target"]=s)),c}}function vr({key:e,type:t,btnType:n,...o}){return w(xt,{type:n,...o})}const Fi="",Ui="";let xr=class extends B{render(t){const{id:n,popup:o,title:s,content:r,style:i,className:l,closeBtn:c,arrow:h,headingClass:f,titleClass:a,contentClass:p,arrowStyle:d,onlyInner:u}=t;let g=w(le,{content:r},"content");(p||s)&&(g=w("div",{className:p,children:g},"content"));const _=[],m=c?w("button",{className:"btn ghost square size-sm btn-close","data-dismiss":"popover",children:w("span",{className:"close"})}):null;return s?_.push(w("div",{className:f,children:[s?w("div",{className:a,children:s}):null,m]},"heading")):_.push(m),_.push(g),h&&_.push(w("div",{className:typeof h=="string"?h:"arrow",style:d},"arrow")),u?_:w("div",{id:n,className:P("popover",l,{popup:o}),style:i,children:_})}};class mn extends ro{}mn.NAME="PopoverPanel",mn.Component=xr;const At=Math.min,Ct=Math.max,be=Math.round,_e=Math.floor,ut=e=>({x:e,y:e}),Cr={left:"right",right:"left",bottom:"top",top:"bottom"},Tr={start:"end",end:"start"};function yn(e,t,n){return Ct(e,At(t,n))}function Gt(e,t){return typeof e=="function"?e(t):e}function Tt(e){return e.split("-")[0]}function qt(e){return e.split("-")[1]}function Bo(e){return e==="x"?"y":"x"}function wn(e){return e==="y"?"height":"width"}function ve(e){return["top","bottom"].includes(Tt(e))?"y":"x"}function bn(e){return Bo(ve(e))}function kr(e,t,n){n===void 0&&(n=!1);const o=qt(e),s=bn(e),r=wn(s);let i=s==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=xe(i)),[i,xe(i)]}function Er(e){const t=xe(e);return[_n(e),t,_n(t)]}function _n(e){return e.replace(/start|end/g,t=>Tr[t])}function Rr(e,t,n){const o=["left","right"],s=["right","left"],r=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:o:t?o:s;case"left":case"right":return t?r:i;default:return[]}}function Mr(e,t,n,o){const s=qt(e);let r=Rr(Tt(e),n==="start",o);return s&&(r=r.map(i=>i+"-"+s),t&&(r=r.concat(r.map(_n)))),r}function xe(e){return e.replace(/left|right|bottom|top/g,t=>Cr[t])}function Sr(e){return{top:0,right:0,bottom:0,left:0,...e}}function Fo(e){return typeof e!="number"?Sr(e):{top:e,right:e,bottom:e,left:e}}function Ce(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Uo(e,t,n){let{reference:o,floating:s}=e;const r=ve(t),i=bn(t),l=wn(i),c=Tt(t),h=r==="y",f=o.x+o.width/2-s.width/2,a=o.y+o.height/2-s.height/2,p=o[l]/2-s[l]/2;let d;switch(c){case"top":d={x:f,y:o.y-s.height};break;case"bottom":d={x:f,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:a};break;case"left":d={x:o.x-s.width,y:a};break;default:d={x:o.x,y:o.y}}switch(qt(t)){case"start":d[i]-=p*(n&&h?-1:1);break;case"end":d[i]+=p*(n&&h?-1:1);break}return d}const Nr=async(e,t,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:r=[],platform:i}=n,l=r.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let h=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:a}=Uo(h,o,c),p=o,d={},u=0;for(let g=0;g<l.length;g++){const{name:_,fn:m}=l[g],{x:b,y:x,data:C,reset:v}=await m({x:f,y:a,initialPlacement:o,placement:p,strategy:s,middlewareData:d,rects:h,platform:i,elements:{reference:e,floating:t}});if(f=b??f,a=x??a,d={...d,[_]:{...d[_],...C}},v&&u<=50){u++,typeof v=="object"&&(v.placement&&(p=v.placement),v.rects&&(h=v.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):v.rects),{x:f,y:a}=Uo(h,p,c)),g=-1;continue}}return{x:f,y:a,placement:p,strategy:s,middlewareData:d}};async function Vo(e,t){var n;t===void 0&&(t={});const{x:o,y:s,platform:r,rects:i,elements:l,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:a="floating",altBoundary:p=!1,padding:d=0}=Gt(t,e),u=Fo(d),_=l[p?a==="floating"?"reference":"floating":a],m=Ce(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(_)))==null||n?_:_.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:c})),b=a==="floating"?{...i.floating,x:o,y:s}:i.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),C=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},v=Ce(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:x,strategy:c}):b);return{top:(m.top-v.top+u.top)/C.y,bottom:(v.bottom-m.bottom+u.bottom)/C.y,left:(m.left-v.left+u.left)/C.x,right:(v.right-m.right+u.right)/C.x}}const Ar=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:s,rects:r,platform:i,elements:l}=t,{element:c,padding:h=0}=Gt(e,t)||{};if(c==null)return{};const f=Fo(h),a={x:n,y:o},p=bn(s),d=wn(p),u=await i.getDimensions(c),g=p==="y",_=g?"top":"left",m=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=r.reference[d]+r.reference[p]-a[p]-r.floating[d],C=a[p]-r.reference[p],v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let N=v?v[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(v)))&&(N=l.floating[b]||r.floating[d]);const S=x/2-C/2,A=N/2-u[d]/2-1,R=At(f[_],A),T=At(f[m],A),M=R,I=N-u[d]-T,k=N/2-u[d]/2+S,W=yn(M,k,I),Q=qt(s)!=null&&k!=W&&r.reference[d]/2-(k<M?R:T)-u[d]/2<0?k<M?M-k:I-k:0;return{[p]:a[p]-Q,data:{[p]:W,centerOffset:k-W+Q}}}}),Yo=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:o,middlewareData:s,rects:r,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:a,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:u=!0,...g}=Gt(e,t),_=Tt(o),m=Tt(i)===i,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=a||(m||!u?[xe(i)]:Er(i));!a&&d!=="none"&&x.push(...Mr(i,u,d,b));const C=[i,...x],v=await Vo(t,g),N=[];let S=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&N.push(v[_]),f){const M=kr(o,r,b);N.push(v[M[0]],v[M[1]])}if(S=[...S,{placement:o,overflows:N}],!N.every(M=>M<=0)){var A,R;const M=(((A=s.flip)==null?void 0:A.index)||0)+1,I=C[M];if(I)return{data:{index:M,overflows:S},reset:{placement:I}};let k=(R=S.filter(W=>W.overflows[0]<=0).sort((W,Y)=>W.overflows[1]-Y.overflows[1])[0])==null?void 0:R.placement;if(!k)switch(p){case"bestFit":{var T;const W=(T=S.map(Y=>[Y.placement,Y.overflows.filter(Q=>Q>0).reduce((Q,yi)=>Q+yi,0)]).sort((Y,Q)=>Y[1]-Q[1])[0])==null?void 0:T[0];W&&(k=W);break}case"initialPlacement":k=i;break}if(o!==k)return{reset:{placement:k}}}return{}}}};async function Pr(e,t){const{placement:n,platform:o,elements:s}=e,r=await(o.isRTL==null?void 0:o.isRTL(s.floating)),i=Tt(n),l=qt(n),c=ve(n)==="y",h=["left","top"].includes(i)?-1:1,f=r&&c?-1:1,a=Gt(t,e);let{mainAxis:p,crossAxis:d,alignmentAxis:u}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return l&&typeof u=="number"&&(d=l==="end"?u*-1:u),c?{x:d*f,y:p*h}:{x:p*h,y:d*f}}const Go=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:o}=t,s=await Pr(t,e);return{x:n+s.x,y:o+s.y,data:s}}}},qo=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:s}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:l={fn:_=>{let{x:m,y:b}=_;return{x:m,y:b}}},...c}=Gt(e,t),h={x:n,y:o},f=await Vo(t,c),a=ve(Tt(s)),p=Bo(a);let d=h[p],u=h[a];if(r){const _=p==="y"?"top":"left",m=p==="y"?"bottom":"right",b=d+f[_],x=d-f[m];d=yn(b,d,x)}if(i){const _=a==="y"?"top":"left",m=a==="y"?"bottom":"right",b=u+f[_],x=u-f[m];u=yn(b,u,x)}const g=l.fn({...t,[p]:d,[a]:u});return{...g,data:{x:g.x-n,y:g.y-o}}}}};function pt(e){return Ko(e)?(e.nodeName||"").toLowerCase():"#document"}function V(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ot(e){var t;return(t=(Ko(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ko(e){return e instanceof Node||e instanceof V(e).Node}function st(e){return e instanceof Element||e instanceof V(e).Element}function X(e){return e instanceof HTMLElement||e instanceof V(e).HTMLElement}function $o(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof V(e).ShadowRoot}function Kt(e){const{overflow:t,overflowX:n,overflowY:o,display:s}=q(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(s)}function Ir(e){return["table","td","th"].includes(pt(e))}function vn(e){const t=xn(),n=q(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Lr(e){let t=Pt(e);for(;X(t)&&!Te(t);){if(vn(t))return t;t=Pt(t)}return null}function xn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Te(e){return["html","body","#document"].includes(pt(e))}function q(e){return V(e).getComputedStyle(e)}function ke(e){return st(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Pt(e){if(pt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$o(e)&&e.host||ot(e);return $o(t)?t.host:t}function Xo(e){const t=Pt(e);return Te(t)?e.ownerDocument?e.ownerDocument.body:e.body:X(t)&&Kt(t)?t:Xo(t)}function Ee(e,t){var n;t===void 0&&(t=[]);const o=Xo(e),s=o===((n=e.ownerDocument)==null?void 0:n.body),r=V(o);return s?t.concat(r,r.visualViewport||[],Kt(o)?o:[]):t.concat(o,Ee(o))}function Zo(e){const t=q(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=X(e),r=s?e.offsetWidth:n,i=s?e.offsetHeight:o,l=be(n)!==r||be(o)!==i;return l&&(n=r,o=i),{width:n,height:o,$:l}}function Cn(e){return st(e)?e:e.contextElement}function It(e){const t=Cn(e);if(!X(t))return ut(1);const n=t.getBoundingClientRect(),{width:o,height:s,$:r}=Zo(t);let i=(r?be(n.width):n.width)/o,l=(r?be(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Dr=ut(0);function Jo(e){const t=V(e);return!xn()||!t.visualViewport?Dr:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Wr(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==V(e)?!1:t}function kt(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=Cn(e);let i=ut(1);t&&(o?st(o)&&(i=It(o)):i=It(e));const l=Wr(r,n,o)?Jo(r):ut(0);let c=(s.left+l.x)/i.x,h=(s.top+l.y)/i.y,f=s.width/i.x,a=s.height/i.y;if(r){const p=V(r),d=o&&st(o)?V(o):o;let u=p.frameElement;for(;u&&o&&d!==p;){const g=It(u),_=u.getBoundingClientRect(),m=q(u),b=_.left+(u.clientLeft+parseFloat(m.paddingLeft))*g.x,x=_.top+(u.clientTop+parseFloat(m.paddingTop))*g.y;c*=g.x,h*=g.y,f*=g.x,a*=g.y,c+=b,h+=x,u=V(u).frameElement}}return Ce({width:f,height:a,x:c,y:h})}function Or(e){let{rect:t,offsetParent:n,strategy:o}=e;const s=X(n),r=ot(n);if(n===r)return t;let i={scrollLeft:0,scrollTop:0},l=ut(1);const c=ut(0);if((s||!s&&o!=="fixed")&&((pt(n)!=="body"||Kt(r))&&(i=ke(n)),X(n))){const h=kt(n);l=It(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-i.scrollLeft*l.x+c.x,y:t.y*l.y-i.scrollTop*l.y+c.y}}function zr(e){return Array.from(e.getClientRects())}function Qo(e){return kt(ot(e)).left+ke(e).scrollLeft}function Hr(e){const t=ot(e),n=ke(e),o=e.ownerDocument.body,s=Ct(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=Ct(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let i=-n.scrollLeft+Qo(e);const l=-n.scrollTop;return q(o).direction==="rtl"&&(i+=Ct(t.clientWidth,o.clientWidth)-s),{width:s,height:r,x:i,y:l}}function jr(e,t){const n=V(e),o=ot(e),s=n.visualViewport;let r=o.clientWidth,i=o.clientHeight,l=0,c=0;if(s){r=s.width,i=s.height;const h=xn();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:r,height:i,x:l,y:c}}function Br(e,t){const n=kt(e,!0,t==="fixed"),o=n.top+e.clientTop,s=n.left+e.clientLeft,r=X(e)?It(e):ut(1),i=e.clientWidth*r.x,l=e.clientHeight*r.y,c=s*r.x,h=o*r.y;return{width:i,height:l,x:c,y:h}}function ts(e,t,n){let o;if(t==="viewport")o=jr(e,n);else if(t==="document")o=Hr(ot(e));else if(st(t))o=Br(t,n);else{const s=Jo(e);o={...t,x:t.x-s.x,y:t.y-s.y}}return Ce(o)}function es(e,t){const n=Pt(e);return n===t||!st(n)||Te(n)?!1:q(n).position==="fixed"||es(n,t)}function Fr(e,t){const n=t.get(e);if(n)return n;let o=Ee(e).filter(l=>st(l)&&pt(l)!=="body"),s=null;const r=q(e).position==="fixed";let i=r?Pt(e):e;for(;st(i)&&!Te(i);){const l=q(i),c=vn(i);!c&&l.position==="fixed"&&(s=null),(r?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Kt(i)&&!c&&es(e,i))?o=o.filter(f=>f!==i):s=l,i=Pt(i)}return t.set(e,o),o}function Ur(e){let{element:t,boundary:n,rootBoundary:o,strategy:s}=e;const i=[...n==="clippingAncestors"?Fr(t,this._c):[].concat(n),o],l=i[0],c=i.reduce((h,f)=>{const a=ts(t,f,s);return h.top=Ct(a.top,h.top),h.right=At(a.right,h.right),h.bottom=At(a.bottom,h.bottom),h.left=Ct(a.left,h.left),h},ts(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Vr(e){return Zo(e)}function Yr(e,t,n){const o=X(t),s=ot(t),r=n==="fixed",i=kt(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const c=ut(0);if(o||!o&&!r)if((pt(t)!=="body"||Kt(s))&&(l=ke(t)),o){const h=kt(t,!0,r,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=Qo(s));return{x:i.left+l.scrollLeft-c.x,y:i.top+l.scrollTop-c.y,width:i.width,height:i.height}}function ns(e,t){return!X(e)||q(e).position==="fixed"?null:t?t(e):e.offsetParent}function os(e,t){const n=V(e);if(!X(e))return n;let o=ns(e,t);for(;o&&Ir(o)&&q(o).position==="static";)o=ns(o,t);return o&&(pt(o)==="html"||pt(o)==="body"&&q(o).position==="static"&&!vn(o))?n:o||Lr(e)||n}const Gr=async function(e){let{reference:t,floating:n,strategy:o}=e;const s=this.getOffsetParent||os,r=this.getDimensions;return{reference:Yr(t,await s(n),o),floating:{x:0,y:0,...await r(n)}}};function qr(e){return q(e).direction==="rtl"}const Kr={convertOffsetParentRelativeRectToViewportRelativeRect:Or,getDocumentElement:ot,getClippingRect:Ur,getOffsetParent:os,getElementRects:Gr,getClientRects:zr,getDimensions:Vr,getScale:It,isElement:st,isRTL:qr};function $r(e,t){let n=null,o;const s=ot(e);function r(){clearTimeout(o),n&&n.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),r();const{left:h,top:f,width:a,height:p}=e.getBoundingClientRect();if(l||t(),!a||!p)return;const d=_e(f),u=_e(s.clientWidth-(h+a)),g=_e(s.clientHeight-(f+p)),_=_e(h),b={rootMargin:-d+"px "+-u+"px "+-g+"px "+-_+"px",threshold:Ct(0,At(1,c))||1};let x=!0;function C(v){const N=v[0].intersectionRatio;if(N!==c){if(!x)return i();N?i(!1,N):o=setTimeout(()=>{i(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(e)}return i(!0),r}function Xr(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,h=Cn(e),f=s||r?[...h?Ee(h):[],...Ee(t)]:[];f.forEach(m=>{s&&m.addEventListener("scroll",n,{passive:!0}),r&&m.addEventListener("resize",n)});const a=h&&l?$r(h,n):null;let p=-1,d=null;i&&(d=new ResizeObserver(m=>{let[b]=m;b&&b.target===h&&d&&(d.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{d&&d.observe(t)})),n()}),h&&!c&&d.observe(h),d.observe(t));let u,g=c?kt(e):null;c&&_();function _(){const m=kt(e);g&&(m.x!==g.x||m.y!==g.y||m.width!==g.width||m.height!==g.height)&&n(),g=m,u=requestAnimationFrame(_)}return n(),()=>{f.forEach(m=>{s&&m.removeEventListener("scroll",n),r&&m.removeEventListener("resize",n)}),a&&a(),d&&d.disconnect(),d=null,c&&cancelAnimationFrame(u)}}const ss=(e,t,n)=>{const o=new Map,s={platform:Kr,...n},r={...s.platform,_c:o};return Nr(e,t,{...s,platform:r})},Zr='[data-toggle="popover"]',rs="show",is="in";class Z extends ce{constructor(){super(...arguments),this._getClickBounding=()=>{const t=this._triggerEvent;return{x:t.clientX,y:t.clientY,left:t.clientX,top:t.clientY,width:0,height:0,bottom:t.clientY,right:t.clientX}},this._onClickDoc=t=>{const n=y(t.target);(!n.closest(`#${this._id}`).length&&this._targetElement!==n.closest(".popover")[0]||n.closest('[data-dismiss="popover"]').length)&&this.hide()}}get shown(){return this._shown}get id(){return this._id}afterInit(){const{trigger:t,id:n,triggerEvent:o}=this.options;this._triggerEvent=o,this._id=n||`popover_${this.gid}`;const s=this.getTriggerElement();if(s instanceof HTMLElement){const i=y(s),{namespace:l}=this;t==="hover"?i.on(`mouseenter${l}`,c=>{this.show({delay:!0,event:c})}).on(`mouseleave${l}`,()=>{this.delayHide()}):t&&i.on(`${t}${l}`,c=>{this.toggle({event:c}),c.preventDefault()})}const{show:r}=this.options;r&&this.show({delay:typeof r=="number"?r:!1})}getTriggerElement(){if(!this._triggerElement){let{element:t=this.element}=this.options;t===document.body&&(t={getBoundingClientRect:this._getClickBounding}),this._triggerElement=t,this._virtual=!(t instanceof HTMLElement)}return this._triggerElement}initTarget(){let t=this.options.target;return this._dynamic=!t,t?(typeof t=="function"&&(t=t()),y(t)[0]):this._createTarget()}show(t){const{delay:n,event:o}=t||{};if(o&&(this._triggerEvent=o),n)return this._resetTimer(()=>{this.show()},n===!0?this.options.delay:n);if(!this.inited){this.setOptions({show:!0});return}if(this._shown)return;const s=this.initTarget();if(!s)return;this._targetElement=s;const r=y(s),{animation:i,mask:l,onShow:c,onShown:h,trigger:f}=this.options;if(r.addClass(rs),i&&r.addClass(i===!0?"fade":i),this._shown=!0,this.render(),c==null||c.call(this),this.emit("show"),f==="hover"){this._clearDelayHide();const{namespace:a}=this;r.on(`mouseenter${a}`,()=>{this._clearDelayHide()}).on(`mouseleave${a}`,()=>{this.delayHide()})}this._virtual||y(this._triggerElement).addClass("with-popover-show"),this._resetTimer(()=>{r.addClass(is),this._resetTimer(()=>{h==null||h.call(this),this.emit("shown")},200),l&&y(document).on(`click${this.namespace}`,this._onClickDoc)},50)}hide(){(!this._shown||!this._targetElement)&&this._resetTimer();const{destroyOnHide:t,animation:n,onHide:o,onHidden:s,trigger:r}=this.options,i=y(this._targetElement);this._shown=!1,o==null||o.call(this),this.emit("hide"),i.removeClass(is),r==="hover"&&(this._clearDelayHide(),i.off(this.namespace)),this._virtual||y(this._triggerElement).removeClass("with-popover-show").removeAttr("data-popover-placement"),y(document).off(this.namespace),this._resetTimer(()=>{s==null||s.call(this),this.emit("hidden"),i.removeClass(rs),t&&this._resetTimer(()=>{this.destroy()},typeof t=="number"?t:0),this._destoryTarget()},n?200:0)}toggle(t){this._shown?this.hide():this.show(t)}destroy(){if(super.destroy(),y(document).off(this.namespace),!this._virtual){const{namespace:t}=this;y(this._triggerElement).off(t)}this._resetTimer(),this._destoryTarget(),this._clearDelayHide()}layout(){const t=this._triggerElement,n=this._targetElement,o=this._layoutWatcher;if(!n||!t||!this._shown){o&&(o(),this._layoutWatcher=void 0);return}o||(this._layoutWatcher=Xr(t,n,()=>{const{width:s,animation:r,name:i="popover"}=this.options;s==="100%"&&!this._virtual&&y(n).css({width:y(t).width()}),ss(...this._getLayoutOptions()).then(({x:l,y:c,middlewareData:h,placement:f,strategy:a})=>{const p=y(n).css({position:a,left:l,top:c}),d=f.split("-")[0],u={top:"bottom",right:"left",bottom:"top",left:"right"}[d],g=h.arrow;g&&p.find(".arrow").css({left:g.x,top:g.y}).attr("class",`arrow ${i}-arrow arrow-${u}`),r===!0&&p.attr("class",`${p.attr("class").split(" ").filter(_=>_!=="fade"&&!_.startsWith("fade-from")).join(" ")} fade-from-${u}`),this._virtual||y(this._triggerElement).attr("data-popover-placement",d)})}))}render(t){super.render(t);const n=this._targetElement;if(!n)return;const o=this._getRenderOptions(),s=y(n);if(s.toggleClass("popup",o.popup).css(o.style),o.className&&s.setClass(o.className),this._dynamic){let r=this._panel;r&&r.element!==n&&(r.destroy(),r=void 0),r?r.render(o):(r=new mn(n,o),r.on("inited",()=>this.layout())),this._panel=r}else o.arrow&&(s.find(".arrow").length||s.append(y('<div class="arrow"></div>').css(o.arrowStyle))),this.layout()}delayHide(t=100){this._hideTimer=window.setTimeout(()=>{this._hideTimer=0,this.hide()},t)}_clearDelayHide(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=0)}_getLayoutOptions(){const t=this._triggerElement,n=this._targetElement,{placement:o,flip:s,shift:r,offset:i,arrow:l,strategy:c}=this.options,h=l?n.querySelector(".arrow"):null,f=h?typeof l=="number"?l:5:0;return[t,n,{placement:o,strategy:c,middleware:[s?Yo():null,r?qo(typeof r=="object"?r:void 0):null,i||f?Go((i||0)+f):null,l?Ar({element:h}):null].filter(Boolean)}]}_getRenderOptions(){const{name:t="popover"}=this.options,{popup:n,title:o,content:s,headingClass:r=`${t}-heading`,titleClass:i=`${t}-title`,contentClass:l=`${t}-content`,style:c,className:h=t,closeBtn:f,arrow:a}=this.options;return{popup:n,title:o,titleClass:i,headingClass:r,contentClass:l,content:s,style:{zIndex:this.constructor.Z_INDEX++,...c},className:h,closeBtn:f,arrow:a?`arrow ${t}-arrow`:!1,arrowStyle:{"--arrow-size":`${typeof a=="number"?a:5}px`},onlyInner:!0}}_destoryTarget(){var t,n,o;(t=this._layoutWatcher)==null||t.call(this),this._layoutWatcher=void 0,this._dynamic&&((n=this._panel)==null||n.destroy(),(o=this._targetElement)==null||o.remove(),this._panel=void 0,this._targetElement=void 0)}_resetTimer(t,n=0){this._timer&&clearTimeout(this._timer),t&&(this._timer=window.setTimeout(()=>{this._timer=0,t()},n))}_createTarget(){const{container:t="body"}=this.options,n=y(t);let o=n.find(`#${this._id}`);return o.length||(o=y("<div />").attr({id:this._id,class:"popover"}).appendTo(n)),o[0]}static show(t){const{element:n,event:o,...s}=t,r=n||(o==null?void 0:o.currentTarget);return this.ensure(r instanceof HTMLElement?r:document.body,{element:r,show:!0,destroyOnHide:!0,triggerEvent:o,...s})}}Z.NAME="Popover",Z.Z_INDEX=1700,Z.MULTI_INSTANCE=!0,Z.DEFAULT={placement:"top",strategy:"absolute",flip:!0,arrow:!0,offset:1,trigger:"click",mask:!0,delay:0,animation:!0,closeBtn:!0,popup:!0},y(document).on(`click${Z.NAMESPACE} mouseenter${Z.NAMESPACE}`,Zr,e=>{const t=y(e.currentTarget);if(t.length&&!t.data(Z.KEY)){const n=t.data("trigger")||"click";if((e.type==="mouseover"?"hover":"click")!==n)return;Z.ensure(t,{show:!0,triggerEvent:e}),e.preventDefault()}});const Vi="";class Re extends Z{constructor(){super(...arguments),this._onClickDoc=t=>{y(t.target).closest(".not-hide-menu,.form-control,input,label").length||this.hide()}}_getMenuOptions(){let{items:t=[]}=this.options;return typeof t=="function"&&(t=t(this)),{items:t,nestedTrigger:"hover",placement:this.options.placement,popup:!1,...this.options.menu}}_getRenderOptions(){return{...super._getRenderOptions(),contentClass:"",content:L(us,this._getMenuOptions())}}}Re.NAME="Dropdown",Re.DEFAULT={...Z.DEFAULT,name:"dropdown",placement:"bottom-start",arrow:!1,closeBtn:!1,animation:"fade"};class Tn extends xt{constructor(){super(...arguments),this._ref=bt()}get triggerElement(){return this._ref.current}_updateData(){const{dropdown:t,items:n}=this.props,o=y(this.triggerElement),s=Re.get(this.triggerElement),r={items:n,...t};s?s.setOptions(r):o.data(r)}componentDidMount(){this._updateData()}componentDidUpdate(){this._updateData()}componentWillUnmount(){var t;(t=Re.get(this.triggerElement))==null||t.destroy()}_getProps(t){const{trigger:n,placement:o}=t;return{...super._getProps(t),"data-toggle":"dropdown","data-trigger":n,"data-placement":o,ref:this._ref}}}Tn.defaultProps={caret:!0};function Jr({items:e,show:t,level:n,...o}){return w(zo,{...o})}var ls=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},$=(e,t,n)=>(ls(e,t,"read from private field"),n?n.call(e):t.get(e)),kn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Qr=(e,t,n,o)=>(ls(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),Me,rt,$t;class cs extends jo{constructor(t){super(t),kn(this,Me,new Set),kn(this,rt,void 0),kn(this,$t,(n,o,s)=>{y(s.target).closest(".not-nested-toggle").length||(this.toggle(n,o),s.preventDefault())}),Qr(this,rt,t.nestedShow===void 0),$(this,rt)&&(this.state={nestedShow:t.defaultNestedShow??{}})}get nestedTrigger(){return this.props.nestedTrigger}beforeRender(){const t=super.beforeRender(),{nestedShow:n,nestedTrigger:o,defaultNestedShow:s,controlledMenu:r,indent:i,...l}=t;return typeof l.items=="function"&&(l.items=l.items(this)),l.items||(l.items=[]),l.items.some(c=>c.items)||(l.className=P(l.className,"no-nested-items")),!r&&i&&(l.style=Object.assign({[`--${this.name}-indent`]:`${i}px`},l.style)),l}getNestedMenuProps(t){const{name:n,controlledMenu:o,nestedShow:s,beforeDestroy:r,beforeRender:i,itemRender:l,onClickItem:c,afterRender:h,commonItemProps:f,level:a,itemRenderProps:p}=this.props;return{items:t,name:n,nestedShow:$(this,rt)?this.state.nestedShow:s,nestedTrigger:this.nestedTrigger,controlledMenu:o||this,commonItemProps:f,onClickItem:c,afterRender:h,beforeRender:i,beforeDestroy:r,itemRender:l,itemRenderProps:p,level:(a||0)+1}}renderNestedMenu(t){let{items:n}=t;if(!n||(typeof n=="function"&&(n=n(t,this)),!n.length))return;const o=this.constructor,s=this.getNestedMenuProps(n);return w(o,{...s,"data-level":s.level,style:{"--level":s.level}})}isNestedItem(t){return(!t.type||t.type==="item")&&!!t.items}renderToggleIcon(t,n){}getItemRenderProps(t,n,o){const s=super.getItemRenderProps(t,n,o);if(s.level=t.level||0,!this.isNestedItem(s))return s;const r=s.key??s.id??`${t.level||0}:${o}`;$(this,Me).add(r);const i=this.isExpanded(r);if(i&&(s.rootChildren=[s.rootChildren,this.renderNestedMenu(n)]),this.nestedTrigger==="hover")s.rootAttrs={...s.rootAttrs,onMouseEnter:$(this,$t).bind(this,r,!0),onMouseLeave:$(this,$t).bind(this,r,!1)};else if(this.nestedTrigger==="click"){const{onClick:c}=s;s.onClick=h=>{$(this,$t).call(this,r,void 0,h),c==null||c(h)}}const l=this.renderToggleIcon(i,s);return l&&(s.children=[s.children,l]),s.show=i,s.rootClass=[s.rootClass,"has-nested-menu",i?"show":""],s}isExpanded(t){const n=$(this,rt)?this.state.nestedShow:this.props.nestedShow;return n&&typeof n=="object"?n[t]:!!n}toggle(t,n){const{controlledMenu:o}=this.props;if(o)return o.toggle(t,n);if(!$(this,rt))return!1;let{nestedShow:s={}}=this.state;if(typeof s=="boolean"&&(s===!0?s=[...$(this,Me).values()].reduce((r,i)=>(r[i]=!0,r),{}):s={}),n===void 0)n=!s[t];else if(!!s[t]==!!n)return!1;return n?s[t]=n:delete s[t],this.setState({nestedShow:{...s}}),!0}expand(t){return this.toggle(t,!0)}collapse(t){return this.toggle(t,!1)}expandAll(){$(this,rt)&&this.setState({nestedShow:!0})}collapseAll(){$(this,rt)&&this.setState({nestedShow:!1})}}Me=new WeakMap,rt=new WeakMap,$t=new WeakMap,cs.ItemComponents={item:Jr};const Yi="";class as extends cs{get nestedTrigger(){return this.props.nestedTrigger||"click"}get menuName(){return"menu-nested"}beforeRender(){const t=super.beforeRender();let{hasIcons:n}=t;return n===void 0&&(n=t.items.some(o=>o.icon)),t.className=P(t.className,this.menuName,{"has-icons":n,"has-nested-items":t.items.some(o=>this.isNestedItem(o)),popup:t.popup}),t}renderToggleIcon(t){return w("span",{class:`${this.name}-toggle-icon caret-${t?"down":"right"}`})}}as.NAME="menu";const Gi="",qi="";var En=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},J=(e,t,n)=>(En(e,t,"read from private field"),n?n.call(e):t.get(e)),Et=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Se=(e,t,n,o)=>(En(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),hs=(e,t,n)=>(En(e,t,"access private method"),n),Ne,Ae,Rt,Rn,Pe,Ie,Le,Mn;class fs extends B{constructor(t){super(t),Et(this,Le),Et(this,Ne,void 0),Et(this,Ae,bt()),Et(this,Rt,0),Et(this,Rn,n=>{const o=this.state.value;n.stopPropagation(),this.setState({value:""},()=>{const{onChange:s,onClear:r}=this.props;r==null||r(n),this.focus(),o.trim()!==""&&(s==null||s("",n))})}),Et(this,Pe,n=>{const o=this.state.value,s=n.target.value,{onChange:r}=this.props;this.setState({value:s},()=>{!r||o===s||(hs(this,Le,Mn).call(this),Se(this,Rt,window.setTimeout(()=>{r(s,n),Se(this,Rt,0)},this.props.delay||0)))})}),Et(this,Ie,n=>{const o=n.type==="focus";this.setState({focus:o},()=>{const s=o?this.props.onFocus:this.props.onBlur;s==null||s(n)})}),this.state={focus:!1,value:t.defaultValue||""},Se(this,Ne,t.id||`search-box-${y.guid++}`)}get id(){return J(this,Ne)}get input(){return J(this,Ae).current}focus(){var t;(t=this.input)==null||t.focus()}componentWillUnmount(){hs(this,Le,Mn).call(this)}render(t,n){const{style:o,className:s,rootClass:r,rootStyle:i,readonly:l,disabled:c,circle:h,placeholder:f,mergeIcon:a,searchIcon:p,clearIcon:d}=t,{focus:u,value:g}=n,{id:_}=this,m=typeof g!="string"||!g.trim().length;let b,x,C;return p&&(C=p===!0?w("span",{class:"magnifier"}):w(ft,{icon:p})),!a&&p&&(b=w("label",{for:_,class:"input-control-prefix",children:C},"prefix")),d&&!m?x=w("button",{type:"button",class:"btn ghost size-sm square rounded-full",onClick:J(this,Rn),children:d===!0?w("span",{class:"close"}):w(ft,{icon:d})}):a&&p&&(x=C),x&&(x=w("label",{for:_,class:"input-control-suffix",children:x},"suffix")),w("div",{class:P("search-box input-control",r,{focus:u,empty:m,"has-prefix-icon":b,"has-suffix-icon":x}),style:i,children:[b,w("input",{ref:J(this,Ae),id:_,type:"text",class:P("form-control",s,{"rounded-full":h}),style:o,placeholder:f,disabled:c,readonly:l,value:g,onInput:J(this,Pe),onChange:J(this,Pe),onFocus:J(this,Ie),onBlur:J(this,Ie)}),x]})}}Ne=new WeakMap,Ae=new WeakMap,Rt=new WeakMap,Rn=new WeakMap,Pe=new WeakMap,Ie=new WeakMap,Le=new WeakSet,Mn=function(){J(this,Rt)&&clearTimeout(J(this,Rt)),Se(this,Rt,0)},fs.defaultProps={clearIcon:!0,searchIcon:!0,delay:500};const ti=(e,t)=>{const{keys:n="",text:o}=e;return!t.length||t.every(s=>n.toLowerCase().includes(s)||typeof o=="string"&&o.toLowerCase().includes(s))};class ds extends as{constructor(){super(...arguments),this._searchKeys=[],this._handleSearchChange=t=>{this._searchKeys=y.unique(t.toLowerCase().split(" ").filter(n=>n.length)),this.setState({search:t})}}renderItem(t,n,o){return ti(n,this._searchKeys)?super.renderItem(t,n,o):null}beforeRender(){const{search:t=!0,searchPlacement:n="top",...o}=super.beforeRender();if(!t)return o;o.className=P(o.className,"search-menu",`search-menu-on-${n||"top"}`),o.children=o.children?Array.isArray(o.children)?o.children:[o.children]:[];const s={onChange:this._handleSearchChange};return typeof t=="object"&&Object.assign(s,t),o.children.push(w(fs,{...s},"search")),o}}class us extends ds{constructor(){super(...arguments),this._layoutTimer=0}get name(){return"menu"}get menuName(){return"dropdown-menu"}layout(){const t=this.ref.current,n=t==null?void 0:t.parentElement;!t||!n||ss(n,t,{placement:this.props.placement,middleware:[Yo(),qo(),Go(1)]}).then(({x:o,y:s})=>{y(t).css({left:o,top:s})})}getNestedMenuProps(t){const n=super.getNestedMenuProps(t);return{...n,className:P("show",n.className),popup:!0}}afterRender(t){super.afterRender(t),this.props.controlledMenu&&(this.layout(),this._layoutTimer=window.setTimeout(this.layout.bind(this),100))}renderToggleIcon(){return w("span",{class:"dropdown-menu-toggle-icon caret-right ml-2"})}componentWillUnmount(){super.componentWillUnmount(),this._layoutTimer&&clearTimeout(this._layoutTimer)}}us.defaultProps={...ds.defaultProps,popup:!0,search:!1,nestedTrigger:"hover",placement:"right-start"};function ps({key:e,type:t,btnType:n,...o}){return w(Tn,{type:n,...o})}class ei extends B{componentDidMount(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!0})}componentDidUpdate(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!1})}componentWillUnmount(){var t;(t=this.props.beforeDestroy)==null||t.call(this)}handleItemClick(t,n,o,s){o&&o.call(s.target,s);const{onClickItem:r}=this.props;r&&r.call(this,{item:t,index:n,event:s})}beforeRender(){var o;const t={...this.props},n=(o=t.beforeRender)==null?void 0:o.call(this,t);return n&&Object.assign(t,n),typeof t.items=="function"&&(t.items=t.items.call(this)),t}onRenderItem(t,n){const{key:o=n,...s}=t,r=t.dropdown||t.items?Tn:xt;return w(r,{...s},o)}renderItem(t,n,o){const{itemRender:s,btnProps:r,onClickItem:i}=t,l={key:o,...n};if(r&&Object.assign(l,r),i&&(l.onClick=this.handleItemClick.bind(this,l,o,n.onClick)),s){const c=s.call(this,l,L);if(at(c))return c;typeof c=="object"&&Object.assign(l,c)}return this.onRenderItem(l,o)}render(){const t=this.beforeRender(),{className:n,items:o,size:s,type:r,btnProps:i,children:l,itemRender:c,onClickItem:h,beforeRender:f,afterRender:a,beforeDestroy:p,...d}=t;return w("div",{className:P("btn-group",s?`size-${s}`:"",n),...d,children:[o&&o.map(this.renderItem.bind(this,t)),l]})}}function ni({key:e,type:t,btnType:n,...o}){return w(ei,{type:n,...o})}class gt extends jo{beforeRender(){const{gap:t,btnProps:n,wrap:o,...s}=super.beforeRender();return s.className=P(s.className,o?"flex-wrap":"",typeof t=="number"?`gap-${t}`:""),typeof t=="string"&&(s.style?s.style.gap=t:s.style={gap:t}),s}isBtnItem(t){return t==="item"||t==="dropdown"}renderTypedItem(t,n,o){const{type:s}=o,r=this.props.btnProps,i=this.isBtnItem(s)?{btnType:"ghost",...r}:{};i.type&&(i.btnType=i.type,delete i.type);const l={...n,...i,...o,className:P(`${this.name}-${s}`,n.className,i.className,o.className),style:Object.assign({},n.style,i.style,o.style)};return s==="btn-group"&&(l.btnProps=r),w(t,{...l})}}gt.ItemComponents={item:vr,dropdown:ps,"btn-group":ni},gt.ROOT_TAG="nav",gt.NAME="toolbar",gt.defaultProps={btnProps:{btnType:"ghost"}};function oi(e){const[t,n]=e.split(":"),o=t[0]==="-"?{name:t.substring(1),disabled:!0}:{name:t};return n!=null&&n.length&&(o.type="dropdown",o.items=n.split(",").reduce((s,r)=>(r=r.trim(),r.length&&s.push(r[0]==="-"?{name:r.substring(1),disabled:!0}:{name:r}),s),[])),o}const si=(e,t)=>{var s;e.url&&(e.url=j(e.url,t.row.data));const n={row:t.row.id,col:t.col.name},o=((s=e.dropdown)==null?void 0:s.items)||e.items;return o&&o.forEach(r=>(r.url&&(r.url=j(r.url,t.row.data)),r.data=n,r)),e.data=n,e},gs=e=>e?(typeof e=="string"&&(e=e.split("|")),e.map(t=>typeof t=="string"?oi(t):t).filter(Boolean)):[],ri=U({name:"actions",colTypes:{actions:{onRenderCell(e,t){var f;const{row:n,col:o}=t,s=gs(((f=n.data)==null?void 0:f[o.name])||o.setting.actions);if(!s.length)return e;const{actionsSetting:r,actionsMap:i,actionsCreator:l=this.options.actionsCreator,actionItemCreator:c=this.options.actionItemCreator||si}=o.setting,h={items:(l==null?void 0:l(t))??s.map(a=>{const{name:p,...d}=a;if(i&&p){Object.assign(d,i[p],{...d});const{buildProps:g}=d;typeof g=="function"&&(delete d.buildProps,Object.assign(d,g(e,t)))}const{items:u}=d;if(d.disabled&&(delete d.url,delete d["data-toggle"]),u&&d.type==="dropdown"){const{dropdown:g={placement:"bottom-end"}}=d;g.menu={className:"menu-dtable-actions"},g.items=u.map(_=>{const m=typeof _=="string"?{name:_}:{..._};return m.name&&i&&i[m.name]&&Object.assign(m,i[m.name],{...m}),m.disabled?(delete m.url,delete m["data-toggle"]):m.url&&(m.url=j(m.url,n.data)),m}),d.dropdown=g,delete d.items}return c?c(d,t):d}),btnProps:{size:"sm",className:"text-primary"},...r};return e[0]=w(gt,{...h}),e}}},beforeLayout(e){!Array.isArray(e.data)||!e.data.length||e.cols.forEach((t,n)=>{if(t.type!=="actions"||t.width)return;const{actionsMap:o={}}=t,r=gs(e.data[0][t.name]).reduce((i,l)=>{const c=l.name?o[l.name]:null;return c&&c.type==="dropdown"&&c.caret&&!c.text?i+16:i+24},24);e.cols[n]={...t,width:r}})}}),ii=U({name:"toolbar",footer:{toolbar(){const{footToolbar:e,showToolbarOnChecked:t}=this.options;return t&&!this.getChecks().length?[]:[e?w(gt,{gap:2,...e}):null]}}}),Xi="";function Xt(e,t){const n=e.pageTotal||Math.ceil(e.recTotal/e.recPerPage);return typeof t=="string"&&(t==="first"?t=1:t==="last"?t=n:t==="prev"?t=e.page-1:t==="next"?t=e.page+1:t==="current"?t=e.page:t=Number.parseInt(t,10)),t=t!==void 0?Math.max(1,Math.min(t<0?n+t:t,n)):e.page,{...e,pageTotal:n,page:t}}function li({key:e,type:t,btnType:n,page:o,format:s,pagerInfo:r,linkCreator:i,...l}){const c=Xt(r,o);return l.text===void 0&&!l.icon&&s&&(l.text=typeof s=="function"?s(c):j(s,c)),l.url===void 0&&i&&(l.url=typeof i=="function"?i(c):j(i,c)),l.disabled===void 0&&(l.disabled=o!==void 0&&c.page===r.page),w(xt,{type:n,...l})}function ci({key:e,type:t,page:n,text:o="",pagerInfo:s,children:r,...i}){const l=Xt(s,n);return o=typeof o=="function"?o(l):j(o,l),w(Ho,{...i,children:[r,o]})}function ai({key:e,type:t,btnType:n,count:o=12,pagerInfo:s,onClick:r,linkCreator:i,...l}){if(!s.pageTotal)return;const c={...l,square:!0},h=()=>(c.text="",c.icon="icon-ellipsis-h",c.disabled=!0,w(xt,{type:n,...c})),f=(p,d)=>{const u=[];for(let g=p;g<=d;g++){c.text=g,delete c.icon,c.disabled=!1;const _=Xt(s,g);i&&(c.url=typeof i=="function"?i(_):j(i,_)),u.push(w(xt,{type:n,...c,onClick:r}))}return u};let a=[];return a=[...f(1,1)],s.pageTotal<=1||(s.pageTotal<=o?a=[...a,...f(2,s.pageTotal)]:s.page<o-2?a=[...a,...f(2,o-2),h(),...f(s.pageTotal,s.pageTotal)]:s.page>s.pageTotal-o+3?a=[...a,h(),...f(s.pageTotal-o+3,s.pageTotal)]:a=[...a,h(),...f(s.page-Math.ceil((o-4)/2),s.page+Math.floor((o-4)/2)),h(),...f(s.pageTotal,s.pageTotal)]),a}function hi({type:e,pagerInfo:t,linkCreator:n,items:o=[5,10,15,20,25,30,35,40,45,50,100,200,500,1e3,2e3],dropdown:s={},itemProps:r,...i}){var c;s.items=s.items||o.map(h=>{const f={...t,recPerPage:h};return{...r,text:`${h}`,active:h===t.recPerPage,url:typeof n=="function"?n(f):j(n,f)}});const{text:l=""}=i;return i.text=typeof l=="function"?l(t):j(l,t),s.menu={...s.menu,className:P((c=s.menu)==null?void 0:c.className,"pager-size-menu")},w(ps,{type:"dropdown",dropdown:s,...i})}function fi({key:e,page:t,type:n,btnType:o,pagerInfo:s,size:r,onClick:i,onChange:l,linkCreator:c,...h}){const f={...h};let a;const p=g=>{var _;a=Number((_=g.target)==null?void 0:_.value)||1,a=a>s.pageTotal?s.pageTotal:a},d=g=>{if(!(g!=null&&g.target))return;a=a<=s.pageTotal?a:s.pageTotal;const _=Xt(s,a);l&&!l({info:_,event:g})||(g.target.href=f.url=typeof c=="function"?c(_):j(c,_))},u=Xt(s,t||0);return f.url=typeof c=="function"?c(u):j(c,u),w("div",{className:P("input-group","pager-goto-group",r?`size-${r}`:""),children:[w("input",{type:"number",class:"form-control",max:s.pageTotal,min:"1",onInput:p}),w(xt,{type:o,...f,onClick:d})]})}class De extends gt{get pagerInfo(){const{page:t=1,recTotal:n=0,recPerPage:o=10}=this.props;return{page:+t,recTotal:+n,recPerPage:+o,pageTotal:o?Math.ceil(n/o):0}}isBtnItem(t){return t==="link"||t==="nav"||t==="size-menu"||t==="goto"||super.isBtnItem(t)}getItemRenderProps(t,n,o){const s=super.getItemRenderProps(t,n,o),r=n.type||"item",{pagerInfo:i}=this;return r==="info"?Object.assign(s,{pagerInfo:i}):(r==="link"||r==="size-menu"||r==="nav"||r==="goto")&&Object.assign(s,{pagerInfo:i,linkCreator:t.linkCreator}),s}}De.NAME="pager",De.defaultProps={btnProps:{btnType:"ghost",size:"sm"}},De.ItemComponents={...gt.ItemComponents,link:li,info:ci,nav:ai,"size-menu":hi,goto:fi};const di=U({name:"pager",footer:{pager(){const{footPager:e}=this.options;return[e?w(De,{...e}):null]}}});var ms=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},it=(e,t,n)=>(ms(e,t,"read from private field"),n?n.call(e):t.get(e)),Zt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Jt=(e,t,n,o)=>(ms(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),Qt,Lt,te,We,Oe;function ui(e){return typeof e=="string"?e.split(",").map(t=>{const n=parseFloat(t);return Number.isNaN(n)?null:n}):e}class ys extends B{constructor(){super(...arguments),Zt(this,Qt,bt()),Zt(this,Lt,0),Zt(this,te,void 0),Zt(this,We,void 0),Zt(this,Oe,!1)}componentDidMount(){var n;this.tryDraw=this.tryDraw.bind(this),this.tryDraw();const t=(n=it(this,Qt).current)==null?void 0:n.parentElement;if(this.props.responsive!==!1){if(t&&typeof ResizeObserver<"u"){const o=new ResizeObserver(this.tryDraw);o.observe(t),Jt(this,te,o)}it(this,te)||window.addEventListener("resize",this.tryDraw)}if(t&&typeof IntersectionObserver<"u"){const o=new IntersectionObserver(s=>{it(this,Oe)&&s.some(r=>r.isIntersecting)&&this.tryDraw()});o.observe(t),Jt(this,We,o)}}componentWillUnmount(){var t;(t=it(this,te))==null||t.disconnect(),window.removeEventListener("resize",this.tryDraw)}tryDraw(){it(this,Lt)&&cancelAnimationFrame(it(this,Lt)),Jt(this,Lt,requestAnimationFrame(()=>{this.draw(),Jt(this,Lt,0)}))}draw(){const t=it(this,Qt).current;if(!t)return;const n=t.parentElement,{width:o,height:s,responsive:r=!0}=this.props;let i=o||n.clientWidth,l=s||n.clientHeight;if(o&&s&&r&&(i=n.clientWidth,l=Math.floor(s*i/o)),t.style.width=`${i}px`,t.style.height=`${l}px`,i=i*(window.devicePixelRatio||1),l=l*(window.devicePixelRatio||1),t.width=i,t.height=l,!y(n).isVisible()&&it(this,We)){Jt(this,Oe,!0);return}const{lineSize:c=1,scaleLine:h=!1,scaleLineSize:f,scaleLineGap:a=1,scaleLineDash:p,referenceLine:d,referenceLineSize:u,referenceLineDash:g,color:_="#2c78f1",fillColor:m=["rgba(46, 127, 255, 0.3)","rgba(46, 127, 255, 0.05)"],lineDash:b=[],bezier:x}=this.props,C=ui(this.props.data),v=Math.floor(i/(C.length-1)),N=Math.max(...C.filter(T=>T!==null)),S=C.map((T,M)=>{const I=typeof T!="number";return{x:M*v,y:I?l:Math.round((1-T/N)*(l-c)),empty:I}});let A=S[0];const R=t.getContext("2d");if(h){const T=typeof h=="string"?h:"rgba(100,100,100,.1)";R.strokeStyle=T,R.lineWidth=f||c,p&&R.setLineDash(p);for(let M=0;M<S.length;++M){if(M%a!==0)continue;const I=S[M];R.moveTo(I.x,0),R.lineTo(I.x,l)}R.stroke()}if(d&&S.length>1){const T=typeof d=="string"?d:"rgba(100,100,100,.2)",M=S[S.length-1];R.moveTo(M.x,M.y),R.strokeStyle=T,R.lineWidth=u||c,R.lineTo(A.x,A.y),g&&R.setLineDash(g),R.stroke()}for(R.setLineDash(b);S.length&&S[S.length-1].empty;)S.pop();if(m){const T=S[S.length-1];if(R.beginPath(),R.moveTo(0,l),R.lineTo(A.x,A.y),x){const M=Math.round(v/2);for(let I=1;I<S.length;++I){const k=S[I],W=Math.round((k.y-A.y)/5);R.bezierCurveTo(A.x+M,A.y+W,k.x-M,k.y-W,k.x,k.y),A=k}}else for(let M=1;M<S.length;++M)A=S[M],R.lineTo(A.x,A.y);if(R.lineTo(T.x,l),Array.isArray(m)){const M=R.createLinearGradient(0,0,0,l);for(let I=0;I<m.length;++I)M.addColorStop(I/(m.length-1),m[I]);R.fillStyle=M}else R.fillStyle=m;R.fill()}if(A=S[0],R.beginPath(),R.moveTo(A.x,A.y),x){const T=Math.round(v/2);for(let M=1;M<S.length;++M){const I=S[M],k=Math.round((I.y-A.y)/5);R.bezierCurveTo(A.x+T,A.y+k,I.x-T,I.y-k,I.x,I.y),A=I}}else for(let T=1;T<S.length;++T)A=S[T],R.lineTo(A.x,A.y);R.strokeStyle=_,R.lineWidth=c,R.stroke()}render(){const{style:t,className:n,canvasClass:o}=this.props;return L("div",{class:"center burn-chart",className:n,style:t},L("canvas",{className:o,ref:it(this,Qt)}))}}Qt=new WeakMap,Lt=new WeakMap,te=new WeakMap,We=new WeakMap,Oe=new WeakMap,ys.defaultProps={responsive:!0,lineSize:1,scaleLine:!1,scaleLineSize:1,bezier:!0};function pi({pri:e="",text:t,className:n}){return L("span",{className:P(`pri-${e}`,n)},t??e)}function gi({severity:e="",text:t,className:n}){const o=t??e,s=`${Number.parseInt(o)}`!=`${e}`;return L("span",{className:P(`severity${s?" severity-label":""}`,n),"data-severity":e},s?o:"")}const Ji="";function ws(e,t,n){if(n){if(typeof n=="object"){const o=n[e];return typeof o=="string"?o:typeof o=="object"&&o?o.realname:""}if(typeof n=="function")return n(e,t)}}function bs(e,t,n){let o;if(typeof e=="function"?o=e(t,n):typeof e=="object"&&(o=e[t]),o)return L(ft,{className:"dtable-cell-icon",icon:o})}const _s={name:"zentao",plugins:["group","checkable","nested",ri,ii,di],defaultOptions:{colHover:!1,rowHeight:36,striped:!1,responsive:!0,checkable:"auto",nested:"auto",width:"100%",footer:void 0,showToolbarOnChecked:!0,checkOnClickRow:!0,groupDivider:!0,height(e){return Math.min(e,window.innerHeight-1-(y("#header").outerHeight()||0)-(y("#mainMenu").outerHeight()||0)-(y("#mainNavbar").outerHeight()||0))}},options(e){const{checkable:t,footToolbar:n,footPager:o,footer:s,sortLink:r}=e;if(s===void 0){const i=[];t&&i.push("checkbox"),n&&(i.push("toolbar"),n.btnProps=Object.assign({type:"primary",size:"sm"},n.btnProps)),t&&i.push("checkedInfo"),o&&i.push("flex","pager"),i.length&&(e.footer=i)}return typeof r=="string"&&(e.sortLink={url:r,"data-load":"table"}),e},i18n:{zh_cn:{unassigned:"未指派"},zh_tw:{unassigned:"未指派"},en:{unassigned:"Unassigned"}},colTypes:{id:{width:60,fixed:"left",align:"center",sortType:!0},checkID:{width:80,fixed:"left",align:"left",sortType:!0,checkbox:!0},title:{width:.44,fixed:"left",align:"left",sortType:!0,flex:1},shortTitle:{width:.2,align:"left",sortType:!0,fixed:"left",checkbox:!0,flex:1},nestedTitle:{width:.5,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},shortNestedTitle:{width:.33,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},status:{width:80,align:"center",sortType:!0,onRenderCell(e,{col:t,row:n}){var i,l;const o=(i=n.data)==null?void 0:i[t.name];let s,r;return typeof o=="string"?(s=o,r=(l=t.setting.statusMap)==null?void 0:l[o]):typeof o=="object"&&o&&({name:s,label:r}=o),e[0]=L("span",{class:`${t.setting.statusClassPrefix??"status-"}${s}`},r??s),e}},user:{width:80,align:"center",sortType:!0,onRenderCell(e,{col:t,row:n,value:o}){const{userMap:s=this.options.userMap}=t.setting,r=ws(o,n,s);return r!==void 0&&(e[0]=r),e}},assign:{width:108,align:"left",sortType:!0,cellClass:"px-1.5",onRenderCell(e,t){const{col:n,row:o,value:s}=t,{userMap:r=this.options.userMap,currentUser:i,assignLink:l,unassignedText:c=this.i18n("unassigned")}=n.setting,h=!s,f=h?c:ws(s,o,r)??s;return e[0]=fn(l,t,[L("i",{className:"icon icon-hand-right"}),L("span",null,f)],{"data-toggle":"modal",className:`dtable-assign-btn${i===s?" is-me":""}${h?" is-unassigned":""}`}),e}},avatar:{width:44,align:"center",sortType:!0},avatarName:{width:108,align:"left",sortType:!0},avatarBtn:{width:108,align:"left",sortType:!0},category:{width:80,align:"center",flex:1},desc:{width:160,align:"left",flex:1},text:{width:136,align:"left",flex:1},icon:{width:52,align:"center",cellClass:"px-1",onRenderCell(e,{row:t,col:n,value:o}){const{iconRender:s}=n.setting,r=bs(s,o,t);return r&&(e[0]=r),e}},pri:{width:68,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(e,{value:t}){return e[0]=L(pi,{pri:t}),e}},severity:{width:92,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(e){const t=e[0];return e[0]=L(gi,{severity:t}),e}},burn:{width:88,align:"center",onRenderCell(e,{col:t}){const n=e[0];if(!n)return e;const{burn:o}=t.setting,s={data:n,className:"border-b",width:64,height:24,responsive:!1,...o};return e[0]=L(ys,{...s}),e}},date:{width:96,align:"center",sortType:!0},time:{width:64,align:"center",sortType:!0},datetime:{width:128,align:"center",sortType:!0},progress:{width:64,align:"center",sortType:!0},money:{width:96,align:"right",sortType:!0},count:{width:92,align:"right",sortType:!0},number:{width:64,align:"center",sortType:!0},percent:{width:64,align:"center",sortType:!0,format(e){return typeof e=="string"&&e.endsWith("%")?e:`${e}%`}},actions:{minWidth:120,align:"left",fixed:"right"}},onRenderCell(e,{row:t,col:n,value:o}){const{iconRender:s}=n.setting;if(s&&n.type!=="icon"){const r=bs(s,o,t);r&&e.push(r)}return e},onRender(){const{customCols:e}=this.options;if(!e)return;const{custom:t,setGlobal:n,reset:o,resetGlobal:s}=e;return{children:L("div",{className:"absolute gap-3 m-1.5 top-0 right-0 z-20 row"},L("div",{className:"w-px border-l my-1"}),L("a",{className:"btn ghost square size-sm rounded","data-toggle":"dropdown","data-placement":"bottom-end"},L("i",{class:"icon icon-cog-outline"})),L("menu",{class:"dropdown-menu menu"},t&&L("li",{class:"menu-item"},L("a",{href:t.url,"data-toggle":"modal"},t.text)),n&&L("li",{class:"menu-item"},L("a",{href:n.url},n.text)),o&&L("li",{class:"menu-item"},L("a",{href:o.url},o.text)),s&&L("li",{class:"menu-item"},L("a",{href:s.url},s.text))))}}},mi=U(_s,{buildIn:!0});z.DTable=Nt,z.zentao=mi,z.zentaoPlugin=_s,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
