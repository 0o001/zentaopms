var Os=(O,w,$)=>{if(!w.has(O))throw TypeError("Cannot "+$)};var A=(O,w,$)=>(Os(O,w,"read from private field"),$?$.call(O):w.get(O)),W=(O,w,$)=>{if(w.has(O))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(O):w.set(O,$)},U=(O,w,$,We)=>(Os(O,w,"write to private field"),We?We.call(O,$):w.set(O,$),$);var te=(O,w,$)=>(Os(O,w,"access private method"),$);(function(O,w){typeof exports=="object"&&typeof module<"u"?w(exports,require("cash-dom")):typeof define=="function"&&define.amd?define(["exports","cash-dom"],w):(O=typeof globalThis<"u"?globalThis:O||self,w(O.zui={},O.$))})(this,function(O,w){var Et,Pt,Ft,lt,Rt,Zt,Ce,xe,wn,Jt,ke,Te,Se,Ne,_n,bn,vn,Cn,Io,xn,kn,Lo,Tn,Wo,Sn,Me,Ee,Nn,Pe,Mn,Qt,Re,De,Ae,Ie,Le,En,Ho,Pn,Oo;"use strict";const $=`:root{--color-gray-50:#f8fafc;--color-gray-100:#f1f5f9;--color-gray-200:#e2e8f0;--color-gray-300:#cbd5e1;--color-gray-400:#94a3b8;--color-gray-500:#64748b;--color-gray-600:#475569;--color-gray-700:#334155;--color-gray-800:#1e293b;--color-gray-900:#0f172a;--color-gray-950:#020617;--color-gray-50-rgb:248,250,252;--color-gray-100-rgb:241,245,249;--color-gray-200-rgb:226,232,240;--color-gray-300-rgb:203,213,225;--color-gray-400-rgb:148,163,184;--color-gray-500-rgb:100,116,139;--color-gray-600-rgb:71,85,105;--color-gray-700-rgb:51,65,85;--color-gray-800-rgb:30,41,59;--color-gray-900-rgb:15,23,42;--color-gray-950-rgb:2,6,23;--color-primary-50:#eff6ff;--color-primary-100:#dbeafe;--color-primary-200:#bfdbfe;--color-primary-300:#93c5fd;--color-primary-400:#60a5fa;--color-primary-500:#3b82f6;--color-primary-600:#2563eb;--color-primary-700:#1d4ed8;--color-primary-800:#1e40af;--color-primary-900:#1e3a8a;--color-primary-950:#172554;--color-primary-50-rgb:239,246,255;--color-primary-100-rgb:219,234,254;--color-primary-200-rgb:191,219,254;--color-primary-300-rgb:147,197,253;--color-primary-400-rgb:96,165,250;--color-primary-500-rgb:59,130,246;--color-primary-600-rgb:37,99,235;--color-primary-700-rgb:29,78,216;--color-primary-800-rgb:30,64,175;--color-primary-900-rgb:30,58,138;--color-primary-950-rgb:23,37,84;--color-secondary-50:#f0f9ff;--color-secondary-100:#e0f2fe;--color-secondary-200:#bae6fd;--color-secondary-300:#7dd3fc;--color-secondary-400:#38bdf8;--color-secondary-500:#0ea5e9;--color-secondary-600:#0284c7;--color-secondary-700:#0369a1;--color-secondary-800:#075985;--color-secondary-900:#0c4a6e;--color-secondary-950:#082f49;--color-secondary-50-rgb:240,249,255;--color-secondary-100-rgb:224,242,254;--color-secondary-200-rgb:186,230,253;--color-secondary-300-rgb:125,211,252;--color-secondary-400-rgb:56,189,248;--color-secondary-500-rgb:14,165,233;--color-secondary-600-rgb:2,132,199;--color-secondary-700-rgb:3,105,161;--color-secondary-800-rgb:7,89,133;--color-secondary-900-rgb:12,74,110;--color-secondary-950-rgb:8,47,73;--color-success-50:#f0fdf4;--color-success-100:#dcfce7;--color-success-200:#bbf7d0;--color-success-300:#86efac;--color-success-400:#4ade80;--color-success-500:#22c55e;--color-success-600:#16a34a;--color-success-700:#15803d;--color-success-800:#166534;--color-success-900:#14532d;--color-success-950:#052e16;--color-success-50-rgb:240,253,244;--color-success-100-rgb:220,252,231;--color-success-200-rgb:187,247,208;--color-success-300-rgb:134,239,172;--color-success-400-rgb:74,222,128;--color-success-500-rgb:34,197,94;--color-success-600-rgb:22,163,74;--color-success-700-rgb:21,128,61;--color-success-800-rgb:22,101,52;--color-success-900-rgb:20,83,45;--color-success-950-rgb:5,46,22;--color-warning-50:#fffbeb;--color-warning-100:#fef3c7;--color-warning-200:#fde68a;--color-warning-300:#fcd34d;--color-warning-400:#fbbf24;--color-warning-500:#f59e0b;--color-warning-600:#d97706;--color-warning-700:#b45309;--color-warning-800:#92400e;--color-warning-900:#78350f;--color-warning-950:#451a03;--color-warning-50-rgb:255,251,235;--color-warning-100-rgb:254,243,199;--color-warning-200-rgb:253,230,138;--color-warning-300-rgb:252,211,77;--color-warning-400-rgb:251,191,36;--color-warning-500-rgb:245,158,11;--color-warning-600-rgb:217,119,6;--color-warning-700-rgb:180,83,9;--color-warning-800-rgb:146,64,14;--color-warning-900-rgb:120,53,15;--color-warning-950-rgb:69,26,3;--color-danger-50:#fef2f2;--color-danger-100:#fee2e2;--color-danger-200:#fecaca;--color-danger-300:#fca5a5;--color-danger-400:#f87171;--color-danger-500:#ef4444;--color-danger-600:#dc2626;--color-danger-700:#b91c1c;--color-danger-800:#991b1b;--color-danger-900:#7f1d1d;--color-danger-950:#450a0a;--color-danger-50-rgb:254,242,242;--color-danger-100-rgb:254,226,226;--color-danger-200-rgb:254,202,202;--color-danger-300-rgb:252,165,165;--color-danger-400-rgb:248,113,113;--color-danger-500-rgb:239,68,68;--color-danger-600-rgb:220,38,38;--color-danger-700-rgb:185,28,28;--color-danger-800-rgb:153,27,27;--color-danger-900-rgb:127,29,29;--color-danger-950-rgb:69,10,10;--color-important-50:#fdf2f8;--color-important-100:#fce7f3;--color-important-200:#fbcfe8;--color-important-300:#f9a8d4;--color-important-400:#f472b6;--color-important-500:#ec4899;--color-important-600:#db2777;--color-important-700:#be185d;--color-important-800:#9d174d;--color-important-900:#831843;--color-important-950:#500724;--color-important-50-rgb:253,242,248;--color-important-100-rgb:252,231,243;--color-important-200-rgb:251,207,232;--color-important-300-rgb:249,168,212;--color-important-400-rgb:244,114,182;--color-important-500-rgb:236,72,153;--color-important-600-rgb:219,39,119;--color-important-700-rgb:190,24,93;--color-important-800-rgb:157,23,77;--color-important-900-rgb:131,24,67;--color-important-950-rgb:80,7,36;--color-special-50:#faf5ff;--color-special-100:#f3e8ff;--color-special-200:#e9d5ff;--color-special-300:#d8b4fe;--color-special-400:#c084fc;--color-special-500:#a855f7;--color-special-600:#9333ea;--color-special-700:#7e22ce;--color-special-800:#6b21a8;--color-special-900:#581c87;--color-special-950:#3b0764;--color-special-50-rgb:250,245,255;--color-special-100-rgb:243,232,255;--color-special-200-rgb:233,213,255;--color-special-300-rgb:216,180,254;--color-special-400-rgb:192,132,252;--color-special-500-rgb:168,85,247;--color-special-600-rgb:147,51,234;--color-special-700-rgb:126,34,206;--color-special-800-rgb:107,33,168;--color-special-900-rgb:88,28,135;--color-special-950-rgb:59,7,100;--color-inherit:inherit;--color-transparent:transparent;--color-current:currentColor;--color-black:#000;--color-white:#fff;--color-canvas:#fff;--color-inverse:#000;--color-surface:#f1f5f9;--color-fore:#334155;--color-focus:#bfdbfe;--color-link:#3b82f6;--color-link-hover:#2563eb;--color-link-visited:#1d4ed8;--color-placeholder:#94a3b8;--color-border:#e2e8f0;--color-border-strong:#cbd5e1;--color-border-light:#f1f5f9;--color-black-rgb:0,0,0;--color-white-rgb:255,255,255;--color-canvas-rgb:255,255,255;--color-inverse-rgb:0,0,0;--color-surface-rgb:241,245,249;--color-fore-rgb:51,65,85;--color-focus-rgb:191,219,254;--color-link-rgb:59,130,246;--color-link-hover-rgb:37,99,235;--color-link-visited-rgb:29,78,216;--color-placeholder-rgb:148,163,184;--color-border-rgb:226,232,240;--color-border-strong-rgb:203,213,225;--color-border-light-rgb:241,245,249;--radius-none:0px;--radius-sm:2px;--radius:4px;--radius-md:6px;--radius-lg:8px;--radius-xl:12px;--radius-2xl:16px;--radius-3xl:24px;--radius-full:9999px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,.1),0 0 2px -1px rgba(0,0,0,.05);--shadow:0 1px 4px 0 rgba(0,0,0,.15),0 1px 2px -1px rgba(0,0,0,.1);--shadow-md:0 2px 6px -1px rgba(0,0,0,.2),0 1px 4px -2px rgba(0,0,0,.15);--shadow-lg:0 5px 15px -3px rgba(0,0,0,.2),0 2px 6px -4px rgba(0,0,0,.15);--shadow-xl:0 10px 25px -5px rgba(0,0,0,.2),0 4px 10px -6px rgba(0,0,0,.15);--shadow-2xl:0 10px 50px -10px rgba(0,0,0,.4),0 8px 20px -10px rgba(0,0,0,.3);--shadow-inner:inset 0 2px 4px 0 rgba(0,0,0,.05);--shadow-none:none;--space:4px;--font-size-root:16px;--font-size-page:13px,[object Object]}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }
`;window.$=w;function We(n,t){if(n==null)return[n,void 0];typeof t=="string"&&(t=t.split("."));const e=t.join(".");let s=n;const r=[s];for(;typeof s=="object"&&s!==null&&t.length;){let o=t.shift(),i;const a=o.indexOf("[");if(a>0&&a<o.length-1&&o.endsWith("]")&&(i=o.substring(a+1,o.length-1),o=o.substring(0,a)),s=s[o],r.push(s),i!==void 0)if(typeof s=="object"&&s!==null)s instanceof Map?s=s.get(i):s=s[i],r.push(s);else throw new Error(`Cannot access property "${o}[${i}]", the full path is "${e}".`)}if(t.length)throw new Error(`Cannot access property with rest path "${t.join(".")}", the full path is "${e}".`);return r}function zo(n,t,e){try{const s=We(n,t),r=s[s.length-1];return r===void 0?e:r}catch{return e}}function B(n,...t){if(t.length===0)return n;if(t.length===1&&typeof t[0]=="object"&&t[0]){const e=t[0];return Object.keys(e).forEach(s=>{const r=e[s]??"";n=n.replace(new RegExp(`\\{${s}\\}`,"g"),`${r}`)}),n}for(let e=0;e<t.length;e++){const s=t[e]??"";n=n.replace(new RegExp(`\\{${e}\\}`,"g"),`${s}`)}return n}let Rn=(document.documentElement.getAttribute("lang")||"zh_cn").toLowerCase().replace("-","_"),bt;function Vo(){return Rn}function Fo(n){Rn=n.toLowerCase()}function Vs(n,t){bt||(bt={}),typeof n=="string"&&(n={[n]:t??{}}),w.extend(!0,bt,n)}function q(n,t,e,s,r,o){Array.isArray(n)?bt&&n.unshift(bt):n=bt?[bt,n]:[n],typeof e=="string"&&(o=r,r=s,s=e,e=void 0);const i=r||Rn;let a;for(const l of n){if(!l)continue;const h=l[i];if(!h)continue;const u=o&&l===bt?`${o}.${t}`:t;if(a=zo(h,u),a!==void 0)break}return a===void 0?s:e?B(a,...Array.isArray(e)?e:[e]):a}function Uo(n,t,e,s){return q(void 0,n,t,e,s)}q.addLang=Vs,q.getLang=Uo,q.getCode=Vo,q.setCode=Fo,Vs({zh_cn:{confirm:"确定",cancel:"取消",delete:"删除",add:"添加"},zh_tw:{confirm:"確定",cancel:"取消",delete:"刪除",add:"添加"},en:{confirm:"Confirm",cancel:"Cancel",delete:"Delete",add:"Add"}});function Fs(...n){const t=[],e=new Map,s=(r,o)=>{if(Array.isArray(r)&&(o=r[1],r=r[0]),!r.length)return;const i=e.get(r);typeof i=="number"?t[i][1]=!!o:(e.set(r,t.length),t.push([r,!!o]))};return n.forEach(r=>{typeof r=="function"&&(r=r()),Array.isArray(r)?Fs(...r).forEach(s):r&&typeof r=="object"?Object.entries(r).forEach(s):typeof r=="string"&&r.split(" ").forEach(o=>s(o,!0))}),t.sort((r,o)=>(e.get(r[0])||0)-(e.get(o[0])||0))}const R=(...n)=>Fs(...n).reduce((t,[e,s])=>(s&&t.push(e),t),[]).join(" ");w.classes=R,w.fn.setClass=function(n,...t){return this.each((e,s)=>{const r=w(s);n===!0?r.attr("class",R(r.attr("class"),...t)):r.addClass(R(n,...t))})};const ee=new WeakMap;function Us(n,t,e){const s=ee.has(n),r=s?ee.get(n):{};typeof t=="string"?r[t]=e:t===null?Object.keys(r).forEach(o=>{delete r[o]}):Object.assign(r,t),Object.keys(r).forEach(o=>{r[o]===void 0&&delete r[o]}),Object.keys(r).length?(!s&&n instanceof Element&&Object.assign(r,w(n).dataset(),r),ee.set(n,r)):ee.delete(n)}function Bs(n,t,e){let s=ee.get(n)||{};return!e&&n instanceof Element&&(s=Object.assign({},w(n).dataset(),s)),t===void 0?s:s[t]}w.fn.dataset=w.fn.data,w.fn.data=function(...n){if(!this.length)return;const[t,e]=n;return!n.length||n.length===1&&typeof t=="string"?Bs(this[0],t):this.each((s,r)=>Us(r,t,e))},w.fn.removeData=function(n=null){return this.each((t,e)=>Us(e,n))},w.fn._attr=w.fn.attr,w.fn.extend({attr(...n){const[t,e]=n;return!n.length||n.length===1&&typeof t=="string"?this._attr.apply(this,n):typeof t=="object"?(t&&Object.keys(t).forEach(s=>{const r=t[s];r===null?this.removeAttr(s):this._attr(s,r)}),this):e===null?this.removeAttr(t):this._attr(t,e)}}),w.Event||(w.Event=(n,t)=>{const[e,...s]=n.split("."),r=new Event(e,{bubbles:!0,cancelable:!0});return r.namespace=s.join("."),r.___ot=e,r.___td=t,r});const Dn=(n,t)=>new Promise(e=>{const s=window.setTimeout(e,n);t&&t(s)}),Bo={};w.share=Bo;const He=new Map;function js(n){const{zui:t}=window;return(!He.size||n&&!He.has(n.toUpperCase()))&&Object.keys(t).forEach(e=>{const s=t[e];!s.NAME||!s.ZUI||He.set(e.toLowerCase(),s)}),n?He.get(n.toLowerCase()):void 0}function jo(n,t,e){const s=js(n);return s?!s.MULTI_INSTANCE&&s.get(t)?(console.error(`[ZUI] cannot create component "${n}" on element which already has a component instance.`,{element:t,options:e}),null):new s(t,e):null}w.fn.zuiInit=function(){return this.find("[data-zui]").each(function(){const n=w(this);let t=n.dataset();const[e,s]=t.zui.split(":");n.zui(e)||(s?t=w.share[s]:delete t.zui,requestAnimationFrame(()=>jo(e,this,t)))}),this},w.fn.zui=function(n,t){const e=this[0];if(!e)return;if(typeof n!="string"){const r=Bs(e,void 0,!0),o={};let i;return Object.keys(r).forEach(a=>{if(a.startsWith("zui.")){const l=r[a];o[a]=l,(!i||i.gid<l.gid)&&(i=o[a])}}),n===!0?o:i}const s=js(n);if(s)return t===!0?s.getAll(e):s.query(e,t)},w(()=>{w("body").zuiInit()});function Ys(n,t){const e=w(n)[0];if(!e)return!1;let{viewport:s}=t||{};const{left:r,top:o,width:i,height:a}=e.getBoundingClientRect();if(!s){const{innerHeight:p,innerWidth:m}=window,{clientHeight:b,clientWidth:y}=document.documentElement;s={left:0,top:0,width:m||y,height:p||b}}const{left:l,top:h,width:u,height:c}=s;if(t!=null&&t.fullyCheck)return r>=l&&o>=h&&r+i<=u&&o+a<=c;const f=r<=u&&r+i>=l;return o<=c&&o+a>=h&&f}w.fn.isVisible=function(n){return Ys(this,n)};function qs(n,t,e=!1){const s=w(n);if(t!==void 0){if(t.length){const r=`zui-runjs-${w.guid++}`;s.append(`<script id="${r}">${t}<\/script>`),e&&s.find(`#${r}`).remove()}return}s.find("script").each((r,o)=>{qs(s,o.innerHTML),o.remove()})}w.runJS=(n,...t)=>(n=n.trim(),!n.startsWith("return ")&&!n.endsWith(";")&&(n=`return ${n}`),new Function(...t.map(([s])=>s),n)(...t.map(([,s])=>s))),w.fn.runJS=function(n){return this.each((t,e)=>{qs(e,n)})};function Yo(n,t){const e=w(n),{ifNeeded:s=!0,...r}=t||{};return e.each((o,i)=>{s&&Ys(i,{viewport:i.getBoundingClientRect()})||i.scrollIntoView(r)}),e}w.fn.scrollIntoView=function(n){return this.each((t,e)=>{Yo(e,n)})},w.setLibRoot=function(n){w.libRoot=n},w.registerLib=function(n,t){w.libMap||(w.libMap={}),!t.name&&t.id&&(t.id=`zui-lib-${n}`),w.libMap[n]=t},w.getLib=function(n,t,e){return new Promise((s,r)=>{let o=typeof n=="string"?{src:n}:w.extend({},n);typeof t=="function"?o.success=t:t&&w.extend(o,t),e&&(o.success=e);let{src:i}=o;if(!i)return r(new Error("[ZUI] No src provided for $.getLib."));const a=w.libMap&&w.libMap[i];a&&(o=w.extend({},a,o),i=a.src||o.src);const{root:l=w.libRoot}=o;l&&(i=`${l}/${i}`.replace("//","/"));const{success:h,name:u}=o,c=()=>u?window[u]:void 0,f=()=>{s(c()),h==null||h()};if(c()){f();return}const{id:d}=o,p=w(d?`#${d}`:`script[src="${i}"]`);if(p.length){if(p.dataset("loaded"))f();else{const v=p.data("loadCalls")||[];v.push(f),p.data("loadCalls",v)}return}const{async:m=!0,defer:b=!1,noModule:y=!1,type:_,integrity:k}=o,x=document.createElement("script");x.async=m,x.defer=b,x.noModule=y,_&&(x.type=_),k&&(x.integrity=k),x.onload=()=>{f(),(w(x).dataset("loaded",!0).data("loadCalls")||[]).forEach(E=>E()),w(x).removeData("loadCalls")},x.onerror=()=>{r(new Error(`[ZUI] Failed to load lib from: ${i}`))},x.src=i,w("head").append(x)})},w.getScript=w.getLib;var Oe,V,Gs,vt,Dt,Ks,$s,An,Ut={},Xs=[],qo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,In=Array.isArray;function Ct(n,t){for(var e in t)n[e]=t[e];return n}function Zs(n){var t=n.parentNode;t&&t.removeChild(n)}function I(n,t,e){var s,r,o,i={};for(o in t)o=="key"?s=t[o]:o=="ref"?r=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Oe.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)i[o]===void 0&&(i[o]=n.defaultProps[o]);return ze(n,i,s,r,null)}function ze(n,t,e,s,r){var o={type:n,props:t,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++Gs};return r==null&&V.vnode!=null&&V.vnode(o),o}function Y(){return{current:null}}function Bt(n){return n.children}function F(n,t){this.props=n,this.context=t}function ne(n,t){if(t==null)return n.__?ne(n.__,n.__.__k.indexOf(n)+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?ne(n):null}function Js(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return Js(n)}}function Qs(n){(!n.__d&&(n.__d=!0)&&Dt.push(n)&&!Ve.__r++||Ks!==V.debounceRendering)&&((Ks=V.debounceRendering)||$s)(Ve)}function Ve(){var n,t,e,s,r,o,i,a,l;for(Dt.sort(An);n=Dt.shift();)n.__d&&(t=Dt.length,s=void 0,r=void 0,o=void 0,a=(i=(e=n).__v).__e,(l=e.__P)&&(s=[],r=[],(o=Ct({},i)).__v=i.__v+1,Ln(l,i,o,e.__n,l.ownerSVGElement!==void 0,i.__h!=null?[a]:null,s,a??ne(i),i.__h,r),ir(s,i,r),i.__e!=a&&Js(i)),Dt.length>t&&Dt.sort(An));Ve.__r=0}function tr(n,t,e,s,r,o,i,a,l,h,u){var c,f,d,p,m,b,y,_,k,x=0,v=s&&s.__k||Xs,E=v.length,M=E,D=t.length;for(e.__k=[],c=0;c<D;c++)(p=e.__k[c]=(p=t[c])==null||typeof p=="boolean"||typeof p=="function"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?ze(null,p,null,null,p):In(p)?ze(Bt,{children:p},null,null,null):p.__b>0?ze(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null?(p.__=e,p.__b=e.__b+1,(_=Go(p,v,y=c+x,M))===-1?d=Ut:(d=v[_]||Ut,v[_]=void 0,M--),Ln(n,p,d,r,o,i,a,l,h,u),m=p.__e,(f=p.ref)&&d.ref!=f&&(d.ref&&Wn(d.ref,null,p),u.push(f,p.__c||m,p)),m!=null&&(b==null&&(b=m),(k=d===Ut||d.__v===null)?_==-1&&x--:_!==y&&(_===y+1?x++:_>y?M>D-y?x+=_-y:x--:x=_<y&&_==y-1?_-y:0),y=c+x,typeof p.type!="function"||_===y&&d.__k!==p.__k?typeof p.type=="function"||_===y&&!k?p.__d!==void 0?(l=p.__d,p.__d=void 0):l=m.nextSibling:l=nr(n,m,l):l=er(p,l,n),typeof e.type=="function"&&(e.__d=l))):(d=v[c])&&d.key==null&&d.__e&&(d.__e==l&&(l=ne(d)),Hn(d,d,!1));for(e.__e=b,c=E;c--;)v[c]!=null&&(typeof e.type=="function"&&v[c].__e!=null&&v[c].__e==e.__d&&(e.__d=v[c].__e.nextSibling),Hn(v[c],v[c]))}function er(n,t,e){for(var s,r=n.__k,o=0;r&&o<r.length;o++)(s=r[o])&&(s.__=n,t=typeof s.type=="function"?er(s,t,e):nr(e,s.__e,t));return t}function nr(n,t,e){return e==null||e.parentNode!==n?n.insertBefore(t,null):t==e&&t.parentNode!=null||n.insertBefore(t,e),t.nextSibling}function Go(n,t,e,s){var r=n.key,o=n.type,i=e-1,a=e+1,l=t[e];if(l===null||l&&r==l.key&&o===l.type)return e;if(s>(l!=null?1:0))for(;i>=0||a<t.length;){if(i>=0){if((l=t[i])&&r==l.key&&o===l.type)return i;i--}if(a<t.length){if((l=t[a])&&r==l.key&&o===l.type)return a;a++}}return-1}function Ko(n,t,e,s,r){var o;for(o in e)o==="children"||o==="key"||o in t||Fe(n,o,null,e[o],s);for(o in t)r&&typeof t[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||e[o]===t[o]||Fe(n,o,t[o],e[o],s)}function sr(n,t,e){t[0]==="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||qo.test(t)?e:e+"px"}function Fe(n,t,e,s,r){var o;t:if(t==="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(t in s)e&&t in e||sr(n.style,t,"");if(e)for(t in e)s&&e[t]===s[t]||sr(n.style,t,e[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in n?t.toLowerCase().slice(2):t.slice(2),n.l||(n.l={}),n.l[t+o]=e,e?s||n.addEventListener(t,o?or:rr,o):n.removeEventListener(t,o?or:rr,o);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!=="-"?n.removeAttribute(t):n.setAttribute(t,e))}}function rr(n){return this.l[n.type+!1](V.event?V.event(n):n)}function or(n){return this.l[n.type+!0](V.event?V.event(n):n)}function Ln(n,t,e,s,r,o,i,a,l,h){var u,c,f,d,p,m,b,y,_,k,x,v,E,M,D,S=t.type;if(t.constructor!==void 0)return null;e.__h!=null&&(l=e.__h,a=t.__e=e.__e,t.__h=null,o=[a]),(u=V.__b)&&u(t);t:if(typeof S=="function")try{if(y=t.props,_=(u=S.contextType)&&s[u.__c],k=u?_?_.props.value:u.__:s,e.__c?b=(c=t.__c=e.__c).__=c.__E:("prototype"in S&&S.prototype.render?t.__c=c=new S(y,k):(t.__c=c=new F(y,k),c.constructor=S,c.render=Xo),_&&_.sub(c),c.props=y,c.state||(c.state={}),c.context=k,c.__n=s,f=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),S.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Ct({},c.__s)),Ct(c.__s,S.getDerivedStateFromProps(y,c.__s))),d=c.props,p=c.state,c.__v=t,f)S.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(S.getDerivedStateFromProps==null&&y!==d&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,k),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,k)===!1||t.__v===e.__v)){for(t.__v!==e.__v&&(c.props=y,c.state=c.__s,c.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(C){C&&(C.__=t)}),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[],c.__h.length&&i.push(c);break t}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,k),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(d,p,m)})}if(c.context=k,c.props=y,c.__P=n,c.__e=!1,v=V.__r,E=0,"prototype"in S&&S.prototype.render){for(c.state=c.__s,c.__d=!1,v&&v(t),u=c.render(c.props,c.state,c.context),M=0;M<c._sb.length;M++)c.__h.push(c._sb[M]);c._sb=[]}else do c.__d=!1,v&&v(t),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++E<25);c.state=c.__s,c.getChildContext!=null&&(s=Ct(Ct({},s),c.getChildContext())),f||c.getSnapshotBeforeUpdate==null||(m=c.getSnapshotBeforeUpdate(d,p)),tr(n,In(D=u!=null&&u.type===Bt&&u.key==null?u.props.children:u)?D:[D],t,e,s,r,o,i,a,l,h),c.base=t.__e,t.__h=null,c.__h.length&&i.push(c),b&&(c.__E=c.__=null)}catch(C){t.__v=null,(l||o!=null)&&(t.__e=a,t.__h=!!l,o[o.indexOf(a)]=null),V.__e(C,t,e)}else o==null&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=$o(e.__e,t,e,s,r,o,i,l,h);(u=V.diffed)&&u(t)}function ir(n,t,e){for(var s=0;s<e.length;s++)Wn(e[s],e[++s],e[++s]);V.__c&&V.__c(t,n),n.some(function(r){try{n=r.__h,r.__h=[],n.some(function(o){o.call(r)})}catch(o){V.__e(o,r.__v)}})}function $o(n,t,e,s,r,o,i,a,l){var h,u,c,f=e.props,d=t.props,p=t.type,m=0;if(p==="svg"&&(r=!0),o!=null){for(;m<o.length;m++)if((h=o[m])&&"setAttribute"in h==!!p&&(p?h.localName===p:h.nodeType===3)){n=h,o[m]=null;break}}if(n==null){if(p===null)return document.createTextNode(d);n=r?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,d.is&&d),o=null,a=!1}if(p===null)f===d||a&&n.data===d||(n.data=d);else{if(o=o&&Oe.call(n.childNodes),u=(f=e.props||Ut).dangerouslySetInnerHTML,c=d.dangerouslySetInnerHTML,!a){if(o!=null)for(f={},m=0;m<n.attributes.length;m++)f[n.attributes[m].name]=n.attributes[m].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===n.innerHTML)||(n.innerHTML=c&&c.__html||""))}if(Ko(n,d,f,r,a),c)t.__k=[];else if(tr(n,In(m=t.props.children)?m:[m],t,e,s,r&&p!=="foreignObject",o,i,o?o[0]:e.__k&&ne(e,0),a,l),o!=null)for(m=o.length;m--;)o[m]!=null&&Zs(o[m]);a||("value"in d&&(m=d.value)!==void 0&&(m!==n.value||p==="progress"&&!m||p==="option"&&m!==f.value)&&Fe(n,"value",m,f.value,!1),"checked"in d&&(m=d.checked)!==void 0&&m!==n.checked&&Fe(n,"checked",m,f.checked,!1))}return n}function Wn(n,t,e){try{typeof n=="function"?n(t):n.current=t}catch(s){V.__e(s,e)}}function Hn(n,t,e){var s,r;if(V.unmount&&V.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||Wn(s,null,t)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(o){V.__e(o,t)}s.base=s.__P=null,n.__c=void 0}if(s=n.__k)for(r=0;r<s.length;r++)s[r]&&Hn(s[r],t,e||typeof n.type!="function");e||n.__e==null||Zs(n.__e),n.__=n.__e=n.__d=void 0}function Xo(n,t,e){return this.constructor(n,e)}function On(n,t,e){var s,r,o,i;V.__&&V.__(n,t),r=(s=typeof e=="function")?null:e&&e.__k||t.__k,o=[],i=[],Ln(t,n=(!s&&e||t).__k=I(Bt,null,[n]),r||Ut,Ut,t.ownerSVGElement!==void 0,!s&&e?[e]:r?null:t.firstChild?Oe.call(t.childNodes):null,o,!s&&e?e:r?r.__e:t.firstChild,s,i),ir(o,n,i)}Oe=Xs.slice,V={__e:function(n,t,e,s){for(var r,o,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(n)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,s||{}),i=r.__d),i)return r.__E=r}catch(a){n=a}throw n}},Gs=0,vt=function(n){return n!=null&&n.constructor===void 0},F.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ct({},this.state),typeof n=="function"&&(n=n(Ct({},e),this.props)),n&&Ct(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Qs(this))},F.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Qs(this))},F.prototype.render=Bt,Dt=[],$s=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,An=function(n,t){return n.__v.__b-t.__v.__b},Ve.__r=0;var ar=function(n,t,e,s){var r;t[0]=0;for(var o=1;o<t.length;o++){var i=t[o++],a=t[o]?(t[0]|=i?1:2,e[t[o++]]):t[++o];i===3?s[0]=a:i===4?s[1]=Object.assign(s[1]||{},a):i===5?(s[1]=s[1]||{})[t[++o]]=a:i===6?s[1][t[++o]]+=a+"":i?(r=n.apply(a,ar(n,a,e,["",null])),s.push(r),a[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):s.push(a)}return s},lr=new Map;function Zo(n){var t=lr.get(this);return t||(t=new Map,lr.set(this,t)),(t=ar(this,t.get(n)||(t.set(n,t=function(e){for(var s,r,o=1,i="",a="",l=[0],h=function(f){o===1&&(f||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,f,i):o===3&&(f||i)?(l.push(3,f,i),o=2):o===2&&i==="..."&&f?l.push(4,f,0):o===2&&i&&!f?l.push(5,0,!0,i):o>=5&&((i||!f&&o===5)&&(l.push(o,0,i,r),o=6),f&&(l.push(o,f,0,r),o=6)),i=""},u=0;u<e.length;u++){u&&(o===1&&h(),h(u));for(var c=0;c<e[u].length;c++)s=e[u][c],o===1?s==="<"?(h(),l=[l],o=3):i+=s:o===4?i==="--"&&s===">"?(o=1,i=""):i=s+i[0]:a?s===a?a="":i+=s:s==='"'||s==="'"?a=s:s===">"?(h(),o=1):o&&(s==="="?(o=5,r=i,i=""):s==="/"&&(o<5||e[u][c+1]===">")?(h(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):s===" "||s==="	"||s===`
`||s==="\r"?(h(),o=2):i+=s),o===3&&i==="!--"&&(o=4,l=l[0])}return h(),l}(n)),t),arguments,[])).length>1?t:t[0]}Zo.bind(I);class zn extends F{_getClassName(t){return[t.className,t.class]}_getProps(t){const{className:e,class:s,attrs:r,data:o,forwardRef:i,children:a,style:l,...h}=t,u=Object.keys(h).reduce((c,f)=>((f==="dangerouslySetInnerHTML"||/^(on[A-Z]|data-)[a-zA-Z-]+/.test(f))&&(c[f]=h[f]),c),{});return{ref:i,class:R(this._getClassName(t)),style:l,...u,...r}}_getComponent(t){return t.component||"div"}_getChildren(t){return t.children}_beforeRender(t){return t}render(t){return t=this._beforeRender(t)||t,I(this._getComponent(t),this._getProps(t),this._getChildren(t))}}var Jo=0;function g(n,t,e,s,r,o){var i,a,l={};for(a in t)a=="ref"?i=t[a]:l[a]=t[a];var h={type:n,props:l,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Jo,__source:r,__self:o};if(typeof n=="function"&&(i=n.defaultProps))for(a in i)l[a]===void 0&&(l[a]=i[a]);return V.vnode&&V.vnode(h),h}class Vn extends F{constructor(){super(...arguments),this._ref=Y()}_runJS(){this.props.executeScript&&w(this._ref.current).runJS()}componentDidMount(){this._runJS()}componentDidUpdate(t){this.props.html!==t.html&&this._runJS()}render(t){const{executeScript:e,html:s,...r}=t;return g(zn,{forwardRef:this._ref,dangerouslySetInnerHTML:{__html:s},...r})}}function Qo(n){const{tag:t,className:e,style:s,renders:r,generateArgs:o=[],generatorThis:i,generators:a,onGenerate:l,onRenderItem:h,...u}=n,c=[e],f={...s},d=[],p=[];return r.forEach(m=>{const b=[];if(typeof m=="string"&&a&&a[m]&&(m=a[m]),typeof m=="function")if(l)b.push(...l.call(i,m,d,...o));else{const y=m.call(i,d,...o);y&&(Array.isArray(y)?b.push(...y):b.push(y))}else b.push(m);b.forEach(y=>{y!=null&&(typeof y=="object"&&!vt(y)&&("html"in y||"__html"in y||"className"in y||"style"in y||"attrs"in y||"children"in y)?y.html?d.push(g("div",{className:R(y.className),style:y.style,dangerouslySetInnerHTML:{__html:y.html},...y.attrs??{}})):y.__html?p.push(y.__html):(y.style&&Object.assign(f,y.style),y.className&&c.push(y.className),y.children&&d.push(y.children),y.attrs&&Object.assign(u,y.attrs)):d.push(y))})}),p.length&&Object.assign(u,{dangerouslySetInnerHTML:{__html:p}}),[{className:R(c),style:f,...u},d]}function Fn({tag:n="div",...t}){const[e,s]=Qo(t);return I(n,e,...s)}function cr(n,t,e){return typeof n=="function"?n.call(t,...e||[]):Array.isArray(n)?n.map(s=>cr(s,t,e)):vt(n)||n===null?n:typeof n=="object"?n.html?g(Vn,{...n}):g(zn,{...n}):n}function At(n){const{content:t,generatorThis:e,generatorArgs:s}=n,r=cr(t,e,s);return r==null||typeof r=="boolean"?null:vt(r)?r:g(Bt,{children:r})}const hr=n=>n.startsWith("icon-")?n:`icon-${n}`;function xt(n){const{icon:t,className:e,...s}=n;if(!t)return null;if(vt(t))return t;const r=["icon",e];if(typeof t=="string")r.push(hr(t));else if(typeof t=="object"){const{className:o,icon:i,...a}=t;r.push(o,i?hr(i):""),Object.assign(s,a)}return g("i",{className:R(r),...s})}function ti(n){return this.getChildContext=()=>n.context,n.children}function ei(n){const t=this,e=n._container;t.componentWillUnmount=function(){On(null,t._temp),t._temp=null,t._container=null},t._container&&t._container!==e&&t.componentWillUnmount(),n._vnode?(t._temp||(t._container=e,t._temp={nodeType:1,parentNode:e,childNodes:[],appendChild(s){this.childNodes.push(s),t._container.appendChild(s)},insertBefore(s,r){this.childNodes.push(s),t._container.appendChild(s)},removeChild(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),t._container.removeChild(s)}}),On(I(ti,{context:t.context},n._vnode),t._temp)):t._temp&&t.componentWillUnmount()}function ni(n,t){const e=I(ei,{_vnode:n,_container:t});return e.containerInfo=t,e}function ur(n){return n.parentNode===document?!1:n.parentNode?ur(n.parentNode):!0}class Ue{constructor(t,e){this._inited=!1,this._autoDestory=0;const{KEY:s,DATA_KEY:r,DEFAULT:o,MULTI_INSTANCE:i,NAME:a}=this.constructor;if(!a)throw new Error('[ZUI] The component must have a "NAME" static property.');const l=w(t);if(l.data(s)&&!i)throw new Error("[ZUI] The component has been initialized on element.");const h=l[0],u=w.guid++;if(this._gid=u,this._element=h,l.on("DOMNodeRemovedFromDocument",()=>{this._autoDestory&&clearTimeout(this._autoDestory),this._autoDestory=window.setTimeout(()=>{this._autoDestory=0,ur(h)&&this.destroy()},100)}),this._options={...o,...l.dataset()},this.setOptions(e),this._key=this.options.key??`__${u}`,l.data(s,this).attr(r,`${u}`),i){const c=`${s}:ALL`;let f=l.data(c);f||(f=new Map,l.data(c,f)),f.set(this._key,this)}this.init(),requestAnimationFrame(async()=>{this._inited=!0,await this.afterInit(),this.emit("inited",this.options)})}static get ZUI(){return this.NAME.replace(/(^[A-Z]+)/,t=>t.toLowerCase())}static get KEY(){return`zui.${this.NAME}`}static get NAMESPACE(){return`.zui.${this.ZUI}`}static get DATA_KEY(){return`data-zui-${this.NAME}`}get inited(){return this._inited}get element(){return this._element}get key(){return this._key}get options(){return this._options}get gid(){return this._gid}get $element(){return w(this.element)}get $emitter(){return this.$element}init(){}afterInit(){}render(t){this.setOptions(t)}destroy(){const{KEY:t,DATA_KEY:e,MULTI_INSTANCE:s}=this.constructor,{$element:r}=this;if(this.emit("destroyed"),r.off(this.namespace).removeData(t).attr(e,null),s){const o=this.$element.data(`${t}:ALL`);if(o)if(o.delete(this._key),o.size===0)this.$element.removeData(`${t}:ALL`);else{const i=o.values().next().value;r.data(t,i).attr(e,i.gid)}}this._options=void 0,this._element=void 0}setOptions(t){return t&&w.extend(this._options,t),this._options}emit(t,...e){const s=new w.Event(t);return s.__src=this,this.$emitter.trigger(s,[this,...e]),s}on(t,e,s){const r=this;this.$element[s!=null&&s.once?"one":"on"](this._wrapEvent(t),function(o,i){(!o.__src||o.__src===r)&&e.call(this,o,i)})}one(t,e){this.on(t,e,{once:!0})}off(t){this.$element.off(this._wrapEvent(t))}i18n(t,e,s){return q(this.options.i18n,t,e,s,this.options.lang,this.constructor.NAME)??q(this.options.i18n,t,e,s,this.options.lang)??`{i18n:${t}}`}get namespace(){return`${this.constructor.NAMESPACE}.${this._key}`}_wrapEvent(t){return t.split(" ").map(e=>e.includes(".")?e:`${e}${this.namespace}`).join(" ")}static get(t,e){const s=w(t);if(this.MULTI_INSTANCE&&e!==void 0){const r=s.data(`${this.KEY}:ALL`);return r?r.get(e):void 0}return s.data(this.KEY)}static ensure(t,e){const s=this.get(t,e==null?void 0:e.key);return s?(e&&s.setOptions(e),s):new this(t,e)}static getAll(t){const{MULTI_INSTANCE:e,DATA_KEY:s}=this,r=[];return w(t||document).find(`[${s}]`).each((o,i)=>{if(e){const l=w(i).data(`${this.KEY}:ALL`);if(l){r.push(...l.values());return}}const a=w(i).data(this.KEY);a&&r.push(a)}),r}static query(t,e){return t===void 0?this.getAll().sort((s,r)=>s.gid-r.gid)[0]:this.get(w(t).closest(`[${this.DATA_KEY}]`),e)}static defineFn(t){let e=t||this.ZUI;w.fn[e]&&(e=`zui${this.NAME}`);const s=this;w.fn.extend({[e](r,...o){const i=typeof r=="object"?r:void 0,a=typeof r=="string"?r:void 0;let l;return this.each((h,u)=>{let c=s.get(u);if(c?i&&c.render(i):c=new s(u,i),a){let f=c[a],d=c;f===void 0&&(d=c.$,f=d[a]),typeof f=="function"?l=f.call(d,...o):l=f}}),l!==void 0?l:this}})}}Ue.DEFAULT={},Ue.MULTI_INSTANCE=!1;class dr extends Ue{constructor(){super(...arguments),this.ref=Y()}get $(){return this.ref.current}afterInit(){this.render()}destroy(){var t,e;(e=(t=this.$)==null?void 0:t.componentWillUnmount)==null||e.call(t),this.element&&(this.element.innerHTML=""),super.destroy()}render(t){On(I(this.constructor.Component,{ref:this.ref,...this.setOptions(t)}),this.element)}}let si=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");const Ba="";class fr extends F{constructor(e){super(e);W(this,Et,void 0);W(this,Pt,void 0);U(this,Et,0),U(this,Pt,null),this._handleWheel=s=>{const{wheelContainer:r}=this.props,o=s.target;if(!(!o||!r)&&(typeof r=="string"&&o.closest(r)||typeof r=="object")){const i=(this.props.type==="horz"?s.deltaX:s.deltaY)*(this.props.wheelSpeed??1);this.scrollOffset(i)&&s.preventDefault()}},this._handleMouseMove=s=>{const{dragStart:r}=this.state;r&&(A(this,Et)&&cancelAnimationFrame(A(this,Et)),U(this,Et,requestAnimationFrame(()=>{const o=this.props.type==="horz"?s.clientX-r.x:s.clientY-r.y;this.scroll(r.offset+o*this.props.scrollSize/this.props.clientSize),U(this,Et,0)})),s.preventDefault())},this._handleMouseUp=()=>{this.state.dragStart&&this.setState({dragStart:!1})},this._handleMouseDown=s=>{this.state.dragStart||this.setState({dragStart:{x:s.clientX,y:s.clientY,offset:this.scrollPos}}),s.stopPropagation()},this._handleClick=s=>{const r=s.currentTarget;if(!r)return;const o=r.getBoundingClientRect(),{type:i,clientSize:a,scrollSize:l}=this.props,h=(i==="horz"?s.clientX-o.left:s.clientY-o.top)-this.barSize/2;this.scroll(h*l/a),s.preventDefault()},this.state={scrollPos:this.props.defaultScrollPos??0,dragStart:!1}}get scrollPos(){return this.props.scrollPos??this.state.scrollPos}get controlled(){return this.props.scrollPos!==void 0}get maxScrollPos(){const{scrollSize:e,clientSize:s}=this.props;return Math.max(0,e-s)}get barSize(){const{clientSize:e,scrollSize:s,size:r=12,minBarSize:o=3*r}=this.props;return Math.max(Math.round(e*e/s),o)}componentDidMount(){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp);const{wheelContainer:e}=this.props;e&&(U(this,Pt,typeof e=="string"?document:e.current),A(this,Pt).addEventListener("wheel",this._handleWheel,{passive:!1}))}componentWillUnmount(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),A(this,Pt)&&A(this,Pt).removeEventListener("wheel",this._handleWheel)}scroll(e){return e=Math.max(0,Math.min(Math.round(e),this.maxScrollPos)),e===this.scrollPos?!1:(this.controlled?this._afterScroll(e):this.setState({scrollPos:e},this._afterScroll.bind(this,e)),!0)}scrollOffset(e){return this.scroll(this.scrollPos+e)}_afterScroll(e){const{onScroll:s}=this.props;s&&s(e,this.props.type??"vert")}render(){const{clientSize:e,type:s,size:r=12,className:o,style:i,left:a,top:l,bottom:h,right:u}=this.props,{maxScrollPos:c,scrollPos:f}=this,{dragStart:d}=this.state,p={left:a,top:l,bottom:h,right:u,...i},m={};return s==="horz"?(p.height=r,p.width=e,m.width=this.barSize,m.left=Math.round(Math.min(c,f)*(e-m.width)/c)):(p.width=r,p.height=e,m.height=this.barSize,m.top=Math.round(Math.min(c,f)*(e-m.height)/c)),g("div",{className:R("scrollbar",o,{"is-vert":s==="vert","is-horz":s==="horz","is-dragging":d}),style:p,onMouseDown:this._handleClick,children:g("div",{className:"scrollbar-bar",style:m,onMouseDown:this._handleMouseDown})})}}Et=new WeakMap,Pt=new WeakMap;const Be=new Map,je=[];function pr(n,t){const{name:e}=n;if(!(t!=null&&t.override)&&Be.has(e))throw new Error(`DTable: Plugin with name ${e} already exists`);Be.set(e,n),t!=null&&t.buildIn&&!je.includes(e)&&je.push(e)}function G(n,t){pr(n,t);const e=s=>{if(!s)return n;const{defaultOptions:r,...o}=n;return{...o,defaultOptions:{...r,...s}}};return e.plugin=n,e}function gr(n){return Be.delete(n)}function ri(n){if(typeof n=="string"){const t=Be.get(n);return t||console.warn(`DTable: Cannot found plugin "${n}"`),t}if(typeof n=="function"&&"plugin"in n)return n.plugin;if(typeof n=="object")return n;console.warn("DTable: Invalid plugin",n)}function mr(n,t,e){return t.forEach(s=>{var o;if(!s)return;const r=ri(s);r&&(e.has(r.name)||((o=r.plugins)!=null&&o.length&&mr(n,r.plugins,e),n.push(r),e.add(r.name)))}),n}function oi(n=[],t=!0){return t&&je.length&&n.unshift(...je),n!=null&&n.length?mr([],n,new Set):[]}function yr(){return{cols:[],data:[],rowKey:"id",width:"100%",height:"auto",rowHeight:35,defaultColWidth:80,minColWidth:20,maxColWidth:9999,header:!0,footer:void 0,headerHeight:0,footerHeight:0,rowHover:!0,colHover:!1,cellHover:!1,bordered:!1,striped:!0,responsive:!1,scrollbarHover:!0,horzScrollbarPos:"outside"}}function ii(n,t,e){return n&&(t&&(n=Math.max(t,n)),e&&(n=Math.min(e,n))),n}function wr(n,t){return typeof n=="string"&&(n=n.endsWith("%")?parseFloat(n)/100:parseFloat(n)),typeof t=="number"&&(typeof n!="number"||isNaN(n))&&(n=t),n}function Un(n,t=!1){if(!n.list.length)return;if(n.widthSetting&&n.width!==n.widthSetting){n.width=n.widthSetting;const s=n.width-n.totalWidth;if(!t&&s>0||t&&s!==0){const r=n.flexList.length?n.flexList:n.list,o=r.reduce((i,a)=>i+(a.flex||1),0);r.forEach(i=>{const a=Math[s<0?"max":"min"](s,Math.ceil(s*((i.flex||1)/o)));i.realWidth=i.width+a})}}let e=0;n.list.forEach(s=>{s.realWidth||(s.realWidth=s.width),s.left=e,e+=s.realWidth})}function ai(n,t,e,s){const{defaultColWidth:r,minColWidth:o,maxColWidth:i,fixedLeftWidth:a=0,fixedRightWidth:l=0}=t,h=_=>(typeof _=="function"&&(_=_.call(n)),_=wr(_,0),_<1&&(_=Math.round(_*s)),_),u={width:0,list:[],flexList:[],widthSetting:0,totalWidth:0},c={...u,list:[],flexList:[],widthSetting:h(a)},f={...u,list:[],flexList:[],widthSetting:h(l)},d=[],p={};let m=!1;const b=[],y={};if(e.forEach(_=>{const{colTypes:k,onAddCol:x}=_;k&&Object.entries(k).forEach(([v,E])=>{y[v]||(y[v]=[]),y[v].push(E)}),x&&b.push(x)}),t.cols.forEach(_=>{if(_.hidden)return;const{type:k="",name:x}=_,v={fixed:!1,flex:!1,width:r,minWidth:o,maxWidth:i,..._,type:k},E={name:x,type:k,setting:v,flex:0,left:0,width:0,realWidth:0,visible:!0,index:d.length},M=y[k];M&&M.forEach(z=>{const J=typeof z=="function"?z.call(n,v):z;J&&Object.assign(v,J,_)});const{fixed:D,flex:S,minWidth:C=o,maxWidth:P=i}=v,L=wr(v.width||r,r);E.flex=S===!0?1:typeof S=="number"?S:0,E.width=ii(L<1?Math.round(L*s):L,C,P),b.forEach(z=>z.call(n,E)),d.push(E),p[E.name]=E;const T=D?D==="left"?c:f:u;T.list.push(E),T.totalWidth+=E.width,T.width=T.totalWidth,E.flex&&T.flexList.push(E),typeof v.order=="number"&&(m=!0)}),m){const _=(k,x)=>(k.setting.order??0)-(x.setting.order??0);d.sort(_),c.list.sort(_),u.list.sort(_),f.list.sort(_)}return Un(c,!0),Un(f,!0),u.widthSetting=s-c.width-f.width,Un(u),{list:d,map:p,left:c,center:u,right:f}}function li({col:n,className:t,height:e,row:s,onRenderCell:r,style:o,outerStyle:i,children:a,outerClass:l,width:h,left:u,top:c,...f}){var L;const d={left:u??n.left,top:c??s.top,width:h??n.realWidth,height:e,...i},{align:p,border:m}=n.setting,b={justifyContent:p?p==="left"?"start":p==="right"?"end":p:void 0,...n.setting.cellStyle,...o},y=["dtable-cell",l,t,n.setting.className,{"has-border-left":m===!0||m==="left","has-border-right":m===!0||m==="right"}],_=["dtable-cell-content",n.setting.cellClass],k=(L=s.data)==null?void 0:L[n.name],x=[a??k??""],v=r?r(x,{row:s,col:n,value:k},I):x,E=[],M=[],D={},S={};let C="div";v==null||v.forEach(T=>{if(typeof T=="object"&&T&&!vt(T)&&("html"in T||"className"in T||"style"in T||"attrs"in T||"children"in T||"tagName"in T)){const z=T.outer?E:M;T.html?z.push(g("div",{className:R("dtable-cell-html",T.className),style:T.style,dangerouslySetInnerHTML:{__html:T.html},...T.attrs??{}})):(T.style&&Object.assign(T.outer?d:b,T.style),T.className&&(T.outer?y:_).push(T.className),T.children&&z.push(T.children),T.attrs&&Object.assign(T.outer?D:S,T.attrs)),T.tagName&&!T.outer&&(C=T.tagName)}else M.push(T)});const P=C;return g("div",{className:R(y),style:d,"data-col":n.name,"data-row":s.id,"data-type":n.type||null,...f,...D,children:[M.length>0&&g(P,{className:R(_),style:b,...S,children:M}),E]})}function Bn({rows:n=[],cols:t,rowHeight:e,scrollLeft:s=0,scrollTop:r=0,left:o=0,top:i=0,width:a,height:l="100%",className:h,CellComponent:u=li,onRenderCell:c}){var m;const f=Array.isArray(n)?n:[n],d=((m=f[0])==null?void 0:m.top)??0,p=f.length;return g("div",{className:R("dtable-cells",h),style:{top:i,left:o,width:a,height:l},children:g("div",{className:"dtable-cells-container",style:{left:-s,top:-r+d},children:f.reduce((b,y,_)=>{const k=t.length;return t.forEach((x,v)=>{b.push(g(u,{className:R(`is-${y.index%2?"odd":"even"}-row`,v?"":"is-first-in-row",v===k-1?"is-last-in-row":"",_?"":"is-first-row",_===p-1?"is-last-row":""),col:x,row:y,top:y.top-d,height:e,onRenderCell:c},`${y.index}:${x.name}`))}),b},[])})})}function _r({top:n,height:t,rowHeight:e,rows:s,cols:{left:r,center:o,right:i},scrollLeft:a,scrollTop:l,className:h,style:u,onRenderCell:c,children:f}){let d=null;r.list.length&&(d=g(Bn,{className:"dtable-fixed-left",rows:s,scrollTop:l,cols:r.list,width:r.width,rowHeight:e,onRenderCell:c},"left"));let p=null;o.list.length&&(p=g(Bn,{rows:s,className:"dtable-scroll-center",scrollLeft:a,scrollTop:l,cols:o.list,left:r.width,width:o.width,rowHeight:e,onRenderCell:c},"center"));let m=null;return i.list.length&&(m=g(Bn,{className:"dtable-fixed-right",rows:s,scrollTop:l,cols:i.list,left:r.width+o.width,width:i.width,rowHeight:e,onRenderCell:c},"right")),g("div",{className:R("dtable-block",h),style:{...u,top:n,height:t},children:[d,p,m,f]})}var jn=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},N=(n,t,e)=>(jn(n,t,"read from private field"),e?e.call(n):t.get(n)),H=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},j=(n,t,e,s)=>(jn(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),Q=(n,t,e)=>(jn(n,t,"access private method"),e),jt,se,It,ht,Lt,K,ut,dt,re,Ye,qe,oe,kt,ie,ae,Yn,br,qn,vr,Gn,Cr,Kn,xr,Ge,$n,Ke,$e,Xn,Zn,Jn,Qn,le,Xe,ts,kr,es,Tr,ns,Sr;let ss=class extends F{constructor(t){super(t),H(this,Yn),H(this,qn),H(this,Gn),H(this,Kn),H(this,Ge),H(this,le),H(this,ts),H(this,es),H(this,ns),this.ref=Y(),H(this,jt,0),H(this,se,void 0),H(this,It,!1),H(this,ht,void 0),H(this,Lt,void 0),H(this,K,[]),H(this,ut,void 0),H(this,dt,new Map),H(this,re,{}),H(this,Ye,void 0),H(this,qe,[]),H(this,oe,{in:!1}),this.updateLayout=()=>{N(this,jt)&&cancelAnimationFrame(N(this,jt)),j(this,jt,requestAnimationFrame(()=>{this.update({dirtyType:"layout"}),j(this,jt,0)}))},H(this,kt,(e,s)=>{s=s||e.type;const r=N(this,dt).get(s);if(r!=null&&r.length){for(const o of r)if(o.call(this,e)===!1){e.stopPropagation(),e.preventDefault();break}}}),H(this,ie,e=>{N(this,kt).call(this,e,`window_${e.type}`)}),H(this,ae,e=>{N(this,kt).call(this,e,`document_${e.type}`)}),H(this,Ke,(e,s,r)=>{const{row:o,col:i}=s;s.value=this.getCellValue(o,i),e[0]=s.value;const a=o.id==="HEADER"?"onRenderHeaderCell":"onRenderCell";return N(this,K).forEach(l=>{l[a]&&(e=l[a].call(this,e,s,r))}),this.options[a]&&(e=this.options[a].call(this,e,s,r)),i.setting[a]&&(e=i.setting[a].call(this,e,s,r)),e}),H(this,$e,(e,s)=>{s==="horz"?this.scroll({scrollLeft:e}):this.scroll({scrollTop:e})}),H(this,Xn,e=>{var a,l,h;const s=this.getPointerInfo(e);if(!s)return;const{rowID:r,colName:o,cellElement:i}=s;if(r==="HEADER")i&&((a=this.options.onHeaderCellClick)==null||a.call(this,e,{colName:o,element:i}),N(this,K).forEach(u=>{var c;(c=u.onHeaderCellClick)==null||c.call(this,e,{colName:o,element:i})}));else{const u=this.layout.visibleRows.find(c=>c.id===r);if(i){if(((l=this.options.onCellClick)==null?void 0:l.call(this,e,{colName:o,rowID:r,rowInfo:u,element:i}))===!0)return;for(const c of N(this,K))if(((h=c.onCellClick)==null?void 0:h.call(this,e,{colName:o,rowID:r,rowInfo:u,element:i}))===!0)return}}}),H(this,Zn,e=>{const s=e.key.toLowerCase();if(["pageup","pagedown","home","end"].includes(s))return!this.scroll({to:s.replace("page","")})}),H(this,Jn,e=>{const s=w(e.target).closest(".dtable-cell");if(!s.length)return Q(this,le,Xe).call(this,!1);Q(this,le,Xe).call(this,[s.attr("data-row"),s.attr("data-col")])}),H(this,Qn,()=>{Q(this,le,Xe).call(this,!1)}),j(this,se,t.id??`dtable-${si(10)}`),this.state={scrollTop:0,scrollLeft:0,renderCount:0},j(this,Lt,Object.freeze(oi(t.plugins))),N(this,Lt).forEach(e=>{var i;const{methods:s,data:r,state:o}=e;s&&Object.entries(s).forEach(([a,l])=>{typeof l=="function"&&Object.assign(this,{[a]:l.bind(this)})}),r&&Object.assign(N(this,re),r.call(this)),o&&Object.assign(this.state,o.call(this)),(i=e.onCreate)==null||i.call(this,e)})}get options(){var t;return((t=N(this,ut))==null?void 0:t.options)||N(this,ht)||yr()}get plugins(){return N(this,K)}get layout(){return N(this,ut)}get id(){return N(this,se)}get data(){return N(this,re)}get element(){return this.ref.current}get parent(){var t;return this.props.parent??((t=this.element)==null?void 0:t.parentElement)}get hoverInfo(){return N(this,oe)}componentWillReceiveProps(){j(this,ht,void 0)}componentDidMount(){N(this,It)?this.forceUpdate():Q(this,Ge,$n).call(this),N(this,K).forEach(e=>{let{events:s}=e;s&&(typeof s=="function"&&(s=s.call(this)),Object.entries(s).forEach(([r,o])=>{o&&this.on(r,o)}))}),this.on("click",N(this,Xn)),this.on("keydown",N(this,Zn));const{options:t}=this;if((t.rowHover||t.colHover)&&(this.on("mouseover",N(this,Jn)),this.on("mouseleave",N(this,Qn))),t.responsive)if(typeof ResizeObserver<"u"){const{parent:e}=this;if(e){const s=new ResizeObserver(this.updateLayout);s.observe(e),j(this,Ye,s)}}else this.on("window_resize",this.updateLayout);N(this,K).forEach(e=>{var s;(s=e.onMounted)==null||s.call(this)})}componentDidUpdate(){N(this,It)?Q(this,Ge,$n).call(this):N(this,K).forEach(t=>{var e;(e=t.onUpdated)==null||e.call(this)})}componentWillUnmount(){var e;(e=N(this,Ye))==null||e.disconnect();const{element:t}=this;if(t)for(const s of N(this,dt).keys())s.startsWith("window_")?window.removeEventListener(s.replace("window_",""),N(this,ie)):s.startsWith("document_")?document.removeEventListener(s.replace("document_",""),N(this,ae)):t.removeEventListener(s,N(this,kt));N(this,K).forEach(s=>{var r;(r=s.onUnmounted)==null||r.call(this)}),N(this,Lt).forEach(s=>{var r;(r=s.onDestory)==null||r.call(this)}),j(this,re,{}),N(this,dt).clear()}on(t,e,s){var o;s&&(t=`${s}_${t}`);const r=N(this,dt).get(t);r?r.push(e):(N(this,dt).set(t,[e]),t.startsWith("window_")?window.addEventListener(t.replace("window_",""),N(this,ie)):t.startsWith("document_")?document.addEventListener(t.replace("document_",""),N(this,ae)):(o=this.element)==null||o.addEventListener(t,N(this,kt)))}off(t,e,s){var i;s&&(t=`${s}_${t}`);const r=N(this,dt).get(t);if(!r)return;const o=r.indexOf(e);o>=0&&r.splice(o,1),r.length||(N(this,dt).delete(t),t.startsWith("window_")?window.removeEventListener(t.replace("window_",""),N(this,ie)):t.startsWith("document_")?document.removeEventListener(t.replace("document_",""),N(this,ae)):(i=this.element)==null||i.removeEventListener(t,N(this,kt)))}emitCustomEvent(t,e){N(this,kt).call(this,e instanceof Event?e:new CustomEvent(t,{detail:e}),t)}scroll(t,e){const{scrollLeft:s,scrollTop:r,rowsHeightTotal:o,rowsHeight:i,rowHeight:a,cols:{center:{totalWidth:l,width:h}}}=this.layout,{to:u}=t;let{scrollLeft:c,scrollTop:f}=t;if(u==="up"||u==="down")f=r+(u==="down"?1:-1)*Math.floor(i/a)*a;else if(u==="left"||u==="right")c=s+(u==="right"?1:-1)*h;else if(u==="top")f=0;else if(u==="bottom")f=o-i;else if(u==="begin")c=0;else if(u==="end")c=l-h;else{const{offsetLeft:p,offsetTop:m}=t;typeof p=="number"&&(c=s+p),typeof m=="number"&&(c=r+m)}const d={};return typeof c=="number"&&(c=Math.max(0,Math.min(c,l-h)),c!==s&&(d.scrollLeft=c)),typeof f=="number"&&(f=Math.max(0,Math.min(f,o-i)),f!==r&&(d.scrollTop=f)),Object.keys(d).length?(this.setState(d,()=>{var p;(p=this.options.onScroll)==null||p.call(this,d),e==null||e.call(this,!0)}),!0):(e==null||e.call(this,!1),!1)}getColInfo(t){if(t===void 0)return;if(typeof t=="object")return t;const{cols:e}=this.layout;return typeof t=="number"?e.list[t]:e.map[t]}getRowInfo(t){if(t===void 0)return;if(typeof t=="object")return t;if(t===-1||t==="HEADER")return{id:"HEADER",index:-1,top:0};const{rows:e,rowsMap:s,allRows:r}=this.layout;return typeof t=="number"?e[t]:s[t]||r.find(o=>o.id===t)}getCellValue(t,e){var a;const s=typeof t=="object"?t:this.getRowInfo(t);if(!s)return;const r=typeof e=="object"?e:this.getColInfo(e);if(!r)return;let o=s.id==="HEADER"?r.setting.title:(a=s.data)==null?void 0:a[r.name];const{cellValueGetter:i}=this.options;return i&&(o=i.call(this,s,r,o)),o}getRowInfoByIndex(t){return this.layout.rows[t]}update(t={},e){if(!N(this,ht))return;typeof t=="function"&&(e=t,t={});const{dirtyType:s,state:r}=t;if(s==="layout")j(this,ut,void 0);else if(s==="options"){if(j(this,ht,void 0),!N(this,ut))return;j(this,ut,void 0)}this.setState(r??(o=>({renderCount:o.renderCount+1})),e)}getPointerInfo(t){const e=t.target;if(!e||e.closest(".no-cell-event"))return;const s=w(e).closest(".dtable-cell");if(!s.length)return;const r=s.attr("data-row"),o=s.attr("data-col");if(!(typeof o!="string"||typeof r!="string"))return{cellElement:s[0],colName:o,rowID:r,target:e}}i18n(t,e,s){return q(N(this,qe),t,e,s,this.options.lang)??`{i18n:${t}}`}getPlugin(t){return this.plugins.find(e=>e.name===t)}render(){let t=Q(this,ns,Sr).call(this);const{className:e,rowHover:s,colHover:r,cellHover:o,bordered:i,striped:a,scrollbarHover:l,beforeRender:h}=this.options,u={},c=["dtable",e,{"dtable-hover-row":s,"dtable-hover-col":r,"dtable-hover-cell":o,"dtable-bordered":i,"dtable-striped":a,"scrollbar-hover":l}],f=[];if(t){if(c.push(t.className),h){const d=h.call(this,t);d&&(t=d)}N(this,K).forEach(d=>{var m;const p=(m=d.beforeRender)==null?void 0:m.call(this,t);p&&(t=p)}),u.width=t.width,u.height=t.height,u["--dtable-row-height"]=`${t.rowHeight}px`,c.push({"dtable-scrolled-down":t.scrollTop>0,"dtable-scrolled-bottom":t.scrollTop>=t.rowsHeightTotal-t.rowsHeight,"dtable-scrolled-right":t.scrollLeft>0,"dtable-scrolled-end":t.scrollLeft>=t.cols.center.totalWidth-t.cols.center.width}),t.children&&f.push(...t.children),f.push(Q(this,Yn,br).call(this,t),Q(this,qn,vr).call(this,t),Q(this,Gn,Cr).call(this,t)),t.scrollable&&f.push(Q(this,Kn,xr).call(this,t)),N(this,K).forEach(d=>{var m;const p=(m=d.onRender)==null?void 0:m.call(this,t);p&&(p.style&&Object.assign(u,p.style),p.className&&c.push(p.className),p.children&&f.push(p.children))})}return g("div",{id:N(this,se),className:R(c),style:u,ref:this.ref,tabIndex:-1,children:f})}};jt=new WeakMap,se=new WeakMap,It=new WeakMap,ht=new WeakMap,Lt=new WeakMap,K=new WeakMap,ut=new WeakMap,dt=new WeakMap,re=new WeakMap,Ye=new WeakMap,qe=new WeakMap,oe=new WeakMap,kt=new WeakMap,ie=new WeakMap,ae=new WeakMap,Yn=new WeakSet,br=function(n){const{header:t,cols:e,headerHeight:s,scrollLeft:r,headerChildren:o}=n;if(!t)return null;if(t===!0)return g(_r,{className:"dtable-header",cols:e,height:s,scrollLeft:r,rowHeight:s,scrollTop:0,rows:{id:"HEADER",index:-1,top:0},top:0,onRenderCell:N(this,Ke),children:o},"header");const i=Array.isArray(t)?t:[t];return g(Fn,{className:"dtable-header",style:{height:s},renders:i,generateArgs:[n],generatorThis:this,children:o},"header")},qn=new WeakSet,vr=function(n){const{headerHeight:t,rowsHeight:e,visibleRows:s,rowHeight:r,cols:o,scrollLeft:i,scrollTop:a,bodyChildren:l}=n;return g(_r,{className:"dtable-body",top:t,height:e,rows:s,rowHeight:r,scrollLeft:i,scrollTop:a,cols:o,onRenderCell:N(this,Ke),children:l},"body")},Gn=new WeakSet,Cr=function(n){let{footer:t}=n;if(typeof t=="function"&&(t=t.call(this,n)),!t)return null;const e=Array.isArray(t)?t:[t];return g(Fn,{className:"dtable-footer",style:{height:n.footerHeight,top:n.rowsHeight+n.headerHeight},renders:e,generateArgs:[n],generatorThis:this,generators:n.footerGenerators,children:n.footerChildren},"footer")},Kn=new WeakSet,xr=function(n){const t=[],{scrollLeft:e,cols:{left:{width:s},center:{width:r,totalWidth:o}},scrollTop:i,rowsHeight:a,rowsHeightTotal:l,footerHeight:h,headerHeight:u}=n,{scrollbarSize:c=12,horzScrollbarPos:f}=this.options;return o>r&&t.push(g(fr,{type:"horz",scrollPos:e,scrollSize:o,clientSize:r,onScroll:N(this,$e),left:s,bottom:(f==="inside"?0:-c)+h,size:c,wheelContainer:this.ref},"horz"),g("div",{className:"dtable-scroll-shadow is-left",style:{left:s,height:u+a}}),g("div",{className:"dtable-scroll-shadow is-right",style:{left:s+r,height:u+a}})),l>a&&t.push(g(fr,{type:"vert",scrollPos:i,scrollSize:l,clientSize:a,onScroll:N(this,$e),right:0,size:c,top:u,wheelContainer:this.ref},"vert")),t.length?t:null},Ge=new WeakSet,$n=function(){var n;j(this,It,!1),(n=this.options.afterRender)==null||n.call(this),N(this,K).forEach(t=>{var e;return(e=t.afterRender)==null?void 0:e.call(this)})},Ke=new WeakMap,$e=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,le=new WeakSet,Xe=function(n){const{element:t,options:e}=this;if(!t)return;const s=w(t),r=n?{in:!0,row:n[0],col:n[1]}:{in:!1};e.colHover==="header"&&r.row!=="HEADER"&&(r.col=void 0);const o=N(this,oe);r.in!==o.in&&s.toggleClass("dtable-hover",r.in),r.row!==o.row&&(s.find(".is-hover-row").removeClass("is-hover-row"),r.row&&s.find(`.dtable-cell[data-row="${r.row}"]`).addClass("is-hover-row")),r.col!==o.col&&(s.find(".is-hover-col").removeClass("is-hover-col"),r.col&&s.find(`.dtable-cell[data-col="${r.col}"]`).addClass("is-hover-col")),j(this,oe,r)},ts=new WeakSet,kr=function(){if(N(this,ht))return!1;const t={...yr(),...N(this,Lt).reduce((e,s)=>{const{defaultOptions:r}=s;return r&&Object.assign(e,r),e},{}),...this.props};return j(this,ht,t),j(this,K,N(this,Lt).reduce((e,s)=>{const{when:r,options:o}=s;let i=t;return o&&(i=Object.assign({...i},typeof o=="function"?o.call(this,t):o)),(!r||r(i))&&(i!==t&&Object.assign(t,i),e.push(s)),e},[])),j(this,qe,[this.options.i18n,...this.plugins.map(e=>e.i18n)].filter(Boolean)),!0},es=new WeakSet,Tr=function(){var D,S;const{plugins:n}=this;let t=N(this,ht);const e={flex:g("div",{style:"flex:auto"}),divider:g("div",{style:"width:1px;margin:var(--space);background:var(--color-border);height:50%"})};n.forEach(C=>{var L;const P=(L=C.beforeLayout)==null?void 0:L.call(this,t);P&&(t={...t,...P}),Object.assign(e,C.footer)});let s=t.width,r=0;if(typeof s=="function"&&(s=s.call(this)),s==="100%"){const{parent:C}=this;if(C)r=C.clientWidth;else{j(this,It,!0);return}}const o=ai(this,t,n,r),{data:i,rowKey:a="id",rowHeight:l}=t,h=[],u=(C,P,L)=>{var z,J;const T={data:L??{[a]:C},id:C,index:h.length,top:0};if(L||(T.lazy=!0),h.push(T),((z=t.onAddRow)==null?void 0:z.call(this,T,P))!==!1){for(const ct of n)if(((J=ct.onAddRow)==null?void 0:J.call(this,T,P))===!1)return}};if(typeof i=="number")for(let C=0;C<i;C++)u(`${C}`,C);else Array.isArray(i)&&i.forEach((C,P)=>{typeof C=="object"?u(`${C[a]??""}`,P,C):u(`${C??""}`,P)});let c=h;const f={};if(t.onAddRows){const C=t.onAddRows.call(this,c);C&&(c=C)}for(const C of n){const P=(D=C.onAddRows)==null?void 0:D.call(this,c);P&&(c=P)}c.forEach((C,P)=>{f[C.id]=C,C.index=P,C.top=C.index*l});const{header:d,footer:p}=t,m=d?t.headerHeight||l:0,b=p?t.footerHeight||l:0;let y=t.height,_=0;const k=c.length*l,x=m+b+k;if(typeof y=="function"&&(y=y.call(this,x)),y==="auto")_=x;else if(typeof y=="object")_=Math.min(y.max,Math.max(y.min,x));else if(y==="100%"){const{parent:C}=this;if(C)_=C.clientHeight;else{_=0,j(this,It,!0);return}}else _=y;const v=_-m-b,E={options:t,allRows:h,width:r,height:_,rows:c,rowsMap:f,rowHeight:l,rowsHeight:v,rowsHeightTotal:k,header:d,footer:p,footerGenerators:e,headerHeight:m,footerHeight:b,cols:o},M=(S=t.onLayout)==null?void 0:S.call(this,E);M&&Object.assign(E,M),n.forEach(C=>{if(C.onLayout){const P=C.onLayout.call(this,E);P&&Object.assign(E,P)}}),j(this,ut,E)},ns=new WeakSet,Sr=function(){(Q(this,ts,kr).call(this)||!N(this,ut))&&Q(this,es,Tr).call(this);const{layout:n}=this;if(!n)return;const{cols:{center:t}}=n;let{scrollLeft:e}=this.state;e=Math.min(Math.max(0,t.totalWidth-t.width),e);let s=0;t.list.forEach(p=>{p.left=s,s+=p.realWidth,p.visible=p.left+p.realWidth>=e&&p.left<=e+t.width});const{rowsHeightTotal:r,rowsHeight:o,rows:i,rowHeight:a}=n,l=Math.min(Math.max(0,r-o),this.state.scrollTop),h=Math.floor(l/a),u=l+o,c=Math.min(i.length,Math.ceil(u/a)),f=[],{rowDataGetter:d}=this.options;for(let p=h;p<c;p++){const m=i[p];m.lazy&&d&&(m.data=d([m.id])[0],m.lazy=!1),f.push(m)}return Object.assign(n,{visibleRows:f,scrollTop:l,scrollLeft:e,headerChildren:[],bodyChildren:[],footerChildren:[],children:[],className:"",scrollable:!0}),n},ss.addPlugin=pr,ss.removePlugin=gr;const rs=24*60*60*1e3,tt=n=>n?(n instanceof Date||(typeof n=="string"&&(n=n.trim(),/^\d+$/.test(n)&&(n=Number.parseInt(n,10))),typeof n=="number"&&n<1e10&&(n*=1e3),n=new Date(n)),n):new Date,ci=(n,t,e="day")=>{if(typeof t=="string"){const s=Number.parseInt(t,10);e=t.replace(s.toString(),""),t=s}return n=new Date(tt(n).getTime()),e==="month"?n.setMonth(n.getMonth()+t):e==="year"?n.setFullYear(n.getFullYear()+t):e==="week"?n.setDate(n.getDate()+t*7):e==="hour"?n.setHours(n.getHours()+t):e==="minute"?n.setMinutes(n.getMinutes()+t):e==="second"?n.setSeconds(n.getSeconds()+t):n.setDate(n.getDate()+t),n},hi=(n,t=new Date)=>tt(n).toDateString()===tt(t).toDateString(),ui=(n,t=new Date)=>tt(n).getFullYear()===tt(t).getFullYear(),di=(n,t=new Date)=>(n=tt(n),t=tt(t),n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()),ft=(n,t="yyyy-MM-dd hh:mm",e="")=>{if(n=tt(n),Number.isNaN(n.getDay()))return e;const s={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"H+":n.getHours()%12,"m+":n.getMinutes(),"s+":n.getSeconds(),"S+":n.getMilliseconds()};return/(y+)/i.test(t)&&(t.includes("[yyyy-]")&&(t=t.replace("[yyyy-]",ui(n)?"":"yyyy-")),t=t.replace(RegExp.$1,`${n.getFullYear()}`.substring(4-RegExp.$1.length))),Object.keys(s).forEach(r=>{if(new RegExp(`(${r})`).test(t)){const o=`${s[r]}`;t=t.replace(RegExp.$1,RegExp.$1.length===1?o:`00${o}`.substring(o.length))}}),t};class Nr extends F{render(t){const{percent:e=50,size:s=24,circleBg:r,circleColor:o,text:i,className:a,textStyle:l,textX:h,textY:u,children:c}=t,f=s/2;let{circleWidth:d=.2}=t;d<1&&(d=s*d);const p=(s-d)/2;return g("svg",{className:a,width:s,height:s,children:[g("circle",{cx:f,cy:f,r:p,"stroke-width":d,stroke:r,fill:"transparent"}),g("circle",{cx:f,cy:f,r:p,"stroke-width":d,stroke:o,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*p*2,"stroke-dashoffset":Math.PI*p*2*(100-e)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),i?g("text",{x:h??f,y:u??f+d/2,"dominant-baseline":"middle","text-anchor":"middle",style:l||{fontSize:`${p}px`},children:i===!0?Math.round(e):i}):null,c]})}}Nr.defaultProps={percent:50,size:24,circleWidth:.1,circleBg:"var(--color-surface)",circleColor:"var(--color-primary-500)",text:!0};class Mr extends F{render(t){const{percent:e=50,color:s,background:r=null,height:o,width:i,children:a,className:l,style:h}=t;return g("div",{class:R("progress",l),style:{width:i,height:o,"--progress-bg":r,"--progress-bar-color":s,...h},children:[g("div",{class:"progress-bar",style:{width:`${e}%`}}),a]})}}Mr.defaultProps={percent:50,height:20,width:"auto"};const ja="",Ya="";function os(n,t,e,s){if(typeof n=="function"&&(n=n(t)),typeof n=="string"&&n.length&&(n={url:n}),!n)return e;const{url:r,...o}=n,{setting:i}=t.col,a={};return i&&Object.keys(i).forEach(l=>{l.startsWith("data-")&&(a[l]=i[l])}),g("a",{href:B(r,t.row.data),...s,...o,...a,children:e})}function is(n,t,e){var s;if(n!=null)return e=e??((s=t.row.data)==null?void 0:s[t.col.name]),typeof n=="function"?n(e,t):B(n,e)}function Er(n,t,e,s){var r;return e?(e=e??((r=t.row.data)==null?void 0:r[t.col.name]),n===!1?e:(n===!0&&(n="[yyyy-]MM-dd hh:mm"),typeof n=="function"&&(n=n(e,t)),ft(e,n,s??e))):s??e}function Pr(n,t){const{link:e}=t.col.setting,s=os(e,t,n[0]);return s&&(n[0]=s),n}function Rr(n,t){const{format:e}=t.col.setting;return e&&(n[0]=is(e,t,n[0])),n}function Dr(n,t){const{map:e}=t.col.setting;return typeof e=="function"?n[0]=e(n[0],t):typeof e=="object"&&e&&(n[0]=e[n[0]]??n[0]),n}function Ar(n,t,e="[yyyy-]MM-dd hh:mm"){const{formatDate:s=e,invalidDate:r}=t.col.setting;return n[0]=Er(s,t,n[0],r),n}function as(n,t,e=!1){const{html:s=e}=t.col.setting;if(s===!1)return n;const r=n[0],o=s===!0?r:is(s,t,r);return n[0]={html:o},n}const fi=G({name:"rich",colTypes:{html:{onRenderCell(n,t){return as(n,t,!0)}},progress:{align:"center",onRenderCell(n,{col:t}){const{progressType:e,barColor:s,barBgColor:r,barHeight:o=6,barWidth:i=64,circleSize:a=24,circleBorderSize:l=1,circleBgColor:h="var(--color-border)",circleColor:u="var(--color-success-500)"}=t.setting,c=n[0];return n[0]=e==="bar"?g(Mr,{className:"rounded-full",width:i,height:o,color:s||u,background:r,percent:c}):g(Nr,{percent:c,size:a,circleWidth:l,circleBg:h,circleColor:u,text:!0}),n}},datetime:{formatDate:"[yyyy-]MM-dd hh:mm"},date:{formatDate:"yyyy-MM-dd"},time:{formatDate:"hh:mm"}},onRenderCell(n,t){const{formatDate:e,html:s,hint:r}=t.col.setting;if(e&&(n=Ar(n,t,e)),n=Dr(n,t),n=Rr(n,t),s?n=as(n,t):n=Pr(n,t),r){let o=n[0];typeof r=="function"?o=r.call(this,t):typeof r=="string"&&(o=B(r,t.row.data)),n.push({attrs:{title:o}})}return n}},{buildIn:!0}),pi={html:{component:Vn}},Ir=G({name:"custom",onRenderCell(n,t){const{col:e}=t;let{custom:s}=e.setting;if(typeof s=="function"&&(s=s.call(this,t)),!s)return n;const r=Array.isArray(s)?s:[s],{customMap:o}=this.options;return r.forEach(i=>{let a;typeof i=="string"?a=i.startsWith("<")?{component:Vn,props:{html:B(i,{value:t.value,...t.row.data,$value:t.value})}}:{component:i}:a=i;let{component:l}=a;const h=[a];typeof l=="string"&&h.unshift(pi[l],o==null?void 0:o[l]);const u={};h.forEach(f=>{if(f){const{props:d}=f;d&&w.extend(u,typeof d=="function"?d.call(this,t):d),l=f.component||l}},{props:{}});const c=l;n[0]={outer:!0,className:"dtable-custom-cell",children:g(c,{...u})}}),n}}),Ka="";function gi(n,t,e=!1){var a,l;typeof n=="boolean"&&(t=n,n=void 0);const s=this.state.checkedRows,r={},{canRowCheckable:o}=this.options,i=(h,u)=>{const c=o?o.call(this,h):!0;!c||e&&c==="disabled"||!!s[h]===u||(u?s[h]=!0:delete s[h],r[h]=u)};if(n===void 0?(t===void 0&&(t=!Lr.call(this)),(a=this.layout)==null||a.allRows.forEach(({id:h})=>{i(h,!!t)})):(Array.isArray(n)||(n=[n]),n.forEach(h=>{i(h,t??!s[h])})),Object.keys(r).length){const h=(l=this.options.beforeCheckRows)==null?void 0:l.call(this,n,r,s);h&&Object.keys(h).forEach(u=>{h[u]?s[u]=!0:delete s[u]}),this.setState({checkedRows:{...s}},()=>{var u;(u=this.options.onCheckChange)==null||u.call(this,r)})}return r}function mi(n){return this.state.checkedRows[n]??!1}function Lr(){var s,r;const n=(s=this.layout)==null?void 0:s.allRows.length;if(!n)return!1;const t=this.getChecks().length,{canRowCheckable:e}=this.options;return e?t===((r=this.layout)==null?void 0:r.allRows.reduce((o,i)=>o+(e.call(this,i.id)?1:0),0)):t===n}function yi(){return Object.keys(this.state.checkedRows)}function wi(n){const{checkable:t}=this.options;n===void 0&&(n=!t),t!==n&&this.setState({forceCheckable:n})}function Wr(n,t,e=!1){return g("div",{class:`checkbox-primary dtable-checkbox${n?" checked":""}${e?" disabled":""}`,children:g("label",{})})}const Hr='input[type="checkbox"],.dtable-checkbox',_i=G({name:"checkable",defaultOptions:{checkable:"auto",checkboxRender:Wr},when:n=>!!n.checkable,options(n){const{forceCheckable:t}=this.state;return t!==void 0?n.checkable=t:n.checkable==="auto"&&(n.checkable=!!n.cols.some(e=>e.checkbox)),n},state(){return{checkedRows:{}}},methods:{toggleCheckRows:gi,isRowChecked:mi,isAllRowChecked:Lr,getChecks:yi,toggleCheckable:wi},i18n:{zh_cn:{checkedCountInfo:"已选择 {selected} 项",totalCountInfo:"共 {total} 项"},zh_tw:{checkedCountInfo:"已選擇 {selected} 項",totalCountInfo:"共 {total} 項"},en:{checkedCountInfo:"Selected {selected} items",totalCountInfo:"Total {total} items"}},footer:{checkbox(){const n=this.isAllRowChecked();return[g("div",{style:{paddingRight:"calc(3*var(--space))",display:"flex",alignItems:"center"},onClick:()=>this.toggleCheckRows(),children:Wr(n)})]},checkedInfo(n,t){const e=this.getChecks(),{checkInfo:s}=this.options;if(s)return[s.call(this,e)];const r=e.length,o=[];return r&&o.push(this.i18n("checkedCountInfo",{selected:r})),o.push(this.i18n("totalCountInfo",{total:t.allRows.length})),[g("div",{children:o.join(", ")})]}},onRenderCell(n,{row:t,col:e}){var h;const{id:s}=t,{canRowCheckable:r}=this.options,o=r?r.call(this,s):!0;if(!o)return n;const{checkbox:i}=e.setting,a=typeof i=="function"?i.call(this,s):i,l=this.isRowChecked(s);if(a){const u=(h=this.options.checkboxRender)==null?void 0:h.call(this,l,s,o==="disabled");n.push(u,{outer:!0,className:"has-checkbox"})}return l&&n.push({outer:!0,className:"is-checked"}),n},onRenderHeaderCell(n,{row:t,col:e}){var i;const{id:s}=t,{checkbox:r}=e.setting;if(typeof r=="function"?r.call(this,s):r){const a=this.isAllRowChecked(),l=(i=this.options.checkboxRender)==null?void 0:i.call(this,a,s);n.push(l,{outer:!0,className:"has-checkbox"})}return n},onHeaderCellClick(n){const t=n.target;if(!t)return;const e=t.closest(Hr);e&&this.toggleCheckRows(e.checked)},onCellClick(n,{rowID:t}){const e=w(n.target);if(!e.length||e.closest("btn,a,button.not-checkable,.form-control,.btn").length)return;(e.closest(Hr).not(".disabled").length||this.options.checkOnClickRow)&&this.toggleCheckRows(t,void 0,!0)}}),Xa="",Za="";var Or=(n=>(n.unknown="",n.collapsed="collapsed",n.expanded="expanded",n.hidden="hidden",n.normal="normal",n))(Or||{});function Ze(n){const t=this.data.nestedMap.get(n);if(!t||t.state!=="")return t??{state:"normal",level:-1};if(!t.parent&&!t.children)return t.state="normal",t;const e=this.state.collapsedRows,s=t.children&&e&&e[n];let r=!1,{parent:o}=t;for(;o;){const i=Ze.call(this,o);if(i.state!=="expanded"){r=!0;break}o=i.parent}return t.state=r?"hidden":s?"collapsed":t.children?"expanded":"normal",t.level=t.parent?Ze.call(this,t.parent).level+1:0,t}function bi(n){return n!==void 0?Ze.call(this,n):this.data.nestedMap}function vi(n,t){let e=this.state.collapsedRows??{};const{nestedMap:s}=this.data;if(n==="HEADER")if(t===void 0&&(t=!zr.call(this)),t){const r=s.entries();for(const[o,i]of r)i.state==="expanded"&&(e[o]=!0)}else e={};else{const r=Array.isArray(n)?n:[n];t===void 0&&(t=!e[r[0]]),r.forEach(o=>{const i=s.get(o);t&&(i!=null&&i.children)?e[o]=!0:delete e[o]})}this.update({dirtyType:"layout",state:{collapsedRows:{...e}}},()=>{var r;(r=this.options.onNestedChange)==null||r.call(this)})}function zr(){const n=this.data.nestedMap.values();for(const t of n)if(t.state==="expanded")return!1;return!0}function Vr(n,t=0,e,s=0){var r;e||(e=[...n.keys()]);for(const o of e){const i=n.get(o);i&&(i.level===s&&(i.order=t++),(r=i.children)!=null&&r.length&&(t=Vr(n,t,i.children,s+1)))}return t}function Fr(n,t,e,s){const r=n.getNestedRowInfo(t);return!r||r.state===""||!r.children||r.children.forEach(o=>{s[o]=e,Fr(n,o,e,s)}),r}function Ur(n,t,e,s,r){var a;const o=n.getNestedRowInfo(t);if(!o||o.state==="")return;((a=o.children)==null?void 0:a.every(l=>{const h=!!(s[l]!==void 0?s[l]:r[l]);return e===h}))&&(s[t]=e),o.parent&&Ur(n,o.parent,e,s,r)}const Ci=G({name:"nested",defaultOptions:{nested:"auto",nestedParentKey:"parent",asParentKey:"asParent",nestedIndent:20,canSortTo(n,t){const{nestedMap:e}=this.data,s=e.get(n.id),r=e.get(t.id);return(s==null?void 0:s.parent)===(r==null?void 0:r.parent)},beforeCheckRows(n,t,e){if(!this.options.checkable||!(n!=null&&n.length))return;const s={};return Object.entries(t).forEach(([r,o])=>{const i=Fr(this,r,o,s);i!=null&&i.parent&&Ur(this,i.parent,o,s,e)}),s}},options(n){return n.nested==="auto"&&(n.nested=!!n.cols.some(t=>t.nestedToggle)),n},when:n=>!!n.nested,data(){return{nestedMap:new Map}},methods:{getNestedInfo:bi,toggleRow:vi,isAllCollapsed:zr,getNestedRowInfo:Ze},beforeLayout(){var n;(n=this.data.nestedMap)==null||n.clear()},onAddRow(n){var r,o;const{nestedMap:t}=this.data,e=String((r=n.data)==null?void 0:r[this.options.nestedParentKey??"parent"]),s=t.get(n.id)??{state:"",level:0};if(s.parent=e==="0"?void 0:e,(o=n.data)!=null&&o[this.options.asParentKey??"asParent"]&&(s.children=[]),t.set(n.id,s),e){let i=t.get(e);i||(i={state:"",level:0},t.set(e,i)),i.children||(i.children=[]),i.children.push(n.id)}},onAddRows(n){return n=n.filter(t=>this.getNestedRowInfo(t.id).state!=="hidden"),Vr(this.data.nestedMap),n.sort((t,e)=>{const s=this.getNestedRowInfo(t.id),r=this.getNestedRowInfo(e.id),o=(s.order??0)-(r.order??0);return o===0?t.index-e.index:o}),n},onRenderCell(n,{col:t,row:e}){var a;const{id:s,data:r}=e,{nestedToggle:o}=t.setting,i=this.getNestedRowInfo(s);if(o&&(i.children||i.parent)&&n.push(((a=this.options.onRenderNestedToggle)==null?void 0:a.call(this,i,s,t,r))??g("a",{className:`dtable-nested-toggle state${i.children?"":" is-no-child"}`,children:g("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${i.state}`}),i.level){let{nestedIndent:l=o}=t.setting;l&&(l===!0&&(l=this.options.nestedIndent??12),n.push(g("div",{className:"dtable-nested-indent",style:{width:l*i.level+"px"}})))}return n},onRenderHeaderCell(n,{row:t,col:e}){var r;const{id:s}=t;return e.setting.nestedToggle&&n.push(((r=this.options.onRenderNestedToggle)==null?void 0:r.call(this,void 0,s,e,void 0))??g("a",{className:"dtable-nested-toggle state",children:g("span",{className:"toggle-icon"})}),{outer:!0,className:`is-${this.isAllCollapsed()?"collapsed":"expanded"}`}),n},onHeaderCellClick(n){const t=n.target;if(!(!t||!t.closest(".dtable-nested-toggle")))return this.toggleRow("HEADER"),!0},onCellClick(n,{rowID:t}){const e=n.target;if(!(!e||!this.getNestedRowInfo(t).children||!e.closest(".dtable-nested-toggle")))return this.toggleRow(t),!0}});function xi(n){if(n.indexOf("#")===0&&(n=n.slice(1)),n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n.length!==6)throw new Error(`Invalid HEX color "${n}".`);return[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}function ki(n){const[t,e,s]=typeof n=="string"?xi(n):n;return t*.299+e*.587+s*.114>186}function Br(n,t){return ki(n)?(t==null?void 0:t.dark)??"#333333":(t==null?void 0:t.light)??"#ffffff"}function jr(n,t=255){return Math.min(Math.max(n,0),t)}function Ti(n,t,e){n=n%360/360,t=jr(t),e=jr(e);const s=e<=.5?e*(t+1):e+t-e*t,r=e*2-s,o=i=>(i=i<0?i+1:i>1?i-1:i,i*6<1?r+(s-r)*i*6:i*2<1?s:i*3<2?r+(s-r)*(2/3-i)*6:r);return[o(n+1/3)*255,o(n)*255,o(n-1/3)*255]}function Si(n){let t=0;if(typeof n!="string"&&(n=String(n)),n&&n.length)for(let e=0;e<n.length;++e)t+=(e+1)*n.charCodeAt(e);return t}function Ni(n,t){return/^[\u4e00-\u9fa5\s]+$/.test(n)?n.length<=t?n:n.substring(n.length-t):/^[A-Za-z\d\s]+$/.test(n)?n[0].toUpperCase():n.length<=t?n:n.substring(0,t)}class Mi extends F{render(){const{className:t,style:e,size:s="",circle:r,rounded:o,background:i,foreColor:a,text:l,code:h,maxTextLength:u=2,src:c,hueDistance:f=43,saturation:d=.4,lightness:p=.6,children:m,...b}=this.props,y=["avatar",t],_={...e,background:i,color:a};let k=32;s&&(typeof s=="number"?(_.width=`${s}px`,_.height=`${s}px`,_.fontSize=`${Math.max(12,Math.round(s/2))}px`,k=s):(y.push(`size-${s}`),k={xs:20,sm:24,lg:48,xl:80}[s])),r?y.push("circle"):o&&(typeof o=="number"?_.borderRadius=`${o}px`:y.push(`rounded-${o}`));let x;if(c)y.push("has-img"),x=g("img",{className:"avatar-img",src:c,alt:l});else if(l!=null&&l.length){const v=Ni(l,u);if(y.push("has-text",`has-text-${v.length}`),i)!a&&i&&(_.color=Br(i));else{const M=h??l,D=(typeof M=="number"?M:Si(M))*f%360;if(_.background=`hsl(${D},${d*100}%,${p*100}%)`,!a){const S=Ti(D,d,p);_.color=Br(S)}}let E;k&&k<14*v.length&&(E={transform:`scale(${k/(14*v.length)})`,whiteSpace:"nowrap"}),x=g("div",{"data-actualSize":k,className:"avatar-text",style:E,children:v})}return g("div",{className:R(y),style:_,...b,children:[x,m]})}}function ls(n,{row:t,col:e}){const{data:s}=t,r=s?s[e.name]:void 0;if(!(r!=null&&r.length))return n;const{avatarClass:o="rounded-full",avatarKey:i=`${e.name}Avatar`,avatarProps:a,avatarCodeKey:l,avatarNameKey:h=`${e.name}Name`}=e.setting,u=(s?s[h]:r)||n[0],c={size:"xs",className:R(o,a==null?void 0:a.className,"flex-none"),src:s?s[i]:void 0,text:u,code:l?s?s[l]:void 0:r,...a};if(n[0]=g(Mi,{...c}),e.type==="avatarBtn"){const{avatarBtnProps:f}=e.setting,d=typeof f=="function"?f(e,t):f;n[0]=g("button",{type:"button",className:"btn btn-avatar",...d,children:[n[0],g("div",{children:u})]})}else e.type==="avatarName"&&(n[0]=g("div",{className:"flex items-center gap-1",children:[n[0],g("span",{children:u})]}));return n}const Ei=G({name:"avatar",colTypes:{avatar:{onRenderCell:ls},avatarBtn:{onRenderCell:ls},avatarName:{onRenderCell:ls}}},{buildIn:!0}),Pi=G({name:"sort-type",onRenderHeaderCell(n,t){const{col:e}=t,{sortType:s}=e.setting;if(s){const r=s===!0?"none":s;n.push(g("div",{className:`dtable-sort dtable-sort-${r}`}),{outer:!0,attrs:{"data-sort":r}});let{sortLink:o=this.options.sortLink}=e.setting;if(o){const i=r==="asc"?"desc":"asc";typeof o=="function"&&(o=o.call(this,e,i,r)),typeof o=="string"&&(o={url:o});const{url:a,...l}=o;n[0]=g("a",{href:B(a,{...e.setting,sortType:i}),...l,children:n[0]})}}return n}},{buildIn:!0}),cs=n=>{n.length!==1&&n.forEach((t,e)=>{!e||t.setting.border||t.setting.group===n[e-1].setting.group||(t.setting.border="left")})},Ri=G({name:"group",defaultOptions:{groupDivider:!0},when:n=>!!n.groupDivider,onLayout(n){if(!this.options.groupDivider)return;const{cols:t}=n;cs(t.left.list),cs(t.center.list),cs(t.right.list)}}),Di=G({name:"cellspan",when:n=>!!n.getCellSpan,data(){return{cellSpanMap:new Map,overlayedCellSet:new Set}},onLayout(n){const{getCellSpan:t}=this.options;if(!t)return;const{cellSpanMap:e,overlayedCellSet:s}=this.data,{rows:r,cols:o,rowHeight:i}=n;e.clear(),s.clear();const a=(l,h,u)=>{const{index:c}=h;l.forEach((f,d)=>{const{index:p}=f,m=`C${p}R${c}`;if(s.has(m))return;const b=t.call(this,{row:h,col:f});if(!b)return;const y=Math.min(b.colSpan||1,l.length-d),_=Math.min(b.rowSpan||1,r.length-u);if(y<=1&&_<=1)return;let k=0;for(let x=0;x<y;x++){k+=l[d+x].realWidth;for(let v=0;v<_;v++){const E=`C${p+x}R${c+v}`;E!==m&&s.add(E)}}e.set(m,{colSpan:y,rowSpan:_,width:k,height:i*_})})};r.forEach((l,h)=>{["left","center","right"].forEach(u=>{a(o[u].list,l,h)})})},onRenderCell(n,{row:t,col:e}){const s=`C${e.index}R${t.index}`;if(this.data.overlayedCellSet.has(s))n.push({outer:!0,style:{display:"none",className:"cellspan-overlayed-cell"}});else{const r=this.data.cellSpanMap.get(s);r&&n.push({outer:!0,style:{width:r.width,height:r.height}})}return n}}),Ai=Object.freeze(Object.defineProperty({__proto__:null,NestedRowState:Or,avatar:Ei,cellspan:Di,checkable:_i,custom:Ir,group:Ri,nested:Ci,renderDatetime:Er,renderDatetimeCell:Ar,renderFormat:is,renderFormatCell:Rr,renderHtmlCell:as,renderLink:os,renderLinkCell:Pr,renderMapCell:Dr,rich:fi,sortType:Pi},Symbol.toStringTag,{value:"Module"}));class Yt extends dr{}Yt.NAME="DTable",Yt.Component=ss,Yt.definePlugin=G,Yt.removePlugin=gr,Yt.plugins=Ai;const sl="",rl="",ol="",il="",al="",ll="",cl="",hl="",ul="";function Ii({component:n="div",className:t,children:e,style:s,attrs:r}){return I(n,{className:R(t),style:s,...r},e)}function Yr({type:n,component:t="a",className:e,children:s,content:r,attrs:o,url:i,disabled:a,active:l,icon:h,text:u,target:c,trailingIcon:f,hint:d,checked:p,onClick:m,data:b,...y}){const _=[typeof p=="boolean"?g("div",{class:`checkbox-primary${p?" checked":""}`,children:g("label",{})}):null,g(xt,{icon:h}),u?g("span",{className:"text",children:u}):null,g(At,{content:r}),s,g(xt,{icon:f})];return I(t,{className:R(e,{disabled:a,active:l}),title:d,[t==="a"?"href":"data-url"]:a?void 0:i,[t==="a"?"target":"data-target"]:a?void 0:c,onClick:m,...y,...o},..._)}function Li({component:n="div",className:t,text:e,attrs:s,children:r,content:o,style:i,onClick:a}){return I(n,{className:R(t),style:i,onClick:a,...s},e,g(At,{content:o}),r)}function Wi({component:n="div",className:t,style:e,space:s,flex:r,attrs:o,onClick:i,children:a}){return I(n,{className:R(t),style:{width:s,height:s,flex:r,...e},onClick:i,...o},a)}function Hi({type:n,...t}){return g(Fn,{...t})}function qr({component:n="div",className:t,children:e,content:s,style:r,attrs:o}){return I(n,{className:R(t),style:r,...o},g(At,{content:s}),e)}const Je=class zs extends F{constructor(){super(...arguments),this.ref=Y()}get name(){return this.props.name??this.constructor.NAME}componentDidMount(){this.afterRender(!0)}componentDidUpdate(){this.afterRender(!1)}componentWillUnmount(){var t,e;(e=(t=this.props).beforeDestroy)==null||e.call(t,{menu:this})}afterRender(t){var e,s;(s=(e=this.props).afterRender)==null||s.call(e,{menu:this,firstRender:t})}handleItemClick(t,e,s,r){s&&s.call(r.target,r,t,e);const{onClickItem:o}=this.props;o&&o({menu:this,item:t,index:e,event:r})}beforeRender(){var s;const t={...this.props};typeof t.items=="function"&&(t.items=t.items(this)),t.items||(t.items=[]);const e=(s=t.beforeRender)==null?void 0:s.call(t,{menu:this,options:t});return e&&Object.assign(t,e),t}getItemRenderProps(t,e,s){const{commonItemProps:r,onClickItem:o,itemRenderProps:i}=t;let a={...e};return r&&Object.assign(a,r[e.type||"item"]),(o||e.onClick)&&(a.onClick=this.handleItemClick.bind(this,a,s,e.onClick)),a.className=R(a.className),i&&(a=i(a)),a}renderItem(t,e,s){if(!e)return null;const r=this.getItemRenderProps(t,e,s),{itemRender:o}=t;if(o){if(typeof o=="object"){const m=o[e.type||"item"];if(m)return g(m,{...r})}else if(typeof o=="function"){const m=o.call(this,r,I);if(vt(m))return m;typeof m=="object"&&Object.assign(r,m)}}const{type:i="item",component:a,key:l=s,rootAttrs:h,rootClass:u,rootStyle:c,rootChildren:f,...d}=r;if(i==="html")return g("li",{className:R("action-menu-item",`${this.name}-html`,u,d.className),...h,style:c||d.style,dangerouslySetInnerHTML:{__html:d.html}},l);const p=!a||typeof a=="string"?this.constructor.ItemComponents&&this.constructor.ItemComponents[i]||zs.ItemComponents[i]:a;return Object.assign(d,{type:i,component:typeof a=="string"?a:void 0}),t.checkbox&&i==="item"&&d.checked===void 0&&(d.checked=!!d.active),this.renderTypedItem(p,{className:R(u),children:f,style:c,key:l,...h},{...d,type:i,component:typeof a=="string"?a:void 0})}renderTypedItem(t,e,s){const{children:r,className:o,key:i,...a}=e;return g("li",{className:R(`${this.constructor.NAME}-item`,`${this.name}-${s.type}`,o),...a,children:[g(t,{...s}),typeof r=="function"?r():r]},i)}render(){const t=this.beforeRender(),{name:e,style:s,commonItemProps:r,className:o,items:i,children:a,itemRender:l,onClickItem:h,beforeRender:u,afterRender:c,beforeDestroy:f,compact:d,...p}=t,m=this.constructor.ROOT_TAG;return g(m,{class:R(this.name,o,d?"compact":""),style:s,...p,ref:this.ref,children:[i&&i.map(this.renderItem.bind(this,t)),a]})}};Je.ItemComponents={divider:Ii,item:Yr,heading:Li,space:Wi,custom:Hi,basic:qr},Je.ROOT_TAG="menu",Je.NAME="action-menu";let Gr=Je;const dl="";class X extends zn{_beforeRender(t){const{text:e,loading:s,loadingText:r,caret:o,icon:i,trailingIcon:a,children:l}=t;this._isEmptyText=e==null||typeof e=="string"&&!e.length||s&&!r,this._onlyCaret=o&&this._isEmptyText&&!i&&!a&&!l&&!s}_getChildren(t){const{loading:e,loadingIcon:s,loadingText:r,icon:o,text:i,children:a,trailingIcon:l,caret:h}=t;return[e?g(xt,{icon:s||"icon-spinner-snake",className:"spin"}):g(xt,{icon:o}),this._isEmptyText?null:g("span",{className:"text",children:e?r:i}),e?null:a,e?null:g(xt,{icon:l}),e?null:h?g("span",{className:typeof h=="string"?`caret-${h}`:"caret"}):null]}_getClassName(t){const{type:e,className:s,disabled:r,loading:o,active:i,children:a,square:l,size:h,rounded:u}=t;return R("btn",e,s,{"btn-caret":this._onlyCaret,disabled:r||o,active:i,loading:o,square:l===void 0?!this._onlyCaret&&!a&&this._isEmptyText:l},h?`size-${h}`:"",typeof u=="string"?u:{rounded:u})}_getComponent(t){return t.component||(t.url?"a":"button")}_getProps(t){const e=this._getComponent(t),{url:s,target:r,disabled:o,btnType:i="button",hint:a}=t,l={...super._getProps(t),disabled:o,title:a,type:e==="button"?i:void 0};return o||(s!==void 0&&(l[e==="a"?"href":"data-url"]=s),r!==void 0&&(l[e==="a"?"target":"data-target"]=r)),l}}function Oi({key:n,type:t,btnType:e,...s}){return g(X,{type:e,...s})}const fl="",pl="";let zi=class extends F{render(t){const{id:e,popup:s,title:r,content:o,style:i,className:a,closeBtn:l,arrow:h,headingClass:u,titleClass:c,contentClass:f,arrowStyle:d,onlyInner:p}=t;let m=g(At,{content:o},"content");(f||r)&&(m=g("div",{className:f,children:m},"content"));const b=[],y=l?g("button",{className:"btn ghost square size-sm btn-close","data-dismiss":"popover",children:g("span",{className:"close"})}):null;return r?b.push(g("div",{className:u,children:[r?g("div",{className:c,children:r}):null,y]},"heading")):b.push(y),b.push(m),h&&b.push(g("div",{className:typeof h=="string"?h:"arrow",style:d},"arrow")),p?b:g("div",{id:e,className:R("popover",a,{popup:s}),style:i,children:b})}};class hs extends dr{}hs.NAME="PopoverPanel",hs.Component=zi;const qt=Math.min,Wt=Math.max,Qe=Math.round,tn=Math.floor,Tt=n=>({x:n,y:n}),Vi={left:"right",right:"left",bottom:"top",top:"bottom"},Fi={start:"end",end:"start"};function us(n,t,e){return Wt(n,qt(t,e))}function ce(n,t){return typeof n=="function"?n(t):n}function Ht(n){return n.split("-")[0]}function he(n){return n.split("-")[1]}function Kr(n){return n==="x"?"y":"x"}function ds(n){return n==="y"?"height":"width"}function en(n){return["top","bottom"].includes(Ht(n))?"y":"x"}function fs(n){return Kr(en(n))}function Ui(n,t,e){e===void 0&&(e=!1);const s=he(n),r=fs(n),o=ds(r);let i=r==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=nn(i)),[i,nn(i)]}function Bi(n){const t=nn(n);return[ps(n),t,ps(t)]}function ps(n){return n.replace(/start|end/g,t=>Fi[t])}function ji(n,t,e){const s=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(n){case"top":case"bottom":return e?t?r:s:t?s:r;case"left":case"right":return t?o:i;default:return[]}}function Yi(n,t,e,s){const r=he(n);let o=ji(Ht(n),e==="start",s);return r&&(o=o.map(i=>i+"-"+r),t&&(o=o.concat(o.map(ps)))),o}function nn(n){return n.replace(/left|right|bottom|top/g,t=>Vi[t])}function qi(n){return{top:0,right:0,bottom:0,left:0,...n}}function $r(n){return typeof n!="number"?qi(n):{top:n,right:n,bottom:n,left:n}}function sn(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function Xr(n,t,e){let{reference:s,floating:r}=n;const o=en(t),i=fs(t),a=ds(i),l=Ht(t),h=o==="y",u=s.x+s.width/2-r.width/2,c=s.y+s.height/2-r.height/2,f=s[a]/2-r[a]/2;let d;switch(l){case"top":d={x:u,y:s.y-r.height};break;case"bottom":d={x:u,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:c};break;case"left":d={x:s.x-r.width,y:c};break;default:d={x:s.x,y:s.y}}switch(he(t)){case"start":d[i]-=f*(e&&h?-1:1);break;case"end":d[i]+=f*(e&&h?-1:1);break}return d}const Gi=async(n,t,e)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:i}=e,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let h=await i.getElementRects({reference:n,floating:t,strategy:r}),{x:u,y:c}=Xr(h,s,l),f=s,d={},p=0;for(let m=0;m<a.length;m++){const{name:b,fn:y}=a[m],{x:_,y:k,data:x,reset:v}=await y({x:u,y:c,initialPlacement:s,placement:f,strategy:r,middlewareData:d,rects:h,platform:i,elements:{reference:n,floating:t}});if(u=_??u,c=k??c,d={...d,[b]:{...d[b],...x}},v&&p<=50){p++,typeof v=="object"&&(v.placement&&(f=v.placement),v.rects&&(h=v.rects===!0?await i.getElementRects({reference:n,floating:t,strategy:r}):v.rects),{x:u,y:c}=Xr(h,f,l)),m=-1;continue}}return{x:u,y:c,placement:f,strategy:r,middlewareData:d}};async function Zr(n,t){var e;t===void 0&&(t={});const{x:s,y:r,platform:o,rects:i,elements:a,strategy:l}=n,{boundary:h="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:f=!1,padding:d=0}=ce(t,n),p=$r(d),b=a[f?c==="floating"?"reference":"floating":c],y=sn(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(b)))==null||e?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:h,rootBoundary:u,strategy:l})),_=c==="floating"?{...i.floating,x:s,y:r}:i.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),x=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},v=sn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:k,strategy:l}):_);return{top:(y.top-v.top+p.top)/x.y,bottom:(v.bottom-y.bottom+p.bottom)/x.y,left:(y.left-v.left+p.left)/x.x,right:(v.right-y.right+p.right)/x.x}}const Ki=n=>({name:"arrow",options:n,async fn(t){const{x:e,y:s,placement:r,rects:o,platform:i,elements:a}=t,{element:l,padding:h=0}=ce(n,t)||{};if(l==null)return{};const u=$r(h),c={x:e,y:s},f=fs(r),d=ds(f),p=await i.getDimensions(l),m=f==="y",b=m?"top":"left",y=m?"bottom":"right",_=m?"clientHeight":"clientWidth",k=o.reference[d]+o.reference[f]-c[f]-o.floating[d],x=c[f]-o.reference[f],v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let E=v?v[_]:0;(!E||!await(i.isElement==null?void 0:i.isElement(v)))&&(E=a.floating[_]||o.floating[d]);const M=k/2-x/2,D=E/2-p[d]/2-1,S=qt(u[b],D),C=qt(u[y],D),P=S,L=E-p[d]-C,T=E/2-p[d]/2+M,z=us(P,T,L),ct=he(r)!=null&&T!=z&&o.reference[d]/2-(T<P?S:C)-p[d]/2<0?T<P?P-T:L-T:0;return{[f]:c[f]-ct,data:{[f]:z,centerOffset:T-z+ct}}}}),gs=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e;const{placement:s,middlewareData:r,rects:o,initialPlacement:i,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:c,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...m}=ce(n,t),b=Ht(s),y=Ht(i)===i,_=await(a.isRTL==null?void 0:a.isRTL(l.floating)),k=c||(y||!p?[nn(i)]:Bi(i));!c&&d!=="none"&&k.push(...Yi(i,p,d,_));const x=[i,...k],v=await Zr(t,m),E=[];let M=((e=r.flip)==null?void 0:e.overflows)||[];if(h&&E.push(v[b]),u){const P=Ui(s,o,_);E.push(v[P[0]],v[P[1]])}if(M=[...M,{placement:s,overflows:E}],!E.every(P=>P<=0)){var D,S;const P=(((D=r.flip)==null?void 0:D.index)||0)+1,L=x[P];if(L)return{data:{index:P,overflows:M},reset:{placement:L}};let T=(S=M.filter(z=>z.overflows[0]<=0).sort((z,J)=>z.overflows[1]-J.overflows[1])[0])==null?void 0:S.placement;if(!T)switch(f){case"bestFit":{var C;const z=(C=M.map(J=>[J.placement,J.overflows.filter(ct=>ct>0).reduce((ct,Ua)=>ct+Ua,0)]).sort((J,ct)=>J[1]-ct[1])[0])==null?void 0:C[0];z&&(T=z);break}case"initialPlacement":T=i;break}if(s!==T)return{reset:{placement:T}}}return{}}}};async function $i(n,t){const{placement:e,platform:s,elements:r}=n,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),i=Ht(e),a=he(e),l=en(e)==="y",h=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,c=ce(t,n);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*u,y:f*h}:{x:f*h,y:d*u}}const ms=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){const{x:e,y:s}=t,r=await $i(t,n);return{x:e+r.x,y:s+r.y,data:r}}}},ys=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:s,placement:r}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:b=>{let{x:y,y:_}=b;return{x:y,y:_}}},...l}=ce(n,t),h={x:e,y:s},u=await Zr(t,l),c=en(Ht(r)),f=Kr(c);let d=h[f],p=h[c];if(o){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",_=d+u[b],k=d-u[y];d=us(_,d,k)}if(i){const b=c==="y"?"top":"left",y=c==="y"?"bottom":"right",_=p+u[b],k=p-u[y];p=us(_,p,k)}const m=a.fn({...t,[f]:d,[c]:p});return{...m,data:{x:m.x-e,y:m.y-s}}}}};function St(n){return Jr(n)?(n.nodeName||"").toLowerCase():"#document"}function Z(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function pt(n){var t;return(t=(Jr(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Jr(n){return n instanceof Node||n instanceof Z(n).Node}function gt(n){return n instanceof Element||n instanceof Z(n).Element}function ot(n){return n instanceof HTMLElement||n instanceof Z(n).HTMLElement}function Qr(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Z(n).ShadowRoot}function ue(n){const{overflow:t,overflowX:e,overflowY:s,display:r}=et(n);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(r)}function Xi(n){return["table","td","th"].includes(St(n))}function ws(n){const t=_s(),e=et(n);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(e.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(e.contain||"").includes(s))}function Zi(n){let t=Gt(n);for(;ot(t)&&!rn(t);){if(ws(t))return t;t=Gt(t)}return null}function _s(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rn(n){return["html","body","#document"].includes(St(n))}function et(n){return Z(n).getComputedStyle(n)}function on(n){return gt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Gt(n){if(St(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Qr(n)&&n.host||pt(n);return Qr(t)?t.host:t}function to(n){const t=Gt(n);return rn(t)?n.ownerDocument?n.ownerDocument.body:n.body:ot(t)&&ue(t)?t:to(t)}function an(n,t){var e;t===void 0&&(t=[]);const s=to(n),r=s===((e=n.ownerDocument)==null?void 0:e.body),o=Z(s);return r?t.concat(o,o.visualViewport||[],ue(s)?s:[]):t.concat(s,an(s))}function eo(n){const t=et(n);let e=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=ot(n),o=r?n.offsetWidth:e,i=r?n.offsetHeight:s,a=Qe(e)!==o||Qe(s)!==i;return a&&(e=o,s=i),{width:e,height:s,$:a}}function bs(n){return gt(n)?n:n.contextElement}function Kt(n){const t=bs(n);if(!ot(t))return Tt(1);const e=t.getBoundingClientRect(),{width:s,height:r,$:o}=eo(t);let i=(o?Qe(e.width):e.width)/s,a=(o?Qe(e.height):e.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Ji=Tt(0);function no(n){const t=Z(n);return!_s()||!t.visualViewport?Ji:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qi(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==Z(n)?!1:t}function Ot(n,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);const r=n.getBoundingClientRect(),o=bs(n);let i=Tt(1);t&&(s?gt(s)&&(i=Kt(s)):i=Kt(n));const a=Qi(o,e,s)?no(o):Tt(0);let l=(r.left+a.x)/i.x,h=(r.top+a.y)/i.y,u=r.width/i.x,c=r.height/i.y;if(o){const f=Z(o),d=s&&gt(s)?Z(s):s;let p=f.frameElement;for(;p&&s&&d!==f;){const m=Kt(p),b=p.getBoundingClientRect(),y=et(p),_=b.left+(p.clientLeft+parseFloat(y.paddingLeft))*m.x,k=b.top+(p.clientTop+parseFloat(y.paddingTop))*m.y;l*=m.x,h*=m.y,u*=m.x,c*=m.y,l+=_,h+=k,p=Z(p).frameElement}}return sn({width:u,height:c,x:l,y:h})}function ta(n){let{rect:t,offsetParent:e,strategy:s}=n;const r=ot(e),o=pt(e);if(e===o)return t;let i={scrollLeft:0,scrollTop:0},a=Tt(1);const l=Tt(0);if((r||!r&&s!=="fixed")&&((St(e)!=="body"||ue(o))&&(i=on(e)),ot(e))){const h=Ot(e);a=Kt(e),l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-i.scrollLeft*a.x+l.x,y:t.y*a.y-i.scrollTop*a.y+l.y}}function ea(n){return Array.from(n.getClientRects())}function so(n){return Ot(pt(n)).left+on(n).scrollLeft}function na(n){const t=pt(n),e=on(n),s=n.ownerDocument.body,r=Wt(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=Wt(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-e.scrollLeft+so(n);const a=-e.scrollTop;return et(s).direction==="rtl"&&(i+=Wt(t.clientWidth,s.clientWidth)-r),{width:r,height:o,x:i,y:a}}function sa(n,t){const e=Z(n),s=pt(n),r=e.visualViewport;let o=s.clientWidth,i=s.clientHeight,a=0,l=0;if(r){o=r.width,i=r.height;const h=_s();(!h||h&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:i,x:a,y:l}}function ra(n,t){const e=Ot(n,!0,t==="fixed"),s=e.top+n.clientTop,r=e.left+n.clientLeft,o=ot(n)?Kt(n):Tt(1),i=n.clientWidth*o.x,a=n.clientHeight*o.y,l=r*o.x,h=s*o.y;return{width:i,height:a,x:l,y:h}}function ro(n,t,e){let s;if(t==="viewport")s=sa(n,e);else if(t==="document")s=na(pt(n));else if(gt(t))s=ra(t,e);else{const r=no(n);s={...t,x:t.x-r.x,y:t.y-r.y}}return sn(s)}function oo(n,t){const e=Gt(n);return e===t||!gt(e)||rn(e)?!1:et(e).position==="fixed"||oo(e,t)}function oa(n,t){const e=t.get(n);if(e)return e;let s=an(n).filter(a=>gt(a)&&St(a)!=="body"),r=null;const o=et(n).position==="fixed";let i=o?Gt(n):n;for(;gt(i)&&!rn(i);){const a=et(i),l=ws(i);!l&&a.position==="fixed"&&(r=null),(o?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ue(i)&&!l&&oo(n,i))?s=s.filter(u=>u!==i):r=a,i=Gt(i)}return t.set(n,s),s}function ia(n){let{element:t,boundary:e,rootBoundary:s,strategy:r}=n;const i=[...e==="clippingAncestors"?oa(t,this._c):[].concat(e),s],a=i[0],l=i.reduce((h,u)=>{const c=ro(t,u,r);return h.top=Wt(c.top,h.top),h.right=qt(c.right,h.right),h.bottom=qt(c.bottom,h.bottom),h.left=Wt(c.left,h.left),h},ro(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function aa(n){return eo(n)}function la(n,t,e){const s=ot(t),r=pt(t),o=e==="fixed",i=Ot(n,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Tt(0);if(s||!s&&!o)if((St(t)!=="body"||ue(r))&&(a=on(t)),s){const h=Ot(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else r&&(l.x=so(r));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function io(n,t){return!ot(n)||et(n).position==="fixed"?null:t?t(n):n.offsetParent}function ao(n,t){const e=Z(n);if(!ot(n))return e;let s=io(n,t);for(;s&&Xi(s)&&et(s).position==="static";)s=io(s,t);return s&&(St(s)==="html"||St(s)==="body"&&et(s).position==="static"&&!ws(s))?e:s||Zi(n)||e}const ca=async function(n){let{reference:t,floating:e,strategy:s}=n;const r=this.getOffsetParent||ao,o=this.getDimensions;return{reference:la(t,await r(e),s),floating:{x:0,y:0,...await o(e)}}};function ha(n){return et(n).direction==="rtl"}const ua={convertOffsetParentRelativeRectToViewportRelativeRect:ta,getDocumentElement:pt,getClippingRect:ia,getOffsetParent:ao,getElementRects:ca,getClientRects:ea,getDimensions:aa,getScale:Kt,isElement:gt,isRTL:ha};function da(n,t){let e=null,s;const r=pt(n);function o(){clearTimeout(s),e&&e.disconnect(),e=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:h,top:u,width:c,height:f}=n.getBoundingClientRect();if(a||t(),!c||!f)return;const d=tn(u),p=tn(r.clientWidth-(h+c)),m=tn(r.clientHeight-(u+f)),b=tn(h),_={rootMargin:-d+"px "+-p+"px "+-m+"px "+-b+"px",threshold:Wt(0,qt(1,l))||1};let k=!0;function x(v){const E=v[0].intersectionRatio;if(E!==l){if(!k)return i();E?i(!1,E):s=setTimeout(()=>{i(!1,1e-7)},100)}k=!1}try{e=new IntersectionObserver(x,{..._,root:r.ownerDocument})}catch{e=new IntersectionObserver(x,_)}e.observe(n)}return i(!0),o}function lo(n,t,e,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,h=bs(n),u=r||o?[...h?an(h):[],...an(t)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",e,{passive:!0}),o&&y.addEventListener("resize",e)});const c=h&&a?da(h,e):null;let f=-1,d=null;i&&(d=new ResizeObserver(y=>{let[_]=y;_&&_.target===h&&d&&(d.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{d&&d.observe(t)})),e()}),h&&!l&&d.observe(h),d.observe(t));let p,m=l?Ot(n):null;l&&b();function b(){const y=Ot(n);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&e(),m=y,p=requestAnimationFrame(b)}return e(),()=>{u.forEach(y=>{r&&y.removeEventListener("scroll",e),o&&y.removeEventListener("resize",e)}),c&&c(),d&&d.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const vs=(n,t,e)=>{const s=new Map,r={platform:ua,...e},o={...r.platform,_c:s};return Gi(n,t,{...r,platform:o})},fa='[data-toggle="popover"]',co="show",ho="in";class it extends Ue{constructor(){super(...arguments),this._getClickBounding=()=>{const t=this._triggerEvent;return{x:t.clientX,y:t.clientY,left:t.clientX,top:t.clientY,width:0,height:0,bottom:t.clientY,right:t.clientX}},this._onClickDoc=t=>{const e=w(t.target);(!e.closest(`#${this._id}`).length&&this._targetElement!==e.closest(".popover")[0]||e.closest('[data-dismiss="popover"]').length)&&this.hide()}}get shown(){return this._shown}get id(){return this._id}afterInit(){const{trigger:t,id:e,triggerEvent:s}=this.options;this._triggerEvent=s,this._id=e||`popover_${this.gid}`;const r=this.getTriggerElement();if(r instanceof HTMLElement){const i=w(r),{namespace:a}=this;t==="hover"?i.on(`mouseenter${a}`,l=>{this.show({delay:!0,event:l})}).on(`mouseleave${a}`,()=>{this.delayHide()}):t&&i.on(`${t}${a}`,l=>{this.toggle({event:l}),l.preventDefault()})}const{show:o}=this.options;o&&this.show({delay:typeof o=="number"?o:!1})}getTriggerElement(){if(!this._triggerElement){let{element:t=this.element}=this.options;t===document.body&&(t={getBoundingClientRect:this._getClickBounding}),this._triggerElement=t,this._virtual=!(t instanceof HTMLElement)}return this._triggerElement}initTarget(){let t=this.options.target;return this._dynamic=!t,t?(typeof t=="function"&&(t=t()),w(t)[0]):this._createTarget()}show(t){const{delay:e,event:s}=t||{};if(s&&(this._triggerEvent=s),e)return this._resetTimer(()=>{this.show()},e===!0?this.options.delay:e);if(!this.inited){this.setOptions({show:!0});return}if(this._shown)return;const r=this.initTarget();if(!r)return;this._targetElement=r;const o=w(r),{animation:i,mask:a,onShow:l,onShown:h,trigger:u}=this.options;if(o.addClass(co),i&&o.addClass(i===!0?"fade":i),this._shown=!0,this.render(),l==null||l.call(this),this.emit("show"),u==="hover"){this._clearDelayHide();const{namespace:c}=this;o.on(`mouseenter${c}`,()=>{this._clearDelayHide()}).on(`mouseleave${c}`,()=>{this.delayHide()})}this._virtual||w(this._triggerElement).addClass("with-popover-show"),this._resetTimer(()=>{o.addClass(ho),this._resetTimer(()=>{h==null||h.call(this),this.emit("shown")},200),a&&w(document).on(`click${this.namespace}`,this._onClickDoc)},50)}hide(){(!this._shown||!this._targetElement)&&this._resetTimer();const{destroyOnHide:t,animation:e,onHide:s,onHidden:r,trigger:o}=this.options,i=w(this._targetElement);this._shown=!1,s==null||s.call(this),this.emit("hide"),i.removeClass(ho),o==="hover"&&(this._clearDelayHide(),i.off(this.namespace)),this._virtual||w(this._triggerElement).removeClass("with-popover-show").removeAttr("data-popover-placement"),w(document).off(this.namespace),this._resetTimer(()=>{r==null||r.call(this),this.emit("hidden"),i.removeClass(co),t&&this._resetTimer(()=>{this.destroy()},typeof t=="number"?t:0),this._destoryTarget()},e?200:0)}toggle(t){this._shown?this.hide():this.show(t)}destroy(){if(super.destroy(),w(document).off(this.namespace),!this._virtual){const{namespace:t}=this;w(this._triggerElement).off(t)}this._resetTimer(),this._destoryTarget(),this._clearDelayHide()}layout(){const t=this._triggerElement,e=this._targetElement,s=this._layoutWatcher;if(!e||!t||!this._shown){s&&(s(),this._layoutWatcher=void 0);return}s||(this._layoutWatcher=lo(t,e,()=>{const{width:r,animation:o,name:i="popover"}=this.options;r==="100%"&&!this._virtual&&w(e).css({width:w(t).width()}),vs(...this._getLayoutOptions()).then(({x:a,y:l,middlewareData:h,placement:u,strategy:c})=>{const f=w(e).css({position:c,left:a,top:l}),d=u.split("-")[0],p={top:"bottom",right:"left",bottom:"top",left:"right"}[d],m=h.arrow;m&&f.find(".arrow").css({left:m.x,top:m.y}).attr("class",`arrow ${i}-arrow arrow-${p}`),o===!0&&f.attr("class",`${f.attr("class").split(" ").filter(b=>b!=="fade"&&!b.startsWith("fade-from")).join(" ")} fade-from-${p}`),this._virtual||w(this._triggerElement).attr("data-popover-placement",d)})}))}render(t){super.render(t);const e=this._targetElement;if(!e)return;const s=this._getRenderOptions(),r=w(e);if(r.toggleClass("popup",s.popup).css(s.style),s.className&&r.setClass(s.className),this._dynamic){let o=this._panel;o&&o.element!==e&&(o.destroy(),o=void 0),o?o.render(s):(o=new hs(e,s),o.on("inited",()=>this.layout())),this._panel=o}else s.arrow&&(r.find(".arrow").length||r.append(w('<div class="arrow"></div>').css(s.arrowStyle))),this.layout()}delayHide(t=100){this._hideTimer=window.setTimeout(()=>{this._hideTimer=0,this.hide()},t)}_clearDelayHide(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=0)}_getLayoutOptions(){const t=this._triggerElement,e=this._targetElement,{placement:s,flip:r,shift:o,offset:i,arrow:a,strategy:l}=this.options,h=a?e.querySelector(".arrow"):null,u=h?typeof a=="number"?a:5:0;return[t,e,{placement:s,strategy:l,middleware:[r?gs():null,o?ys(typeof o=="object"?o:void 0):null,i||u?ms((i||0)+u):null,a?Ki({element:h}):null].filter(Boolean)}]}_getRenderOptions(){const{name:t="popover"}=this.options,{popup:e,title:s,content:r,headingClass:o=`${t}-heading`,titleClass:i=`${t}-title`,contentClass:a=`${t}-content`,style:l,className:h=t,closeBtn:u,arrow:c}=this.options;return{popup:e,title:s,titleClass:i,headingClass:o,contentClass:a,content:r,style:{zIndex:this.constructor.Z_INDEX++,...l},className:h,closeBtn:u,arrow:c?`arrow ${t}-arrow`:!1,arrowStyle:{"--arrow-size":`${typeof c=="number"?c:5}px`},onlyInner:!0}}_destoryTarget(){var t,e,s;(t=this._layoutWatcher)==null||t.call(this),this._layoutWatcher=void 0,this._dynamic&&((e=this._panel)==null||e.destroy(),(s=this._targetElement)==null||s.remove(),this._panel=void 0,this._targetElement=void 0)}_resetTimer(t,e=0){this._timer&&clearTimeout(this._timer),t&&(this._timer=window.setTimeout(()=>{this._timer=0,t()},e))}_createTarget(){const{container:t="body"}=this.options,e=w(t);let s=e.find(`#${this._id}`);return s.length||(s=w("<div />").attr({id:this._id,class:"popover"}).appendTo(e)),s[0]}static show(t){const{element:e,event:s,...r}=t,o=e||(s==null?void 0:s.currentTarget);return this.ensure(o instanceof HTMLElement?o:document.body,{element:o,show:!0,destroyOnHide:!0,triggerEvent:s,...r})}}it.NAME="Popover",it.Z_INDEX=1700,it.MULTI_INSTANCE=!0,it.DEFAULT={placement:"top",strategy:"absolute",flip:!0,arrow:!0,offset:1,trigger:"click",mask:!0,delay:0,animation:!0,closeBtn:!0,popup:!0},w(document).on(`click${it.NAMESPACE} mouseenter${it.NAMESPACE}`,fa,n=>{const t=w(n.currentTarget);if(t.length&&!t.data(it.KEY)){const e=t.data("trigger")||"click";if((n.type==="mouseover"?"hover":"click")!==e)return;it.ensure(t,{show:!0,triggerEvent:n}),n.preventDefault()}});const gl="";class ln extends it{constructor(){super(...arguments),this._onClickDoc=t=>{w(t.target).closest(".not-hide-menu").length||this.hide()}}_getMenuOptions(){let{items:t=[]}=this.options;return typeof t=="function"&&(t=t(this)),{items:t,nestedTrigger:"hover",placement:this.options.placement,popup:!1,...this.options.menu}}_getRenderOptions(){return{...super._getRenderOptions(),contentClass:"",content:I(po,this._getMenuOptions())}}}ln.NAME="Dropdown",ln.DEFAULT={...it.DEFAULT,name:"dropdown",placement:"bottom-start",arrow:!1,closeBtn:!1,animation:"fade"};class Cs extends X{constructor(){super(...arguments),this._ref=Y()}get triggerElement(){return this._ref.current}_updateData(){const{dropdown:t,items:e}=this.props,s=w(this.triggerElement),r=ln.get(this.triggerElement),o={items:e,...t};r?r.setOptions(o):s.data(o)}componentDidMount(){this._updateData()}componentDidUpdate(){this._updateData()}componentWillUnmount(){var t;(t=ln.get(this.triggerElement))==null||t.destroy()}_getProps(t){const{trigger:e,placement:s}=t;return{...super._getProps(t),"data-toggle":"dropdown","data-trigger":e,"data-placement":s,ref:this._ref}}}Cs.defaultProps={caret:!0};function pa({items:n,show:t,level:e,...s}){return g(Yr,{...s})}var uo=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},nt=(n,t,e)=>(uo(n,t,"read from private field"),e?e.call(n):t.get(n)),xs=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},ga=(n,t,e,s)=>(uo(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),cn,mt,de;class fo extends Gr{constructor(t){super(t),xs(this,cn,new Set),xs(this,mt,void 0),xs(this,de,(e,s,r)=>{w(r.target).closest(".not-nested-toggle").length||(this.toggle(e,s),r.preventDefault())}),ga(this,mt,t.nestedShow===void 0),nt(this,mt)&&(this.state={nestedShow:t.defaultNestedShow??{}})}get nestedTrigger(){return this.props.nestedTrigger}beforeRender(){const t=super.beforeRender(),{nestedShow:e,nestedTrigger:s,defaultNestedShow:r,controlledMenu:o,indent:i,...a}=t;return typeof a.items=="function"&&(a.items=a.items(this)),a.items||(a.items=[]),a.items.some(l=>l.items)||(a.className=R(a.className,"no-nested-items")),!o&&i&&(a.style=Object.assign({[`--${this.name}-indent`]:`${i}px`},a.style)),a}getNestedMenuProps(t){const{name:e,controlledMenu:s,nestedShow:r,beforeDestroy:o,beforeRender:i,itemRender:a,onClickItem:l,afterRender:h,commonItemProps:u,level:c,itemRenderProps:f}=this.props;return{items:t,name:e,nestedShow:nt(this,mt)?this.state.nestedShow:r,nestedTrigger:this.nestedTrigger,controlledMenu:s||this,commonItemProps:u,onClickItem:l,afterRender:h,beforeRender:i,beforeDestroy:o,itemRender:a,itemRenderProps:f,level:(c||0)+1}}renderNestedMenu(t){let{items:e}=t;if(!e||(typeof e=="function"&&(e=e(t,this)),!e.length))return;const s=this.constructor,r=this.getNestedMenuProps(e);return g(s,{...r,"data-level":r.level,style:{"--level":r.level}})}isNestedItem(t){return(!t.type||t.type==="item")&&!!t.items}renderToggleIcon(t,e){}getItemRenderProps(t,e,s){const r=super.getItemRenderProps(t,e,s);if(r.level=t.level||0,!this.isNestedItem(r))return r;const o=r.key??r.id??`${t.level||0}:${s}`;nt(this,cn).add(o);const i=this.isExpanded(o);if(i&&(r.rootChildren=[r.rootChildren,this.renderNestedMenu(e)]),this.nestedTrigger==="hover")r.rootAttrs={...r.rootAttrs,onMouseEnter:nt(this,de).bind(this,o,!0),onMouseLeave:nt(this,de).bind(this,o,!1)};else if(this.nestedTrigger==="click"){const{onClick:l}=r;r.onClick=h=>{nt(this,de).call(this,o,void 0,h),l==null||l(h)}}const a=this.renderToggleIcon(i,r);return a&&(r.children=[r.children,a]),r.show=i,r.rootClass=[r.rootClass,"has-nested-menu",i?"show":""],r}isExpanded(t){const e=nt(this,mt)?this.state.nestedShow:this.props.nestedShow;return e&&typeof e=="object"?e[t]:!!e}toggle(t,e){const{controlledMenu:s}=this.props;if(s)return s.toggle(t,e);if(!nt(this,mt))return!1;let{nestedShow:r={}}=this.state;if(typeof r=="boolean"&&(r===!0?r=[...nt(this,cn).values()].reduce((o,i)=>(o[i]=!0,o),{}):r={}),e===void 0)e=!r[t];else if(!!r[t]==!!e)return!1;return e?r[t]=e:delete r[t],this.setState({nestedShow:{...r}}),!0}expand(t){return this.toggle(t,!0)}collapse(t){return this.toggle(t,!1)}expandAll(){nt(this,mt)&&this.setState({nestedShow:!0})}collapseAll(){nt(this,mt)&&this.setState({nestedShow:!1})}}cn=new WeakMap,mt=new WeakMap,de=new WeakMap,fo.ItemComponents={item:pa};const ml="";class zt extends fo{get nestedTrigger(){return this.props.nestedTrigger||"click"}get menuName(){return"menu-nested"}beforeRender(){const t=super.beforeRender();let{hasIcons:e}=t;return e===void 0&&(e=t.items.some(s=>s.icon)),t.className=R(t.className,this.menuName,{"has-icons":e,"has-nested-items":t.items.some(s=>this.isNestedItem(s)),popup:t.popup}),t}renderToggleIcon(t){return g("span",{class:`${this.name}-toggle-icon caret-${t?"down":"right"}`})}}zt.NAME="menu";class po extends zt{constructor(){super(...arguments),this._layoutTimer=0}get name(){return"menu"}get menuName(){return"dropdown-menu"}layout(){const t=this.ref.current,e=t==null?void 0:t.parentElement;!t||!e||vs(e,t,{placement:this.props.placement,middleware:[gs(),ys(),ms(1)]}).then(({x:s,y:r})=>{w(t).css({left:s,top:r})})}getNestedMenuProps(t){const e=super.getNestedMenuProps(t);return{...e,className:R("show",e.className),popup:!0}}afterRender(t){super.afterRender(t),this.props.controlledMenu&&(this.layout(),this._layoutTimer=window.setTimeout(this.layout.bind(this),100))}renderToggleIcon(){return g("span",{class:"dropdown-menu-toggle-icon caret-right ml-2"})}componentWillUnmount(){super.componentWillUnmount(),this._layoutTimer&&clearTimeout(this._layoutTimer)}}po.defaultProps={...zt.defaultProps,popup:!0,nestedTrigger:"hover",placement:"right-start"};function go({key:n,type:t,btnType:e,...s}){return g(Cs,{type:e,...s})}const yl="";class ma extends F{componentDidMount(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!0})}componentDidUpdate(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!1})}componentWillUnmount(){var t;(t=this.props.beforeDestroy)==null||t.call(this)}handleItemClick(t,e,s,r){s&&s.call(r.target,r);const{onClickItem:o}=this.props;o&&o.call(this,{item:t,index:e,event:r})}beforeRender(){var s;const t={...this.props},e=(s=t.beforeRender)==null?void 0:s.call(this,t);return e&&Object.assign(t,e),typeof t.items=="function"&&(t.items=t.items.call(this)),t}onRenderItem(t,e){const{key:s=e,...r}=t,o=t.dropdown||t.items?Cs:X;return g(o,{...r},s)}renderItem(t,e,s){const{itemRender:r,btnProps:o,onClickItem:i}=t,a={key:s,...e};if(o&&Object.assign(a,o),i&&(a.onClick=this.handleItemClick.bind(this,a,s,e.onClick)),r){const l=r.call(this,a,I);if(vt(l))return l;typeof l=="object"&&Object.assign(a,l)}return this.onRenderItem(a,s)}render(){const t=this.beforeRender(),{className:e,items:s,size:r,type:o,btnProps:i,children:a,itemRender:l,onClickItem:h,beforeRender:u,afterRender:c,beforeDestroy:f,...d}=t;return g("div",{className:R("btn-group",r?`size-${r}`:"",e),...d,children:[s&&s.map(this.renderItem.bind(this,t)),a]})}}function ya({key:n,type:t,btnType:e,...s}){return g(ma,{type:e,...s})}class yt extends Gr{beforeRender(){const{gap:t,btnProps:e,wrap:s,...r}=super.beforeRender();return r.className=R(r.className,s?"flex-wrap":"",typeof t=="number"?`gap-${t}`:""),typeof t=="string"&&(r.style?r.style.gap=t:r.style={gap:t}),r}isBtnItem(t){return t==="item"||t==="dropdown"}renderTypedItem(t,e,s){const{type:r}=s,o=this.props.btnProps,i=this.isBtnItem(r)?{btnType:"ghost",...o}:{};i.type&&(i.btnType=i.type,delete i.type);const a={...e,...i,...s,className:R(`${this.name}-${r}`,e.className,i.className,s.className),style:Object.assign({},e.style,i.style,s.style)};return r==="btn-group"&&(a.btnProps=o),g(t,{...a})}}yt.ItemComponents={item:Oi,dropdown:go,"btn-group":ya},yt.ROOT_TAG="nav",yt.NAME="toolbar",yt.defaultProps={btnProps:{btnType:"ghost"}};function wa(n){const[t,e]=n.split(":"),s=t[0]==="-"?{name:t.substring(1),disabled:!0}:{name:t};return e!=null&&e.length&&(s.type="dropdown",s.items=e.split(",").reduce((r,o)=>(o=o.trim(),o.length&&r.push(o[0]==="-"?{name:o.substring(1),disabled:!0}:{name:o}),r),[])),s}const _a=(n,t)=>{var r;n.url&&(n.url=B(n.url,t.row.data));const e={row:t.row.id,col:t.col.name},s=((r=n.dropdown)==null?void 0:r.items)||n.items;return s&&s.forEach(o=>(o.url&&(o.url=B(o.url,t.row.data)),o.data=e,o)),n.data=e,n},mo=n=>n?(typeof n=="string"&&(n=n.split("|")),n.map(t=>typeof t=="string"?wa(t):t).filter(Boolean)):[],ba=G({name:"actions",colTypes:{actions:{onRenderCell(n,t){var u;const{row:e,col:s}=t,r=mo(((u=e.data)==null?void 0:u[s.name])||s.setting.actions);if(!r.length)return n;const{actionsSetting:o,actionsMap:i,actionsCreator:a=this.options.actionsCreator,actionItemCreator:l=this.options.actionItemCreator||_a}=s.setting,h={items:(a==null?void 0:a(t))??r.map(c=>{const{name:f,...d}=c;if(i&&f){Object.assign(d,i[f],{...d});const{buildProps:m}=d;typeof m=="function"&&(delete d.buildProps,Object.assign(d,m(n,t)))}const{items:p}=d;if(d.disabled&&(delete d.url,delete d["data-toggle"]),p&&d.type==="dropdown"){const{dropdown:m={placement:"bottom-end"}}=d;m.menu={className:"menu-dtable-actions"},m.items=p.map(b=>{const y=typeof b=="string"?{name:b}:{...b};return y.name&&i&&i[y.name]&&Object.assign(y,i[y.name],{...y}),y.disabled?(delete y.url,delete y["data-toggle"]):y.url&&(y.url=B(y.url,e.data)),y}),d.dropdown=m,delete d.items}return l?l(d,t):d}),btnProps:{size:"sm",className:"text-primary"},...o};return n[0]=g(yt,{...h}),n}}},beforeLayout(n){!Array.isArray(n.data)||!n.data.length||n.cols.forEach((t,e)=>{if(t.type!=="actions"||t.width)return;const{actionsMap:s={}}=t,o=mo(n.data[0][t.name]).reduce((i,a)=>{const l=a.name?s[a.name]:null;return l&&l.type==="dropdown"&&l.caret&&!l.text?i+16:i+24},24);n.cols[e]={...t,width:o}})}}),va=G({name:"toolbar",footer:{toolbar(){const{footToolbar:n,showToolbarOnChecked:t}=this.options;return t&&!this.getChecks().length?[]:[n?g(yt,{gap:2,...n}):null]}}}),bl="";function fe(n,t){const e=n.pageTotal||Math.ceil(n.recTotal/n.recPerPage);return typeof t=="string"&&(t==="first"?t=1:t==="last"?t=e:t==="prev"?t=n.page-1:t==="next"?t=n.page+1:t==="current"?t=n.page:t=Number.parseInt(t,10)),t=t!==void 0?Math.max(1,Math.min(t<0?e+t:t,e)):n.page,{...n,pageTotal:e,page:t}}function Ca({key:n,type:t,btnType:e,page:s,format:r,pagerInfo:o,linkCreator:i,...a}){const l=fe(o,s);return a.text===void 0&&!a.icon&&r&&(a.text=typeof r=="function"?r(l):B(r,l)),a.url===void 0&&i&&(a.url=typeof i=="function"?i(l):B(i,l)),a.disabled===void 0&&(a.disabled=s!==void 0&&l.page===o.page),g(X,{type:e,...a})}function xa({key:n,type:t,page:e,text:s="",pagerInfo:r,children:o,...i}){const a=fe(r,e);return s=typeof s=="function"?s(a):B(s,a),g(qr,{...i,children:[o,s]})}function ka({key:n,type:t,btnType:e,count:s=12,pagerInfo:r,onClick:o,linkCreator:i,...a}){if(!r.pageTotal)return;const l={...a,square:!0},h=()=>(l.text="",l.icon="icon-ellipsis-h",l.disabled=!0,g(X,{type:e,...l})),u=(f,d)=>{const p=[];for(let m=f;m<=d;m++){l.text=m,delete l.icon,l.disabled=!1;const b=fe(r,m);i&&(l.url=typeof i=="function"?i(b):B(i,b)),p.push(g(X,{type:e,...l,onClick:o}))}return p};let c=[];return c=[...u(1,1)],r.pageTotal<=1||(r.pageTotal<=s?c=[...c,...u(2,r.pageTotal)]:r.page<s-2?c=[...c,...u(2,s-2),h(),...u(r.pageTotal,r.pageTotal)]:r.page>r.pageTotal-s+3?c=[...c,h(),...u(r.pageTotal-s+3,r.pageTotal)]:c=[...c,h(),...u(r.page-Math.ceil((s-4)/2),r.page+Math.floor((s-4)/2)),h(),...u(r.pageTotal,r.pageTotal)]),c}function Ta({type:n,pagerInfo:t,linkCreator:e,items:s=[5,10,15,20,25,30,35,40,45,50,100,200,500,1e3,2e3],dropdown:r={},itemProps:o,...i}){var l;r.items=r.items||s.map(h=>{const u={...t,recPerPage:h};return{...o,text:`${h}`,active:h===t.recPerPage,url:typeof e=="function"?e(u):B(e,u)}});const{text:a=""}=i;return i.text=typeof a=="function"?a(t):B(a,t),r.menu={...r.menu,className:R((l=r.menu)==null?void 0:l.className,"pager-size-menu")},g(go,{type:"dropdown",dropdown:r,...i})}function Sa({key:n,page:t,type:e,btnType:s,pagerInfo:r,size:o,onClick:i,onChange:a,linkCreator:l,...h}){const u={...h};let c;const f=m=>{var b;c=Number((b=m.target)==null?void 0:b.value)||1,c=c>r.pageTotal?r.pageTotal:c},d=m=>{if(!(m!=null&&m.target))return;c=c<=r.pageTotal?c:r.pageTotal;const b=fe(r,c);a&&!a({info:b,event:m})||(m.target.href=u.url=typeof l=="function"?l(b):B(l,b))},p=fe(r,t||0);return u.url=typeof l=="function"?l(p):B(l,p),g("div",{className:R("input-group","pager-goto-group",o?`size-${o}`:""),children:[g("input",{type:"number",class:"form-control",max:r.pageTotal,min:"1",onInput:f}),g(X,{type:s,...u,onClick:d})]})}class hn extends yt{get pagerInfo(){const{page:t=1,recTotal:e=0,recPerPage:s=10}=this.props;return{page:+t,recTotal:+e,recPerPage:+s,pageTotal:s?Math.ceil(e/s):0}}isBtnItem(t){return t==="link"||t==="nav"||t==="size-menu"||t==="goto"||super.isBtnItem(t)}getItemRenderProps(t,e,s){const r=super.getItemRenderProps(t,e,s),o=e.type||"item",{pagerInfo:i}=this;return o==="info"?Object.assign(r,{pagerInfo:i}):(o==="link"||o==="size-menu"||o==="nav"||o==="goto")&&Object.assign(r,{pagerInfo:i,linkCreator:t.linkCreator}),r}}hn.NAME="pager",hn.defaultProps={btnProps:{btnType:"ghost",size:"sm"}},hn.ItemComponents={...yt.ItemComponents,link:Ca,info:xa,nav:ka,"size-menu":Ta,goto:Sa};const Na=G({name:"pager",footer:{pager(){const{footPager:n}=this.options;return[n?g(hn,{...n}):null]}}});var yo=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},wt=(n,t,e)=>(yo(n,t,"read from private field"),e?e.call(n):t.get(n)),pe=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},ge=(n,t,e,s)=>(yo(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),me,$t,ye,un,dn;function Ma(n){return typeof n=="string"?n.split(",").map(t=>{const e=parseFloat(t);return Number.isNaN(e)?null:e}):n}class wo extends F{constructor(){super(...arguments),pe(this,me,Y()),pe(this,$t,0),pe(this,ye,void 0),pe(this,un,void 0),pe(this,dn,!1)}componentDidMount(){var e;this.tryDraw=this.tryDraw.bind(this),this.tryDraw();const t=(e=wt(this,me).current)==null?void 0:e.parentElement;if(this.props.responsive!==!1){if(t&&typeof ResizeObserver<"u"){const s=new ResizeObserver(this.tryDraw);s.observe(t),ge(this,ye,s)}wt(this,ye)||window.addEventListener("resize",this.tryDraw)}if(t&&typeof IntersectionObserver<"u"){const s=new IntersectionObserver(r=>{wt(this,dn)&&r.some(o=>o.isIntersecting)&&this.tryDraw()});s.observe(t),ge(this,un,s)}}componentWillUnmount(){var t;(t=wt(this,ye))==null||t.disconnect(),window.removeEventListener("resize",this.tryDraw)}tryDraw(){wt(this,$t)&&cancelAnimationFrame(wt(this,$t)),ge(this,$t,requestAnimationFrame(()=>{this.draw(),ge(this,$t,0)}))}draw(){const t=wt(this,me).current;if(!t)return;const e=t.parentElement,{width:s,height:r,responsive:o=!0}=this.props;let i=s||e.clientWidth,a=r||e.clientHeight;if(s&&r&&o&&(i=e.clientWidth,a=Math.floor(r*i/s)),t.style.width=`${i}px`,t.style.height=`${a}px`,i=i*(window.devicePixelRatio||1),a=a*(window.devicePixelRatio||1),t.width=i,t.height=a,!w(e).isVisible()&&wt(this,un)){ge(this,dn,!0);return}const{lineSize:l=1,scaleLine:h=!1,scaleLineSize:u,scaleLineGap:c=1,scaleLineDash:f,referenceLine:d,referenceLineSize:p,referenceLineDash:m,color:b="#2c78f1",fillColor:y=["rgba(46, 127, 255, 0.3)","rgba(46, 127, 255, 0.05)"],lineDash:_=[],bezier:k}=this.props,x=Ma(this.props.data),v=Math.floor(i/(x.length-1)),E=Math.max(...x.filter(C=>C!==null)),M=x.map((C,P)=>{const L=typeof C!="number";return{x:P*v,y:L?a:Math.round((1-C/E)*(a-l)),empty:L}});let D=M[0];const S=t.getContext("2d");if(h){const C=typeof h=="string"?h:"rgba(100,100,100,.1)";S.strokeStyle=C,S.lineWidth=u||l,f&&S.setLineDash(f);for(let P=0;P<M.length;++P){if(P%c!==0)continue;const L=M[P];S.moveTo(L.x,0),S.lineTo(L.x,a)}S.stroke()}if(d&&M.length>1){const C=typeof d=="string"?d:"rgba(100,100,100,.2)",P=M[M.length-1];S.moveTo(P.x,P.y),S.strokeStyle=C,S.lineWidth=p||l,S.lineTo(D.x,D.y),m&&S.setLineDash(m),S.stroke()}for(S.setLineDash(_);M.length&&M[M.length-1].empty;)M.pop();if(y){const C=M[M.length-1];if(S.beginPath(),S.moveTo(0,a),S.lineTo(D.x,D.y),k){const P=Math.round(v/2);for(let L=1;L<M.length;++L){const T=M[L],z=Math.round((T.y-D.y)/5);S.bezierCurveTo(D.x+P,D.y+z,T.x-P,T.y-z,T.x,T.y),D=T}}else for(let P=1;P<M.length;++P)D=M[P],S.lineTo(D.x,D.y);if(S.lineTo(C.x,a),Array.isArray(y)){const P=S.createLinearGradient(0,0,0,a);for(let L=0;L<y.length;++L)P.addColorStop(L/(y.length-1),y[L]);S.fillStyle=P}else S.fillStyle=y;S.fill()}if(D=M[0],S.beginPath(),S.moveTo(D.x,D.y),k){const C=Math.round(v/2);for(let P=1;P<M.length;++P){const L=M[P],T=Math.round((L.y-D.y)/5);S.bezierCurveTo(D.x+C,D.y+T,L.x-C,L.y-T,L.x,L.y),D=L}}else for(let C=1;C<M.length;++C)D=M[C],S.lineTo(D.x,D.y);S.strokeStyle=b,S.lineWidth=l,S.stroke()}render(){const{style:t,className:e,canvasClass:s}=this.props;return I("div",{class:"center burn-chart",className:e,style:t},I("canvas",{className:s,ref:wt(this,me)}))}}me=new WeakMap,$t=new WeakMap,ye=new WeakMap,un=new WeakMap,dn=new WeakMap,wo.defaultProps={responsive:!0,lineSize:1,scaleLine:!1,scaleLineSize:1,bezier:!0};function _o({pri:n="",text:t,className:e}){return I("span",{className:R(`pri-${n}`,e)},t??n)}function bo({severity:n="",text:t,className:e}){const s=t??n,r=`${Number.parseInt(s)}`!=`${n}`;return I("span",{className:R(`severity${r?" severity-label":""}`,e),"data-severity":n},r?s:"")}const Cl="";function vo(n,t,e){if(e){if(typeof e=="object"){const s=e[n];return typeof s=="string"?s:typeof s=="object"&&s?s.realname:""}if(typeof e=="function")return e(n,t)}}function Co(n,t,e){let s;if(typeof n=="function"?s=n(t,e):typeof n=="object"&&(s=n[t]),s)return I(xt,{className:"dtable-cell-icon",icon:s})}const xo={name:"zentao",plugins:["group","checkable","nested",ba,va,Na],defaultOptions:{colHover:!1,rowHeight:36,striped:!1,responsive:!0,checkable:"auto",nested:"auto",width:"100%",footer:void 0,showToolbarOnChecked:!0,checkOnClickRow:!0,groupDivider:!0,height(n){return Math.min(n,window.innerHeight-1-(w("#header").outerHeight()||0)-(w("#mainMenu").outerHeight()||0)-(w("#mainNavbar").outerHeight()||0))}},options(n){const{checkable:t,footToolbar:e,footPager:s,footer:r,sortLink:o}=n;if(r===void 0){const i=[];t&&i.push("checkbox"),e&&(i.push("toolbar"),e.btnProps=Object.assign({type:"primary",size:"sm"},e.btnProps)),t&&i.push("checkedInfo"),s&&i.push("flex","pager"),i.length&&(n.footer=i)}return typeof o=="string"&&(n.sortLink={url:o,"data-load":"table"}),n},i18n:{zh_cn:{unassigned:"未指派"},zh_tw:{unassigned:"未指派"},en:{unassigned:"Unassigned"}},colTypes:{id:{width:60,fixed:"left",align:"center",sortType:!0},checkID:{width:80,fixed:"left",align:"left",sortType:!0,checkbox:!0},title:{width:.44,fixed:"left",align:"left",sortType:!0,flex:1},shortTitle:{width:.2,align:"left",sortType:!0,fixed:"left",checkbox:!0,flex:1},nestedTitle:{width:.5,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},shortNestedTitle:{width:.33,align:"left",sortType:!0,fixed:"left",flex:1,nestedToggle:!0,nestedIndent:20},status:{width:80,align:"center",sortType:!0,onRenderCell(n,{col:t,row:e}){var i,a;const s=(i=e.data)==null?void 0:i[t.name];let r,o;return typeof s=="string"?(r=s,o=(a=t.setting.statusMap)==null?void 0:a[s]):typeof s=="object"&&s&&({name:r,label:o}=s),n[0]=I("span",{class:`${t.setting.statusClassPrefix??"status-"}${r}`},o??r),n}},user:{width:80,align:"center",sortType:!0,onRenderCell(n,{col:t,row:e,value:s}){const{userMap:r=this.options.userMap}=t.setting,o=vo(s,e,r);return o!==void 0&&(n[0]=o),n}},assign:{width:108,align:"left",sortType:!0,cellClass:"px-1.5",onRenderCell(n,t){const{col:e,row:s,value:r}=t,{userMap:o=this.options.userMap,currentUser:i,assignLink:a,unassignedText:l=this.i18n("unassigned")}=e.setting,h=!r,u=h?l:vo(r,s,o)??r;return n[0]=os(a,t,[I("i",{className:"icon icon-hand-right"}),I("span",null,u)],{"data-toggle":"modal",className:`dtable-assign-btn${i===r?" is-me":""}${h?" is-unassigned":""}`}),n}},avatar:{width:44,align:"center",sortType:!0},avatarName:{width:108,align:"left",sortType:!0},avatarBtn:{width:108,align:"left",sortType:!0},category:{width:80,align:"center",flex:1},desc:{width:160,align:"left",flex:1},text:{width:136,align:"left",flex:1},icon:{width:52,align:"center",cellClass:"px-1",onRenderCell(n,{row:t,col:e,value:s}){const{iconRender:r}=e.setting,o=Co(r,s,t);return o&&(n[0]=o),n}},pri:{width:68,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(n,{value:t}){return n[0]=I(_o,{pri:t}),n}},severity:{width:92,align:"center",cellClass:"px-1",sortType:!0,onRenderCell(n){const t=n[0];return n[0]=I(bo,{severity:t}),n}},burn:{width:88,align:"center",onRenderCell(n,{col:t}){const e=n[0];if(!e)return n;const{burn:s}=t.setting,r={data:e,className:"border-b",width:64,height:24,responsive:!1,...s};return n[0]=I(wo,{...r}),n}},date:{width:96,align:"center",sortType:!0},time:{width:64,align:"center",sortType:!0},datetime:{width:128,align:"center",sortType:!0},progress:{width:64,align:"center",sortType:!0},money:{width:96,align:"right",sortType:!0},count:{width:92,align:"right",sortType:!0},number:{width:64,align:"center",sortType:!0},percent:{width:64,align:"center",sortType:!0,format(n){return typeof n=="string"&&n.endsWith("%")?n:`${n}%`}},actions:{minWidth:120,align:"left",fixed:"right"}},onRenderCell(n,{row:t,col:e,value:s}){const{iconRender:r}=e.setting;if(r&&e.type!=="icon"){const o=Co(r,s,t);o&&n.push(o)}return n},onRender(){const{customCols:n}=this.options;if(!n)return;const{custom:t,setGlobal:e,reset:s,resetGlobal:r}=n;return{children:I("div",{className:"absolute gap-3 m-1.5 top-0 right-0 z-20 row"},I("div",{className:"w-px border-l my-1"}),I("a",{className:"btn ghost square size-sm rounded","data-toggle":"dropdown","data-placement":"bottom-end"},I("i",{class:"icon icon-cog-outline"})),I("menu",{class:"dropdown-menu menu"},t&&I("li",{class:"menu-item"},I("a",{href:t.url,"data-toggle":"modal"},t.text)),e&&I("li",{class:"menu-item"},I("a",{href:e.url},e.text)),s&&I("li",{class:"menu-item"},I("a",{href:s.url},s.text)),r&&I("li",{class:"menu-item"},I("a",{href:r.url},r.text))))}}},Ea=G(xo,{buildIn:!0}),ks=Symbol("EVENT_PICK");class Ts extends F{constructor(t){super(t),this._handleClick=this._handleClick.bind(this),this._hasInput=!!w(`#${t.id}`).length}get hasInput(){return this._hasInput}_handleClick(t){const{togglePop:e,clickType:s,onClick:r}=this.props;let o=s==="open"?!0:void 0;const i=w(t.target),a=r==null?void 0:r(t);if(!t.defaultPrevented){if(typeof a=="boolean")o=a;else{if(i.closest('[data-dismiss="pick"]').length){e(!1);return}if(i.closest("a,input").length)return}requestAnimationFrame(()=>e(o))}}_getClass(t){const{state:e,className:s}=t,{open:r,disabled:o}=e;return R("pick",s,r&&"is-open focus",o&&"disabled")}_getProps(t){const{id:e,style:s,attrs:r}=t;return{id:`pick-${e}`,className:this._getClass(t),style:s,tabIndex:-1,onClick:this._handleClick,...r}}_renderTrigger(t){const{children:e,state:s}=t;return e??s.value}_renderValue(t){const{name:e,state:{value:s=""},id:r}=t;if(e)if(this._hasInput)w(`#${r}`).val(s);else return g("input",{id:r,type:"hidden",className:"pick-value",name:e,value:s});return null}componentDidMount(){const{id:t,state:e}=this.props;w(`#${t}`).on(`change.zui.pick.${t}`,(s,r)=>{if(r===ks)return;const o=s.target.value;o!==e.value&&(this._skipTriggerChange=o,this.props.changeState({value:o}))})}componentWillUnmount(){const{id:t}=this.props;w(`#${t}`).off(`change.zui.pick.${t}`)}componentDidUpdate(t){const{id:e,state:s,name:r}=this.props;r&&t.state.value!==s.value&&(this._skipTriggerChange!==s.value&&w(`#${e}`).trigger("change",ks),this._skipTriggerChange=!1)}render(t){return I(t.tagName||"div",this._getProps(t),this._renderTrigger(t),this._renderValue(t))}}class ko extends F{constructor(e){super(e);W(this,Ft,void 0);W(this,lt,void 0);W(this,Rt,void 0);U(this,Ft,Y()),this._handleDocClick=s=>{const{state:{open:r},id:o,togglePop:i}=this.props,a=w(s.target);r!=="closing"&&!a.closest(`#pick-${o},#pick-pop-${o}`).length&&a.parent().length&&i(!1)},this._handleClick=this._handleClick.bind(this)}get trigger(){return w(`#pick-${this.props.id}`)[0]}get element(){var e;return(e=A(this,Ft))==null?void 0:e.current}get container(){return A(this,Rt)}_handleClick(e){const{togglePop:s}=this.props,r=w(e.target),o=r.closest("[data-pick-value]");if(o.length)return e.stopPropagation(),s(!1,{value:`${o.dataset("pickValue")}`});if(r.closest('[data-dismiss="pick"]').length)return s(!1)}_getClass(e){const{className:s,state:r}=e,{open:o}=r;return R("pick-pop",s,o===!0&&"in")}_getProps(e){const{id:s,style:r,maxHeight:o,maxWidth:i,minHeight:a,minWidth:l}=e,h=w.extend({maxHeight:o,maxWidth:i,minHeight:a,minWidth:l},r);return{id:`pick-pop-${s}`,className:this._getClass(e),style:h,ref:A(this,Ft),onClick:this._handleClick}}_getContainer(e){if(!A(this,Rt)){const s=w(e.container||"body");let r=s.find(".pick-container");r.length||(r=w("<div>").addClass("pick-container").appendTo(s)),U(this,Rt,r[0])}return A(this,Rt)}_render(e){return g("div",{...this._getProps(e),children:this._renderPop(e)})}_renderPop(e){return e.children}layout(){const{element:e,trigger:s,props:r}=this,{state:o}=r;if(!e||!s||!o.open){A(this,lt)&&(A(this,lt).call(this),U(this,lt,void 0));return}A(this,lt)||U(this,lt,lo(s,e,()=>{const{placement:i,width:a}=r;vs(s,e,{placement:!i||i==="auto"?"bottom-start":i,middleware:[i==="auto"?gs():null,ys(),ms(1)].filter(Boolean)}).then(({x:l,y:h})=>{var u,c;w(e).css({left:l,top:h,width:a==="100%"?w(s).outerWidth():void 0}),(c=(u=this.props).onLayout)==null||c.call(u,e)}),a==="100%"&&w(e).css({width:w(e).width()})}))}componentDidMount(){var e,s;this.layout(),w(document).on("click",this._handleDocClick),(s=(e=this.props).afterRender)==null||s.call(e,{firstRender:!0})}componentDidUpdate(){var e,s;(s=(e=this.props).afterRender)==null||s.call(e,{firstRender:!1})}componentWillUnmount(){var s,r;w(document).off("click",this._handleDocClick);const e=A(this,lt);e&&(e(),U(this,lt,void 0)),U(this,Rt,void 0),U(this,Ft,void 0),w(`#pick-pop-${this.props.id}`).remove(),(r=(s=this.props).beforeDestroy)==null||r.call(s)}render(e){return ni(this._render(e),this._getContainer(e))}}Ft=new WeakMap,lt=new WeakMap,Rt=new WeakMap;const xl="";var To=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},Nt=(n,t,e)=>(To(n,t,"read from private field"),e?e.call(n):t.get(n)),Ss=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Xt=(n,t,e,s)=>(To(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),fn,st,we;class rt extends F{constructor(t){super(t),Ss(this,fn,void 0),Ss(this,st,0),Ss(this,we,Y()),this.toggle=async(e,s)=>{this.props.disabled&&(e=!1);const{state:r}=this;if(typeof e=="boolean"&&e===(!!r.open&&r.open!=="closing"))return s&&await this.changeState(s),this.state;Nt(this,st)&&(clearTimeout(Nt(this,st)),Xt(this,st,0));let o=await this.changeState(a=>(e=e??!a.open,{open:e?"opening":"closing",...s}));const{open:i}=o;return i==="closing"?(await Dn(200,a=>{Xt(this,st,a)}),Xt(this,st,0),o=await this.changeState({open:!1})):i==="opening"&&(await Dn(50,a=>{Xt(this,st,a)}),Xt(this,st,0),o=await this.changeState({open:!0})),o},this.state={value:String(t.defaultValue??""),open:!1,disabled:!1},Xt(this,fn,t.id??`_pick${w.guid++}`),this.changeState=this.changeState.bind(this)}get id(){return Nt(this,fn)}get pop(){return Nt(this,we).current}changeState(t,e){return new Promise(s=>{this.setState(t,()=>{e==null||e(),s(this.state)})})}open(t){return this.toggle(!0,t)}close(t){return this.toggle(!1,t)}_getTriggerProps(t,e){return{id:this.id,state:e,className:t.className,style:t.style,name:t.name,tagName:t.tagName,attrs:t.attrs,clickType:t.clickType,onClick:t.onClick,changeState:this.changeState,togglePop:this.toggle}}_getPopProps(t,e){return{id:this.id,state:e,className:t.popClass,style:t.popStyle,changeState:this.changeState,togglePop:this.toggle,placement:t.popPlacement,container:t.popContainer,width:t.popWidth,height:t.popHeight,minHeight:t.popMinHeight,maxHeight:t.popMaxHeight,maxWidth:t.popMaxWidth,minWidth:t.popMinWidth}}_renderTrigger(t,e){return null}_renderPop(t,e){return null}_afterRender(t=!1){var e;(e=this.props.afterRender)==null||e.call(this,{firstRender:t})}_getPop(t){return t.Pop||this.constructor.Pop}_getTrigger(t){return t.Trigger||this.constructor.Trigger}_handleChange(t,e){const{onChange:s}=this.props;s&&s.call(this,t,e)}setValue(t){if(!this.props.disabled)return this.changeState({value:t})}componentDidMount(){this._afterRender(!0)}componentWillUpdate(t,e){const{open:s}=this.state,{open:r}=e;if(s===r)return;const{onPopShow:o,onPopHide:i}=this.props;r&&o?o():!r&&i&&i()}componentDidUpdate(t,e){const{open:s,value:r}=this.state,{open:o,value:i}=e;if(!!s!=!!o){const{onPopShown:a,onPopHidden:l}=this.props;s&&a?a():!s&&l&&l()}r!==i&&this._handleChange(r,i),this._afterRender()}componentWillUnmount(){var e;(e=this.props.beforeDestroy)==null||e.call(this),Nt(this,st)&&clearTimeout(Nt(this,st));const t=Nt(this,we).current;t&&t.componentWillUnmount&&t.componentWillUnmount()}render(t,e){const{open:s}=e,r=this._getTrigger(t);let o;if(s){const i=this._getPop(t);o=g(i,{ref:Nt(this,we),...this._getPopProps(t,e),children:this._renderPop(t,e)},"pop")}return g(Bt,{children:[g(r,{...this._getTriggerProps(t,e),children:this._renderTrigger(t,e)},"pick"),o]})}}fn=new WeakMap,st=new WeakMap,we=new WeakMap,rt.Trigger=Ts,rt.Pop=ko,rt.defaultProps={popContainer:"body",popClass:"popup",popWidth:"100%",popPlacement:"auto",popMinWidth:50,popMinHeight:32,popMaxHeight:300,clickType:"open"};const kl="",Tl="",Sl="";class So extends F{constructor(e){super(e);W(this,Zt,Y());W(this,Ce,Y());W(this,xe,e=>{var r,o;const s=e.target.value;(o=(r=this.props).onSearch)==null||o.call(r,s),this.setState({search:s}),e.stopPropagation()});W(this,wn,e=>{var s,r;e.stopPropagation(),(r=(s=this.props).onClear)==null||r.call(s),this.setState({search:""},()=>this.focus())});this.state={search:e.defaultSearch??""}}focus(){var e;(e=A(this,Zt).current)==null||e.focus()}componentDidMount(){this.focus()}componentDidUpdate(){const{inline:e}=this.props;if(e){const{current:s}=A(this,Ce),{current:r}=A(this,Zt);if(s&&r){const o=w(r).parent();o.width(Math.ceil(Math.min(s.clientWidth,o.closest(".picker").outerWidth()-32)))}}}render(e,s){const{placeholder:r,inline:o}=e,{search:i}=s,a=i.trim().length>0;let l;return o?l=g("div",{className:"picker-search-measure",ref:A(this,Ce),children:i}):a?l=g("button",{type:"button",className:"btn picker-search-clear square size-sm ghost",onClick:A(this,wn),children:g("span",{className:"close"})}):l=g("span",{className:"magnifier"}),g("div",{className:`picker-search${o?" is-inline":""}`,children:[g("input",{className:"form-control picker-search-input",type:"text",placeholder:r,value:i,onChange:A(this,xe),onInput:A(this,xe),ref:A(this,Zt)}),l]})}}Zt=new WeakMap,Ce=new WeakMap,xe=new WeakMap,wn=new WeakMap;class Pa extends Ts{constructor(){super(...arguments);W(this,Jt,void 0);W(this,ke,void 0);W(this,Te,void 0);W(this,Se,void 0);U(this,Jt,Y()),U(this,ke,e=>{const{onDeselect:s,state:{selections:r}}=this.props,o=w(e.target).closest(".picker-deselect-btn").attr("data-value");s&&r.length&&typeof o=="string"&&s(o),e.stopPropagation()}),U(this,Te,e=>{this.props.changeState({search:e})}),U(this,Se,()=>{this.props.togglePop(!0,{search:""})}),this._renderSelection=e=>g("div",{className:"picker-multi-selection",children:[g("span",{className:"text",children:g(At,{content:e.text})}),this.props.disabled?null:g("div",{className:"picker-deselect-btn btn size-xs ghost",onClick:A(this,ke),"data-value":e.value,children:g("span",{className:"close"})})]},e.value)}_handleClick(e){var s;super._handleClick(e),(s=A(this,Jt).current)==null||s.focus()}_getClass(e){return R(super._getClass(e),"picker-select picker-select-multi form-control",e.disabled?"disabled":"")}_renderSearch(e){const{state:{search:s},searchHint:r}=e;return g(So,{inline:!0,ref:A(this,Jt),defaultSearch:s,onSearch:A(this,Te),onClear:A(this,Se),placeholder:r})}_renderTrigger(e){const{state:{selections:s=[],open:r},search:o,placeholder:i,children:a}=this.props,l=r&&o;return!l&&!s.length?g("span",{className:"picker-select-placeholder",children:i},"selections"):[g("div",{className:"picker-multi-selections",children:[s.map(this._renderSelection),l?this._renderSearch(e):null]},"selections"),a,g("span",{class:"caret"},"caret")]}_renderValue(e){const{name:s,state:{value:r=""},id:o,valueList:i,emptyValue:a}=e;if(!i.length)return super._renderValue(e);if(s)if(this.hasInput)w(`#${o}`).val(r);else{const l=i.length?i:[a];return g("select",{id:o,multiple:!0,className:"pick-value",name:s.endsWith("[]")?s:`${s}[]`,style:{display:"none"},children:l.map(h=>g("option",{value:h,children:h},h))})}return null}componentDidMount(){super.componentDidMount();const{id:e,valueList:s,emptyValue:r}=this.props;w(`#${e}`).val(s.length?s:[r])}componentDidUpdate(e){const{id:s,state:r,name:o,valueList:i,emptyValue:a}=this.props;o&&e.state.value!==r.value&&w(`#${s}`).val(i.length?i:[a]).trigger("change",ks)}}Jt=new WeakMap,ke=new WeakMap,Te=new WeakMap,Se=new WeakMap;class Ra extends Ts{constructor(){super(...arguments);W(this,Cn);W(this,Ne,Y());W(this,_n,e=>{this.props.disabled||(this.props.onClear(),e.stopPropagation())});W(this,bn,e=>{this.props.changeState({search:e})});W(this,vn,()=>{this.props.togglePop(!0,{search:""})})}_handleClick(e){var s;super._handleClick(e),(s=A(this,Ne).current)==null||s.focus()}_getClass(e){return R(super._getClass(e),"picker-select picker-select-single form-control",e.disabled?"disabled":"")}_renderSearch(e){const{state:{search:s}}=e;return g(So,{ref:A(this,Ne),defaultSearch:s,onSearch:A(this,bn),onClear:A(this,vn),placeholder:te(this,Cn,Io).call(this)})}_renderTrigger(e){const{children:s,state:{selections:r=[],open:o},placeholder:i,search:a,disabled:l,clearable:h}=e,[u]=r,c=o&&a;let f;c?f=this._renderSearch(e):u?f=g("span",{className:"picker-single-selection",children:g(At,{content:u.text})},"main"):f=g("span",{className:"picker-select-placeholder",children:i},"main");const d=h&&!c?g("button",{type:"button",className:"btn picker-deselect-btn size-sm square ghost",disabled:l,onClick:A(this,_n),children:g("span",{className:"close"})},"deselect"):null;return[f,s,d,c?null:g("span",{className:"caret"},"caret")]}}Ne=new WeakMap,_n=new WeakMap,bn=new WeakMap,vn=new WeakMap,Cn=new WeakSet,Io=function(){const{searchHint:e,state:{value:s,selections:r}}=this.props;let o=e;if(o===void 0){const i=r.find(a=>a.value===s);i&&typeof i.text=="string"&&(o=i.text)}return o};const Da=(n,t,e="is-match")=>n.reduce((s,r)=>[...s].reduce((o,i)=>{if(typeof i!="string")return o.push(i),o;const a=i.toLowerCase().split(r);if(a.length===1)return o.push(i),o;let l=0;return a.forEach((h,u)=>{u&&(o.push(g("span",{class:e,children:i.substring(l,l+r.length)})),l+=r.length),o.push(i.substring(l,l+h.length)),l+=h.length}),o},[]),t);class Aa extends ko{constructor(){super(...arguments);W(this,kn);W(this,Tn);W(this,xn,Y());W(this,Sn,({item:e})=>{const s=e.key,{multiple:r,onToggleValue:o,onSelect:i,togglePop:a}=this.props;r?o(s):(i(s),a(!1,{search:""}))})}componentDidMount(){super.componentDidMount();const e=this.element;e&&w(e).on("mouseenter.picker.zui",".menu-item",s=>{const r=w(s.currentTarget);this.setHoverItem(r.children("a").attr("data-value")??"")})}componentWillUnmount(){super.componentWillUnmount();const e=this.element;e&&w(e).off(".picker.zui")}setHoverItem(e){this.props.changeState({hoverItem:e},()=>{const s=te(this,kn,Lo).call(this);s!=null&&s.length&&s.scrollIntoView({block:"nearest",behavior:"smooth"})})}_getClass(e){return R(super._getClass(e),"picker-menu")}_renderPop(e){const{menu:s}=e;return g(zt,{ref:A(this,xn),className:"picker-menu-list",items:te(this,Tn,Wo).call(this),onClickItem:A(this,Sn),...s})}}xn=new WeakMap,kn=new WeakSet,Lo=function(){const e=this.element;if(e)return w(e).find(".menu-item>a.hover")},Tn=new WeakSet,Wo=function(){const{selections:e,items:s,hoverItem:r,search:o}=this.props.state,i=new Set(e.map(u=>u.value));let a=!1;const l=w.unique(o.toLowerCase().split(" ").filter(u=>u.length)),h=s.reduce((u,c)=>{const{value:f="",keys:d,text:p,className:m,content:b,...y}=c;return f===r&&(a=!0),p&&u.push({key:f,active:i.has(f),text:b?null:typeof p=="string"?Da(l,[p]):g(At,{content:p}),className:R(m,{hover:f===r}),"data-value":f,content:b,...y}),u},[]);return!a&&h.length&&(h[0].className=R(h[0].className,"hover")),h},Sn=new WeakMap;var No=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},at=(n,t,e)=>(No(n,t,"read from private field"),e?e.call(n):t.get(n)),pn=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Mt=(n,t,e,s)=>(No(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),_e,_t,Vt,be;class Ns extends rt{constructor(t){super(t),pn(this,_e,void 0),pn(this,_t,void 0),pn(this,Vt,0),pn(this,be,void 0),this.isEmptyValue=o=>at(this,be).has(o),this.toggleValue=(o,i)=>{if(!this.props.multiple)return i||o!==this.value?this.setValue(o):this.setValue();const{valueList:a}=this,l=a.indexOf(o);if(i!==l>=0)return l>-1?a.splice(l,1):a.push(o),this.setValue(a)},this.deselect=o=>{const{valueList:i}=this,a=new Set(this.formatValueList(o)),l=i.filter(h=>!a.has(h));this.setValue(l)},this.clear=()=>{this.setValue()},this.select=o=>{const i=this.formatValueList(o),a=this.props.multiple?[...this.valueList,...i]:i[0];return this.setValue(a)},this.isSelected=o=>this.valueList.includes(o),w.extend(this.state,{loading:!1,search:"",items:t.items,selections:[]});const{valueSplitter:e=",",emptyValue:s=""}=this.props;Mt(this,be,new Set(s.split(e)));const{items:r}=this.state;if(Array.isArray(r)&&r.length){if(r.forEach(o=>o.value=String(o.value)),t.limitValueInList){const o=new Set(r.map(i=>i.value));this.state.value=this.valueList.filter(i=>o.has(i)).join(t.valueSplitter)}!this.valueList.length&&t.required&&!t.multiple&&(this.state.value=r[0].value)}}get value(){return this.state.value}get valueList(){return this.formatValueList(this.state.value)}get firstEmptyValue(){return at(this,be).values().next().value}async load(){let t=at(this,_t);t&&t.abort(),t=new AbortController,Mt(this,_t,t);const{items:e,searchDelay:s}=this.props,{search:r}=this.state;let o=[];if(typeof e=="function"){if(await Dn(s||500),at(this,_t)!==t||(o=await e(r,{signal:t.signal}),at(this,_t)!==t))return o}else if(r.length){const i=w.unique(r.toLowerCase().split(" ").filter(a=>a.length));o=e,i.length&&(o=e.reduce((a,l)=>{const{value:h,keys:u="",text:c}=l;return i.every(f=>h.toLowerCase().includes(f)||u.toLowerCase().includes(f)||typeof c=="string"&&c.toLowerCase().includes(f))&&a.push(l),a},[]))}else o=e;return Mt(this,_t,void 0),o}changeState(t,e){return super.changeState(s=>{const r=typeof t=="function"?t(s):t;if(r.value!==void 0&&r.value!==s.value||r.items&&r.items!==s.items){const o=r.items||s.items,i=new Map(o.map(a=>[a.value,a]));r.selections=this.formatValueList(r.value??s.value).reduce((a,l)=>(this.isEmptyValue(l)||a.push(i.get(l)||{value:l}),a),[])}return r},e)}async update(t){const{state:e,props:s}=this,r=at(this,_e)||{},o={};if(Mt(this,_e,r),t||r.search!==e.search||s.items!==r.items){const a=await this.load();o.items=a.filter(l=>(l.value=String(l.value),!this.isEmptyValue(l.value))),o.loading=!1,r.items=s.items,r.search=e.search}(t||r.value!==e.value)&&(r.value=e.value);const i=o.items;s.required&&!s.multiple&&this.isEmptyValue(this.state.value)&&Array.isArray(i)&&i.length&&(o.value=i[0].value),Object.keys(o).length&&await this.changeState(o)}async tryUpdate(){at(this,Vt)&&clearTimeout(at(this,Vt)),Mt(this,Vt,window.setTimeout(()=>{Mt(this,Vt,0),this.update()},50))}componentDidUpdate(t,e){super.componentDidUpdate(t,e),this.tryUpdate()}componentDidMount(){super.componentDidMount(),this.tryUpdate()}componentWillUnmount(){var t;(t=at(this,_t))==null||t.abort(),Mt(this,_t,void 0),Mt(this,_e,void 0),clearTimeout(at(this,Vt)),super.componentWillUnmount()}_getTriggerProps(t,e){return{...super._getTriggerProps(t,e),multiple:t.multiple,placeholder:t.placeholder,search:t.search,searchHint:t.searchHint,disabled:t.disabled,clearable:!!this.valueList.length&&!t.required,valueList:this.valueList,emptyValue:this.firstEmptyValue,onDeselect:this.deselect,onSelect:this.select,onClear:this.clear,onToggleValue:this.toggleValue}}_getPopProps(t,e){return{...super._getPopProps(t,e),menu:t.menu,multiple:t.multiple,search:t.search,searchHint:t.searchHint,onDeselect:this.deselect,onSelect:this.select,onClear:this.clear,onToggleValue:this.toggleValue}}_getTrigger(t){return t.Trigger||(t.multiple?Pa:Ra)}formatValueList(t){let e=[];return typeof t=="string"&&t.length?e=w.unique(t.split(this.props.valueSplitter??",")):Array.isArray(t)&&(e=w.unique(t)),e.filter(s=>!this.isEmptyValue(s))}formatValue(t){const e=this.formatValueList(t);return e.length?e.join(this.props.valueSplitter??","):this.firstEmptyValue}setValue(t=[]){if(this.props.disabled)return;!Array.isArray(t)&&typeof t!="string"&&(t=t!==null?String(t):this.firstEmptyValue);let e=this.formatValueList(t);if(!e.length)return this.changeState({value:this.firstEmptyValue});const{items:s,limitValueInList:r}=this.props;if(r){const i=new Set((Array.isArray(s)?s:this.state.items).map(a=>String(a.value)));e=e.filter(a=>i.has(a))}const o=this.formatValue(e);return this.changeState({value:o})}}_e=new WeakMap,_t=new WeakMap,Vt=new WeakMap,be=new WeakMap,Ns.defaultProps={...rt.defaultProps,className:"picker",valueSplitter:",",limitValueInList:!0,search:!0,emptyValue:""},Ns.Pop=Aa;class Ia extends F{constructor(){super(...arguments);W(this,Me,Y());W(this,Ee,(e,s)=>{var r,o;(o=(r=this.props).onChange)==null||o.call(r,e,String(s.item.key||""))})}componentDidMount(){w(A(this,Me).current).find(".menu-item>.active").scrollIntoView()}render(e){const{minuteStep:s=5,hour:r,minute:o}=e,i=[],a=[];for(let h=0;h<24;++h)i.push({key:h,text:h<10?`0${h}`:h,active:r===h});for(let h=0;h<60;h+=s)a.push({key:h,text:h<10?`0${h}`:h,active:o===h});const l="col w-10 max-h-full overflow-y-auto scrollbar-thin scrollbar-hover";return g("div",{className:"time-picker-menu row",ref:A(this,Me),children:[g(zt,{className:l,items:i,onClickItem:A(this,Ee).bind(this,"hour")}),g(zt,{className:l,items:a,onClickItem:A(this,Ee).bind(this,"minute")})]})}}Me=new WeakMap,Ee=new WeakMap;const Nl="";var La=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},gn=(n,t,e)=>(La(n,t,"read from private field"),e?e.call(n):t.get(n)),mn=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Ms,Es,Ps,Rs;const Mo=n=>{if(!n)return;const t=tt(`1999-01-01 ${n}`);if(!Number.isNaN(t.getDay()))return t};class Eo extends rt{constructor(t){super(t),mn(this,Ms,()=>{this.toggle(!0)}),mn(this,Es,s=>{this.setTime(s.target.value)}),mn(this,Ps,(s,r)=>{this.setTime({[s]:r})}),mn(this,Rs,()=>{this.setTime("")});const e=this.state;e.value==="now"&&(e.value=ft(new Date,t.format))}setTime(t){if(this.props.disabled)return;let e="";if(typeof t=="string")e=t;else{const[a,l]=(this.state.value||"00:00").split(":"),{hour:h=+a,minute:u=+l}=t;e=`${h}:${u}`}const s=Mo(e),{onInvalid:r,required:o,defaultValue:i}=this.props;this.setState({value:s?ft(s,this.props.format):o?i:""},()=>{!s&&r&&r(e)})}getTime(){const t=Mo(this.state.value);return t?[t.getHours(),t.getMinutes()]:null}_renderTrigger(t,e){const{placeholder:s,icon:r,required:o,disabled:i,readonly:a}=t,{value:l="",open:h}=e,u=`time-picker-${this.id}`;let c;return h&&!o&&l.length?c=g("button",{type:"button",className:"btn size-sm square ghost",onClick:gn(this,Rs),children:g("span",{className:"close"})}):r&&(r===!0?c=g("i",{class:"i-time"}):c=g(xt,{icon:r})),[g("input",{id:u,type:"text",className:"form-control",placeholder:s,value:l,disabled:i,readOnly:a,onFocus:gn(this,Ms),onChange:gn(this,Es)},"input"),c?g("label",{for:u,className:"input-control-suffix",children:c},"icon"):null]}_getTriggerProps(t,e){const s=super._getTriggerProps(t,e);return{...s,className:R(s.className,"time-picker input-control has-suffix-icon")}}_renderPop(t){const[e,s]=this.getTime()||[];return g(Ia,{hour:e,minute:s,minuteStep:t.minuteStep,onChange:gn(this,Ps)})}}Ms=new WeakMap,Es=new WeakMap,Ps=new WeakMap,Rs=new WeakMap,Eo.defaultProps={...rt.defaultProps,popWidth:"auto",popMaxHeight:320,minuteStep:5,format:"hh:mm",icon:!0};const Ml="";q.addLang({zh_cn:{today:"今天",yearFormat:"{0}年",weekNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},zh_tw:{today:"今天",yearFormat:"{0}年",weekNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},en:{today:"Today",yearFormat:"{0}",weekNames:["SUN","MON","TUE","WED","THU","FRI","SAT"],monthNames:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."]}});const Wa=(n,t,e=0)=>{const s=new Date(n,t-1,1),r=s.getDay(),o=s.getTime()-(7+r-e)%7*rs;return{days:7*5,startTime:o,firstDay:s.getTime()}},Po=(n,t)=>new Set((Array.isArray(n)?n:[n]).map(e=>ft(e,t)));class Ha extends F{constructor(){super(...arguments);W(this,Nn,e=>{const{onClickDate:s}=this.props;if(!s)return;const r=w(e.target).closest(".mini-calendar-day").dataset("date");r&&s(r)})}render(e){const s=new Date,{weekStart:r=1,weekNames:o=q.getLang("weekNames"),monthNames:i=q.getLang("monthNames"),year:a=s.getFullYear(),month:l=s.getMonth()+1,highlights:h=[],selections:u=[]}=e,c=[],f="btn ghost square rounded-full";for(let E=0;E<7;E++){const M=(r+E)%7;c.push(g("div",{className:R("col mini-calendar-day",{"is-weekend":M===0||M===6}),children:g("div",{children:o?o[M]:M})},E))}const{startTime:d,days:p,firstDay:m}=Wa(a,l,r),b=m+p*rs;let y=d;const _=[],k="yyyy-MM-dd",x=Po(h,k),v=Po(u,k);for(;y<=b;){const E=[];for(let M=0;M<7;M++){const D=new Date(y),S=D.getDate(),C=ft(D,k),P=D.getDay(),L=di(D,m),T=R("col mini-calendar-day",{active:x.has(C),selected:v.has(C),"is-first":S===1,"is-in-month":L,"is-out-month":!L,"is-today":hi(D,s),"is-weekend":P===0||P===6});E.push(g("div",{className:T,"data-date":C,children:g("a",{className:f,onClick:A(this,Nn),children:S===1&&i?i[D.getMonth()]:D.getDate()})},C)),y+=rs}_.push(g("div",{className:"row",children:E},y))}return g("div",{className:"mini-calendar",children:[g("div",{className:"row",children:c}),_]})}}Nn=new WeakMap;class Ro extends F{constructor(){super(...arguments);W(this,Pe,Y());W(this,Mn,e=>{const{onChange:s}=this.props;if(!s)return;const o=w(e.target).closest("[data-value]").dataset("value");o&&(s(+o),e.stopPropagation())})}componentDidMount(){w(A(this,Pe).current).find(".active").scrollIntoView({block:"center"})}render(e){const{className:s,max:r,min:o,value:i}=e,a=[],l=new Date().getFullYear();for(let h=o;h<=r;++h)a.push(g(X,{type:"ghost","data-value":h,active:h===i,className:R(l===h?"is-current":""),onClick:A(this,Mn),children:h},h));return g("div",{className:s,ref:A(this,Pe),children:a})}}Pe=new WeakMap,Mn=new WeakMap;class Oa extends F{constructor(e){super(e);W(this,En);W(this,Pn);W(this,Qt,void 0);W(this,Re,void 0);W(this,De,void 0);W(this,Ae,void 0);W(this,Ie,void 0);W(this,Le,void 0);U(this,Qt,Y()),U(this,Re,o=>{const i=w(o.target).closest("[data-set-date]");i.length&&this.changeDate(i.dataset("set-date"))}),U(this,De,()=>{const{year:o,month:i}=this.state;i===1?this.setState({year:o-1,month:12}):this.setState({month:i-1})}),U(this,Ae,()=>{const{year:o,month:i}=this.state;i===12?this.setState({year:o+1,month:1}):this.setState({month:i+1})}),U(this,Ie,o=>{this.setState({year:o,select:"day"})}),U(this,Le,o=>{this.setState({month:o,select:"day"})}),this.changeDate=o=>{var i,a;if(o.startsWith("today")){let l=new Date;o.length>3&&(l=ci(l,o.substring(5).replace("+",""))),o=ft(l,"yyyy-MM-dd")}(a=(i=this.props).onChange)==null||a.call(i,o)};const{date:s}=e,r=s?new Date(s):new Date;this.state={select:"day",year:r.getFullYear(),month:r.getMonth()+1}}_showSelect(e){this.setState(s=>s.select===e?{select:"day"}:{select:e})}componentDidMount(){w(A(this,Qt).current).find(".active").scrollIntoView()}render(e,s){const{date:r,yearText:o=q.getLang("yearFormat")||"{0}",weekNames:i=q.getLang("weekNames"),monthNames:a=q.getLang("monthNames"),weekStart:l}=e,h=r?new Date(r):void 0,{year:u,month:c,select:f}=s,d=f==="day",p=tt(e.minDate||"1970-1-1"),m=tt(e.maxDate||"2099-12-1");return g("div",{className:"date-picker-menu row",ref:A(this,Qt),onClick:A(this,Re),children:[te(this,En,Ho).call(this,e),g("div",{className:"cell",style:"width: 312px",children:[g("div",{className:"row p-2",children:[g(X,{type:f==="year"?"primary-pale":"ghost",size:"sm",caret:!0,onClick:this._showSelect.bind(this,"year"),children:B(o,u)}),g(X,{type:f==="month"?"primary-pale":"ghost",size:"sm",caret:!0,onClick:this._showSelect.bind(this,"month"),children:a?a[c-1]:c}),g("div",{className:"flex-auto"}),d?g("div",{children:[g(X,{type:"ghost",size:"sm",square:!0,onClick:A(this,De),children:g("i",{className:"chevron-left"})}),g(X,{type:"ghost",size:"sm",square:!0,onClick:A(this,Ae),children:g("i",{className:"chevron-right"})})]}):null]}),d?g(Ha,{weekStart:l,weekNames:i,monthNames:a,year:u,month:c,selections:h,onClickDate:this.changeDate}):null,f==="year"?g(Ro,{className:"date-pick-menu-years overflow-y-auto scrollbar-hover scrollbar-thin",value:u,min:p.getFullYear(),max:m.getFullYear(),onChange:A(this,Ie)}):f==="month"?g(Ro,{className:"date-pick-menu-month overflow-y-auto scrollbar-hover scrollbar-thin",value:c,min:1,max:12,onChange:A(this,Le)}):null,d?te(this,Pn,Oo).call(this,e):null]})]})}}Qt=new WeakMap,Re=new WeakMap,De=new WeakMap,Ae=new WeakMap,Ie=new WeakMap,Le=new WeakMap,En=new WeakSet,Ho=function(e){let{menu:s}=e;return s?(Array.isArray(s)&&(s={items:s}),g(zt,{...s})):null},Pn=new WeakSet,Oo=function(e){let{actions:s}=e;const{todayText:r,clearText:o}=e;return s||(s=[{text:r,"data-set-date":ft(new Date,"yyyy-MM-dd")}]),Array.isArray(s)&&(s={items:s}),g("div",{className:"date-picker-menu-footer",children:[g(yt,{btnProps:{className:"ghost text-primary"},...s}),o?g(X,{type:"ghost text-link","data-set-date":"",children:o}):null]})};const El="";var za=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},Ds=(n,t,e)=>(za(n,t,"read from private field"),e?e.call(n):t.get(n)),As=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Is,Ls,Ws;class Do extends rt{constructor(t){super(t),As(this,Is,()=>{this.toggle(!0)}),As(this,Ls,s=>{this.setDate(s.target.value)}),As(this,Ws,()=>{this.setDate("")}),this.setDate=s=>{const{onInvalid:r,defaultValue:o="",required:i,disabled:a,format:l}=this.props;if(a)return;const h=tt(s),u=!s||Number.isNaN(h.getDay());this.setState({value:u?i?o:"":ft(h,l)},()=>{!u&&r&&r(s),this.toggle(!1)})};const{value:e}=this.state;e&&(this.state.value=ft(e==="today"?new Date:e,t.format))}_renderTrigger(t,e){const{placeholder:s,icon:r,required:o,disabled:i,readonly:a}=t,{value:l="",open:h}=e,u=`date-picker-${this.id}`;let c;return h&&!o&&l.length?c=g("button",{type:"button",className:"btn size-sm square ghost",onClick:Ds(this,Ws),children:g("span",{className:"close"})}):r&&(r===!0?c=g("i",{class:"i-calendar"}):c=g(xt,{icon:r})),[g("input",{id:u,type:"text",className:"form-control",placeholder:s,value:l,disabled:i,readOnly:a,onFocus:Ds(this,Is),onChange:Ds(this,Ls)},"input"),c?g("label",{for:u,className:"input-control-suffix",children:c},"icon"):null]}_getTriggerProps(t,e){const s=super._getTriggerProps(t,e);return{...s,className:R(s.className,"date-picker input-control has-suffix-icon")}}_getPopProps(t,e){const s=super._getPopProps(t,e);return{...s,className:R(s.className,"popup")}}_renderPop(t,e){const{weekNames:s,monthNames:r,weekStart:o,yearText:i,todayText:a=q.getLang("today"),clearText:l,menu:h,actions:u,minDate:c,maxDate:f,required:d}=t;return g(Oa,{onChange:this.setDate,date:e.value,weekNames:s,monthNames:r,weekStart:o,yearText:i,todayText:a,clearText:d?"":l,menu:h,actions:u,minDate:c,maxDate:f})}}Is=new WeakMap,Ls=new WeakMap,Ws=new WeakMap,Do.defaultProps={...rt.defaultProps,popWidth:"auto",popMaxHeight:320,format:"yyyy-MM-dd",icon:!0};class yn extends rt{constructor(t){if(super(t),this.state.value===void 0&&t.required){const e=this._getItems();e&&(this.state.value=e[0].value)}}_getTriggerProps(t,e){const s=super._getTriggerProps(t,e);return t.disabled&&(s.className=R(s.className,"disabled")),s}_renderTrigger(t,e){var o;const{value:s}=e,{placeholder:r}=t;return[s===void 0?I("span",{class:"placeholder"},r):this._renderItem(e.value,(o=this._getItems().find(({value:i})=>i===s))==null?void 0:o.text,"pri"),I("span",{key:"caret",class:"caret"})]}_getItems(){let{items:t=["",1,2,3,4]}=this.props;return Array.isArray(t)?t=t.map(e=>typeof e=="object"?e:{value:`${e}`}):typeof t=="object"&&(t=Object.keys(t).map(e=>({value:e,text:t[e]}))),t.sort((e,s)=>+e.value-+s.value),t}_renderItem(t,e,s){return I(_o,{key:s,pri:t,text:e})}_renderPop(){const{value:t}=this.state;return I("div",{className:"pick-pri-list"},this._getItems().map(({value:e,text:s})=>I("button",{key:e,type:"button",class:`btn w-full ${t===e?"primary-pale":"ghost"}`,"data-pick-value":e},this._renderItem(e,s))))}}yn.defaultProps={...rt.defaultProps,items:["",1,2,3,4],className:"pick-pri form-control",popClass:"pick-pri-pop popup",popWidth:"auto",popMinWidth:56};class Ao extends yn{_renderItem(t,e,s){return I(bo,{key:s,severity:t,text:e})}}Ao.defaultProps={...yn.defaultProps,items:[0,1,2,3,4]};const Pl="",ve=(n,t,e,s="value")=>{const r=`${t.col.name}[${t.row.id}]`,o=n.getFormData(r)??t.value;return{[s]:o,className:"form-control",onChange:i=>n.setFormData(r,i instanceof Event?i.currentTarget.value:i),...e}};function Hs(n){return ve(this,n,null,"defaultValue")}const Va={input:{component:"input",props(n){return ve(this,n,{type:"text"})}},select:{component:function(n){const{items:t,defaultValue:e,...s}=n;return I("select",{...s},t.map(r=>I("option",{key:r.value,value:r.value},r.text)))},props(n){return ve(this,n)}},picker:{component:Ns,props:Hs},datePicker:{component:Do,props(n){return ve(this,n,{className:"flex-auto",icon:"calendar"},"defaultValue")}},timePicker:{component:Eo,props(n){return ve(this,n,{className:"flex-auto",icon:"time"},"defaultValue")}},priPicker:{component:yn,props:Hs},severityPicker:{component:Ao,props:Hs}},Fa=G({name:"form",plugins:[Ir],data(){return{formData:{}}},colTypes:{control:{custom(n){let{control:t}=n.col.setting;if(typeof t=="function"&&(t=t.call(this,n)),!t)return;typeof t=="string"&&(t={type:t});const{controlMap:e}=this.options,{type:s}=t,r={name:`${n.col.name}[${n.row.id}]`};let o;if([Va[s],e==null?void 0:e[s],t].forEach(i=>{if(i){const{props:a}=i;a&&w.extend(r,typeof a=="function"?a.call(this,n):a),o=i.component||o}}),!!o)return{component:o,props:r}}}},methods:{setFormData(n,t){var s;const{formData:e}=this.data;e[n]=t,(s=this.options.onFormChange)==null||s.call(this,n,t,e)},getFormData(n){return n?this.data.formData[n]:this.data.formData}}});O.DTable=Yt,O.form=Fa,O.zentao=Ea,O.zentaoPlugin=xo,Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=zui.dtable.umd.cjs.map
