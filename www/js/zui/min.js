/*!
 * ZUI: Zentao template - v1.8.1 - 2018-04-10
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2018 cnezsoft.com; Licensed MIT
 */
!function(t,e,i){"use strict";if("undefined"==typeof t)throw new Error("ZUI requires jQuery");t.zui||(t.zui=function(e){t.isPlainObject(e)&&t.extend(t.zui,e)});var n={all:-1,left:0,middle:1,right:2},a=0;t.zui({uuid:function(t){var e=1e3*(new Date).getTime()+a++%1e3;return t?e:e.toString(36)},callEvent:function(e,n,a){if(t.isFunction(e)){a!==i&&(e=t.proxy(e,a));var o=e(n);return n&&(n.result=o),!(o!==i&&!o)}return 1},clientLang:function(){var i,n=e.config;if("undefined"!=typeof n&&n.clientLang&&(i=n.clientLang),!i){var a=t("html").attr("lang");i=a?a:navigator.userLanguage||navigator.userLanguage||"zh_cn"}return i.replace("-","_").toLowerCase()},strCode:function(t){var e=0;if(t&&t.length)for(var i=0;i<t.length;++i)e+=i*t.charCodeAt(i);return e},getMouseButtonCode:function(t){return"number"!=typeof t&&(t=n[t]),t!==i&&null!==t||(t=-1),t}}),t.fn.callEvent=function(e,n,a){var o=t(this),s=e.indexOf(".zui."),r=s<0?e:e.substring(0,s),l=t.Event(r,n);if(a===i&&s>0&&(a=o.data(e.substring(s+1))),a&&a.options){var c=a.options[r];t.isFunction(c)&&(l.result=t.zui.callEvent(c,l,a))}return o.trigger(l),l},t.fn.callComEvent=function(e,n,a){a===i||t.isArray(a)||(a=[a]);var o=this,s=o.triggerHandler(n,a),r=e.options[n];return r&&(s=r.apply(e,a)),s}}(jQuery,window,void 0),function(t){"use strict";t.fn.fixOlPd=function(e){return e=e||10,this.each(function(){var i=t(this);i.css("paddingLeft",Math.ceil(Math.log10(i.children().length))*e+10)})},t(function(){t(".ol-pd-fix,.article ol").fixOlPd()})}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',i="zui.alert",n=function(i){t(i).on("click",e,this.close)};n.prototype.close=function(e){function n(){s.trigger("closed."+i).remove()}var a=t(this),o=a.attr("data-target");o||(o=a.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=a.hasClass("alert")?a:a.parent()),s.trigger(e=t.Event("close."+i)),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var a=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var a=t(this),o=a.data(i);o||a.data(i,o=new n(this)),"string"==typeof e&&o[e].call(a)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click."+i+".data-api",e,n.prototype.close)}(window.jQuery),function(t,e){"use strict";var i="zui.pager",n={page:1,recTotal:0,recPerPage:10},a={zh_cn:{prev:"上一页",next:"下一页",first:"第一页",last:"最后一页","goto":"跳转",pageOf:"第 <strong>{page}</strong> 页",totalPage:"共 <strong>{totalPage}</strong> 页",totalCount:"共 <strong>{recTotal}</strong> 项",pageSize:"每页 <strong>{recPerPage}</strong> 项",itemsRange:"第 <strong>{start}</strong> ~ <strong>{end}</strong> 项",pageOfTotal:"第 <strong>{page}</strong>/<strong>{totalPage}</strong> 页"},zh_tw:{prev:"上一頁",next:"下一頁",first:"第一頁",last:"最後一頁","goto":"跳轉",pageOf:"第 <strong>{page}</strong> 頁",totalPage:"共 <strong>{totalPage}</strong> 頁",totalCount:"共 <strong>{recTotal}</strong> 項",pageSize:"每頁 <strong>{recPerPage}</strong> 項",itemsRange:"第 <strong>{start}</strong> ~ <strong>{end}</strong> 項",pageOfTotal:"第 <strong>{page}</strong>/<strong>{totalPage}</strong> 頁"},en:{prev:"Prev",next:"Next",first:"First",last:"Last","goto":"Goto",pageOf:"Page <strong>{page}</strong>",totalPage:"<strong>{totalPage}</strong> pages",totalCount:"<strong>{recTotal}</strong> items",pageSize:"<strong>{recPerPage}</strong> items per page",itemsRange:"From <strong>{start}</strong> to <strong>{end}</strong>",pageOfTotal:"Page <strong>{page}</strong> of <strong>{totalPage}</strong>"}},o=function(e,n){var s=this;s.name=i,s.$=t(e),n=s.options=t.extend({},o.DEFAULTS,this.$.data(),n);var r=n.lang||"zh_cn";s.lang=t.isPlainObject(r)?t.extend(!0,{},a[r.lang||t.zui.clientLang()],r):a[r],s.state={},s.set(n.page,n.recTotal,n.recPerPage,!0),s.$.on("click",".pager-goto-btn",function(){var e=t(this).closest(".pager-goto"),i=parseInt(e.find(".pager-goto-input").val());NaN!==i&&s.set(i)}).on("click",".pager-item",function(){var e=t(this).data("page");"number"==typeof e&&e>0&&s.set(e)}).on("click",".pager-size-menu [data-size]",function(){var e=t(this).data("size");"number"==typeof e&&e>0&&s.set(-1,-1,e)})};o.prototype.set=function(e,i,a,o){var s=this;"object"==typeof e&&null!==e&&(a=e.recPerPage,i=e.recTotal,e=e.page);var r=s.state;r||(r=t.extend({},n));var l=t.extend({},r);return"number"==typeof a&&a>0&&(r.recPerPage=a),"number"==typeof i&&i>=0&&(r.recTotal=i),"number"==typeof e&&e>=0&&(r.page=e),r.totalPage=r.recTotal&&r.recPerPage?Math.ceil(r.recTotal/r.recPerPage):1,r.page=Math.max(0,Math.min(r.page,r.totalPage)),r.pageRecCount=r.recTotal,r.page&&r.recTotal&&(r.page<r.totalPage?r.pageRecCount=r.recPerPage:r.page>1&&(r.pageRecCount=r.recTotal-r.recPerPage*(r.page-1))),r.skip=r.page>1?(r.page-1)*r.recPerPage:0,r.start=r.skip+1,r.end=r.skip+r.pageRecCount,r.prev=r.page>1?r.page-1:0,r.next=r.page<r.totalPage?r.page+1:0,s.state=r,o||l.page===r.page&&l.recTotal===r.recTotal&&l.recPerPage===r.recPerPage||s.$.callComEvent(s,"onPageChange",[r,l]),s.render()},o.prototype.createLinkItem=function(i,n,a){var o=this;n===e&&(n=i);var s=t('<a class="pager-item" data-page="'+i+'"/>').attr("href",i?o.createLink(i,o.state):"###").html(n);return a||(s=t("<li />").append(s).toggleClass("active",i===o.state.page).toggleClass("disabled",!i)),s},o.prototype.createNavItems=function(t){var i=this,n=i.$,a=i.state,o=a.totalPage,s=a.page,r=function(t,a){if(t===!1)return void n.append(i.createLinkItem(0,a||i.options.navEllipsisItem));a===e&&(a=t);for(var o=t;o<=a;++o)n.append(i.createLinkItem(o))};t===e&&(t=i.options.maxNavCount||10),r(1),o>1&&(o<=t?r(2,o):s<t-2?(r(2,t-2),r(!1),r(o)):s>o-t+2?(r(!1),r(o-t+2,o)):(r(!1),r(s-Math.ceil((t-4)/2),s+Math.floor((t-4)/2)),r(!1),r(o)))},o.prototype.createGoto=function(){var e=this,i=this.state,n=t('<div class="input-group pager-goto" style="width: '+(35+9*(i.page+"").length+25+12*e.lang["goto"].length)+'px"><input value="'+i.page+'" type="number" min="1" max="'+i.totalPage+'" placeholder="'+i.page+'" class="form-control pager-goto-input"><span class="input-group-btn"><button class="btn pager-goto-btn" type="button">'+e.lang["goto"]+"</button></span></div>");return n},o.prototype.createSizeMenu=function(){var e=this,i=this.state,n=t('<ul class="dropdown-menu"></ul>'),a=e.options.pageSizeOptions;"string"==typeof a&&(a=a.split(","));for(var o=0;o<a.length;++o){var s=a[o];"string"==typeof s&&(s=parseInt(s));var r=t('<li><a href="###" data-size="'+s+'">'+s+"</a></li>").toggleClass("active",s===i.recPerPage);n.append(r)}return t('<div class="btn-group pager-size-menu"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown">'+e.lang.pageSize.format(i)+' <span class="caret"></span></button></div>').addClass(e.options.menuDirection).append(n)},o.prototype.createElement=function(e,i,n){var a=this,o=t.proxy(a.createLinkItem,a),s=a.lang;switch(e){case"prev":return o(n.prev,s.prev);case"prev_icon":return o(n.prev,'<i class="icon '+a.options.prevIcon+'"></i>');case"next":return o(n.next,s.next);case"next_icon":return o(n.next,'<i class="icon '+a.options.nextIcon+'"></i>');case"first":return o(1,s.first,!0);case"first_icon":return o(1,'<i class="icon '+a.options.firstIcon+'"></i>',!0);case"last":return o(n.totalPage,s.last,!0);case"last_icon":return o(n.totalPage,'<i class="icon '+a.options.lastIcon+'"></i>',!0);case"space":case"|":return t('<li class="space" />');case"nav":case"pages":return void a.createNavItems();case"total_text":return t(('<div class="pager-label">'+s.totalCount+"</div>").format(n));case"page_text":return t(('<div class="pager-label">'+s.pageOf+"</div>").format(n));case"total_page_text":return t(('<div class="pager-label">'+s.totalPage+"</div>").format(n));case"page_of_total_text":return t(('<div class="pager-label">'+s.pageOfTotal+"</div>").format(n));case"page_size_text":return t(('<div class="pager-label">'+s.pageSize+"</div>").format(n));case"items_range_text":return t(('<div class="pager-label">'+s.itemsRange+"</div>").format(n));case"goto":return a.createGoto();case"size_menu":return a.createSizeMenu();default:return t("<li/>").html(e)}},o.prototype.createLink=function(i,n){i===e&&(i=this.state.page),n===e&&(n=this.state);var a=this.options.linkCreator;return"string"==typeof a?a.format(t.extend({},n,{page:i})):t.isFunction(a)?a(i,n):"#page="+i},o.prototype.render=function(e){var i=this,n=i.state,a=i.options.elementCreator||i.createElement,o=t.isPlainObject(a);e=e||i.elements||i.options.elements,"string"==typeof e&&(e=e.split(",")),i.elements=e,i.$.empty();for(var s=0;s<e.length;++s){var r=t.trim(e[s]),l=o?a[r]||a:a,c=l.call(i,r,i.$,n);c===!1&&(c=i.createElement(r,i.$,n)),c instanceof t&&("LI"!==c[0].tagName&&(c=t("<li/>").append(c)),i.$.append(c))}var d=null;return i.$.children("li").each(function(){var e=t(this),i=!!e.children(".pager-item").length;d?d.toggleClass("pager-item-right",!i):i&&e.addClass("pager-item-left"),d=i?e:null}),d&&d.addClass("pager-item-right"),i.$.callComEvent(i,"onRender",[n]),i},o.DEFAULTS=t.extend({elements:["first_icon","prev_icon","pages","next_icon","last_icon","page_of_total_text","items_range_text","total_text"],prevIcon:"icon-double-angle-left",nextIcon:"icon-double-angle-right",firstIcon:"icon-step-backward",lastIcon:"icon-step-forward",navEllipsisItem:'<i class="icon icon-ellipsis-h"></i>',maxNavCount:10,menuDirection:"dropdown",pageSizeOptions:[10,20,30,50,100]},n),t.fn.pager=function(e){return this.each(function(){var n=t(this),a=n.data(i),s="object"==typeof e&&e;a||n.data(i,a=new o(this,s)),"string"==typeof e&&a[e]()})},o.NAME=i,t.fn.pager.Constructor=o,t(function(){t('[data-ride="pager"]').pager()})}(jQuery,void 0),+function(t){"use strict";var e="zui.tab",i=function(e){this.element=t(e)};i.prototype.show=function(){var i=this.element,n=i.closest("ul:not(.dropdown-menu)"),a=i.attr("data-target")||i.attr("data-tab");if(a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),!i.parent("li").hasClass("active")){var o=n.find(".active:last a")[0],s=t.Event("show."+e,{relatedTarget:o});if(i.trigger(s),!s.isDefaultPrevented()){var r=t(a);this.activate(i.parent("li"),n),this.activate(r,r.parent(),function(){i.trigger({type:"shown."+e,relatedTarget:o})})}}},i.prototype.activate=function(e,i,n){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),s=n&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,a).emulateTransitionEnd(150):a(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var a=t(this),o=a.data(e);o||a.data(e,o=new i(this)),"string"==typeof n&&o[n]()})},t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.zui.tab.data-api",'[data-toggle="tab"], [data-tab]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var a=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";var e="zui.collapse",i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show."+e);if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find(".in");if(n&&n.length){var a=n.data(e);if(a&&a.transitioning)return;n.collapse("hide"),a||n.data(e,null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown."+e)};if(!t.support.transition)return s.call(this);var r=t.camelCase(["scroll",o].join("-"));this.$element.one(t.support.transition.end,t.proxy(s,this)).emulateTransitionEnd(350)[o](this.$element[0][r])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=t.Event("hide."+e);if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.trigger("hidden."+e).removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(a,this)).emulateTransitionEnd(350):a.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var a=t(this),o=a.data(e),s=t.extend({},i.DEFAULTS,a.data(),"object"==typeof n&&n);o||a.data(e,o=new i(this,s)),"string"==typeof n&&o[n]()})},t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click."+e+".data-api","[data-toggle=collapse]",function(i){var n,a=t(this),o=a.attr("data-target")||i.preventDefault()||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(o),r=s.data(e),l=r?"toggle":a.data(),c=a.attr("data-parent"),d=c&&t(c);r&&r.transitioning||(d&&d.find('[data-toggle=collapse][data-parent="'+c+'"]').not(a).addClass("collapsed"),a[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(l)})}(window.jQuery),function(t,e){"use strict";var i=1200,n=992,a=768,o=e(t),s=function(){var t=o.width();e("html").toggleClass("screen-desktop",t>=n&&t<i).toggleClass("screen-desktop-wide",t>=i).toggleClass("screen-tablet",t>=a&&t<n).toggleClass("screen-phone",t<a).toggleClass("device-mobile",t<n).toggleClass("device-desktop",t>=n)},r="",l=navigator.userAgent;l.match(/(iPad|iPhone|iPod)/i)?r+=" os-ios":l.match(/android/i)?r+=" os-android":l.match(/Win/i)?r+=" os-windows":l.match(/Mac/i)?r+=" os-mac":l.match(/Linux/i)?r+=" os-linux":l.match(/X11/i)&&(r+=" os-unix"),"ontouchstart"in document.documentElement&&(r+=" is-touchable"),e("html").addClass(r),o.resize(s),s()}(window,jQuery),function(t){"use strict";var e={zh_cn:'您的浏览器版本过低，无法体验所有功能，建议升级或者更换浏览器。 <a href="http://browsehappy.com/" target="_blank" class="alert-link">了解更多...</a>',zh_tw:'您的瀏覽器版本過低，無法體驗所有功能，建議升級或者更换瀏覽器。<a href="http://browsehappy.com/" target="_blank" class="alert-link">了解更多...</a>',en:'Your browser is too old, it has been unable to experience the colorful internet. We strongly recommend that you upgrade a better one. <a href="http://browsehappy.com/" target="_blank" class="alert-link">Learn more...</a>'},i=function(){var t=this.isIE()||this.isIE10()||!1;if(t)for(var e=10;e>5;e--)if(this.isIE(e)){t=e;break}this.ie=t,this.cssHelper()};i.prototype.cssHelper=function(){var e=this.ie,i=t("html");i.toggleClass("ie",e).removeClass("ie-6 ie-7 ie-8 ie-9 ie-10"),e&&i.addClass("ie-"+e).toggleClass("gt-ie-7 gte-ie-8 support-ie",e>=8).toggleClass("lte-ie-7 lt-ie-8 outdated-ie",e<8).toggleClass("gt-ie-8 gte-ie-9",e>=9).toggleClass("lte-ie-8 lt-ie-9",e<9).toggleClass("gt-ie-9 gte-ie-10",e>=10).toggleClass("lte-ie-9 lt-ie-10",e<10)},i.prototype.tip=function(i){var n=t("#browseHappyTip");n.length||(n=t('<div id="browseHappyTip" class="alert alert-dismissable alert-danger-inverse alert-block" style="position: relative; z-index: 99999"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button><div class="container"><div class="content text-center"></div></div></div>'),n.prependTo("body")),n.find(".content").html(i||this.browseHappyTip||e[t.zui.clientLang()||"zh_cn"])},i.prototype.isIE=function(t){if(10===t)return this.isIE10();var e=document.createElement("b");return e.innerHTML="<!--[if IE "+(t||"")+"]><i></i><![endif]-->",1===e.getElementsByTagName("i").length},i.prototype.isIE10=function(){return!1},t.zui({browser:new i}),t(function(){t("body").hasClass("disabled-browser-tip")||t.zui.browser.ie&&t.zui.browser.ie<8&&t.zui.browser.tip()})}(jQuery),function(){"use strict";Date.ONEDAY_TICKS=864e5,Date.prototype.format||(Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t}),Date.prototype.addMilliseconds||(Date.prototype.addMilliseconds=function(t){return this.setTime(this.getTime()+t),this}),Date.prototype.addDays||(Date.prototype.addDays=function(t){return this.addMilliseconds(t*Date.ONEDAY_TICKS),this}),Date.prototype.clone||(Date.prototype.clone=function(){var t=new Date;return t.setTime(this.getTime()),t}),Date.isLeapYear||(Date.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0}),Date.getDaysInMonth||(Date.getDaysInMonth=function(t,e){return[31,Date.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}),Date.prototype.isLeapYear||(Date.prototype.isLeapYear=function(){return Date.isLeapYear(this.getFullYear())}),Date.prototype.clearTime||(Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),Date.prototype.getDaysInMonth||(Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())}),Date.prototype.addMonths||(Date.prototype.addMonths=function(t){var e=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,this.getDaysInMonth())),this}),Date.prototype.getLastWeekday||(Date.prototype.getLastWeekday=function(t){t=t||1;for(var e=this.clone();e.getDay()!=t;)e.addDays(-1);return e.clearTime(),e}),Date.prototype.isSameDay||(Date.prototype.isSameDay=function(t){return t.toDateString()===this.toDateString()}),Date.prototype.isSameWeek||(Date.prototype.isSameWeek=function(t){var e=this.getLastWeekday(),i=e.clone().addDays(7);return t>=e&&t<i}),Date.prototype.isSameYear||(Date.prototype.isSameYear=function(t){return this.getFullYear()===t.getFullYear()}),Date.create||(Date.create=function(t){return t instanceof Date||("number"==typeof t&&t<1e10&&(t*=1e3),t=new Date(t)),t}),Date.timestamp||(Date.timestamp=function(t){return"number"==typeof t?t<1e10&&(t*=1e3):t=Date.create(t).getTime(),t})}(),function(){"use strict";String.prototype.format||(String.prototype.format=function(t){var e=this;if(arguments.length>0){var i;if(arguments.length<=2&&"object"==typeof t)for(var n in t)void 0!==t[n]&&(i=new RegExp("("+(arguments[1]?arguments[1].replace("0",n):"{"+n+"}")+")","g"),e=e.replace(i,t[n]));else for(var a=0;a<arguments.length;a++)void 0!==arguments[a]&&(i=new RegExp("({["+a+"]})","g"),e=e.replace(i,arguments[a]))}return e}),String.prototype.isNum||(String.prototype.isNum=function(t){if(null!==t){var e,i;return i=/\d*/i,e=t.match(i),e==t}return!1}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return n!==-1&&n===e}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}),String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1})}(),/*!
 * jQuery resize event - v1.1
 * http://benalman.com/projects/jquery-resize-plugin/
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * MIT & GPL http://benalman.com/about/license/
 */
function(t,e,i){"$:nomunge";function n(){a=e[r](function(){o.each(function(){var e=t(this),i=e.width(),n=e.height(),a=t.data(this,c);i===a.w&&n===a.h||e.trigger(l,[a.w=i,a.h=n])}),n()},s[d])}var a,o=t([]),s=t.resize=t.extend(t.resize,{}),r="setTimeout",l="resize",c=l+"-special-event",d="delay",h="throttleWindow";s[d]=250,s[h]=!0,t.event.special[l]={setup:function(){if(!s[h]&&this[r])return!1;var e=t(this);o=o.add(e),t.data(this,c,{w:e.width(),h:e.height()}),1===o.length&&n()},teardown:function(){if(!s[h]&&this[r])return!1;var e=t(this);o=o.not(e),e.removeData(c),o.length||clearTimeout(a)},add:function(e){function n(e,n,o){var s=t(this),r=t.data(this,c)||{};r.w=n!==i?n:s.width(),r.h=o!==i?o:s.height(),a.apply(this,arguments)}if(!s[h]&&this[r])return!1;var a;return t.isFunction(e)?(a=e,n):(a=e.handler,void(e.handler=n))}}}(jQuery,this),function(t,e){"use strict";var i,n,a="localStorage",o="page_"+t.location.pathname+t.location.search,s=function(){this.slience=!0;try{a in t&&t[a]&&t[a].setItem&&(this.enable=!0,i=t[a])}catch(s){}this.enable||(n={},i={getLength:function(){var t=0;return e.each(n,function(){t++}),t},key:function(t){var i,a=0;return e.each(n,function(e){return a===t?(i=e,!1):void a++}),i},removeItem:function(t){delete n[t]},getItem:function(t){return n[t]},setItem:function(t,e){n[t]=e},clear:function(){n={}}}),this.storage=i,this.page=this.get(o,{})};s.prototype.pageSave=function(){if(e.isEmptyObject(this.page))this.remove(o);else{var t,i=[];for(t in this.page){var n=this.page[t];null===n&&i.push(t)}for(t=i.length-1;t>=0;t--)delete this.page[i[t]];this.set(o,this.page)}},s.prototype.pageRemove=function(t){"undefined"!=typeof this.page[t]&&(this.page[t]=null,this.pageSave())},s.prototype.pageClear=function(){this.page={},this.pageSave()},s.prototype.pageGet=function(t,e){var i=this.page[t];return void 0===e||null!==i&&void 0!==i?i:e},s.prototype.pageSet=function(t,i){e.isPlainObject(t)?e.extend(!0,this.page,t):this.page[this.serialize(t)]=i,this.pageSave()},s.prototype.check=function(){if(!this.enable&&!this.slience)throw new Error("Browser not support localStorage or enable status been set true.");return this.enable},s.prototype.length=function(){return this.check()?i.getLength?i.getLength():i.length:0},s.prototype.removeItem=function(t){return i.removeItem(t),this},s.prototype.remove=function(t){return this.removeItem(t)},s.prototype.getItem=function(t){return i.getItem(t)},s.prototype.get=function(t,e){var i=this.deserialize(this.getItem(t));return"undefined"!=typeof i&&null!==i||"undefined"==typeof e?i:e},s.prototype.key=function(t){return i.key(t)},s.prototype.setItem=function(t,e){return i.setItem(t,e),this},s.prototype.set=function(t,e){return void 0===e?this.remove(t):(this.setItem(t,this.serialize(e)),this)},s.prototype.clear=function(){return i.clear(),this},s.prototype.forEach=function(t){for(var e=this.length(),n=e-1;n>=0;n--){var a=i.key(n);t(a,this.get(a))}return this},s.prototype.getAll=function(){var t={};return this.forEach(function(e,i){t[e]=i}),t},s.prototype.serialize=function(t){return"string"==typeof t?t:JSON.stringify(t)},s.prototype.deserialize=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}},e.zui({store:new s})}(window,jQuery),function(t){"use strict";var e="zui.searchBox",i=function(e,n){var a=this;a.name=name,a.$=t(e),a.options=n=t.extend({},i.DEFAULTS,a.$.data(),n);var o=a.$.is(n.inputSelector)?a.$:a.$.find(n.inputSelector);if(o.length){var s=function(){a.changeTimer&&(clearTimeout(a.changeTimer),a.changeTimer=null)},r=function(){s();var t=a.getSearch();if(t!==a.lastValue){var e=""===t;o.toggleClass("empty",e),a.$.callComEvent(a,"onSearchChange",[t,e]),a.lastValue=t}};a.$input=o=o.first(),a.lastValue=a.getSearch(),o.on(n.listenEvent,function(t){a.changeTimer=setTimeout(function(){r()},n.changeDelay)}).on("focus",function(t){o.addClass("focus"),a.$.callComEvent(a,"onFocus",[t])}).on("blur",function(t){o.removeClass("focus"),a.$.callComEvent(a,"onBlur",[t])}).on("keydown",function(t){var e=0,i=t.which;27===i&&n.escToClear?(this.setSearch("",!0),r(),e=1):13===i&&n.onPressEnter&&(r(),a.$.callComEvent(a,"onPressEnter",[t]));var o=a.$.callComEvent(a,"onKeyDown",[t]);o===!1&&(e=1),e&&t.preventDefault()}),a.$.on("click",".search-clear-btn",function(t){a.setSearch("",!0),r(),t.preventDefault()}),r()}else console.error("ZUI: search box init error, cannot find search box input element.")};i.DEFAULTS={inputSelector:'input[type="search"],input[type="text"]',listenEvent:"change input paste",changeDelay:500},i.prototype.getSearch=function(){return this.$input&&t.trim(this.$input.val())},i.prototype.setSearch=function(t,e){var i=this.$input;i&&(i.val(t),e||i.trigger("change"))},i.prototype.focus=function(){this.$input&&this.$input.focus()},t.fn.searchBox=function(n){return this.each(function(){var a=t(this),o=a.data(e),s="object"==typeof n&&n;o||a.data(e,o=new i(this,s)),"string"==typeof n&&o[n]()})},i.NAME=e,t.fn.searchBox.Constructor=i}(jQuery),function(t,e){"use strict";var i="zui.draggable",n={container:"body",move:!0},a=0,o=function(e,i){var o=this;o.$=t(e),o.id=a++,o.options=t.extend({},n,o.$.data(),i),o.init()};o.DEFAULTS=n,o.NAME=i,o.prototype.init=function(){var n,a,o,s,r,l=this,c=l.$,d="before",h="drag",u="finish",p="."+i+"."+l.id,f="mousedown"+p,g="mouseup"+p,m="mousemove"+p,v=l.options,_=v.selector,y=v.handle,b=c,w=t.isFunction(v.move),k=function(t){var e=t.pageX,i=t.pageY;r=!0;var a={left:e-o.x,top:i-o.y};b.removeClass("drag-ready").addClass("dragging"),v.move&&(w?v.move(a,b):b.css(a)),v[h]&&v[h]({event:t,element:b,startOffset:o,pos:a,offset:{x:e-n.x,y:i-n.y},smallOffset:{x:e-s.x,y:i-s.y}}),s.x=e,s.y=i,v.stopPropagation&&t.stopPropagation()},C=function(i){if(t(e).off(p),!r)return void b.removeClass("drag-ready");var a={left:i.pageX-o.x,top:i.pageY-o.y};b.removeClass("drag-ready dragging"),v.move&&(w?v.move(a,b):b.css(a)),v[u]&&v[u]({event:i,element:b,startOffset:o,pos:a,offset:{x:i.pageX-n.x,y:i.pageY-n.y},smallOffset:{x:i.pageX-s.x,y:i.pageY-s.y}}),i.preventDefault(),v.stopPropagation&&i.stopPropagation()},x=function(i){var l=t.zui.getMouseButtonCode(v.mouseButton);if(!(l>-1&&i.button!==l)){var c=t(this);if(_&&(b=y?c.closest(_):c),v[d]){var h=v[d]({event:i,element:b});if(h===!1)return}var u=t(v.container),p=b.offset();a=u.offset(),n={x:i.pageX,y:i.pageY},o={x:i.pageX-p.left+a.left,y:i.pageY-p.top+a.top},s=t.extend({},n),r=!1,b.addClass("drag-ready"),i.preventDefault(),v.stopPropagation&&i.stopPropagation(),t(e).on(m,k).on(g,C)}};y?c.on(f,y,x):_?c.on(f,_,x):c.on(f,x)},o.prototype.destroy=function(){var n="."+i+"."+this.id;this.$.off(n),t(e).off(n),this.$.data(i,null)},t.fn.draggable=function(e){return this.each(function(){var n=t(this),a=n.data(i),s="object"==typeof e&&e;a||n.data(i,a=new o(this,s)),"string"==typeof e&&a[e]()})},t.fn.draggable.Constructor=o}(jQuery,document),function(t,e,i){"use strict";var n="zui.droppable",a={target:".droppable-target",deviation:5,sensorOffsetX:0,sensorOffsetY:0},o=0,s=function(e,i){var n=this;n.id=o++,n.$=t(e),n.options=t.extend({},a,n.$.data(),i),n.init()};s.DEFAULTS=a,s.NAME=n,s.prototype.trigger=function(e,i){return t.zui.callEvent(this.options[e],i,this)},s.prototype.init=function(){var a,o,s,r,l,c,d,h,u,p,f,g,m,v=this,_=v.$,y=v.options,b=y.deviation,w="."+n+"."+v.id,k="mousedown"+w,C="mouseup"+w,x="mousemove"+w,T=y.selector,S=y.handle,E=y.flex,D=y.container,M=y.canMoveHere,F=_,P=!1,A=D?t(y.container).first():T?_:t("body"),U=function(e){if(P&&(f={left:e.pageX,top:e.pageY},!(i.abs(f.left-h.left)<b&&i.abs(f.top-h.top)<b))){if(null===s){var n=A.css("position");"absolute"!=n&&"relative"!=n&&"fixed"!=n&&(c=n,A.css("position","relative")),s=F.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:F.outerWidth(),transition:"none"}).appendTo(A),F.addClass("dragging"),v.trigger("start",{event:e,element:F})}var d={left:f.left-p.left,top:f.top-p.top},m={left:d.left-u.left,top:d.top-u.top};s.css(m),t.extend(g,f);var _=!1;r=!1,E||a.removeClass("drop-to");var w=null;if(a.each(function(){var e=t(this),i=e.offset(),n=e.outerWidth(),a=e.outerHeight(),o=i.left+y.sensorOffsetX,s=i.top+y.sensorOffsetY;if(f.left>o&&f.top>s&&f.left<o+n&&f.top<s+a&&(w&&w.removeClass("drop-to"),w=e,!y.nested))return!1}),w){r=!0;var k=w.data("id");F.data("id")!=k&&(l=!1),(null===o||o.data("id")!==k&&!l)&&(_=!0),o=w,E&&a.removeClass("drop-to"),o.addClass("drop-to")}E?null!==o&&o.length&&(r=!0):(F.toggleClass("drop-in",r),s.toggleClass("drop-in",r)),M&&M(F,o)===!1||v.trigger("drag",{event:e,isIn:r,target:o,element:F,isNew:_,selfTarget:l,clickOffset:p,offset:d,position:{left:d.left-u.left,top:d.top-u.top},mouseOffset:f}),e.preventDefault()}},I=function(i){if(t(e).off(w),clearTimeout(m),P){if(P=!1,c&&A.css("position",c),null===s)return F.removeClass("drag-from"),void v.trigger("always",{event:i,cancel:!0});r||(o=null);var n=!0;f=i?{left:i.pageX,top:i.pageY}:g;var d={left:f.left-p.left,top:f.top-p.top},h={left:f.left-g.left,top:f.top-g.top};g.left=f.left,g.top=f.top;var _={event:i,isIn:r,target:o,element:F,isNew:!l&&null!==o,selfTarget:l,offset:d,mouseOffset:f,position:{left:d.left-u.left,top:d.top-u.top},lastMouseOffset:g,moveOffset:h};n=v.trigger("beforeDrop",_),n&&r&&v.trigger("drop",_),a.removeClass("drop-to"),F.removeClass("dragging").removeClass("drag-from"),s.remove(),s=null,v.trigger("finish",_),v.trigger("always",_),i&&i.preventDefault()}},L=function(i){var n=t.zui.getMouseButtonCode(y.mouseButton);if(!(n>-1&&i.button!==n)){var f=t(this);T&&(F=S?f.closest(T):f),F.hasClass("drag-shadow")||y.before&&y.before({event:i,element:F})===!1||(P=!0,a=t.isFunction(y.target)?y.target(_):A.find(y.target),o=null,s=null,r=!1,l=!0,c=null,d=F.offset(),u=A.offset(),h={left:i.pageX,top:i.pageY},g=t.extend({},h),p={left:h.left-d.left,top:h.top-d.top},F.addClass("drag-from"),t(e).on(x,U).on(C,I),m=setTimeout(function(){t(e).on(k,I)},10),i.preventDefault())}};S?_.on(k,S,L):T?_.on(k,T,L):_.on(k,L)},s.prototype.destroy=function(){var i="."+n+"."+this.id;this.$.off(i),t(e).off(i),this.$.data(n,null)},s.prototype.reset=function(){this.destroy(),this.init()},t.fn.droppable=function(e){return this.each(function(){var i=t(this),a=i.data(n),o="object"==typeof e&&e;a||i.data(n,a=new s(this,o)),"string"==typeof e&&a[e]()})},t.fn.droppable.Constructor=s}(jQuery,document,Math),+function(t,e){"use strict";function i(e,i,o){return this.each(function(){var s=t(this),r=s.data(n),l=t.extend({},a.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data(n,r=new a(this,l)),"string"==typeof e?r[e](i,o):l.show&&r.show(i,o)})}var n="zui.modal",a=function(i,a){var o=this;o.options=a,o.$body=t(document.body),o.$element=t(i),o.$backdrop=o.isShown=null,o.scrollbarWidth=0,a.moveable===e&&(o.options.moveable=o.$element.hasClass("modal-moveable")),a.remote&&o.$element.find(".modal-content").load(a.remote,function(){o.$element.trigger("loaded."+n)})};a.VERSION="3.2.0",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0,position:"fit"};var o=function(e,i){var n=t(window);i.left=Math.max(0,Math.min(i.left,n.width()-e.outerWidth())),i.top=Math.max(0,Math.min(i.top,n.height()-e.outerHeight())),e.css(i)};a.prototype.toggle=function(t,e){return this.isShown?this.hide():this.show(t,e)},a.prototype.ajustPosition=function(i){var a=this,s=a.options;if(i===e&&(i=s.position),i!==e){t.isFunction(i)&&(i=i(a));var r=a.$element.find(".modal-dialog"),l=Math.max(0,(t(window).height()-r.outerHeight())/2);if("fit"===i?i={marginTop:2*l/3}:"center"===i?i={marginTop:l}:t.isPlainObject(i)||(i={marginTop:i}),r.hasClass("modal-moveable")){var c=null,d=s.rememberPos;d&&(d===!0?c=a.$element.data("modal-pos"):t.zui.store&&(c=t.zui.store.pageGet(n+".rememberPos."+d))),i=t.extend(i,{left:Math.max(0,(t(window).width()-r.outerWidth())/2)},c),"inside"===s.moveable?o(r,i):r.css(i)}else r.css(i)}},a.prototype.setMoveale=function(){t.fn.draggable||console.error("Moveable modal requires draggable.js.");var e=this,i=e.options,a=e.$element.find(".modal-dialog").removeClass("modal-dragged");a.toggleClass("modal-moveable",!!i.moveable),e.$element.data("modal-moveable-setup")||a.draggable({container:e.$element,handle:".modal-header",before:function(){a.css("margin-top","").addClass("modal-dragged")},finish:function(a){var o=i.rememberPos;o&&(e.$element.data("modal-pos",a.pos),t.zui.store&&o!==!0&&t.zui.store.pageSet(n+".rememberPos."+o,a.pos))},move:"inside"!==i.moveable||function(t){o(a,t)}})},a.prototype.show=function(e,i){var o=this,s=t.Event("show."+n,{relatedTarget:e});o.$element.trigger(s),o.isShown||s.isDefaultPrevented()||(o.isShown=!0,o.options.moveable&&o.setMoveale(),o.checkScrollbar(),o.options.backdrop!==!1&&(o.$body.addClass("modal-open"),o.setScrollbar()),o.escape(),o.$element.on("click.dismiss."+n,'[data-dismiss="modal"]',t.proxy(o.hide,o)),o.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),s&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.ajustPosition(i),o.enforceFocus();var r=t.Event("shown."+n,{relatedTarget:e});s?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(a.TRANSITION_DURATION):o.$element.trigger("focus").trigger(r)}))},a.prototype.hide=function(e){e&&e.preventDefault();var i=this;e=t.Event("hide."+n),i.$element.trigger(e),i.isShown&&!e.isDefaultPrevented()&&(i.isShown=!1,i.options.backdrop!==!1&&(i.$body.removeClass("modal-open"),i.resetScrollbar()),i.escape(),t(document).off("focusin."+n),i.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss."+n),t.support.transition&&i.$element.hasClass("fade")?i.$element.one("bsTransitionEnd",t.proxy(i.hideModal,i)).emulateTransitionEnd(a.TRANSITION_DURATION):i.hideModal())},a.prototype.enforceFocus=function(){t(document).off("focusin."+n).on("focusin."+n,t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?t(document).on("keydown.dismiss."+n,t.proxy(function(i){if(27==i.which){var a=t.Event("escaping."+n),o=this.$element.triggerHandler(a,"esc");if(o!=e&&!o)return;this.hide()}},this)):this.isShown||t(document).off("keydown.dismiss."+n)},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden."+n)})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("mousedown.dismiss."+n,t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},a.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var s=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=a,t.fn.modal.noConflict=function(){return t.fn.modal=s,this},t(document).on("click."+n+".data-api",'[data-toggle="modal"]',function(e){var a=t(this),o=a.attr("href"),s=null;try{s=t(a.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""))}catch(r){return}if(s.length){var l=s.data(n)?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),a.data());a.is("a")&&e.preventDefault(),s.one("show."+n,function(t){t.isDefaultPrevented()||s.one("hidden."+n,function(){a.is(":visible")&&a.trigger("focus")})}),i.call(s,l,this,a.data("position"))}})}(jQuery,void 0),function(t,e,i){"use strict";if(!t.fn.modal)throw new Error("Modal trigger requires modal.js");var n="zui.modaltrigger",a="ajax",o=".zui.modal",s="string",r=function(e,i){e=t.extend({},r.DEFAULTS,t.ModalTriggerDefaults,i?i.data():null,e),this.isShown,this.$trigger=i,this.options=e,this.id=t.zui.uuid()};r.DEFAULTS={type:"custom",height:"auto",name:"triggerModal",fade:!0,position:"fit",showHeader:!0,delay:0,backdrop:!0,keyboard:!0,waittime:0,loadingIcon:"icon-spinner-indicator"},r.prototype.init=function(i){var r=this;if(i.url&&(!i.type||i.type!=a&&"iframe"!=i.type)&&(i.type=a),i.remote)i.type=a,typeof i.remote===s&&(i.url=i.remote);else if(i.iframe)i.type="iframe",typeof i.iframe===s&&(i.url=i.iframe);else if(i.custom&&(i.type="custom",typeof i.custom===s)){var l;try{l=t(i.custom)}catch(c){}l&&l.length?i.custom=l:t.isFunction(e[i.custom])&&(i.custom=e[i.custom])}var d=t("#"+i.name);d.length&&(r.isShown||d.off(o),d.remove()),d=t('<div id="'+i.name+'" class="modal modal-trigger '+(i.className||"")+'">'+("string"==typeof i.loadingIcon&&0===i.loadingIcon.indexOf("icon-")?'<div class="icon icon-spin loader '+i.loadingIcon+'"></div>':i.loadingIcon)+'<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button class="close" data-dismiss="modal">×</button><h4 class="modal-title"><i class="modal-icon"></i> <span class="modal-title-name"></span></h4></div><div class="modal-body"></div></div></div></div>').appendTo("body").data(n,r);var h=function(e,n){var a=i[e];t.isFunction(a)&&d.on(n+o,a)};h("onShow","show"),h("shown","shown"),h("onHide","hide"),h("hidden","hidden"),h("loaded","loaded"),d.on("shown"+o,function(){r.isShown=!0}).on("hidden"+o,function(){r.isShown=!1}),this.$modal=d,this.$dialog=d.find(".modal-dialog"),i.mergeOptions&&(this.options=i)},r.prototype.show=function(i){var o=t.extend({},this.options,{url:this.$trigger?this.$trigger.attr("href")||this.$trigger.attr("data-url")||this.$trigger.data("url"):this.options.url},i);this.init(o);var r=this,l=this.$modal,c=this.$dialog,d=o.custom,h=c.find(".modal-body").css("padding",""),u=c.find(".modal-header"),p=c.find(".modal-content");l.toggleClass("fade",o.fade).addClass(o.className).toggleClass("modal-loading",!this.isShown),c.toggleClass("modal-md","md"===o.size).toggleClass("modal-sm","sm"===o.size).toggleClass("modal-lg","lg"===o.size).toggleClass("modal-fullscreen","fullscreen"===o.size),u.toggle(o.showHeader),u.find(".modal-icon").attr("class","modal-icon icon-"+o.icon),u.find(".modal-title-name").text(o.title||""),o.size&&"fullscreen"===o.size&&(o.width="",o.height="");var f=function(){clearTimeout(this.resizeTask),this.resizeTask=setTimeout(function(){r.ajustPosition(o.position)},100)},g=function(t,e){return"undefined"==typeof t&&(t=o.delay),setTimeout(function(){c=l.find(".modal-dialog"),o.width&&"auto"!=o.width&&c.css("width",o.width),o.height&&"auto"!=o.height&&(c.css("height",o.height),"iframe"===o.type&&h.css("height",c.height()-u.outerHeight())),r.ajustPosition(o.position),l.removeClass("modal-loading"),"iframe"!=o.type&&c.off("resize."+n).on("resize."+n,f),e&&e()},t)};if("custom"===o.type&&d)if(t.isFunction(d)){var m=d({modal:l,options:o,modalTrigger:r,ready:g});typeof m===s&&(h.html(m),g())}else d instanceof t?(h.html(t("<div>").append(d.clone()).html()),g()):(h.html(d),g());else if(o.url){var v=function(){var t=l.callComEvent(r,"broken");t&&(h.html(t),g())};if(l.attr("ref",o.url),"iframe"===o.type){l.addClass("modal-iframe"),this.firstLoad=!0;var _="iframe-"+o.name;u.detach(),h.detach(),p.empty().append(u).append(h),h.css("padding",0).html('<iframe id="'+_+'" name="'+_+'" src="'+o.url+'" frameborder="no"  allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"  allowtransparency="true" scrolling="auto" style="width: 100%; height: 100%; left: 0px;"></iframe>'),o.waittime>0&&(r.waitTimeout=g(o.waittime,v));var y=document.getElementById(_);y.onload=y.onreadystatechange=function(){if(r.firstLoad&&l.addClass("modal-loading"),!this.readyState||"complete"==this.readyState){r.firstLoad=!1,o.waittime>0&&clearTimeout(r.waitTimeout);try{l.attr("ref",y.contentWindow.location.href);var t=e.frames[_].$;if(t&&"auto"===o.height&&"fullscreen"!=o.size){var i=t("body").addClass("body-modal");o.iframeBodyClass&&i.addClass(o.iframeBodyClass);var a=function(t){l.removeClass("fade");var e=i.outerHeight();t===!0&&o.onlyIncreaseHeight&&(e=Math.max(e,h.data("minModalHeight")||0),h.data("minModalHeight",e)),h.css("height",e),o.fade&&l.addClass("fade"),g()};l.callComEvent(r,"loaded",{modalType:"iframe",jQuery:t}),setTimeout(a,100),i.off("resize."+n).on("resize."+n,f)}else g();t.extend({closeModal:e.closeModal})}catch(s){g()}}}}else t.ajax(t.extend({url:o.url,success:function(i){try{var n=t(i);n.filter(".modal-dialog").length?c.replaceWith(n):n.filter(".modal-content").length?c.find(".modal-content").replaceWith(n):h.wrapInner(n)}catch(o){e.console&&e.console.warn&&console.warn("ZUI: Cannot recogernize remote content.",{error:o,data:i}),l.html(i)}l.callComEvent(r,"loaded",{modalType:a}),g()},error:v},o.ajaxOptions))}l.modal({show:"show",backdrop:o.backdrop,moveable:o.moveable,rememberPos:o.rememberPos,keyboard:o.keyboard})},r.prototype.close=function(i,n){(i||n)&&this.$modal.on("hidden"+o,function(){t.isFunction(i)&&i(),typeof n===s&&("this"===n?e.location.reload():e.location=n)}),this.$modal.modal("hide")},r.prototype.toggle=function(t){this.isShown?this.close():this.show(t)},r.prototype.ajustPosition=function(e){e=e===i?this.options.position:e,t.isFunction(e)&&(e=e(this)),this.$modal.modal("ajustPosition",e)},t.zui({ModalTrigger:r,modalTrigger:new r}),t.fn.modalTrigger=function(e,i){return t(this).each(function(){var a=t(this),o=a.data(n),l=t.extend({title:a.attr("title")||a.text(),url:a.attr("href"),type:a.hasClass("iframe")?"iframe":""},a.data(),t.isPlainObject(e)&&e);o||a.data(n,o=new r(l,a)),typeof e==s?o[e](i):l.show&&o.show(i),a.on((l.trigger||"click")+".toggle."+n,function(t){o.toggle(l),a.is("a")&&t.preventDefault()})})};var l=t.fn.modal;t.fn.modal=function(e,i){return t(this).each(function(){var n=t(this);n.hasClass("modal")?l.call(n,e,i):n.modalTrigger(e,i)})};var c=function(e){var i=typeof e;return"undefined"===i?e=t(".modal.modal-trigger"):i===s&&(e=t(e)),e&&e instanceof t?e:null},d=function(e,i,a){if(t.isFunction(e)){var o=a;a=i,i=e,e=o}e=c(e),e&&e.length&&e.each(function(){t(this).data(n).close(i,a)})},h=function(t,e){e=c(e),e&&e.length&&e.modal("ajustPosition",t)};t.zui({closeModal:d,ajustModalPosition:h}),t(document).on("click."+n+".data-api",'[data-toggle="modal"]',function(e){var i=t(this),a=i.attr("href"),o=null;try{o=t(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,""))}catch(s){}o&&o.length||(i.data(n)?i.trigger(".toggle."+n):i.modalTrigger({show:!0})),i.is("a")&&e.preventDefault()})}(window.jQuery,window,void 0),+function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n);for(var a=this.options.trigger.split(" "),o=a.length;o--;){var s=a[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var r="hover"==s?"mouseenter":"focus",l="hover"==s?"mouseleave":"blur";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(e){var i=t.Event("show.zui."+this.type);if((e||this.hasContent())&&this.enabled){var n=this;if(n.$element.trigger(i),i.isDefaultPrevented())return;var a=n.tip();n.setContent(e),n.options.animation&&a.addClass("fade");var o="function"==typeof n.options.placement?n.options.placement.call(n,a[0],n.$element[0]):n.options.placement,s=/\s?auto?\s?/i,r=s.test(o);r&&(o=o.replace(s,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(o),n.options.container?a.appendTo(n.options.container):a.insertAfter(n.$element);var l=n.getPosition(),c=a[0].offsetWidth,d=a[0].offsetHeight;if(r){var h=n.$element.parent(),u=o,p=document.documentElement.scrollTop||document.body.scrollTop,f="body"==n.options.container?window.innerWidth:h.outerWidth(),g="body"==n.options.container?window.innerHeight:h.outerHeight(),m="body"==n.options.container?0:h.offset().left;o="bottom"==o&&l.top+l.height+d-p>g?"top":"top"==o&&l.top-p-d<0?"bottom":"right"==o&&l.right+c>f?"left":"left"==o&&l.left-c<m?"right":o,a.removeClass(u).addClass(o)}var v=n.getCalculatedOffset(o,l,c,d);n.applyPlacement(v,o);var _=function(){var t=n.hoverState;n.$element.trigger("shown.zui."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&n.$tip.hasClass("fade")?a.one("bsTransitionEnd",_).emulateTransitionEnd(150):_()}},e.prototype.applyPlacement=function(t,e){var i,n=this.tip(),a=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(r)&&(r=0),t.top=t.top+s,t.left=t.left+r,n.offset(t).addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;if("top"==e&&c!=o&&(i=!0,t.top=t.top+o-c),/bottom|top/.test(e)){var d=0;t.left<0&&(d=t.left*-2,t.left=0,n.offset(t),l=n[0].offsetWidth,c=n[0].offsetHeight),this.replaceArrow(d-a+l,l,"left")}else this.replaceArrow(c-o,c,"top");i&&n.offset(t)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(t){var e=this.tip(),i=t||this.getTitle();this.options.tipId&&e.attr("id",this.options.tipId),this.options.tipClass&&e.addClass(this.options.tipClass),e.find(".tooltip-inner")[this.options.html?"html":"text"](i),e.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach()}var i=this,n=this.tip(),a=t.Event("hide.zui."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.zui."+this.type),this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("zui."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i,n){return this.each(function(){var a=t(this),o=a.data("zui.tooltip"),s="object"==typeof i&&i;o||a.data("zui.tooltip",o=new e(this,s)),"string"==typeof i&&o[i](n)})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTarget();if(e)return e.find(".arrow").length<1&&t.addClass("no-arrow"),void t.html(e.html());var i=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](i),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),this.options.tipId&&t.attr("id",this.options.tipId),this.options.tipClass&&t.addClass(this.options.tipClass),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTarget()||this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.getTarget=function(){var e=this.$element,i=this.options,n=e.attr("data-target")||("function"==typeof i.target?i.target.call(e[0]):i.target);return!!n&&("$next"==n?e.next(".popover"):t(n))},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),a=n.data("zui.popover"),o="object"==typeof i&&i;
a||n.data("zui.popover",a=new e(this,o)),"string"==typeof i&&a[i]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),+function(t){"use strict";function e(){t(a).remove(),t(o).each(function(e){var a=i(t(this));a.hasClass("open")&&(a.trigger(e=t.Event("hide."+n)),e.isDefaultPrevented()||a.removeClass("open").trigger("hidden."+n))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n;try{n=i&&t(i)}catch(a){}return n&&n.length?n:e.parent()}var n="zui.dropdown",a=".dropdown-backdrop",o="[data-toggle=dropdown]",s=function(e){t(e).on("click."+n,this.toggle)};s.prototype.toggle=function(a){var o=t(this);if(!o.is(".disabled, :disabled")){var s=i(o),r=s.hasClass("open");if(e(),!r){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),s.trigger(a=t.Event("show."+n)),a.isDefaultPrevented())return;s.toggleClass("open").trigger("shown."+n),o.focus()}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var a=i(n),s=a.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&a.find(o).focus(),n.click();var r=t("[role=menu] li:not(.divider):visible a",a);if(r.length){var l=r.index(r.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus()}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this};var l=n+".data-api";t(document).on("click."+l,e).on("click."+l,".dropdown form",function(t){t.stopPropagation()}).on("click."+l,o,s.prototype.toggle).on("keydown."+l,o+", [role=menu]",s.prototype.keydown)}(window.jQuery),function(t,e,i){"use strict";var n=0,a='<div class="messager messager-{type} {placement}" style="display: none"><div class="messager-content"></div><div class="messager-actions"></div></div>',o={type:"default",placement:"top",time:4e3,parent:"body",icon:null,close:!0,fade:!0,scale:!0},s={},r=function(e,r){t.isPlainObject(e)&&(r=e,e=r.message);var l=this;r=l.options=t.extend({},o,r),l.id=r.id||n++;var c=s[l.id];c&&c.destroy(),s[l.id]=l,l.message=(r.icon?'<i class="icon-'+r.icon+' icon"></i> ':"")+e,l.$=t(a.format(r)).toggleClass("fade",r.fade).toggleClass("scale",r.scale).attr("id","messager-"+l.id),r.cssClass&&l.$.addClass(r.cssClass);var d=!1,h=l.$.find(".messager-actions"),u=function(e){var n=t('<button type="button" class="action action-'+e.name+'"/>');"close"===e.name&&n.addClass("close"),e.html!==i&&n.html(e.html),e.icon!==i&&n.append('<i class="action-icon icon-'+e.icon+'"/>'),e.text!==i&&n.append('<span class="action-text">'+e.text+"</span>"),e.tooltip!==i&&n.attr("title",e.tooltip).tooltip(),n.data("action",e),h.append(n)};r.actions&&t.each(r.actions,function(t,e){e.name===i&&(e.name=t),"close"==e.name&&(d=!0),u(e)}),!d&&r.close&&u({name:"close",html:"&times;"}),l.$.on("click",".action",function(e){var i,n=t(this).data("action");r.onAction&&(i=r.onAction.call(this,n.name,n,l),i===!1)||t.isFunction(n.action)&&(i=n.action.call(this,l),i===!1)||(l.hide(),e.stopPropagation())}),l.$.on("click",function(t){if(r.onAction){var e=r.onAction.call(this,"content",null,l);e===!0&&l.hide()}});var p=l.$.find(".messager-content").html(l.message);r.contentClass&&p.addClass(r.contentClass),l.$.data("zui.messager",l),r.show&&l.message!==i&&l.show()};r.prototype.update=function(e,i){var n=this,a=n.options;n.$.removeClass("messager-"+a.type),i&&(a=t.extend(a,i)),n.$.addClass("messager-"+a.type),e&&(n.message=(a.icon?'<i class="icon-'+a.icon+' icon"></i> ':"")+e,n.$.find(".messager-content").html(n.message))},r.prototype.show=function(n,a){var o=this,s=this.options;if(t.isFunction(n)){var r=a;a=n,r!==i&&(n=r)}if(o.isShow)return void o.hide(function(){o.show(n,a)});o.hiding&&(clearTimeout(o.hiding),o.hiding=null),o.update(n);var l=s.placement,c=t(s.parent),d=c.children(".messagers-holder."+l);if(d.length||(d=t("<div/>").attr("class","messagers-holder "+l).appendTo(c)),d.append(o.$),"center"===l){var h=t(e).height()-d.height();d.css("top",Math.max(-h,h/2))}return o.$.show().addClass("in"),s.time&&(o.hiding=setTimeout(function(){o.hide()},s.time)),o.isShow=!0,a&&a(),o},r.prototype.hide=function(t,e){t===!0&&(e=!0,t=null);var i=this;if(i.$.hasClass("in")){i.$.removeClass("in");var n=function(){var e=i.$.parent();i.$.detach(),e.children().length||e.remove(),t&&t(!0)};e?n():setTimeout(n,200)}else t&&t(!1);i.isShow=!1},r.prototype.destroy=function(){var t=this;t.hide(function(){t.$.remove(),t.$=null},!0),delete s[t.id]},r.all=s,r.DEFAULTS=o;var l=function(){t(".messager").each(function(){var e=t(this).data("zui.messager");e&&e.hide&&e.hide(!0)})},c=function(e,n){"string"==typeof n&&(n={type:n}),n=t.extend({},n),n.id===i&&l();var a=s[n.id]||new r(e,n);return a.show(),a},d=function(t){return"string"==typeof t?{placement:t}:t},h={show:c,hide:l};t.each({primary:0,success:"ok-sign",info:"info-sign",warning:"warning-sign",danger:"exclamation-sign",important:0,special:0},function(e,i){h[e]=function(n,a){return c(n,t.extend({type:e,icon:i||null},d(a)))}}),t.zui({Messager:r,showMessager:c,messager:h})}(jQuery,window,void 0),function(t,e,i,n){"use strict";function a(t){if(t=t.toLowerCase(),t&&d.test(t)){var e;if(4===t.length){var i="#";for(e=1;e<4;e+=1)i+=t.slice(e,e+1).concat(t.slice(e,e+1));t=i}var n=[];for(e=1;e<7;e+=2)n.push(y("0x"+t.slice(e,e+2)));return{r:n[0],g:n[1],b:n[2],a:1}}throw new Error("Wrong hex string! (hex: "+t+")")}function o(e){return typeof e===f&&("transparent"===e.toLowerCase()||m[e.toLowerCase()]||d.test(t.trim(e.toLowerCase())))}function s(t){function e(t){return t=t<0?t+1:t>1?t-1:t,6*t<1?r+(s-r)*t*6:2*t<1?s:3*t<2?r+(s-r)*(2/3-t)*6:r}var i=t.h,n=t.s,a=t.l,o=t.a;i=c(i)%u/u,n=l(c(n)),a=l(c(a)),o=l(c(o));var s=a<=.5?a*(n+1):a+n-a*n,r=2*a-s,d={r:e(i+1/3)*h,g:e(i)*h,b:e(i-1/3)*h,a:o};return d}function r(t,i,n){return v(n)&&(n=0),v(i)&&(i=h),e.min(e.max(t,n),i)}function l(t,e){return r(t,e)}function c(t){return"number"==typeof t?t:parseFloat(t)}var d=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,h=255,u=360,p=100,f="string",g="object",m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},v=function(t){return t===n},_=function(t){return!v(t)},y=function(t){return parseInt(t)},b=function(t){return y(l(c(t),h))},w=function(t,e,i,n){var o=this;if(o.r=o.g=o.b=0,o.a=1,_(n)&&(o.a=l(c(n),1)),_(t)&&_(e)&&_(i))o.r=b(t),o.g=b(e),o.b=b(i);else if(_(t)){var r=typeof t;if(r==f)t=t.toLowerCase(),"transparent"===t?o.a=0:m[t]?this.rgb(a(m[t])):o.rgb(a(t));else if("number"==r&&v(e))o.r=o.g=o.b=b(t);else if(r==g&&_(t.r))o.r=b(t.r),_(t.g)&&(o.g=b(t.g)),_(t.b)&&(o.b=b(t.b)),_(t.a)&&(o.a=l(c(t.a),1));else if(r==g&&_(t.h)){var d={h:l(c(t.h),u),s:1,l:1,a:1};_(t.s)&&(d.s=l(c(t.s),1)),_(t.l)&&(d.l=l(c(t.l),1)),_(t.a)&&(d.a=l(c(t.a),1)),o.rgb(s(d))}}};w.prototype.rgb=function(t){var e=this;if(_(t)){if(typeof t==g)_(t.r)&&(e.r=b(t.r)),_(t.g)&&(e.g=b(t.g)),_(t.b)&&(e.b=b(t.b)),_(t.a)&&(e.a=l(c(t.a),1));else{var i=y(c(t));e.r=i,e.g=i,e.b=i}return e}return{r:e.r,g:e.g,b:e.b,a:e.a}},w.prototype.hue=function(t){var e=this,i=e.toHsl();return v(t)?i.h:(i.h=l(c(t),u),e.rgb(s(i)),e)},w.prototype.darken=function(t){var e=this,i=e.toHsl();return i.l-=t/p,i.l=l(i.l,1),e.rgb(s(i)),e},w.prototype.clone=function(){var t=this;return new w(t.r,t.g,t.b,t.a)},w.prototype.lighten=function(t){return this.darken(-t)},w.prototype.fade=function(t){return this.a=l(t/p,1),this},w.prototype.spin=function(t){var e=this.toHsl(),i=(e.h+t)%u;return e.h=i<0?u+i:i,this.rgb(s(e))},w.prototype.toHsl=function(){var t,i,n=this,a=n.r/h,o=n.g/h,s=n.b/h,r=n.a,l=e.max(a,o,s),c=e.min(a,o,s),d=(l+c)/2,p=l-c;if(l===c)t=i=0;else{switch(i=d>.5?p/(2-l-c):p/(l+c),l){case a:t=(o-s)/p+(o<s?6:0);break;case o:t=(s-a)/p+2;break;case s:t=(a-o)/p+4}t/=6}return{h:t*u,s:i,l:d,a:r}},w.prototype.luma=function(){var t=this.r/h,i=this.g/h,n=this.b/h;return t=t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4),i=i<=.03928?i/12.92:e.pow((i+.055)/1.055,2.4),n=n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4),.2126*t+.7152*i+.0722*n},w.prototype.saturate=function(t){var e=this.toHsl();return e.s+=t/p,e.s=l(e.s),this.rgb(s(e))},w.prototype.desaturate=function(t){return this.saturate(-t)},w.prototype.contrast=function(t,e,i){if(e=v(e)?new w(h,h,h,1):new w(e),t=v(t)?new w(0,0,0,1):new w(t),t.luma()>e.luma()){var n=e;e=t,t=n}return this.a<.5?t:(i=v(i)?.43:c(i),this.luma()<i?e:t)},w.prototype.hexStr=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},w.prototype.toCssStr=function(){var t=this;return t.a>0?t.a<1?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":t.hexStr():"transparent"},w.isColor=o,w.names=m,w.get=function(t){return new w(t)},t.zui({Color:w})}(jQuery,Math,window,void 0),/*!
 * Chart.js 1.0.2 
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * http://chartjs.org/
 */
function(t){"use strict";var e=t&&t.zui?t.zui:this,i=(e.Chart,function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)},i=this.width=e(t.canvas,"Width"),a=this.height=e(t.canvas,"Height");t.canvas.width=i,t.canvas.height=a;var i=this.width=t.canvas.width,a=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,n.retinaScale(this),this});i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},a=n.each=function(t,e,i){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var a;for(a=0;a<t.length;a++)e.apply(i,[t[a],a].concat(n))}else for(var o in t)e.apply(i,[t[o],o].concat(n))},o=n.clone=function(t){var e={};return a(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)}),e},s=n.extend=function(t){return a(Array.prototype.slice.call(arguments,1),function(e){a(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)})}),t},r=n.merge=function(t,e){var i=Array.prototype.slice.call(arguments,0);return i.unshift({}),s.apply(null,i)},l=n.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},c=(n.where=function(t,e){var i=[];return n.each(t,function(t){e(t)&&i.push(t)}),i},n.findNextWhere=function(t,e,i){i||(i=-1);for(var n=i+1;n<t.length;n++){var a=t[n];if(e(a))return a}},n.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var n=i-1;n>=0;n--){var a=t[n];if(e(a))return a}},n.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=c,t&&s(i.prototype,t),i.__super__=e.prototype,i}),d=n.noop=function(){},h=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),u=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=n.amd="function"==typeof define&&define.amd,f=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=n.max=function(t){return Math.max.apply(Math,t)},m=n.min=function(t){return Math.min.apply(Math,t)},v=(n.cap=function(t,e,i){if(f(e)){if(t>e)return e}else if(f(i)&&t<i)return i;return t},n.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),_=n.radians=function(t){return t*(Math.PI/180)},y=(n.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,a=Math.sqrt(i*i+n*n),o=2*Math.PI+Math.atan2(n,i);return i<0&&n<0&&(o+=2*Math.PI),{angle:o,distance:a}},n.aliasPixel=function(t){return t%2===0?0:.5}),b=(n.splineCurve=function(t,e,i,n){var a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),s=n*a/(a+o),r=n*o/(a+o);return{inner:{x:e.x-s*(i.x-t.x),y:e.y-s*(i.y-t.y)},outer:{x:e.x+r*(i.x-t.x),y:e.y+r*(i.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(n.calculateScaleRange=function(t,e,i,n,a){var o=2,s=Math.floor(e/(1.5*i)),r=o>=s,l=g(t),c=m(t);l===c&&(l+=.5,c>=.5&&!n?c-=.5:l+=.5);for(var d=Math.abs(l-c),h=b(d),u=Math.ceil(l/(1*Math.pow(10,h)))*Math.pow(10,h),p=n?0:Math.floor(c/(1*Math.pow(10,h)))*Math.pow(10,h),f=u-p,v=Math.pow(10,h),_=Math.round(f/v);(_>s||2*_<s)&&!r;)if(_>s)v*=2,_=Math.round(f/v),_%1!==0&&(r=!0);else if(a&&h>=0){if(v/2%1!==0)break;v/=2,_=Math.round(f/v)}else v/=2,_=Math.round(f/v);return r&&(_=o,v=f/_),{steps:_,stepValue:v,min:p,max:p+_*v}},n.template=function(t,e){function i(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t];return e?i(e):i}if(t instanceof Function)return t(e);var n={};return i(t,e)}),k=(n.generateLabels=function(t,e,i,n){var o=new Array(e);return labelTemplateString&&a(o,function(e,a){o[a]=w(t,{value:i+n*(a+1)})}),o},n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=1*(.3*1.5)),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)):n*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-k.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*k.easeInBounce(2*t):.5*k.easeOutBounce(2*t-1)+.5}}),C=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),x=n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),T=(n.animationLoop=function(t,e,i,n,a,o){var s=0,r=k[i]||k.linear,l=function(){s++;var i=s/e,c=r(i);t.call(o,c,i,s),n.call(o,c,i),s<e?o.animationFrame=C(l):a.apply(o)};C(l)},n.getRelativePosition=function(t){var e,i,n=t.originalEvent||t,a=t.currentTarget||t.srcElement,o=a.getBoundingClientRect();return n.touches?(e=n.touches[0].clientX-o.left,i=n.touches[0].clientY-o.top):(e=n.clientX-o.left,i=n.clientY-o.top),{x:e,y:i}},n.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),S=n.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=d},E=(n.bindEvents=function(t,e,i){t.events||(t.events={}),a(e,function(e){t.events[e]=function(){i.apply(t,arguments)},T(t.chart.canvas,e,t.events[e])})},n.unbindEvents=function(t,e){a(e,function(e,i){S(t.chart.canvas,i,e)})}),D=n.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},M=n.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},F=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=n+"px",e.canvas.height=n*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),P=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},A=n.fontString=function(t,e,i){return e+" "+t+"px "+i},U=n.longestText=function(t,e,i){t.font=e;var n=0;return a(i,function(e){var i=t.measureText(e).width;n=i>n?i:n}),n},I=n.drawRoundedRectangle=function(t,e,i,n,a,o){t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+a-o),t.quadraticCurveTo(e+n,i+a,e+n-o,i+a),t.lineTo(e+o,i+a),t.quadraticCurveTo(e,i+a,e,i+a-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath()};i.instances={},i.Type=function(t,e,n){this.options=e,this.chart=n,this.id=h(),i.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},s(i.Type.prototype,{initialize:function(){return this},clear:function(){return P(this.chart),this},stop:function(){return x(this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,i=D(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:M(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=n,F(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:d,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),E(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete i.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(a(t,function(t,i){t!==this.activeElements[i]&&(e=!0)},this),e)}.call(this,t);if(o||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var s,r,c=this.datasets.length-1;c>=0&&(s=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,r=l(s,t[0]),r===-1);c--);var d=[],h=[],u=function(t){var e,i,a,o,s,l=[],c=[],u=[];return n.each(this.datasets,function(t){t.showTooltips!==!1&&(e=t.points||t.bars||t.segments,e[r]&&e[r].hasValue()&&l.push(e[r]))}),n.each(l,function(t){c.push(t.x),u.push(t.y),d.push(n.template(this.options.multiTooltipTemplate,t)),h.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=m(u),a=g(u),o=m(c),i=g(c),{x:o>this.chart.width/2?o:i,y:(s+a)/2}}.call(this,r);new i.MultiTooltip({x:u.x,y:u.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:d,legendColors:h,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else a(t,function(t){var e=t.tooltipPosition();new i.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=o(e.prototype),s(n.prototype,t),n.extend=i.Type.extend,t.name||e.prototype.name){var a=t.name||e.prototype.name,l=i.defaults[e.prototype.name]?o(i.defaults[e.prototype.name]):{};i.defaults[a]=s(l,t.defaults),i.types[a]=n,i.prototype[a]=function(t,e){var o=r(i.defaults.global,i.defaults[a],e||{});return new n(t,o,this)}}else u("Name not provided for this chart, so it hasn't been registered");return e},i.Element=function(t){s(this,t),this.initialize.apply(this,arguments),this.save()},s(i.Element.prototype,{initialize:function(){},restore:function(t){return t?a(t,function(t){this[t]=this._saved[t]},this):s(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return a(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return a(t,function(t,i){this[i]=(t-this._saved[i])*e+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),i.Element.extend=c,i.Point=i.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),i.Arc=i.Element.extend({inRange:function(t,e){var i=n.getAngleFromPoint(this,{x:t,y:e}),a=i.angle>=this.startAngle&&i.angle<=this.endAngle,o=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return a&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,n=this.x+e,a=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(i+=o,n-=o,a+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,a),t.lineTo(n,a),t.lineTo(n,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),i.Tooltip=i.Element.extend({draw:function(){var t=this.chart.ctx;t.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,i=t.measureText(this.text).width+2*this.xPadding,n=this.fontSize+2*this.yPadding,a=n+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-a<0&&(this.yAlign="below");var o=this.x-i/2,s=this.y-a;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}I(t,o,s,i,n,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+i/2,s+n/2)}}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=A(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=U(this.ctx,this.font,this.labels)+this.fontSize+3,i=g([e,t]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(e,i){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?U(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,i=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth+10?i/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var a,o=U(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&this.xLabelRotation>0;)a=Math.cos(_(this.xLabelRotation)),t=a*i,e=a*n,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=a*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(_(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:d,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=e/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=i/2),Math.round(n)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);if(this.display){t.fillStyle=this.textColor,t.font=this.font;var o=this.showBeyondLine?5:0;a(this.yLabels,function(a,s){var r=this.endPoint-e*s,l=Math.round(r),c=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(a,i-10,r),0!==s||c||(c=!0),c&&t.beginPath(),s>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),l+=n.aliasPixel(t.lineWidth),c&&(t.moveTo(i,l),t.lineTo(this.width,l),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i-o,l),t.lineTo(i,l),t.stroke(),t.closePath()},this),a(this.xLabels,function(e,i){var n=this.calculateX(i)+y(this.lineWidth),a=this.calculateX(i-(this.offsetGridLines?.5:0))+y(this.lineWidth),s=this.xLabelRotation>0,r=this.showVerticalLines;0!==i||r||(r=!0),r&&t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),r&&(t.moveTo(a,this.endPoint),t.lineTo(a,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(a,this.endPoint),t.lineTo(a,this.endPoint+o),t.stroke(),t.closePath(),t.save(),t.translate(n,s?this.endPoint+12:this.endPoint+8),t.rotate(_(this.xLabelRotation)*-1),t.font=this.font,t.textAlign=s?"right":"center",t.textBaseline=s?"middle":"top",t.fillText(e,0,0),t.restore()},this)}}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,n,a,o,s,r,l,c,d,h,u=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=A(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,u),i=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(n=i/2,t.x+n>p&&(p=t.x+n,a=e),t.x-n<g&&(g=t.x-n,s=e)):e<this.valuesCount/2?t.x+i>p&&(p=t.x+i,a=e):e>this.valuesCount/2&&t.x-i<g&&(g=t.x-i,s=e);l=g,c=Math.ceil(p-this.width),o=this.getIndexAngle(a),r=this.getIndexAngle(s),d=c/Math.sin(o+Math.PI/2),h=l/Math.sin(r+Math.PI/2),d=f(d)?d:0,h=f(h)?h:0,this.drawingArea=u-(h+d)/2,this.setCenterPoint(h,d)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,n=t+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(a(this.yLabels,function(e,i){if(i>0){var n,a=i*(this.drawingArea/this.steps),o=this.yCenter-a;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,a,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)n=this.getPointPosition(s,this.calculateCenterOffset(this.min+i*this.stepValue)),0===s?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var r=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-r/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,r+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var i=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(i.x,i.y),t.stroke(),t.closePath()}var n=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=A(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,s=this.labels.length/2,r=s/2,l=e<r||e>o-r,c=e===r||e===o-r;0===e?t.textAlign="center":e===s?t.textAlign="center":e<s?t.textAlign="left":t.textAlign="right",c?t.textBaseline="middle":l?t.textBaseline="bottom":t.textBaseline="top",t.fillText(this.labels[e],n.x,n.y)}}}}}),n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){a(i.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),e.Chart=i,t.fn.chart=function(){var t=[];return this.each(function(){t.push(new i(this.getContext("2d")))}),1===t.length?t[0]:t}}.call(this,jQuery),function(t){"use strict";var e=t&&t.zui?t.zui:this,i=e.Chart,n=i.helpers,a={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowBeyondLine:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:a,initialize:function(e){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(e.datasets,function(i){if(t.zui&&t.zui.Color&&t.zui.Color.get){var a=t.zui.Color.get(i.color),o=a.toCssStr();i.fillColor||(i.fillColor=a.clone().fade(20).toCssStr()),i.strokeColor||(i.strokeColor=o),i.pointColor||(i.pointColor=o),i.pointStrokeColor||(i.pointStrokeColor="#fff"),i.pointHighlightFill||(i.pointHighlightFill="#fff"),i.pointHighlightStroke||(i.pointHighlightStroke=o)}var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,showTooltips:i.showTooltips!==!1,points:[]};this.datasets.push(s),n.each(i.data,function(t,n){s.points.push(new this.PointClass({value:t,label:e.labels[n],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(e.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var e=this,a=function(){var t=[];return e.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(a(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,showBeyondLine:this.options.scaleShowBeyondLine,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(o)},addData:function(t,e){n.each(t,function(t,i){this.datasets[i].points.push(new this.PointClass({value:t,label:e,datasetLabel:this.datasets[i].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx,a=function(t){return null!==t.value},o=function(t,e,i){return n.findNextWhere(e,a,i)||t},s=function(t,e,i){return n.findPreviousWhere(e,a,i)||t};this.scale.draw(e),n.each(this.datasets,function(t){var r=n.where(t.points,a);n.each(t.points,function(t,i){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(i)},e)},this),this.options.bezierCurve&&n.each(r,function(t,e){var i=e>0&&e<r.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(s(t,r,e),t,o(t,r,e),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(r,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=s(t,r,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),i.stroke(),this.options.datasetFill&&r.length>0&&(i.lineTo(r[r.length-1].x,this.scale.endPoint),i.lineTo(r[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(r,function(t){t.draw()})},this)}}),t.fn.lineChart=function(e,n){var a=[];return this.each(function(){var o=t(this);a.push(new i(this.getContext("2d")).Line(e,t.extend(o.data(),n)))}),1===a.length?a[0]:a}}.call(this,jQuery),function(t){"use strict";var e=t&&t.zui?t.zui:this,i=e.Chart,n=i.helpers,a={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleLabelPlacement:"auto",animationSteps:60,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Doughnut",defaults:a,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=i.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(e,i,n){if(t.zui&&t.zui.Color&&t.zui.Color.get){var a=new t.zui.Color.get(e.color);e.color=a.toCssStr(),e.highlight||(e.highlight=a.lighten(5).toCssStr())}var o=i||this.segments.length;this.segments.splice(o,0,new this.SegmentArc({id:"undefined"==typeof e.id?o:e.id,value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),showLabel:e.showLabel!==!1,label:e.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},drawLabel:function(e,i,a){var o=this.options,s=(e.endAngle+e.startAngle)/2,r=o.scaleLabelPlacement;"inside"!==r&&"outside"!==r&&this.chart.width-this.chart.height>50&&e.circumference<Math.PI/18&&(r="outside");var l=Math.cos(s)*e.outerRadius,c=Math.sin(s)*e.outerRadius,d=n.template(o.scaleLabel,{value:"undefined"==typeof i?e.value:Math.round(i*e.value),label:e.label}),h=this.chart.ctx;h.font=n.fontString(o.scaleFontSize,o.scaleFontStyle,o.scaleFontFamily),h.textBaseline="middle",h.textAlign="center";var u=(h.measureText(d).width,this.chart.width/2),p=this.chart.height/2;if("outside"===r){var f=l>=0,g=l+u,m=c+p;h.textAlign=f?"left":"right",h.measureText(d).width,l=f?Math.max(u+e.outerRadius+10,l+30+u):Math.min(u-e.outerRadius-10,l-30+u);var v=o.scaleFontSize*(o.scaleLineHeight||1),_=Math.round((.8*c+p)/v)+1,y=(Math.floor(this.chart.width/v)+1,f?1:-1);if(a[_*y]&&(_>1?_--:_++),a[_*y])return;c=(_-1)*v+o.scaleFontSize/2,a[_*y]=!0,h.beginPath(),h.moveTo(g,m),h.lineTo(l,c),l=f?l+5:l-5,h.lineTo(l,c),h.strokeStyle=t.zui&&t.zui.Color?new t.zui.Color(e.fillColor).fade(40).toCssStr():e.fillColor,h.strokeWidth=o.scaleLineWidth,h.stroke(),h.fillStyle=e.fillColor}else l=.7*l+u,c=.7*c+p,h.fillStyle=t.zui&&t.zui.Color?new t.zui.Color(e.fillColor).contrast().toCssStr():"#fff";h.fillText(d,l,c)},draw:function(t){var e=t?t:1;this.clear();var i;if(n.each(this.segments,function(t,i){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle)},this),this.options.scaleShowLabels){var a=this.segments.slice().sort(function(t,e){return e.value-t.value}),i={};n.each(a,function(e,n){e.showLabel&&this.drawLabel(e,t,i)},this)}}}),i.types.Doughnut.extend({name:"Pie",defaults:n.merge(a,{percentageInnerCutout:0})}),t.fn.pieChart=function(e,n){var a=[];return this.each(function(){var o=t(this);a.push(new i(this.getContext("2d")).Pie(e,t.extend(o.data(),n)))}),1===a.length?a[0]:a},t.fn.doughnutChart=function(e,n){var a=[];return this.each(function(){var o=t(this);a.push(new i(this.getContext("2d")).Doughnut(e,t.extend(o.data(),n)))}),1===a.length?a[0]:a}}.call(this,jQuery),function(t){"use strict";var e=t&&t.zui?t.zui:this,i=e.Chart,n=i.helpers,a={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,scaleShowBeyondLine:!0,barShowStroke:!0,barStrokeWidth:1,scaleValuePlacement:"auto",barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Bar",defaults:a,initialize:function(e){var a=this.options;this.ScaleClass=i.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var n=this.calculateBaseWidth(),o=this.calculateX(i)-n/2,s=this.calculateBarWidth(t);return o+s*e+e*a.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*a.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*a.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=i.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(e.datasets,function(i,a){if(t.zui&&t.zui.Color&&t.zui.Color.get){var o=t.zui.Color.get(i.color),s=o.toCssStr();i.fillColor||(i.fillColor=o.clone().fade(50).toCssStr()),i.strokeColor||(i.strokeColor=s)}var r={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(r),n.each(i.data,function(t,n){r.bars.push(new this.BarClass({value:t,label:e.labels[n],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(e.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],a=n.getRelativePosition(t),o=function(t){i.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(a.x,a.y))return n.each(this.datasets,o),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,showBeyondLine:this.options.scaleShowBeyondLine,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(a,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(a)},addData:function(t,e){n.each(t,function(t,i){this.datasets[i].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},drawLabel:function(t,e){var i=this.options;e=e||i.scaleValuePlacement,e=e?e.toLowerCase():"auto","auto"===e&&(e=t.y<15?"insdie":"outside");var a="insdie"===e?t.y+10:t.y-10,o=this.chart.ctx;o.font=n.fontString(i.scaleFontSize,i.scaleFontStyle,i.scaleFontFamily),o.textBaseline="middle",o.textAlign="center",o.fillStyle=i.scaleFontColor,o.fillText(t.value,t.x,a)},draw:function(t){var e=t||1;this.clear();this.chart.ctx;this.scale.draw(e);var i=this.options.scaleShowLabels&&this.options.scaleValuePlacement;n.each(this.datasets,function(t,a){n.each(t.bars,function(t,n){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,a,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw()),i&&this.drawLabel(t)},this)},this)}}),t.fn.barChart=function(e,n){var a=[];return this.each(function(){var o=t(this);a.push(new i(this.getContext("2d")).Bar(e,t.extend(o.data(),n)))}),1===a.length?a[0]:a}}.call(this,jQuery),/*!
 * Datetimepicker for Bootstrap
 * Copyright 2012 Stefan Petre
 * Licensed under the Apache License v2.0
 */
!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(e,i){var o=this;this.element=t(e),this.language=(i.language||this.element.data("date-language")||(t.zui&&t.zui.clientLang?t.zui.clientLang().replace("_","-"):"zh-cn")).toLowerCase(),this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=a.parseFormat(i.format||this.element.data("date-format")||n[this.language].format||a.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".input-group-addon .icon-th, .input-group-addon .icon-time, .input-group-addon .icon-calendar").parent(),this.componentReset=!!this.element.is(".date")&&this.element.find(".input-group-addon .icon-remove").parent(),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=a.parseFormat(i.linkFormat||this.element.data("link-format")||a.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.pickerClass=i.eleClass,this.pickerId=i.eleId,this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=a.convertViewMode(this.minView),this.maxView=a.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=a.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=a.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=a.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(a.template).appendTo(this.isInline?this.element:"body").on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev span, .next span").toggleClass("icon-arrow-left icon-arrow-right")),t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&o.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,i,n=0;n<this._events.length;n++)e=this._events[n][0],i=this._events[n][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=a.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),a.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-(1/0),this.startDate!==-(1/0)&&(this.startDate=a.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=a.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=0;t("div").each(function(){var i=parseInt(t(this).css("zIndex"),10);i>e&&(e=i)});var i,n,a,o=e+10;this.component?(i=this.component.offset(),a=i.left,"bottom-left"!==this.pickerPosition&&"top-left"!==this.pickerPosition&&"auto-left"!==this.pickerPosition||(a+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),a=i.left);var s=0===this.pickerPosition.indexOf("auto-"),r=s?(i.top+this.picker.outerHeight()>t(window).height()+t(window).scrollTop()?"top":"bottom")+(0===this.pickerPosition.lastIndexOf("-left")?"-left":"-right"):this.pickerPosition;n="top-left"===r||"top-right"===r?i.top-this.picker.outerHeight():i.top+this.height,this.picker.css({top:n,left:a,zIndex:o}).attr("class","datetimepicker dropdown-menu datetimepicker-dropdown-"+r),this.pickerClass&&this.picker.addClass(this.pickerClass),this.pickerId&&this.picker.attr("id",this.pickerId)}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,("string"==typeof t||t instanceof String)&&(t=t.replace(/^\s+|\s+$/g,""))),t||(t=new Date,e=!1),this.date=a.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+n[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+n[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),o=i.getUTCFullYear(),s=i.getUTCMonth(),r=i.getUTCDate(),l=i.getUTCHours(),c=i.getUTCMinutes(),d=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),h=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,f=new e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),g=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[s]+" "+o),"time"==this.formatViewType){var m=l%12?l%12:12,v=(m<10?"0":"")+m,_=(c<10?"0":"")+c,y=n[this.language].meridiem[l<12?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+_+" "+y.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+_+" "+y.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+" "+n[this.language].months[s]+" "+o),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+" "+n[this.language].months[s]+" "+o);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var b=e(o,s-1,28,0,0,0,0),w=a.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth());b.setUTCDate(w),b.setUTCDate(w-(b.getUTCDay()-this.weekStart+7)%7);var k=new Date(b);k.setUTCDate(k.getUTCDate()+42),k=k.valueOf();for(var C,x=[];b.valueOf()<k;)b.getUTCDay()==this.weekStart&&x.push("<tr>"),C="",b.getUTCFullYear()<o||b.getUTCFullYear()==o&&b.getUTCMonth()<s?C+=" old":(b.getUTCFullYear()>o||b.getUTCFullYear()==o&&b.getUTCMonth()>s)&&(C+=" new"),this.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&(C+=" today"),b.valueOf()==f&&(C+=" active"),(b.valueOf()+864e5<=this.startDate||b.valueOf()>this.endDate||t.inArray(b.getUTCDay(),this.daysOfWeekDisabled)!==-1)&&(C+=" disabled"),x.push('<td class="day'+C+'">'+b.getUTCDate()+"</td>"),b.getUTCDay()==this.weekEnd&&x.push("</tr>"),b.setUTCDate(b.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var T="",S="",E="",D=0;D<24;D++){var M=e(o,s,r,D);C="",M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate?C+=" disabled":l==D&&(C+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(S=D<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],S!=E&&(""!=E&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+S.toUpperCase()+"</legend>")),E=S,T=D%12?D%12:12,x.push('<span class="hour'+C+" hour_"+(D<12?"am":"pm")+'">'+T+"</span>"),23==D&&x.push("</fieldset>")):(T=D+":00",x.push('<span class="hour'+C+'">'+T+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],T="",S="",E="";for(var D=0;D<60;D+=this.minuteStep){var M=e(o,s,r,l,D,0);C="",M.valueOf()<this.startDate||M.valueOf()>this.endDate?C+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(D/this.minuteStep)&&(C+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(S=l<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],S!=E&&(""!=E&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+S.toUpperCase()+"</legend>")),E=S,T=l%12?l%12:12,x.push('<span class="minute'+C+'">'+T+":"+(D<10?"0"+D:D)+"</span>"),59==D&&x.push("</fieldset>")):(T=D+":00",x.push('<span class="minute'+C+'">'+l+":"+(D<10?"0"+D:D)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var F=this.date.getUTCFullYear(),P=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");F==o&&P.eq(this.date.getUTCMonth()).addClass("active"),(o<d||o>u)&&P.addClass("disabled"),o==d&&P.slice(0,h).addClass("disabled"),o==u&&P.slice(p+1).addClass("disabled"),x="",o=10*parseInt(o/10,10);var A=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var D=-1;D<11;D++)x+='<span class="year'+(D==-1||10==D?" old":"")+(F==o?" active":"")+(o<d||o>u?" disabled":"")+'">'+o+"</span>",o+=1;A.html(x),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),n=t.getUTCDate(),a=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&a<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&a>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=e.originalEvent,n=i.wheelDelta,a=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(a=-a),this.showMode(a),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(i){i.stopPropagation(),i.preventDefault();var n=t(i.target).closest("span, td, th, legend");if(1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var o=a.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var s=new Date;s=e(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),s<this.startDate?s=this.startDate:s>this.endDate&&(s=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(e(r,l,c,d,h,u,0))):n.is(".year")?(this.viewDate.setUTCDate(1),r=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(r),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(e(r,l,c,d,h,u,0))):n.is(".hour")?(d=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==d&&n.hasClass("hour_am")?d=0:12!=d&&n.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(e(r,l,c,d,h,u,0))):n.is(".minute")&&(h=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(h),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(e(r,l,c,d,h,u,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,r-=1):l-=1:n.is(".new")&&(11==l?(l=0,r+=1):l+=1),this.viewDate.setUTCFullYear(r),this.viewDate.setUTCMonth(l,c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(e(r,l,c,d,h,u,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date}),null===t&&(this.date=this.viewDate)},moveMinute:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+e*this.minuteStep),i},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,n,a=new Date(t.valueOf()),o=a.getUTCDate(),s=a.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)n=e==-1?function(){return a.getUTCMonth()==s}:function(){return a.getUTCMonth()!=i},i=s+e,a.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<r;l++)a=this.moveMonth(a,e);i=a.getUTCMonth(),a.setUTCDate(o),n=function(){return i!=a.getUTCMonth()}}for(;n();)a.setUTCDate(--o),a.setUTCMonth(i);return a},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,a=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,e),n=this.moveDate(this.viewDate,e)):1==viewMode?(i=this.moveHour(this.date,e),n=this.moveHour(this.viewDate,e)):0==viewMode&&(i=this.moveMinute(this.date,e),n=this.moveMinute(this.viewDate,e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,7*e),n=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*e),n=this.moveHour(this.viewDate,6*e)):(i=this.moveHour(this.date,4*e),n=this.moveHour(this.viewDate,4*e)):0==viewMode&&(i=this.moveMinute(this.date,4*e),n=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(a){var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(a.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+a.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")}},t.fn.datetimepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var a=t(this),o=a.data("datetimepicker"),s="object"==typeof e&&e;o||a.data("datetimepicker",o=new i(this,t.extend({},t.fn.datetimepicker.defaults,a.data(),s))),"string"==typeof e&&"function"==typeof o[e]&&o[e].apply(o,n)})},t.fn.datetimepicker.defaults={pickerPosition:"auto-right"},t.fn.datetimepicker.Constructor=i;var n=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}};n["zh-cn"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",suffix:[],meridiem:[]},n["zh-tw"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",suffix:[],meridiem:["上午","下午"]};var a={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var i=t.replace(this.validParts(e),"\0").split("\0"),n=t.match(this.validParts(e));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(a,o,s,r){if(a instanceof Date){var l=new Date(a.valueOf()-6e4*a.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(a)&&(o=this.parseFormat("yyyy-mm-dd",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(a)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(a)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(a)){var c,d,h=/([-+]\d+)([dmwy])/,u=a.match(/([-+]\d+)([dmwy])/g);a=new Date;for(var p=0;p<u.length;p++)switch(c=h.exec(u[p]),d=parseInt(c[1]),c[2]){case"d":a.setUTCDate(a.getUTCDate()+d);break;case"m":a=i.prototype.moveMonth.call(i.prototype,a,d);break;case"w":a.setUTCDate(a.getUTCDate()+7*d);break;case"y":a=i.prototype.moveYear.call(i.prototype,a,d)}return e(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0)}var f,g,c,u=a&&a.match(this.nonpunctuation)||[],a=new Date(0,0,0,0,0,0,0),m={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],_={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(_.M=_.MM=_.mm=_.m,_.dd=_.d,_.P=_.p,a=e(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),u.length==o.parts.length){for(var p=0,y=o.parts.length;p<y;p++){if(f=parseInt(u[p],10),c=o.parts[p],isNaN(f))switch(c){case"MM":g=t(n[s].months).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t==e}),f=t.inArray(g[0],n[s].months)+1;break;case"M":g=t(n[s].monthsShort).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t==e}),f=t.inArray(g[0],n[s].monthsShort)+1;break;case"p":case"P":f=t.inArray(u[p].toLowerCase(),n[s].meridiem)}m[c]=f}for(var b,p=0;p<v.length;p++)b=v[p],b in m&&!isNaN(m[b])&&_[b](a,m[b])}return a},formatDate:function(e,i,o,s){if(null==e)return"";var r;if("standard"==s)r={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:n[o].monthsShort[e.getUTCMonth()],MM:n[o].months[e.getUTCMonth()],d:e.getUTCDate(),D:n[o].daysShort[e.getUTCDay()],DD:n[o].days[e.getUTCDay()],p:2==n[o].meridiem.length?n[o].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},2==n[o].meridiem.length?r.H=r.h%12==0?12:r.h%12:r.H=r.h,r.HH=(r.H<10?"0":"")+r.H,r.P=r.p.toUpperCase(),r.hh=(r.h<10?"0":"")+r.h,r.ii=(r.i<10?"0":"")+r.i,r.ss=(r.s<10?"0":"")+r.s,r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;else{if("php"!=s)throw new Error("Invalid format type.");r={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:n[o].months[e.getUTCMonth()],M:n[o].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:a.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:n[o].days[e.getUTCDay()],D:n[o].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=n[o].suffix.length?n[o].suffix[e.getUTCDate()%10-1]:"",a:2==n[o].meridiem.length?n[o].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},r.m=(r.n<10?"0":"")+r.n,r.d=(r.j<10?"0":"")+r.j,r.A=r.a.toString().toUpperCase(),r.h=(r.g<10?"0":"")+r.g,r.H=(r.G<10?"0":"")+r.G,r.i=(r.i<10?"0":"")+r.i,r.s=(r.s<10?"0":"")+r.s}for(var e=[],l=t.extend([],i.separators),c=0,d=i.parts.length;c<d;c++)l.length&&e.push(l.shift()),e.push(r[i.parts[c]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};a.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+a.headTemplate+"<tbody></tbody>"+a.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=a,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=old,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){
var i=t(this);i.data("datetimepicker")||(e.preventDefault(),i.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.1.0
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
*/
function(){var t,e,i,n,a,o={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={zh_cn:{no_results_text:"没有找到"},zh_tw:{no_results_text:"沒有找到"},en:{no_results_text:"No results match"}};n=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},e.prototype.add_group=function(e){var i,n,a,o,s,r;for(i=this.parsed.length,this.parsed.push({array_index:i,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled,title:e.title,search_keys:t.trim(e.getAttribute("data-keys")||"").replace(/,/g," ")}),s=e.childNodes,r=[],a=0,o=s.length;a<o;a++)n=s[a],r.push(this.add_option(n,i,e.disabled));return r},e.prototype.add_option=function(e,i,n){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=i&&(this.parsed[i].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,title:e.title,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:i,classes:e.className,style:e.style.cssText,search_keys:(t.trim(e.getAttribute("data-keys")||"")+e.value).replace(/,/," ")})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},e}(),n.select_to_array=function(t){var e,i,a,o,s;for(i=new n,s=t.childNodes,a=0,o=s.length;a<o;a++)e=s[a],i.add_node(e);return i.parsed},e=function(){function e(i,n){this.form_field=i,this.options=null!=n?n:{},e.browser_is_supported()&&(this.lang=r[this.options.lang||(t.zui.clientLang?t.zui.clientLang():"zh_cn")],this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.drop_direction=this.options.drop_direction||"auto",this.middle_highlight=this.options.middle_highlight,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||this.lang.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},e.prototype.results_option_build=function(t){var e,i,n,a,o;for(e="",o=this.results_data,n=0,a=o.length;n<a;n++)i=o[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},e.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.title=t.title,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},e.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.title=t.title,e.innerHTML=t.search_text,this.outerHTML(e)):""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var t,e,i,n,a;for(n=this.results_data,a=[],e=0,i=n.length;e<i;e++)t=n[e],t.selected?a.push(t.selected=!1):a.push(void 0);return a},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(t){return this.results_showing?this.winnow_results(1):this.results_show()},e.prototype.winnow_results=function(t){var e,i,n,a,o,s,r,l,c,d,h,u,p;for(this.no_results_clear(),o=0,r=this.get_search_text(),e=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=this.search_contains?"":"^",n=new RegExp(a+e,"i"),d=new RegExp(e,"i"),p=this.results_data,h=0,u=p.length;h<u;h++)i=p[h],i.search_match=!1,s=null,this.include_option_in_results(i)&&(i.group&&(i.group_match=!1,i.active_options=0),null!=i.group_array_index&&this.results_data[i.group_array_index]&&(s=this.results_data[i.group_array_index],0===s.active_options&&s.search_match&&(o+=1),s.active_options+=1),i.group&&!this.group_search||(i.search_text=i.group?i.label:i.html,i.search_keys_match=this.search_string_match(i.search_keys,n),i.search_text_match=this.search_string_match(i.search_text,n),i.search_match=i.search_text_match||i.search_keys_match,i.search_match&&!i.group&&(o+=1),i.search_match?(i.search_text_match&&i.search_text.length?(l=i.search_text.search(d),c=i.search_text.substr(0,l+r.length)+"</em>"+i.search_text.substr(l+r.length),i.search_text=c.substr(0,l)+"<em>"+c.substr(l)):i.search_keys_match&&i.search_keys.length&&(l=i.search_keys.search(d),c=i.search_keys.substr(0,l+r.length)+"</em>"+i.search_keys.substr(l+r.length),i.search_text+='&nbsp; <small style="opacity: 0.7">'+c.substr(0,l)+"<em>"+c.substr(l)+"</small>"),null!=s&&(s.group_match=!0)):null!=i.group_array_index&&this.results_data[i.group_array_index].search_match&&(i.search_match=!0)));return this.result_clear_highlight(),o<1&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight(t))},e.prototype.search_string_match=function(t,e){var i,n,a,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(a=0,o=n.length;a<o;a++)if(i=n[a],e.test(i))return!0},e.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;e<i;e++)t=n[e],t.selected&&""!=t.value&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(t){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.classList.contains("form-control")?"100%":""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},e.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},e.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},e.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},e.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},e.default_multiple_text="",e.default_single_text="",e.default_no_result_text="No results match",e}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(e){var a,o;a=t(this),o=a.data("chosen"),"destroy"===n&&o?o.destroy():o||a.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return a=i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl");var n=this.form_field.getAttribute("data-css-class");return n&&e.push(n),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.options.drop_width&&this.dropdown.css("width",this.options.drop_width).addClass("chosen-drop-size-limited"),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},i.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())},i.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val())},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t,e){var i,n,a,o,s,r,l=-1;t.length&&(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),a=parseInt(this.search_results.css("maxHeight"),10),r=this.result_highlight.outerHeight(),s=this.search_results.scrollTop(),o=a+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),i=n+r,this.middle_highlight&&(e||"always"===this.middle_highlight||i>=o||n<s)?l=Math.min(n-r,Math.max(0,n-(a-r)/2)):i>=o?l=i-a>0?i-a:0:n<s&&(l=n),l>-1&&this.search_results.scrollTop(l))},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(1);var e=this.drop_direction;if("auto"===e)if(this.drop_directionFixed)e=this.drop_directionFixed;else{var i=this.container.find(".chosen-drop"),n=this.container.offset();n.top+i.outerHeight()+30>t(window).height()+t(window).scrollTop()&&(e="up"),this.drop_directionFixed=e}return this.container.toggleClass("chosen-up","up"===e),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this})},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this}),this.drop_directionFixed=0),this.results_showing=!1},i.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length&&(this.result_highlight=i,this.result_select(e))},i.prototype.search_results_mouseover=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(i)},i.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(e){var i,n,a=this;return i=t("<li />",{"class":"search-choice"}).html("<span title='"+e.html+"'>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return a.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").attr("title",t).text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(t){var e,i;if(i=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=i.length?i.first():this.search_results.find(".active-result").first(),null!=e)return this.result_do_highlight(e,t)},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,a,o,s,r,l,c;if(this.is_multiple){for(n=0,r=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=s.length;l<c;l++)a=s[l],o+=a+":"+this.search_field.css(a)+";";return e=t("<div />",{style:o}),e.text(this.search_field.val()),t("body").append(e),r=e.width()+25,e.remove(),i=this.container.outerWidth(),r>i-10&&(r=i-10),this.search_field.css({width:r+"px"})}},i}(e)}.call(this),function(t){"use strict";var e="zui.selectable",i=function(i,n){this.name=e,this.$=t(i),this.id=t.zui.uuid(),this.selectOrder=1,this.selections={},this.getOptions(n),this._init()},n=function(t,e,i){return t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height},a=function(t,e){var i=Math.max(t.left,e.left),a=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height);return n(i,a,t)&&n(o,s,t)&&n(i,a,e)&&n(o,s,e)};i.DEFAULTS={selector:"li,tr,div",trigger:"",selectClass:"active",rangeStyle:{border:"1px solid "+(t.zui.colorset?t.zui.colorset.primary:"#3280fc"),backgroundColor:t.zui.colorset?new t.zui.Color(t.zui.colorset.primary).fade(20).toCssStr():"rgba(50, 128, 252, 0.2)"},clickBehavior:"toggle",ignoreVal:3,listenClick:!0},i.prototype.getOptions=function(e){this.options=t.extend({},i.DEFAULTS,this.$.data(),e)},i.prototype.select=function(t){this.toggle(t,!0)},i.prototype.unselect=function(t){this.toggle(t,!1)},i.prototype.toggle=function(e,i,n){var a,o,s=this.options.selector,r=this;if(void 0===e)return void this.$.find(s).each(function(){r.toggle(this,i)});if("object"==typeof e?(a=t(e).closest(s),o=a.data("id")):(o=e,a=r.$.find('.slectable-item[data-id="'+o+'"]')),a&&a.length){if(o||(o=t.zui.uuid(),a.attr("data-id",o)),void 0!==i&&null!==i||(i=!r.selections[o]),!!i!=!!r.selections[o]){var l;t.isFunction(n)&&(l=n(i)),l!==!0&&(r.selections[o]=!!i&&r.selectOrder++,r.callEvent(i?"select":"unselect",{id:o,selections:r.selections,target:a,selected:r.getSelectedArray()},r))}r.options.selectClass&&a.toggleClass(r.options.selectClass,i)}},i.prototype.getSelectedArray=function(){var e=[];return t.each(this.selections,function(t,i){i&&e.push(t)}),e},i.prototype.syncSelectionsFromClass=function(){var e=this;e.$children=e.$.find(e.options.selector);e.selections={},e.$children.each(function(){var i=t(this);e.selections[i.data("id")]=i.hasClass(e.options.selectClass)})},i.prototype._init=function(){var e,i,n,o,s,r,l,c=this.options,d=this,h=c.ignoreVal,u=!0,p="."+this.name+"."+this.id,f=t.isFunction(c.checkFunc)?c.checkFunc:null,g=t.isFunction(c.rangeFunc)?c.rangeFunc:null,m=!1,v=null,_="mousedown"+p,y=function(){o&&d.$children.each(function(){var e=t(this),i=e.offset();i.width=e.outerWidth(),i.height=e.outerHeight();var n=g?g.call(this,o,i):a(o,i);if(f){var s=f.call(d,{intersect:n,target:e,range:o,targetRange:i});s===!0?d.select(e):s===!1&&d.unselect(e)}else n?d.select(e):d.multiKey||d.unselect(e)})},b=function(a){m&&(s=a.pageX,r=a.pageY,o={width:Math.abs(s-e),height:Math.abs(r-i),left:s>e?e:s,top:r>i?i:r},u&&o.width<h&&o.height<h||(n||(n=t('.selectable-range[data-id="'+d.id+'"]'),n.length||(n=t('<div class="selectable-range" data-id="'+d.id+'"></div>').css(t.extend({zIndex:1060,position:"absolute",top:e,left:i,pointerEvents:"none"},d.options.rangeStyle)).appendTo(t("body")))),n.css(o),clearTimeout(l),l=setTimeout(y,10),u=!1))},w=function(e){t(document).off(p),clearTimeout(v),m&&(m=!1,n&&n.remove(),u||o&&(clearTimeout(l),y(),o=null),d.callEvent("finish",{selections:d.selections,selected:d.getSelectedArray()}),e.preventDefault())},k=function(a){if(m)return w(a);var o=t.zui.getMouseButtonCode(c.mouseButton);if(!(o>-1&&a.button!==o||d.altKey||3===a.which||d.callEvent("start",a)===!1)){var s=d.$children=d.$.find(c.selector);s.addClass("slectable-item");var r=d.multiKey?"multi":c.clickBehavior;if("single"===r&&d.unselect(),c.listenClick&&("multi"===r?d.toggle(a.target):"single"===r?d.select(a.target):"toggle"===r&&d.toggle(a.target,null,function(t){d.unselect()})),d.callEvent("startDrag",a)===!1)return void d.callEvent("finish",{selections:d.selections,selected:d.getSelectedArray()});e=a.pageX,i=a.pageY,n=null,u=!0,m=!0,t(document).on("mousemove"+p,b).on("mouseup"+p,w),v=setTimeout(function(){t(document).on(_,w)},10),a.preventDefault()}},C=c.container&&"default"!==c.container?t(c.container):this.$;c.trigger?C.on(_,c.trigger,k):C.on(_,k),t(document).on("keydown",function(t){var e=t.keyCode;17===e||91==e?d.multiKey=e:18===e&&(d.altKey=!0)}).on("keyup",function(t){d.multiKey=!1,d.altKey=!1})},i.prototype.callEvent=function(e,i){var n=t.Event(e+"."+this.name);this.$.trigger(n,i);var a=n.result,o=this.options[e];return t.isFunction(o)&&(a=o.apply(this,t.isArray(i)?i:[i])),a},t.fn.selectable=function(n){return this.each(function(){var a=t(this),o=a.data(e),s="object"==typeof n&&n;o||a.data(e,o=new i(this,s)),"string"==typeof n&&o[n]()})},t.fn.selectable.Constructor=i,t(function(){t('[data-ride="selectable"]').selectable()})}(jQuery),/*!
 * jQuery Form Plugin
 * version: 4.2.2
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}(function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).closest("form").ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var a=n.closest("[type=submit]");if(0===a.length)return;i=a[0]}var o=i.form;if(o.clk=i,"image"===i.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=n.offset();o.clk_x=e.pageX-s.left,o.clk_y=e.pageY-s.top}else o.clk_x=e.pageX-i.offsetLeft,o.clk_y=e.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var a=/\r?\n/g,o={};o.fileapi=void 0!==t('<input type="file">').get(0).files,o.formdata=void 0!==window.FormData;var s=!!t.fn.prop;t.fn.attr2=function(){if(!s)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e,i,a,r){function l(i){var n,a,o=t.param(i,e.traditional).split("&"),s=o.length,r=[];for(n=0;n<s;n++)o[n]=o[n].replace(/\+/g," "),a=o[n].split("="),r.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return r}function c(i){function a(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){n("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){n("cannot get iframe.contentDocument: "+i),e=t.document}return e}function o(){function t(){try{var e=a(m).readyState;n("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){n("Server abort: ",e," (",e.name,")"),r(D),k&&clearTimeout(k),k=void 0}}var e=p.attr2("target"),i=p.attr2("action"),o=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";C.setAttribute("target",f),d&&!/post/i.test(d)||C.setAttribute("method","POST"),i!==h.url&&C.setAttribute("action",h.url),h.skipEncodingOverride||d&&!/post/i.test(d)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(k=setTimeout(function(){w=!0,r(E)},h.timeout));var s=[];try{if(h.extraData)for(var l in h.extraData)h.extraData.hasOwnProperty(l)&&(c.isPlainObject(h.extraData[l])&&h.extraData[l].hasOwnProperty("name")&&h.extraData[l].hasOwnProperty("value")?s.push(c('<input type="hidden" name="'+h.extraData[l].name+'">',T).val(h.extraData[l].value).appendTo(C)[0]):s.push(c('<input type="hidden" name="'+l+'">',T).val(h.extraData[l]).appendTo(C)[0]));h.iframeTarget||g.appendTo(S),m.attachEvent?m.attachEvent("onload",r):m.addEventListener("load",r,!1),setTimeout(t,15);try{C.submit()}catch(c){document.createElement("form").submit.apply(C)}}finally{C.setAttribute("action",i),C.setAttribute("enctype",o),e?C.setAttribute("target",e):p.removeAttr("target"),c(s).remove()}}function r(t){if(!_.aborted&&!U){if((A=a(m))||(n("cannot access response document"),t=D),t===E&&_)return _.abort("timeout"),void x.reject(_,"timeout");if(t===D&&_)return _.abort("server abort"),void x.reject(_,"error","server abort");if(A&&A.location.href!==h.iframeSrc||w){m.detachEvent?m.detachEvent("onload",r):m.removeEventListener("load",r,!1);var e,i="success";try{if(w)throw"timeout";var o="xml"===h.dataType||A.XMLDocument||v.isXMLDoc(A);if(n("isXml="+o),!o&&window.opera&&(null===A.body||!A.body.innerHTML)&&--I)return n("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var s=A.body?A.body:A.documentElement;_.responseText=s?s.innerHTML:null,_.responseXML=A.XMLDocument?A.XMLDocument:A,o&&(h.dataType="xml"),_.getResponseHeader=function(t){return{"content-type":h.dataType}[t.toLowerCase()]},s&&(_.status=Number(s.getAttribute("status"))||_.status,_.statusText=s.getAttribute("statusText")||_.statusText);var l=(h.dataType||"").toLowerCase(),c=/(json|script|text)/.test(l);if(c||h.textarea){var d=A.getElementsByTagName("textarea")[0];if(d)_.responseText=d.value,_.status=Number(d.getAttribute("status"))||_.status,_.statusText=d.getAttribute("statusText")||_.statusText;else if(c){var p=A.getElementsByTagName("pre")[0],f=A.getElementsByTagName("body")[0];p?_.responseText=p.textContent?p.textContent:p.innerText:f&&(_.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"===l&&!_.responseXML&&_.responseText&&(_.responseXML=L(_.responseText));try{P=K(_,l,h)}catch(v){i="parsererror",_.error=e=v||i}}catch(v){n("error caught: ",v),i="error",_.error=e=v||i}_.aborted&&(n("upload aborted"),i=null),_.status&&(i=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===i?(h.success&&h.success.call(h.context,P,"success",_),x.resolve(_.responseText,"success",_),u&&v.event.trigger("ajaxSuccess",[_,h])):i&&(void 0===e&&(e=_.statusText),h.error&&h.error.call(h.context,_,i,e),x.reject(_,"error",e),u&&v.event.trigger("ajaxError",[_,h,e])),u&&v.event.trigger("ajaxComplete",[_,h]),u&&!--v.active&&v.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,_,i),U=!0,h.timeout&&clearTimeout(k),setTimeout(function(){h.iframeTarget?g.attr("src",h.iframeSrc):g.remove(),_.responseXML=null},100)}}}var l,c,h,u,f,g,m,_,y,b,w,k,C=p[0],x=t.Deferred();if(x.abort=function(t){_.abort(t)},i)for(c=0;c<v.length;c++)l=t(v[c]),s?l.prop("disabled",!1):l.removeAttr("disabled");(h=t.extend(!0,{},t.ajaxSettings,e)).context=h.context||h,f="jqFormIO"+(new Date).getTime();var T=C.ownerDocument,S=p.closest("body");if(h.iframeTarget?(b=(g=t(h.iframeTarget,T)).attr2("name"))?f=b:g.attr2("name",f):(g=t('<iframe name="'+f+'" src="'+h.iframeSrc+'" />',T)).css({position:"absolute",top:"-1000px",left:"-1000px"}),m=g[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";n("aborting upload... "+e),this.aborted=1;try{m.contentWindow.document.execCommand&&m.contentWindow.document.execCommand("Stop")}catch(i){}g.attr("src",h.iframeSrc),_.error=e,h.error&&h.error.call(h.context,_,e,t),u&&i.event.trigger("ajaxError",[_,h,e]),h.complete&&h.complete.call(h.context,_,e)}},(u=h.global)&&0==t.active++&&t.event.trigger("ajaxStart"),u&&t.event.trigger("ajaxSend",[_,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,_,h))return h.global&&t.active--,x.reject(),x;if(_.aborted)return x.reject(),x;(y=C.clk)&&(b=y.name)&&!y.disabled&&(h.extraData=h.extraData||{},h.extraData[b]=y.value,"image"===y.type&&(h.extraData[b+".x"]=C.clk_x,h.extraData[b+".y"]=C.clk_y));var E=1,D=2,M=t("meta[name=csrf-token]").attr("content"),F=t("meta[name=csrf-param]").attr("content");F&&M&&(h.extraData=h.extraData||{},h.extraData[F]=M),h.forceSync?o():setTimeout(o,10);var P,A,U,I=50,L=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},N=t.parseJSON||function(t){return window.eval("("+t+")")},K=function(e,i,n){var a=e.getResponseHeader("content-type")||"",o=("xml"===i||!i)&&a.indexOf("xml")>=0,s=o?e.responseXML:e.responseText;return o&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(s=n.dataFilter(s,i)),"string"==typeof s&&(("json"===i||!i)&&a.indexOf("json")>=0?s=N(s):("script"===i||!i)&&a.indexOf("javascript")>=0&&t.globalEval(s)),s};return x}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var d,h,u,p=this;"function"==typeof e?e={success:e}:"string"==typeof e||!1===e&&arguments.length>0?(e={url:e,data:i,dataType:a},"function"==typeof r&&(e.success=r)):void 0===e&&(e={}),d=e.method||e.type||this.attr2("method"),(u=(u="string"==typeof(h=e.url||this.attr2("action"))?t.trim(h):"")||window.location.href||"")&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:d||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var f={};if(this.trigger("form-pre-serialize",[this,e,f]),f.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var g=e.traditional;void 0===g&&(g=t.ajaxSettings.traditional);var m,v=[],_=this.formToArray(e.semantic,v,e.filtering);if(e.data){var y=t.isFunction(e.data)?e.data(_):e.data;e.extraData=y,m=t.param(y,g)}if(e.beforeSubmit&&!1===e.beforeSubmit(_,this,e))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[_,this,e,f]),f.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var b=t.param(_,g);m&&(b=b?b+"&"+m:m),"GET"===e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+b,e.data=null):e.data=b;var w=[];if(e.resetForm&&w.push(function(){p.resetForm()}),e.clearForm&&w.push(function(){p.clearForm(e.includeHidden)}),!e.dataType&&e.target){var k=e.success||function(){};w.push(function(i,n,a){var o=arguments,s=e.replaceTarget?"replaceWith":"html";t(e.target)[s](i).each(function(){k.apply(this,o)})})}else e.success&&(t.isArray(e.success)?t.merge(w,e.success):w.push(e.success));if(e.success=function(t,i,n){for(var a=e.context||this,o=0,s=w.length;o<s;o++)w[o].apply(a,[t,i,n||p,p])},e.error){var C=e.error;e.error=function(t,i,n){var a=e.context||this;C.apply(a,[t,i,n,p])}}if(e.complete){var x=e.complete;e.complete=function(t,i){var n=e.context||this;x.apply(n,[t,i,p])}}var T=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}).length>0,S="multipart/form-data",E=p.attr("enctype")===S||p.attr("encoding")===S,D=o.fileapi&&o.formdata;n("fileAPI :"+D);var M,F=(T||E)&&!D;!1!==e.iframe&&(e.iframe||F)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){M=c(_)}):M=c(_):M=(T||E)&&D?function(i){for(var n=new FormData,a=0;a<i.length;a++)n.append(i[a].name,i[a].value);if(e.extraData){var o=l(e.extraData);for(a=0;a<o.length;a++)o[a]&&n.append(o[a][0],o[a][1])}e.data=null;var s=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:d||"POST"});e.uploadProgress&&(s.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,a=t.total;t.lengthComputable&&(i=Math.ceil(n/a*100)),e.uploadProgress(t,n,a,i)},!1),i}),s.data=null;var r=s.beforeSend;return s.beforeSend=function(t,i){e.formData?i.data=e.formData:i.data=n,r&&r.call(this,t,i)},t.ajax(s)}(_):t.ajax(e),p.removeData("jqxhr").data("jqxhr",M);for(var P=0;P<v.length;P++)v[P]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(a,o,s,r){if(("string"==typeof a||!1===a&&arguments.length>0)&&(a={url:a,data:o,dataType:s},"function"==typeof r&&(a.success=r)),a=a||{},a.delegation=a.delegation&&t.isFunction(t.fn.on),!a.delegation&&0===this.length){var l={s:this.selector,c:this.context};return!t.isReady&&l.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(l.s,l.c).ajaxForm(a)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return a.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,a,e).on("click.form-plugin",this.selector,a,i),this):this.ajaxFormUnbind().on("submit.form-plugin",a,e).on("click.form-plugin",a,i)},t.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i,n){var a=[];if(0===this.length)return a;var s,r=this[0],l=this.attr("id"),c=e||void 0===r.elements?r.getElementsByTagName("*"):r.elements;if(c&&(c=t.makeArray(c)),l&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(s=t(':input[form="'+l+'"]').get()).length&&(c=(c||[]).concat(s)),!c||!c.length)return a;t.isFunction(n)&&(c=t.map(c,n));var d,h,u,p,f,g,m;for(d=0,g=c.length;d<g;d++)if(f=c[d],(u=f.name)&&!f.disabled)if(e&&r.clk&&"image"===f.type)r.clk===f&&(a.push({name:u,value:t(f).val(),type:f.type}),a.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));else if((p=t.fieldValue(f,!0))&&p.constructor===Array)for(i&&i.push(f),h=0,m=p.length;h<m;h++)a.push({name:u,value:p[h]});else if(o.fileapi&&"file"===f.type){i&&i.push(f);var v=f.files;if(v.length)for(h=0;h<v.length;h++)a.push({name:u,value:v[h],type:f.type});else a.push({name:u,value:"",type:f.type})}else null!==p&&void 0!==p&&(i&&i.push(f),a.push({name:u,value:p,type:f.type,required:f.required}));if(!e&&r.clk){var _=t(r.clk),y=_[0];(u=y.name)&&!y.disabled&&"image"===y.type&&(a.push({name:u,value:_.val()}),a.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))}return a},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var a=t.fieldValue(this,e);if(a&&a.constructor===Array)for(var o=0,s=a.length;o<s;o++)i.push({name:n,value:a[o]});else null!==a&&void 0!==a&&i.push({name:this.name,value:a})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,a=this.length;n<a;n++){var o=this[n],s=t.fieldValue(o,e);null===s||void 0===s||s.constructor===Array&&!s.length||(s.constructor===Array?t.merge(i,s):i.push(s))}return i},t.fieldValue=function(e,i){var n=e.name,o=e.type,s=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"===o||"button"===o||("checkbox"===o||"radio"===o)&&!e.checked||("submit"===o||"image"===o)&&e.form&&e.form.clk!==e||"select"===s&&-1===e.selectedIndex))return null;if("select"===s){var r=e.selectedIndex;if(r<0)return null;for(var l=[],c=e.options,d="select-one"===o,h=d?r+1:c.length,u=d?r:0;u<h;u++){var p=c[u];if(p.selected&&!p.disabled){var f=p.value;if(f||(f=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),d)return f;l.push(f)}}return l}return t(e).val().replace(a,"\r\n")},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,a=this.tagName.toLowerCase();i.test(n)||"textarea"===a?this.value="":"checkbox"===n||"radio"===n?this.checked=!1:"select"===a?this.selectedIndex=-1:"file"===n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){var e=t(this),i=this.tagName.toLowerCase();switch(i){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=e.parents("select");return n.length&&n[0].multiple?"option"===i?this.selected=this.defaultSelected:e.find("option").resetForm():n.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var a=t(e.attr("for")),o=e.find("input,select,textarea");return a[0]&&o.unshift(a[0]),o.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"===i||"radio"===i)this.checked=e;else if("option"===this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"===n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){"use strict";function e(e,i){if(e===!1)return e;if(!e)return i;e===!0?e={add:!0,"delete":!0,edit:!0,sort:!0}:"string"==typeof e&&(e=e.split(","));var n;return t.isArray(e)&&(n={},t.each(e,function(e,i){t.isPlainObject(i)?n[i.action]=i:n[i]=!0}),e=n),t.isPlainObject(e)&&(n={},t.each(e,function(e,i){i?n[e]=t.extend({type:e},s[e],t.isPlainObject(i)?i:null):n[e]=!1}),e=n),i?t.extend(!0,{},i,e):e}function i(e,i,n){return i=i||e.type,t(n||e.template).addClass("tree-action").attr(t.extend({"data-type":i,title:e.title||""},e.attr)).data("action",e)}var n="zui.tree",a=0,o=function(e,i){this.name=n,this.$=t(e),this.getOptions(i),this._init()},s={sort:{template:'<a class="sort-handler" href="javascript:;"><i class="icon icon-move"></i></a>'},add:{template:'<a href="javascript:;"><i class="icon icon-plus"></i></a>'},edit:{template:'<a href="javascript:;"><i class="icon icon-pencil"></i></a>'},"delete":{template:'<a href="javascript:;"><i class="icon icon-trash"></i></a>'}};o.DEFAULTS={animate:null,initialState:"normal",toggleTemplate:'<i class="list-toggle icon"></i>'},o.prototype.add=function(e,i,n,a,o){var s,r=t(e),l=this.options;if(r.is("li")?(s=r.children("ul"),s.length||(s=t("<ul/>"),r.append(s),this._initList(s,r))):s=r,s){var c=this;t.isArray(i)||(i=[i]),t.each(i,function(e,i){var n=t("<li/>").data(i).appendTo(s);void 0!==i.id&&n.attr("data-id",i.id);var a=l.itemWrapper?t(l.itemWrapper===!0?'<div class="tree-item-wrapper"/>':l.itemWrapper).appendTo(n):n;if(i.html)a.html(i.html);else if(t.isFunction(c.options.itemCreator)){var o=c.options.itemCreator(n,i);o!==!0&&o!==!1&&a.html(o)}else i.url?a.append(t("<a/>",{href:i.url}).text(i.title||i.name)):a.append(t("<span/>").text(i.title||i.name));c._initItem(n,i.idx||e,s,i),i.children&&i.children.length&&c.add(n,i.children)}),this._initList(s),n&&!s.hasClass("tree")&&c.expand(s.parent("li"),a,o)}},o.prototype.reload=function(e){var i=this;e&&(i.$.empty(),i.add(i.$,e)),i.isPreserve&&i.store.time&&i.$.find("li:not(.tree-action-item)").each(function(){var e=t(this);i[i.store[e.data("id")]?"expand":"collapse"](e,!0,!0)})},o.prototype._initList=function(n,a,o,s){var r=this;n.hasClass("tree")?(o=0,a=null):(a=(a||n.closest("li")).addClass("has-list"),a.find(".list-toggle").length||a.prepend(this.options.toggleTemplate),o=o||a.data("idx"));var l=n.attr("data-idx",o||0).children("li:not(.tree-action-item)").each(function(e){r._initItem(t(this),e+1,n)});1!==l.length||l.find("ul").length||l.addClass("tree-single-item"),s=s||(a?a.data():null);var c=e(s?s.actions:null,this.actions);if(c){if(c.add&&c.add.templateInList!==!1){var d=n.children("li.tree-action-item");d.length?d.detach().appendTo(n):t('<li class="tree-action-item"/>').append(i(c.add,"add",c.add.templateInList)).appendTo(n)}c.sort&&n.sortable(t.extend({dragCssClass:"tree-drag-holder",trigger:".sort-handler",selector:"li:not(.tree-action-item)",finish:function(t){r.callEvent("action",{action:c.sort,$list:n,target:t.target,item:s})}},c.sort.options,t.isPlainObject(this.options.sortable)?this.options.sortable:null))}a&&(a.hasClass("open")||s&&s.open)&&a.addClass("open in")},o.prototype._initItem=function(n,a,o,s){if(void 0===a){var r=n.prev("li");a=r.length?r.data("idx")+1:1}if(o=o||n.closest("ul"),n.attr("data-idx",a).removeClass("tree-single-item"),!n.data("id")){var l=a;o.hasClass("tree")||(l=o.parent("li").data("id")+"-"+l),n.attr("data-id",l)}s=s||n.data();var c=e(s.actions,this.actions);if(c){var d=n.find(".tree-actions");d.length||(d=t('<div class="tree-actions"/>').appendTo(this.options.itemWrapper?n.find(".tree-item-wrapper"):n),t.each(c,function(t,e){e&&d.append(i(e,t))}))}var h=n.children("ul");h.length&&this._initList(h,n,a,s)},o.prototype._init=function(){var i=this.options,o=this;this.actions=e(i.actions),this.$.addClass("tree"),i.animate&&this.$.addClass("tree-animate"),this._initList(this.$);var s=i.initialState,r=t.zui&&t.zui.store&&t.zui.store.enable;r&&(this.selector=n+"::"+(i.name||"")+"#"+(this.$.attr("id")||a++),this.store=t.zui.store[i.name?"get":"pageGet"](this.selector,{})),"preserve"===s&&(r?this.isPreserve=!0:this.options.initialState=s="normal"),this.reload(i.data),r&&(this.isPreserve=!0),"expand"===s?this.expand():"collapse"===s&&this.collapse(),this.$.on("click",'.list-toggle,a[href="#"],.tree-toggle',function(e){var i=t(this),n=i.parent("li");o.callEvent("hit",{target:n,item:n.data()}),o.toggle(n),i.is("a")&&e.preventDefault()}).on("click",".tree-action",function(){var e=t(this),i=e.data();if(i.action&&(i=i.action),"sort"!==i.type){var n=e.closest("li:not(.tree-action-item)");o.callEvent("action",{action:i,target:this,$item:n,item:n.data()})}})},o.prototype.preserve=function(e,i,n){if(this.isPreserve)if(e)i=i||e.data("id"),n=void 0===n&&e.hasClass("open"),n?this.store[i]=n:delete this.store[i],this.store.time=(new Date).getTime(),t.zui.store[this.options.name?"set":"pageSet"](this.selector,this.store);else{var a=this;this.store={},this.$.find("li").each(function(){a.preserve(t(this))})}},o.prototype.expand=function(t,e,i){t?(t.addClass("open"),!e&&this.options.animate?setTimeout(function(){t.addClass("in")},10):t.addClass("in")):t=this.$.find("li.has-list").addClass("open in"),i||this.preserve(t),this.callEvent("expand",t,this)},o.prototype.show=function(e,i,n){var a=this;e.each(function(){var e=t(this);if(a.expand(e,i,n),e)for(var o=e.parent("ul");o&&o.length&&!o.hasClass("tree");){var s=o.parent("li");s.length?(a.expand(s,i,n),o=s.parent("ul")):o=!1}})},o.prototype.collapse=function(t,e,i){t?!e&&this.options.animate?(t.removeClass("in"),setTimeout(function(){t.removeClass("open")},300)):t.removeClass("open in"):t=this.$.find("li.has-list").removeClass("open in"),i||this.preserve(t),this.callEvent("collapse",t,this)},o.prototype.toggle=function(t){var e=t&&t.hasClass("open")||t===!1||void 0===t&&this.$.find("li.has-list.open").length;this[e?"collapse":"expand"](t)},o.prototype.getOptions=function(e){this.options=t.extend({},o.DEFAULTS,this.$.data(),e),null===this.options.animate&&this.$.hasClass("tree-animate")&&(this.options.animate=!0)},o.prototype.toData=function(e,i){t.isFunction(e)&&(i=e,e=null),e=e||this.$;var n=this;return e.children("li:not(.tree-action-item)").map(function(){var e=t(this),a=e.data();delete a["zui.droppable"];var o=e.children("ul");return o.length&&(a.children=n.toData(o)),t.isFunction(i)?i(a,e):a}).get()},o.prototype.callEvent=function(e,i){var n;return t.isFunction(this.options[e])&&(n=this.options[e](i,this)),this.$.trigger(t.Event(e+"."+this.name,i)),n},t.fn.tree=function(e,i){return this.each(function(){var a=t(this),s=a.data(n),r="object"==typeof e&&e;s||a.data(n,s=new o(this,r)),"string"==typeof e&&s[e](i)})},t.fn.tree.Constructor=o,t(function(){t('[data-ride="tree"]').tree()})}(jQuery),function(t){"use strict";var e="zui.colorPicker",i='<div class="colorpicker"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown"><span class="cp-title"></span><i class="ic"></i></button><ul class="dropdown-menu clearfix"></ul></div>',n={zh_cn:{errorTip:"不是有效的颜色值"},zh_tw:{errorTip:"不是有效的顏色值"},en:{errorTip:"Not a valid color value"}},a=function(i,n){this.name=e,this.$=t(i),this.getOptions(n),this.init()};a.DEFAULTS={colors:["#00BCD4","#388E3C","#3280fc","#3F51B5","#9C27B0","#795548","#F57C00","#F44336","#E91E63"],pullMenuRight:!0,wrapper:"btn-wrapper",tileSize:30,lineCount:5,optional:!0,tooltip:"top",icon:"caret-down",updateBtn:!0},a.prototype.init=function(){var e=this,n=e.options,a=e.$,o=a.parent(),s=!1;o.hasClass("colorpicker")?e.$picker=o:(e.$picker=t(n.template||i),s=!0),e.$picker.addClass(n.wrapper).find(".cp-title").toggle(void 0!==n.title).text(n.title),e.$menu=e.$picker.find(".dropdown-menu").toggleClass("pull-right",n.pullMenuRight),e.$btn=e.$picker.find(".btn.dropdown-toggle"),e.$btn.find(".ic").addClass("icon-"+n.icon),n.btnTip&&e.$picker.attr("data-toggle","tooltip").tooltip({title:n.btnTip,placement:n.tooltip,container:"body"}),a.attr("data-provide",null),s&&a.after(e.$picker),e.colors={},t.each(n.colors,function(i,n){if(t.zui.Color.isColor(n)){var a=new t.zui.Color(n);e.colors[a.toCssStr()]=a}}),e.updateColors(),e.$picker.on("click",".cp-tile",function(){e.setValue(t(this).data("color"))});var r=function(){var i=a.val(),o=t.zui.Color.isColor(i);a.parent().toggleClass("has-error",!(o||n.optional&&""===i)),o?e.setValue(i,!0):n.optional&&""===i?a.tooltip("hide"):a.is(":focus")||a.tooltip("show",n.errorTip)};a.is("input:not([type=hidden])")?(n.tooltip&&a.attr("data-toggle","tooltip").tooltip({trigger:"manual",placement:n.tooltip,tipClass:"tooltip-danger",container:"body"}),a.on("keyup paste input change",r)):a.appendTo(e.$picker),r()},a.prototype.addColor=function(e){e instanceof t.zui.Color||(e=new t.zui.Color(e));var i=e.toCssStr(),n=this.options;this.colors[i]||(this.colors[i]=e);var a=t('<a href="###" class="cp-tile"></a>',{titile:e}).data("color",e).css({color:e.contrast().toCssStr(),background:i,"border-color":e.luma()>.43?"#ccc":"transparent"}).attr("data-color",i);this.$menu.append(t("<li/>").css({width:n.tileSize,height:n.tileSize}).append(a)),n.optional&&this.$menu.find(".cp-tile.empty").parent().detach().appendTo(this.$menu)},a.prototype.updateColors=function(e){var i=(this.$picker,this.$menu.children("li:not(.heading)").remove()),n=this.options,e=e||this.colors,a=this,o=0;if(t.each(e,function(t,e){a.addColor(e),o++}),n.optional){var s=t('<li><a class="cp-tile empty" href="###"></a></li>').css({width:n.tileSize,height:n.tileSize});this.$menu.append(s),o++}i.css("width",Math.min(o,n.lineCount)*n.tileSize+6)},a.prototype.setValue=function(e,i){var n=this.options;this.$menu.find(".cp-tile.active").removeClass("active");var a="",o=n.updateBtn;if(e){var s=new t.zui.Color(e);a=s.toCssStr().toLowerCase(),o&&(t.isFunction(o)?o(a,this.$btn,this):this.$btn.css({background:a,color:s.contrast().toCssStr(),borderColor:s.luma()>.43?"#ccc":a})),this.colors[a]||this.addColor(s),i||this.$.val().toLowerCase()===a||this.$.val(a).trigger("change"),this.$menu.find('.cp-tile[data-color="'+a+'"]').addClass("active"),this.$.tooltip("hide"),this.$.trigger("colorchange",s)}else o&&(t.isFunction(o)?o(null,this.$btn,this):this.$btn.attr("style",null)),i||""===this.$.val()||this.$.val(a).trigger("change"),n.optional&&this.$.tooltip("hide"),this.$menu.find(".cp-tile.empty").addClass("active"),this.$.trigger("colorchange",null);n.updateBorder&&t(n.updateBorder).css("border-color",a),n.updateBackground&&t(n.updateBackground).css("background-color",a),n.updateColor&&t(n.updateColor).css("color",a),n.updateText&&t(n.updateText).text(a)},a.prototype.getOptions=function(e){var i=t.extend({},a.DEFAULTS,this.$.data(),e);"string"==typeof i.colors&&(i.colors=i.colors.split(","));var o=(i.lang||t.zui.clientLang()).toLowerCase();i.errorTip||(i.errorTip=n[o].errorTip),t.fn.tooltip||(i.btnTip=!1),this.options=i},t.fn.colorPicker=function(i){return this.each(function(){var n=t(this),o=n.data(e),s="object"==typeof i&&i;o||n.data(e,o=new a(this,s)),"string"==typeof i&&o[i]()})},t.fn.colorPicker.Constructor=a,t(function(){t('[data-provide="colorpicker"]').colorPicker()})}(jQuery),function(t){jQuery.fn.sparkline=function(e){t(this).each(function(){var i=t(this),n=t.extend({values:i.attr("values"),width:i.width()-4,height:i.height()-4},i.data(),e),a=n.height,o=[],s=n.width,r=n.values.split(","),l=0;for(var c in r){var d=parseFloat(r[c]);NaN!=d&&(o.push(d),l=Math.max(d,l))}var h=Math.min(l,30),u=(Math.ceil(l/h),Math.min(s,Math.max(10,o.length*s/30))),p=i.children("canvas");p.length||(i.append('<canvas class="projectline-canvas"></canvas>'),p=i.children("canvas")),p.attr("width",u).attr("height",a);var f={labels:o,datasets:[{fillColor:"rgba(0,0,255,0.05)",strokeColor:"#0054EC",pointColor:"rgba(255,136,0,1)",pointStrokeColor:"#fff",data:o}]},g={animation:!0,scaleOverride:!0,scaleStepWidth:Math.ceil(l/10),scaleSteps:10,scaleStartValue:0,showScale:!1,showTooltips:!1,pointDot:!1,scaleShowGridLines:!1,datasetStrokeWidth:1},m=t(p).lineChart(f,g);i.data("sparklineChart",m)})},t(function(){t(".sparkline").sparkline()})}(jQuery),function(t){t(function(){t.fn.fixedDate=function(){return t(this).each(function(){var e=t(this);e.offset().top+200>t(document.body).height()&&e.attr("data-picker-position","top-right"),"0000-00-00"==e.val()&&e.focus(function(){"0000-00-00"==e.val()&&e.val("").datetimepicker("update")}).blur(function(){""==e.val()&&e.val("0000-00-00")})})};var e={language:t("html").attr("lang"),weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1,format:"yyyy-mm-dd hh:ii",startDate:"1970-1-1"},i=t.extend({},e,{minView:2,format:"yyyy-mm-dd"}),n=t.extend({},e,{startView:1,minView:0,maxView:1,format:"hh:ii"});t(".datepicker-wrapper").click(function(){t(this).find(".form-date, .form-datetime, .form-time").datetimepicker("show").focus()}),window.datepickerOptions=e,t.fn.datepicker=function(e){return this.datetimepicker(t.extend({},i,e))},t.fn.timepicker=function(e){return this.datetimepicker(t.extend({},n,e))},t.fn.datepickerAll=function(){return this.find(".form-datetime").fixedDate().datetimepicker(e),this.find(".form-date").fixedDate().datepicker(),this.find(".form-time").fixedDate().timepicker(),this},t("body").datepickerAll()})}(jQuery),function(t){var e=function(e,i){i=t.extend({idStart:0,idEnd:9,chosen:!0,datetimepicker:!0,colorPicker:!0,hotkeys:!0},i,e.data());var n=e.find(".template");!n.length&&i.template&&(n=t(i.template));var a=0,o=0,s=function(t){t.is("select.chosen")?t.next(".chosen-container").find("input").focus():t.focus()},r=function(t){var i=e.find("[data-ctrl-index]:focus,.chosen-container-active").first();if(i.length){if(i.is(".chosen-container-active")){if(i.hasClass("chosen-with-drop")&&("down"===t||"up"===t))return;i=i.prev("select.chosen")}var n=i.data("ctrlIndex"),r=i.closest("tr").data("row");"down"===t?r<o-1?r+=1:r=0:"up"===t?r>0?r-=1:r=o-1:"left"===t?n>0?n-=1:n=a-1:"right"===t&&(n<a-1?n+=1:n=0),s(e.find('tr[data-row="'+r+'"]').find('[data-ctrl-index="'+n+'"]'))}},l={options:i,focusNext:r,focusControl:s},c=e.find("tbody,.batch-rows");if(n.length){var d=n.remove().html(),h=function(e,s){var r=d;"number"!=typeof e&&(e=o),o=Math.max(e+1,o),r=r.replace(/\$idPlus/g,e+1).replace(/\$id/g,e);var l=t("<"+n[0].tagName.toLowerCase()+" />").html(r);l.attr("data-row",e).addClass(n.attr("class")).removeClass("template"),i.rowCreator&&i.rowCreator(l,e,i),s?s.after(l):c.append(l),t.fn.chosen&&i.chosen&&l.find(".chosen").chosen(t.isPlainObject(i.chosen)?i.chosen:null),t.fn.datetimepicker&&i.datetimepicker&&l.datepickerAll(t.isPlainObject(i.datetimepicker)?i.datetimepicker:null),t.fn.colorPicker&&i.colorPicker&&l.find("input.colorpicker").colorPicker(t.isPlainObject(i.colorPicker)?i.colorPicker:null);var h=0;return l.find('input[type!="hidden"],textarea,select').each(function(){var e=t(this);e.parent().hasClass("chosen-search")||e.attr("data-ctrl-index",h++)}),a=Math.max(a,h),l};t.extend(l,{createRow:h,template:d});for(var u=i.idStart;u<=i.idEnd;++u)h(u)}e.on("click",".btn-copy",function(){var e=t(this),i=t(e.data("copyFrom")).val(),n=t(e.data("copyTo")).val(i).addClass("highlight");setTimeout(function(){n.removeClass("highlight")},2e3)}),i.hotkeys&&t(document).on("keydown",function(t){var e={"Ctrl+#37":"left","Ctrl+#39":"right","#38":"up","#40":"down","Ctrl+#38":"up","Ctrl+#40":"down"},i=[];t.ctrlKey&&i.push("Ctrl"),i.push("#"+t.keyCode);var n=e[i.join("+")];n&&(r(n),t.ctrlKey&&(t.stopPropagation(),t.preventDefault()))}),e.data("zui.batchActionForm",l)};t.fn.batchActionForm=function(i){return this.each(function(){e(t(this),i)})}}(jQuery),function(t,e){"use strict";var i="zui.table",n={zh_cn:{selectedItems:"已选择 <strong>{0}</strong> 项",attrTotal:"{0}总计 <strong>{1}</strong>"},zh_tw:{
selectedItems:"已选择 <strong>{0}</strong> 项",attrTotal:"{0}总计 <strong>{1}</strong>"},en:{selectedItems:"Seleted <strong>{0}</strong> items",attrTotal:"{0} total <strong>{1}</strong>"}},a=function(e,o){var s=this;s.name=i;var r=s.$=t(e);o=s.options=t.extend({},a.DEFAULTS,this.$.data(),o);var l=o.lang||"zh_cn";s.lang=t.isPlainObject(l)?t.extend(!0,{},n[l.lang||t.zui.clientLang()],l):n[l];var c=s.$table=r.is("table")?r:r.find("table"),d=s.$tbody=c.find("tbody");s.$header=c.find("thead"),s.$footer=r.find(".table-footer");var h=s.$form=r.is("form")?r:r.find("form");o.checkable&&(r.on("click",".check-all",function(){s.checkAll(!t(this).hasClass("checked"))}),d.on("click","tr",function(){s.checkRow(t(this))}).on("click",'input[type="checkbox"]',function(e){e.stopPropagation();var i=t(this);s.checkRow(i.closest("tr"),i.is(":checked"))}).on("click","a,.btn",function(t){t.stopPropagation()}),o.selectable&&d.selectable(t.extend({},{selector:"tr",selectClass:"",trigger:".c-id",clickBehavior:"multi",listenClick:!1,select:function(t){s.checkRow(t.target,!0)},unselect:function(t){s.checkRow(t.target,!1)},rangeStyle:{border:"1px solid #006af1",backgroundColor:"rgba(50, 128, 252, 0.2)",borderRadius:"2px"}},t.isPlainObject(o.selectable)?o.selectable:null))),h.length&&(o.ajaxForm?h.ajaxForm(t.isPlainObject(o.ajaxForm)?o.ajaxForm:null):h.on("click","[data-form-action]",function(){h.attr("action",t(this).data("formAction")).submit()})),(o.fixFooter||o.fixHeader)&&(s.pageFooterHeight=t("#footer").outerHeight(),s.updateFixUI(),t(window).on("scroll resize",function(){s.updateFixUI()})),s.$statistic=r.find(".table-statistic"),s.defaultStatistic=s.$statistic.html(),s.updateStatistic()};a.prototype.updateStatistic=function(){var i=this,n=i.$statistic;if(n.length){i.defaultStatistic===e&&(i.defaultStatistic=n.html());var a=i.statisticCols;if(!a&&a!==!1){a={};var o=!1;i.$header.find("th").each(function(e){var i=t(this),n=i.data("statistic");n&&(o=!0,a[e]={format:n,name:i.text()})}),i.statisticCols=!!o&&a}var s=0;a&&t.each(a,function(t){a[t].total=0,a[t].checkedTotal=0}),i.$tbody.children("tr").each(function(e){var i=t(this),n=i.hasClass("checked"),o=i.children("td");n&&s++,a&&t.each(a,function(t){var e=parseFloat(o.eq(t).text());isNaN(e)&&(e=0),a[t].total+=e,n&&(a[t].checkedTotal+=e)})});var r=[];if(s)r.push(i.lang.selectedItems.format(s));else if(i.defaultStatistic)return void n.html(i.defaultStatistic);a&&t.each(a,function(t){var e=a[t],n=e[s?"checkedTotal":"total"];e.format&&(n=e.format.format(n)),r.push(i.lang.attrTotal.format(e.name,n))}),n.html(r.join(", "))}},a.prototype.updateFixUI=function(t){var e=this,i=(new Date).getTime();return!t&&(e.lastUpdateCall&&clearTimeout(e.lastUpdateCall),!e.lastUpdateTime||i-e.lastUpdateTime<100)?void(e.lastUpdateCall=setTimeout(function(){e.updateFixUI(!0)},30)):(e.lastUpdateTime=i,e.lastUpdateCall&&(clearTimeout(e.lastUpdateCall),e.lastUpdateCall=null),e.options.fixHeader&&e.fixHeader(),void(e.options.fixFooter&&e.fixFooter()))},a.prototype.fixHeader=function(){var e=this,i=e.$header,n=i[0].getBoundingClientRect(),a=e.options.fixFooter,o=t.isFunction(a)?a(n,i):n.top<("number"==typeof a?a:-5),s=e.$.find("table.fixed-header-copy");if(o){s.length||(s=t('<table class="fixed-header-copy"></table>').addClass(e.$table.attr("class")).append(i.clone()).insertAfter(e.$table)),s.css({top:0,left:n.left,position:"fixed",width:n.width});var r=s.find("th");i.find("th").each(function(e){r.eq(e).css("width",t(this).outerWidth())})}else s.remove()},a.prototype.fixFooter=function(){var e=this,i=e.$footer,n=e.$tbody,a=n[0].getBoundingClientRect(),o=e.options.fixFooter;i.toggleClass("fixed-footer",!!s);var s=t.isFunction(o)?o(a,i):a.bottom>window.innerHeight-50-("number"==typeof o?o:e.pageFooterHeight||5);i.toggleClass("fixed-footer",!!s),s?i.css({bottom:e.pageFooterHeight,left:a.left,width:a.width}):i.css({width:""})},a.prototype.checkAll=function(e){var i=this,n=i.$tbody.find("tr");n.each(function(){i.checkRow(t(this),e,!0)}),i.updateCheckUI()},a.prototype.checkRow=function(t,i,n){var a=t.find('input[type="checkbox"]');i===e&&(i=!a.is(":checked")),t.toggleClass("checked",i),a.prop("checked",i),n||this.updateCheckUI()},a.prototype.updateCheckUI=function(){var e=this.$tbody.find("tr"),i=!1,n=null,a=0,o=!1,s=e.length;e.each(function(e){var r=t(this);o=r.hasClass("checked"),r.toggleClass("row-check-begin",o&&!i),n&&n.toggleClass("row-check-end",!o&&i),o&&(a+=1),n=r,i=o,s===e+1&&r.toggleClass("row-check-end",o)}),this.$.toggleClass("has-row-checked",a>0).find(".check-all").toggleClass("checked",a===s),this.updateStatistic()},a.DEFAULTS={checkable:!0,ajaxForm:!1,selectable:!0,fixHeader:!0,fixFooter:!0},t.fn.table=function(e){return this.each(function(){var n=t(this),o=n.data(i),s="object"==typeof e&&e;o||n.data(i,o=new a(this,s)),"string"==typeof e&&o[e]()})},a.NAME=i,t.fn.table.Constructor=a,t(function(){t('[data-ride="table"]').table()})}(jQuery,void 0),function(t,e,i){t.fn._ajaxForm=t.fn.ajaxForm;var n={timeout:e.config?e.config.timeout:0,dataType:"json",errControlStyle:{borderColor:"#D2322D"}},a="";t.fn.enableForm=function(e){return e===i&&(e=!0),this.each(function(){var i=t(this);i.find('[type="submit"]').attr("disabled",e?null:"disabled"),i.hasClass("load-indicator")&&i.toggleClass("loading",!e)})};var o=function(e,i,n){"string"==typeof i&&(n=i,i=null),n=n||"show",t.zui.messager?t.zui.messager[n](e,i):alert(e)};t.ajaxForm=function(s,r){var l=t(s);if(l.length>1)return l.each(function(){t.ajaxForm(this,r)});t.isFunction(r)&&(r={complete:r}),r=t.extend({},n,l.data(),r);var c=r.beforeSubmit,d=r.error,h=r.success,u=r.finish;delete r.finish,delete r.success,delete r.onError,delete r.beforeSubmit;var p=r.errControlStyle;delete r.errControlStyle,r=t.extend({beforeSubmit:function(n,o,s){if(l.enableForm(!1),(c&&c(n,o,s))!==!1){var d={},h=o.find('[type="file"]');d.fileapi=h.length&&h[0].files!==i,d.formdata=e.FormData!==i;var u=d.fileapi&&o.find('input[type="file"]:enabled').filter(function(){return""!==t(this).val()}),p=u.length,f="multipart/form-data",g=o.attr("enctype")==f||o.attr("encoding")==f,m=d.fileapi&&d.formdata,v=(p||g)&&!m;v&&(""==a&&(a=r.url),r.url!=a&&(r.url=a),r.url=r.url.indexOf("&")>=0?r.url+"&HTTP_X_REQUESTED_WITH=XMLHttpRequest":r.url+"?HTTP_X_REQUESTED_WITH=XMLHttpRequest")}},success:function(i,n,a){if(l.enableForm(),(h&&h(i,n,a,l))!==!1){try{"string"==typeof i&&(i=JSON.parse(i))}catch(s){}if("object"!=typeof i)return i?alert(i):o("No response.","danger");var c=r.responser?t(r.responser):l.find(".form-responser");c.length||(c=t("#responser"));var d=i.message;if("success"===i.result){if(d){var f=l.find('[type="submit"]'),g=!1;f.length&&(f.popover({container:"body",trigger:"manual",content:d,tipClass:"popover-in-modal popover-success text-success",placement:i.placement||r.popoverPlacement||"right"}).popover("show"),setTimeout(function(){f.popover("destroy")},r.popoverTime||2e3),g=!0),c.length&&(c.html('<span class="small text-success">'+d+"</span>").show().delay(3e3).fadeOut(100),g=!0),g||o(d,"success")}if(u)return u(i,!0,l);if((r.closeModal||i.closeModal)&&setTimeout(t.zui.closeModal,r.closeModalTime||2e3),i.callback){var m=e[i.callback];if(t.isFunction(m)&&m()===!1)return}var v=r.locate||i.locate;if(v)if("loadInModal"==v){var _=t(".modal");setTimeout(function(){_.load(_.attr("ref"),function(){t(this).find(".modal-dialog").css("width",t(this).data("width")),t.zui.ajustModalPosition()})},1e3)}else{var y="reload"==v?e.location.href:v;setTimeout(function(){e.location.href=y},1200)}var b=r.ajaxReload||i.ajaxReload;if(b){var w=t(b);w.length&&w.load(e.location.href+" "+b,function(){w.find('[data-toggle="modal"]').modalTrigger()})}}else{if("string"==typeof d)c.length?c.html('<span class="text-small text-red">'+d+"</span>").show().delay(3e3).fadeOut(100):o(d,"danger");else if("object"==typeof d){var k=!1,C=[];t.each(d,function(e,i){var n=t.isArray(i)?i.join(";"):i,a=t("#"+e);if(!a.length)return void C.push(n);var o=e+"Label",s=t("#"+o);if(!s.length){var r=a.closest(".input-group").length;s=t('<div id="'+o+'" class="text-danger help-text" />').appendTo(r?a.closest(".input-group").parent():a.parent())}s.empty().append(n),a.css(p).addClass("has-error");var l=function(){var e=t("#"+o);if(e.length)return e.remove(),a.removeAttr("style").removeClass("has-error"),!0};a.on("change input mousedown",l);var c=t("#"+e+"_chosen");c.length&&c.find(".chosen-single").css(p).addClass("has-error").on("mousedown",function(){l()===!0&&t(this).removeAttr("style").removeClass("has-error")}),k||(a.focus(),k=!0)}),C.length&&o(C.join(";"),"danger")}if(u)return u(i,!1,l)}}},error:function(t,i,n){if((d&&d(t,i,n,l))!==!1){l.enableForm();var a="timeout"==i||"error"==i?e.lang?e.lang.timeout:i:t.responseText+i+n;o(a,"danger")}}},r),l._ajaxForm(r),l.on("click","[data-form-action]",function(){l.attr("action",t(this).data("formAction")).submit()})},t.fn.ajaxForm=function(e){return this.each(function(){t.ajaxForm(this,e)})},t(function(){t('.form-ajax,form[data-type="ajax"]').ajaxForm()})}(jQuery,window,void 0),function(t){"use strict";var e="zui.searchList",i=function(t,e){if(t&&t.length)for(var i=0;i<t.length;++i)if(e.indexOf(t[i])<0)return!1;return!0},n=function(i,a){var o=this;o.name=e;var s=o.$=t(i);a=o.options=t.extend({},n.DEFAULTS,this.$.data(),a);var r=s.find(a.searchBox);r.length&&(r.searchBox({onSearchChange:function(t){o.search(t)},onKeyDown:function(t){var e=t.which;if(13===e){var i=o.getActiveItem();a.onSelectItem?a.onSelectItem(i):window.location.href=i.attr("href"),t.preventDefault()}else if(38===e){var i=o.getActiveItem();i.removeClass("active");var n=i.prev(":not(.hidden)");n.length||(n=o.getItems().not(".hidden").last()),o.scrollTo(n.addClass("active")),t.preventDefault()}else if(40===e){var i=o.getActiveItem();i.removeClass("active");var s=i.next(":not(.hidden)");s.length||(s=o.getItems().not(".hidden").first()),o.scrollTo(s.addClass("active")),t.preventDefault()}}}),o.searchBox=r.data("zui.searchBox"),o.search(o.searchBox.getSearch()));var l=o.$menu=s.closest(".dropdown-menu");l.length&&(o.isDropdown=!0,s.on("click",function(e){t(e.target).closest(a.selector).length||e.stopPropagation()}),l.parent().on("shown.zui.dropdown",function(){setTimeout(function(){o.searchBox.focus()},50)})),s.on("mouseenter",a.selector,function(){s.find(o.options.selector).not(".hidden").removeClass("active"),t(this).addClass("active")}),(a.url||a.ajax)&&o.loadRemote()};n.prototype.loadRemote=function(){var e=this,i=e.options;e.$menu.addClass("load-indicator loading").find(".list-group").remove(),t.ajax(t.extend({url:i.url,type:"GET",dataType:"html",success:function(i,n,a){var o=t(i);o.hasClass("list-group")||(o=t('<div class="list-group"></div>').append(o)),e.$menu.append(o),e.$menu.removeClass("loading")},error:function(){e.$menu.removeClass("loading").append('<div class="list-group"><div class="text-error has-padding">'+(i.errorText||window.lang&&window.lang.timeout)+"</div></div>")}},i.ajax))},n.prototype.scrollTo=function(t){t.length&&t[0].scrollIntoView({behavior:"smooth"})},n.prototype.getItems=function(){return this.$.find(this.options.selector)},n.prototype.getActiveItem=function(){return this.getItems().filter(".active:first")},n.prototype.search=function(e){var n=this,a=void 0===e||null===e||""===e,o=n.getItems().removeClass("active");if(a)o.removeClass("hidden");else{var s=t.trim(e).split(" ");o.each(function(){var e=t(this),n=e.text()+" "+(e.data("key")||e.data("filter"));e.toggleClass("hidden",!i(s,n))})}n.scrollTo(o.not(".hidden").first().addClass("active"))},n.DEFAULTS={selector:".list-group a",searchBox:".search-box",onSelectItem:null},t.fn.searchList=function(i){return this.each(function(){var a=t(this),o=a.data(e),s="object"==typeof i&&i;o||a.data(e,o=new n(this,s)),"string"==typeof i&&o[i]()})},n.NAME=e,t.fn.searchList.Constructor=n,t(function(){t('[data-ride="searchList"]').searchList()})}(jQuery),function(t){window.config||(window.config={}),t.createLink=window.createLink=function(t,e,n,a,o){if(a||(a=config.defaultView),o||(o=!1),n)for(n=n.split("&"),i=0;i<n.length;i++){var s=n[i].split("=");n[i]=[s.shift(),s.join("=")]}var r;if("GET"!=config.requestType){if("PATH_INFO"==config.requestType&&(r=config.webRoot+t+config.requestFix+e),"PATH_INFO2"==config.requestType&&(r=config.webRoot+"index.php/"+t+config.requestFix+e),n)for(i=0;i<n.length;i++)r+=config.requestFix+n[i][1];r+="."+a}else if(r=config.router+"?"+config.moduleVar+"="+t+"&"+config.methodVar+"="+e+"&"+config.viewVar+"="+a,n)for(i=0;i<n.length;i++)r+="&"+n[i][0]+"="+n[i][1];if(void 0!==config.onlybody&&"yes"==config.onlybody||o){var l="GET"!=config.requestType?"?onlybody=yes":"&onlybody=yes";r+=l}return r};var e=function(t){var e=0;if(t){var i=t.split(":");e+=60*parseInt(i[0]),e+=parseInt(i[1])}return e},n=function(t){t%=1440;var e=Math.floor(t/60),i=t%60;return e<10&&(e="0"+e),i<10&&(i="0"+i),e+":"+i},a=function(t){if("string"==typeof t&&(t=e(t)),"number"==typeof t)if(t<1e5){var i=new Date;i.setHours(Math.floor(t/60)%24),i.setMinutes(t%60),t=i}else t=new Date(t);return t},o=function(t,i){for(var o=i?a(i):new Date,s=o.getHours(),r=10*Math.floor(o.getMinutes()/10)+10,l=0;l<24;++l){var c=(l+s)%24;if(!(c<5))for(var d=0;d<6;++d){var h=n(60*c+10*d+r);t.append('<option value="'+h+'">'+h+"</option>")}}t.val()||(time=e(o.format("hh:mm")),time=time-time%10+10,t.val(n(time)))};t.fn.timeSpanControl=function(i){return this.each(function(){var s=t(this),r=t.extend({},i,s.data()),l=s.find('[name="begin"],.control-time-begin'),c=s.find('[name="end"],.control-time-end'),d=function(){var t=l.val();if(s.find(".hide-empty-begin").toggleClass("hide",!t),t){const i=n(e(t)+30);c.find('option[value="'+i+'"]').length&&c.val(i),r.onChange&&r.onChange(c,i)}};if(s.data("timeSpanControlInit")){if(r.begin){const h=a(r.begin).format("hh:mm");l.find('option[value="'+h+'"]').length&&l.val(h),r.onChange&&r.onChange(l,h)}if(r.end){const u=a(r.end).format("hh:mm");c.find('option[value="'+u+'"]').length&&c.val(u),r.onChange&&r.onChange(c,u)}}else l.on("change",d),o(l,r.begin),o(c,r.end),s.data("timeSpanControlInit",!0);r.end||d()})},t.timeSpanControl={convertTimeToNum:e,convertNumToTime:n,initTimeSelect:o,createTime:a},t.fn.blockTodoes=function(){return this.each(function(){var e=t(this),i=e.find("form"),n=i.find('[name="title"]'),a=function(t){void 0===t&&(t=!e.hasClass("show-form")),e.toggleClass("show-form",t),t&&setTimeout(function(){n.focus()},50)};e.on("click",".todo-form-trigger",function(){a(t(this).data("trigger"))}),i.timeSpanControl({onChange:function(t){t.trigger("chosen:updated")}})})},t(function(){t(".block-todoes").blockTodoes()});var s=t("#searchTypeMenu"),r=t("#searchType"),l=function(e){e||(e=r.val()),e=e||"bug",r.val(e),s.find("li.selected").removeClass("selected");var i=s.find('a[data-value="'+e+'"]'),n=i.text();i.parent().addClass("selected"),t("#searchTypeName").text(n)};l(),s.on("click","a[data-value]",function(){l(t(this).data("value"))}),t.chosenDefaultOptions={disable_search_threshold:5},t.fn._chosen=t.fn.chosen,t.fn.chosen=function(e){return this._chosen(t.extend({},t.chosenDefaultOptions,e))},t.extend(t.fn.pager.Constructor.DEFAULTS,{maxNavCount:8,prevIcon:"icon-angle-left",nextIcon:"icon-angle-right",navEllipsisItem:"…",menuDirection:"dropup",pageSizeOptions:[5,10,15,20,25,30,35,40,45,50,100,200,500,1e3,2e3],elements:["total_text","size_menu","prev_icon","nav","next_icon"],onPageChange:function(t,e){console.log("onPageChange",t,e),t.recPerPage!==e.recPerPage&&(window.location.href=this.createLink())}}),t.zui.Messager.DEFAULTS.cssClass="messagger-zt",t.fn.reverseOrder=function(){return this.each(function(){var e=t(this);e.prependTo(e.parent())})};var c=function(e,i){var n=t(e);i=t.extend({},n.data(),i);var a=n.find(".histories-list"),o=!0,s=!1;n.on("click",".btn-reverse",function(){a.children("li").reverseOrder(),o=!o,t(this).find(".icon").toggleClass("icon-arrow-up",o).toggleClass("icon-arrow-down",!o)}).on("click",".btn-expand-all",function(){var e=t(this).find(".icon");s=!s,e.toggleClass("icon-plus",!s).toggleClass("icon-minus",s),a.children("li").toggleClass("show-changes",s)}).on("click",".btn-expand",function(){t(this).closest("li").toggleClass("show-changes")}).on("click",".btn-strip",function(){var e=t(this),n=e.find(".icon"),a=n.hasClass("icon-code");n.toggleClass("icon-code",!a).toggleClass("icon-text",a),e.attr("title",a?i.original:i.textdiff),e.closest("li").toggleClass("show-original",a)}),a.find(".btn-strip").attr("title",i.original);var r=n.find(".modal-comment").modal({show:!1,backdrop:!1,position:function(t){var e=a[0].getBoundingClientRect(),i=t.$element.find(".modal-dialog"),n=i.outerWidth(),o=i.outerHeight();return{top:Math.min(window.innerHeight-o,e.top-40),left:e.left+e.width-n,margin:0}}});n.on("click",".btn-comment",function(){r.modal("toggle")}).on("click",".btn-edit-comment,.btn-hide-form",function(){t(this).closest("li").toggleClass("show-form")});var l=n.find(".comment-edit-form");l.ajaxForm({success:function(t,e,i,n){setTimeout(function(){l.closest("li").removeClass("show-form")},2e3)}})};t.fn.histories=function(t){return this.each(function(){c(this,t)})},t(function(){t(".histories").histories()});var d=0,h=0;t.toggleSidebar=function(e){var i=t("#sidebar");if(i.length){var n=t("main");if(void 0===e)e=n.hasClass("hide-sidebar");else if(e&&!n.hasClass("hide-sidebar"))return;n.toggleClass("hide-sidebar",!e),clearTimeout(d),e&&(i.addClass("showing"),d=setTimeout(function(){i.removeClass("showing")},210)),t.zui.store.set(h,e)}};var u=function(){var e=t("#sidebar");if(e.length&&!e.data("init")){h="sidebar:"+(e.data("id")||config.module+"/"+config.method);var i=t("main");i.on("click",".sidebar-toggle",function(){t.toggleSidebar(i.hasClass("hide-sidebar"))});var n=t.zui.store.get(h,e.data("hide")!==!1);return e.addClass("no-animate"),t.toggleSidebar(n),setTimeout(function(){e.removeClass("no-animate")},500),e.data("init",1),!0}};u()||t(u),t.toggleQueryBox=function(e){var i=t("#queryBox");i.length&&(void 0===e&&(e=!i.hasClass("show")),i.toggleClass("show",!!e),i.data("init")||(i.addClass("load-indicator loading").data("init",1),t.get(t.createLink("search","buildForm"),function(t){i.html(t).removeClass("loading")})),t(".querybox-toggle").toggleClass("querybox-opened",e))},t(function(){var e=t("#queryBox");e.length&&(t(document).on("click",".querybox-toggle",function(){t.toggleQueryBox()}),e.hasClass("show")&&t.toggleQueryBox(!0))}),t.extend(t.fn.colorPicker.Constructor.DEFAULTS,{colors:["#3DA7F5","#75C941","#2DBDB2","#797EC9","#FFAF38","#FF4E3E"]}),t("a.iframe").modalTrigger({type:"iframe"})}(jQuery),function(window,undefined){function _isArray(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function _isFunction(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)}function _inArray(t,e){for(var i=0,n=e.length;i<n;i++)if(t===e[i])return i;return-1}function _each(t,e){if(_isArray(t))for(var i=0,n=t.length;i<n&&e.call(t[i],i,t[i])!==!1;i++);else for(var a in t)if(t.hasOwnProperty(a)&&e.call(t[a],a,t[a])===!1)break}function _trim(t){return t.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function _inString(t,e,i){return i=i===undefined?",":i,(i+e+i).indexOf(i+t+i)>=0}function _addUnit(t,e){return e=e||"px",t&&/^\d+$/.test(t)?t+e:t}function _removeUnit(t){var e;return t&&(e=/(\d+)/.exec(t))?parseInt(e[1],10):0}function _escape(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function _unescape(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function _toCamel(t){var e=t.split("-");return t="",_each(e,function(e,i){t+=e>0?i.charAt(0).toUpperCase()+i.substr(1):i}),t}function _toHex(t){function e(t){var e=parseInt(t,10).toString(16).toUpperCase();return e.length>1?e:"0"+e}return t.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,function(t,i,n,a){return"#"+e(i)+e(n)+e(a)})}function _toMap(t,e){e=e===undefined?",":e;var i,n={},a=_isArray(t)?t:t.split(e);return _each(a,function(t,e){if(i=/^(\d+)\.\.(\d+)$/.exec(e))for(var a=parseInt(i[1],10);a<=parseInt(i[2],10);a++)n[a.toString()]=!0;else n[e]=!0}),n}function _toArray(t,e){return Array.prototype.slice.call(t,e||0)}function _undef(t,e){return t===undefined?e:t}function _invalidUrl(t){return!t||/[<>"]/.test(t)}function _addParam(t,e){return t.indexOf("?")>=0?t+"&"+e:t+"?"+e}function _extend(t,e,i){i||(i=e,e=null);var n;if(e){var a=function(){};a.prototype=e.prototype,n=new a,_each(i,function(t,e){n[t]=e})}else n=i;n.constructor=t,t.prototype=n,t.parent=e?e.prototype:null}function _json(text){var match;(match=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(text))&&(text=match[0]);var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+text+")");throw"JSON parse error"}function _getBasePath(){for(var t,e=document.getElementsByTagName("script"),i=0,n=e.length;i<n;i++)if(t=e[i].src||"",/kindeditor[\w\-\.]*\.js/.test(t))return t.substring(0,t.lastIndexOf("/")+1);return""}function _bindEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,_useCapture):t.attachEvent&&t.attachEvent("on"+e,i)}function _unbindEvent(t,e,i){t.removeEventListener?t.removeEventListener(e,i,_useCapture):t.detachEvent&&t.detachEvent("on"+e,i)}function KEvent(t,e){this.init(t,e)}function _getId(t){return t[_eventExpendo]||null}function _setId(t){return t[_eventExpendo]=++_eventId,_eventId}function _removeId(t){try{delete t[_eventExpendo]}catch(e){t.removeAttribute&&t.removeAttribute(_eventExpendo)}}function _bind(t,e,i){if(e.indexOf(",")>=0)return void _each(e.split(","),function(){_bind(t,this,i)});var n=_getId(t);n||(n=_setId(t)),_eventData[n]===undefined&&(_eventData[n]={});var a=_eventData[n][e];a&&a.length>0?_unbindEvent(t,e,a[0]):(_eventData[n][e]=[],_eventData[n].el=t),a=_eventData[n][e],0===a.length&&(a[0]=function(e){var i=e?new KEvent(t,e):undefined;_each(a,function(e,n){e>0&&n&&n.call(t,i)})}),_inArray(i,a)<0&&a.push(i),_bindEvent(t,e,a[0])}function _unbind(t,e,i){if(e&&e.indexOf(",")>=0)return void _each(e.split(","),function(){_unbind(t,this,i)});var n=_getId(t);if(n){if(e===undefined)return void(n in _eventData&&(_each(_eventData[n],function(e,i){"el"!=e&&i.length>0&&_unbindEvent(t,e,i[0])}),delete _eventData[n],_removeId(t)));if(_eventData[n]){var a=_eventData[n][e];if(a&&a.length>0){i===undefined?(_unbindEvent(t,e,a[0]),delete _eventData[n][e]):(_each(a,function(t,e){t>0&&e===i&&a.splice(t,1)}),1==a.length&&(_unbindEvent(t,e,a[0]),delete _eventData[n][e]));var o=0;_each(_eventData[n],function(){o++}),o<2&&(delete _eventData[n],_removeId(t))}}}}function _fire(t,e){if(e.indexOf(",")>=0)return void _each(e.split(","),function(){_fire(t,this)});var i=_getId(t);if(i){var n=_eventData[i][e];_eventData[i]&&n&&n.length>0&&n[0]()}}function _ctrl(t,e,i){e=/^\d{2,}$/.test(e)?e:e.toUpperCase().charCodeAt(0),_bind(t,"keydown",function(n){!n.ctrlKey||n.which!=e||n.shiftKey||n.altKey||(i.call(t),n.stop())})}function _ready(t){function e(){a||(a=!0,t(KindEditor),_readyFinished=!0)}function i(){if(!a){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(i,100)}e()}}function n(){"complete"===document.readyState&&e()}if(_readyFinished)return void t(KindEditor);var a=!1;if(document.addEventListener)_bind(document,"DOMContentLoaded",e);else if(document.attachEvent){_bind(document,"readystatechange",n);var o=!1;try{o=null==window.frameElement}catch(s){}document.documentElement.doScroll&&o&&i()}_bind(window,"load",e)}function _getCssList(t){for(var e,i={},n=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;e=n.exec(t);){var a=_trim(e[1].toLowerCase()),o=_trim(_toHex(e[2]));i[a]=o}return i}function _getAttrList(t){for(var e,i={},n=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;e=n.exec(t);){var a=(e[1]||e[2]||e[4]||e[6]).toLowerCase(),o=(e[2]?e[3]:e[4]?e[5]:e[7])||"";i[a]=o}return i}function _addClassToTag(t,e){return t=/\s+class\s*=/.test(t)?t.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(t,i,n,a){return(" "+n+" ").indexOf(" "+e+" ")<0?""===n?i+e+a:i+n+" "+e+a:t}):t.substr(0,t.length-1)+' class="'+e+'">'}function _formatCss(t){var e="";return _each(_getCssList(t),function(t,i){e+=t+":"+i+";"}),e}function _formatUrl(t,e,i,n){function a(t){for(var e=t.split("/"),i=[],n=0,a=e.length;n<a;n++){var o=e[n];".."==o?i.length>0&&i.pop():""!==o&&"."!=o&&i.push(o)}return"/"+i.join("/")}function o(e,i){if(t.substr(0,e.length)===e){for(var a=[],s=0;s<i;s++)a.push("..");var l=".";return a.length>0&&(l+="/"+a.join("/")),"/"==n&&(l+="/"),l+t.substr(e.length)}if(r=/^(.*)\//.exec(e))return o(r[1],++i)}if(e=_undef(e,"").toLowerCase(),"data:"!=t.substr(0,5)&&(t=t.replace(/([^:])\/\//g,"$1/")),_inArray(e,["absolute","relative","domain"])<0)return t;if(i=i||location.protocol+"//"+location.host,n===undefined){var s=location.pathname.match(/^(\/.*)\//);n=s?s[1]:""}var r;if(r=/^(\w+:\/\/[^\/]*)/.exec(t)){if(r[1]!==i)return t}else if(/^\w+:/.test(t))return t;return/^\//.test(t)?t=i+a(t.substr(1)):/^\w+:\/\//.test(t)||(t=i+a(n+"/"+t)),"relative"===e?t=o(i+n,0).substr(2):"absolute"===e&&t.substr(0,i.length)===i&&(t=t.substr(i.length)),t}function _formatHtml(t,e,i,n,a){null==t&&(t=""),i=i||"",n=_undef(n,!1),a=_undef(a,"\t");var o="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");t=t.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(t,e,i,n){return e+i.replace(/<(?:br|br\s[^>]*)>/gi,"\n")+n}),t=t.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/gi,"</p>"),t=t.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/gi,"$1<br />$2"),t=t.replace(/\u200B/g,""),t=t.replace(/\u00A9/g,"&copy;"),t=t.replace(/<[^>]+>/g,function(t){return t.replace(/\s+/g," ")});var s={};e&&(_each(e,function(t,e){for(var i=t.split(","),n=0,a=i.length;n<a;n++)s[i[n]]=_toMap(e)}),s.script||(t=t.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/gi,"")),s.style||(t=t.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/gi,"")));var r=/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,l=[];return t=t.replace(r,function(t,r,c,d,h,u,p){var f=t,g=r||"",m=c||"",v=d.toLowerCase(),_=h||"",y=u?" "+u:"",b=p||"";if(e&&!s[v])return"";if(""===y&&_SINGLE_TAG_MAP[v]&&(y=" /"),_INLINE_TAG_MAP[v]&&(g&&(g=" "),b&&(b=" ")),_PRE_TAG_MAP[v]&&(m?b="\n":g="\n"),n&&"br"==v&&(b="\n"),_BLOCK_TAG_MAP[v]&&!_PRE_TAG_MAP[v])if(n){m&&l.length>0&&l[l.length-1]===v?l.pop():l.push(v),g="\n",b="\n";for(var w=0,k=m?l.length:l.length-1;w<k;w++)g+=a,m||(b+=a);y?l.pop():m||(b+=a)}else g=b="";if(""!==_){var C=_getAttrList(f);if("font"===v){var x={},T="";_each(C,function(t,e){"color"===t&&(x.color=e,delete C[t]),"size"===t&&(x["font-size"]=o[parseInt(e,10)-1]||"",delete C[t]),"face"===t&&(x["font-family"]=e,delete C[t]),"style"===t&&(T=e)}),T&&!/;$/.test(T)&&(T+=";"),_each(x,function(t,e){""!==e&&(/\s/.test(e)&&(e="'"+e+"'"),T+=t+":"+e+";")}),C.style=T}_each(C,function(t,n){if(_FILL_ATTR_MAP[t]&&(C[t]=t),_inArray(t,["src","href"])>=0&&(C[t]=_formatUrl(n,i)),(e&&"style"!==t&&!s[v]["*"]&&!s[v][t]||"body"===v&&"contenteditable"===t||/^kindeditor_\d+$/.test(t))&&delete C[t],"style"===t&&""!==n){var a=_getCssList(n);_each(a,function(t,i){!e||s[v].style||s[v]["."+t]||delete a[t]});var o="";_each(a,function(t,e){o+=t+":"+e+";"}),C.style=o}}),_="",_each(C,function(t,e){"style"===t&&""===e||(e=e.replace(/"/g,"&quot;"),_+=" "+t+'="'+e+'"')})}return"font"===v&&(v="span"),g+"<"+m+v+_+y+">"+b}),t=t.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(t,e,i,n){return e+i.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+n}),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n"),_trim(t)}function _clearMsWord(t,e){return t=t.replace(/<meta[\s\S]*?>/gi,"").replace(/<![\s\S]*?>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/gi,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/gi,"").replace(/<xml>[\s\S]*?<\/xml>/gi,"").replace(/<(?:table|td)[^>]*>/gi,function(t){return t.replace(/border-bottom:([#\w\s]+)/gi,"border:$1")}),_formatHtml(t,e)}function _mediaType(t){return/\.(rm|rmvb)(\?|$)/i.test(t)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(t)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function _mediaClass(t){return/realaudio/i.test(t)?"ke-rm":/flash/i.test(t)?"ke-flash":"ke-media"}function _mediaAttrs(t){return _getAttrList(unescape(t))}function _mediaEmbed(t){var e="<embed ";return _each(t,function(t,i){e+=t+'="'+i+'" '}),e+="/>"}function _mediaImg(t,e){var i=e.width,n=e.height,a=e.type||_mediaType(e.src),o=_mediaEmbed(e),s="";/\D/.test(i)?s+="width:"+i+";":i>0&&(s+="width:"+i+"px;"),/\D/.test(n)?s+="height:"+n+";":n>0&&(s+="height:"+n+"px;");var r='<img class="'+_mediaClass(a)+'" src="'+t+'" ';return""!==s&&(r+='style="'+s+'" '),r+='data-ke-tag="'+escape(o)+'" alt="" />'}function _tmpl(t,e){var i=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?i(e):i}function _contains(t,e){if(9==t.nodeType&&9!=e.nodeType)return!0;for(;e=e.parentNode;)if(e==t)return!0;return!1}function _getAttr(t,e){e=e.toLowerCase();var i=null;if(_GET_SET_ATTRIBUTE||"script"==t.nodeName.toLowerCase())try{i=t.getAttribute(e,2)}catch(n){i=t.getAttribute(e,1)}else{var a=t.ownerDocument.createElement("div");a.appendChild(t.cloneNode(!1));var o=_getAttrList(_unescape(a.innerHTML));e in o&&(i=o[e])}return"style"===e&&null!==i&&(i=_formatCss(i)),i}function _queryAll(t,e){function i(t){return"string"!=typeof t?t:t.replace(/([^\w\-])/g,"\\$1")}function n(t){return t.replace(/\\/g,"")}function a(t,e){return"*"===t||t.toLowerCase()===i(e.toLowerCase())}function o(t,e,i){var o=[],s=i.ownerDocument||i,r=s.getElementById(n(t));return r&&a(e,r.nodeName)&&_contains(i,r)&&o.push(r),o}function s(t,e,i){var o,s,r,l,c=i.ownerDocument||i,d=[];if(i.getElementsByClassName)for(o=i.getElementsByClassName(n(t)),s=0,r=o.length;s<r;s++)l=o[s],a(e,l.nodeName)&&d.push(l);else if(c.querySelectorAll)for(o=c.querySelectorAll(("#document"!==i.nodeName?i.nodeName+" ":"")+e+"."+t),s=0,r=o.length;s<r;s++)l=o[s],_contains(i,l)&&d.push(l);else for(o=i.getElementsByTagName(e),t=" "+t+" ",s=0,r=o.length;s<r;s++)if(l=o[s],1==l.nodeType){var h=l.className;h&&(" "+h+" ").indexOf(t)>-1&&d.push(l)}return d}function r(t,e,i){for(var o,s=[],r=i.ownerDocument||i,l=r.getElementsByName(n(t)),c=0,d=l.length;c<d;c++)o=l[c],a(e,o.nodeName)&&_contains(i,o)&&null!==o.getAttribute("name")&&s.push(o);return s}function l(t,e,n,a){for(var o,s=[],r=a.getElementsByTagName(n),l=0,c=r.length;l<c;l++)o=r[l],1==o.nodeType&&(null===e?null!==_getAttr(o,t)&&s.push(o):e===i(_getAttr(o,t))&&s.push(o));return s}function c(t,e){var i,n=[];i=/^((?:\\.|[^.#\s\[<>])+)/.exec(t);var a=i?i[1]:"*";if(i=/#((?:[\w\-]|\\.)+)$/.exec(t))n=o(i[1],a,e);else if(i=/\.((?:[\w\-]|\\.)+)$/.exec(t))n=s(i[1],a,e);else if(i=/\[((?:[\w\-]|\\.)+)\]/.exec(t))n=l(i[1].toLowerCase(),null,a,e);else if(i=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(t)){var c=i[1].toLowerCase(),d=i[2];n="id"===c?o(d,a,e):"class"===c?s(d,a,e):"name"===c?r(d,a,e):l(c,d,a,e)}else for(var h,u=e.getElementsByTagName(a),p=0,f=u.length;p<f;p++)h=u[p],1==h.nodeType&&n.push(h);return n}var d=t.split(",");if(d.length>1){var h=[];return _each(d,function(){_each(_queryAll(this,e),function(){
_inArray(this,h)<0&&h.push(this)})}),h}e=e||document;for(var u,p=[],f=/((?:\\.|[^\s>])+|[\s>])/g;u=f.exec(t);)" "!==u[1]&&p.push(u[1]);var g=[];if(1==p.length)return c(p[0],e);var m,v,_,y,b,w,k,C,x,T,S=!1;for(w=0,lenth=p.length;w<lenth;w++)if(m=p[w],">"!==m){if(w>0){for(v=[],k=0,x=g.length;k<x;k++)for(y=g[k],_=c(m,y),C=0,T=_.length;C<T;C++)b=_[C],S?y===b.parentNode&&v.push(b):v.push(b);g=v}else g=c(m,e);if(0===g.length)return[]}else S=!0;return g}function _query(t,e){var i=_queryAll(t,e);return i.length>0?i[0]:null}function _get(t){return K(t)[0]}function _getDoc(t){return t?t.ownerDocument||t.document||t:document}function _getWin(t){if(!t)return window;var e=_getDoc(t);return e.parentWindow||e.defaultView}function _setHtml(t,e){if(1==t.nodeType){var i=_getDoc(t);try{t.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+e;var n=i.getElementById("__kindeditor_temp_tag__");n.parentNode.removeChild(n)}catch(a){K(t).empty(),K("@"+e,i).each(function(){t.appendChild(this)})}}}function _hasClass(t,e){return _inString(e,t.className," ")}function _setAttr(t,e,i){_IE&&_V<8&&"class"==e.toLowerCase()&&(e="className"),t.setAttribute(e,""+i)}function _removeAttr(t,e){_IE&&_V<8&&"class"==e.toLowerCase()&&(e="className"),_setAttr(t,e,""),t.removeAttribute(e)}function _getNodeName(t){return t&&t.nodeName?t.nodeName.toLowerCase():""}function _computedCss(t,e){var i=_getWin(t),n=_toCamel(e),a="";if(i.getComputedStyle){var o=i.getComputedStyle(t,null);a=o[n]||o.getPropertyValue(e)||t.style[n]}else t.currentStyle&&(a=t.currentStyle[n]||t.style[n]);return a}function _hasVal(t){return!!_VALUE_TAG_MAP[_getNodeName(t)]}function _docElement(t){return t=t||document,_QUIRKS?t.body:t.documentElement}function _docHeight(t){var e=_docElement(t);return Math.max(e.scrollHeight,e.clientHeight)}function _docWidth(t){var e=_docElement(t);return Math.max(e.scrollWidth,e.clientWidth)}function _getScrollPos(t){t=t||document;var e,i;return _IE||_OPERA?(e=_docElement(t).scrollLeft,i=_docElement(t).scrollTop):(e=_getWin(t).scrollX,i=_getWin(t).scrollY),{x:e,y:i}}function KNode(t){this.init(t)}function _updateCollapsed(t){return t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t}function _copyAndDelete(t,e,i){function n(n,a,o){var s,l=n.nodeValue.length;if(e){var c=n.cloneNode(!0);s=a>0?c.splitText(a):c,o<l&&s.splitText(o-a)}if(i){var d=n;if(a>0&&(d=n.splitText(a),t.setStart(n,a)),o<l){var h=d.splitText(o-a);t.setEnd(h,0)}r.push(d)}return s}function a(){i&&t.up().collapse(!0);for(var e=0,n=r.length;e<n;e++){var a=r[e];a.parentNode&&a.parentNode.removeChild(a)}}function o(a,p){for(var f,g=a.firstChild;g;){var m=new KRange(s).selectNode(g);if(c=m.compareBoundaryPoints(_START_TO_END,t),c>=0&&d<=0&&(d=m.compareBoundaryPoints(_START_TO_START,t)),d>=0&&h<=0&&(h=m.compareBoundaryPoints(_END_TO_END,t)),h>=0&&u<=0&&(u=m.compareBoundaryPoints(_END_TO_START,t)),u>=0)return!1;if(f=g.nextSibling,c>0)if(1==g.nodeType)if(d>=0&&h<=0)e&&p.appendChild(g.cloneNode(!0)),i&&r.push(g);else{var v;if(e&&(v=g.cloneNode(!1),p.appendChild(v)),o(g,v)===!1)return!1}else if(3==g.nodeType){var _;if(_=g==l.startContainer?n(g,l.startOffset,g.nodeValue.length):g==l.endContainer?n(g,0,l.endOffset):n(g,0,g.nodeValue.length),e)try{p.appendChild(_)}catch(y){}}g=f}}var s=t.doc,r=[],l=t.cloneRange().down(),c=-1,d=-1,h=-1,u=-1,p=t.commonAncestor(),f=s.createDocumentFragment();if(3==p.nodeType){var g=n(p,t.startOffset,t.endOffset);return e&&f.appendChild(g),a(),e?f:t}o(p,f),i&&t.up().collapse(!0);for(var m=0,v=r.length;m<v;m++){var _=r[m];_.parentNode&&_.parentNode.removeChild(_)}return e?f:t}function _moveToElementText(t,e){for(var i=e;i;){var n=K(i);if("marquee"==n.name||"select"==n.name)return;i=i.parentNode}try{t.moveToElementText(e)}catch(a){}}function _getStartEnd(t,e){var i=t.parentElement().ownerDocument,n=t.duplicate();n.collapse(e);var a=n.parentElement(),o=a.childNodes;if(0===o.length)return{node:a.parentNode,offset:K(a).index()};var s=i,r=0,l=-1,c=t.duplicate();_moveToElementText(c,a);for(var d=0,h=o.length;d<h;d++){var u=o[d];if(l=c.compareEndPoints("StartToStart",n),0===l)return{node:u.parentNode,offset:d};if(1==u.nodeType){var p,f=t.duplicate(),g=K(u),m=u;g.isControl()&&(p=i.createElement("span"),g.after(p),m=p,r+=g.text().replace(/\r\n|\n|\r/g,"").length),_moveToElementText(f,m),c.setEndPoint("StartToEnd",f),l>0?r+=f.text.replace(/\r\n|\n|\r/g,"").length:r=0,p&&K(p).remove()}else 3==u.nodeType&&(c.moveStart("character",u.nodeValue.length),r+=u.nodeValue.length);l<0&&(s=u)}if(l<0&&1==s.nodeType)return{node:a,offset:K(a.lastChild).index()+1};if(l>0)for(;s.nextSibling&&1==s.nodeType;)s=s.nextSibling;if(c=t.duplicate(),_moveToElementText(c,a),c.setEndPoint("StartToEnd",n),r-=c.text.replace(/\r\n|\n|\r/g,"").length,l>0&&3==s.nodeType)for(var v=s.previousSibling;v&&3==v.nodeType;)r-=v.nodeValue.length,v=v.previousSibling;return{node:s,offset:r}}function _getEndRange(t,e){var i=t.ownerDocument||t,n=i.body.createTextRange();if(i==t)return n.collapse(!0),n;if(1==t.nodeType&&t.childNodes.length>0){var a,o,s=t.childNodes;if(0===e?(o=s[0],a=!0):(o=s[e-1],a=!1),!o)return n;if("head"===K(o).name)return 1===e&&(a=!0),2===e&&(a=!1),n.collapse(a),n;if(1==o.nodeType){var r,l=K(o);return l.isControl()&&(r=i.createElement("span"),a?l.before(r):l.after(r),o=r),_moveToElementText(n,o),n.collapse(a),r&&K(r).remove(),n}t=o,e=a?0:o.nodeValue.length}var c=i.createElement("span");return K(t).before(c),_moveToElementText(n,c),n.moveStart("character",e),K(c).remove(),n}function _toRange(t){function e(t){"tr"==K(t.node).name&&(t.node=t.node.cells[t.offset],t.offset=0)}var i,n;if(_IERANGE){if(t.item)return i=_getDoc(t.item(0)),n=new KRange(i),n.selectNode(t.item(0)),n;i=t.parentElement().ownerDocument;var a=_getStartEnd(t,!0),o=_getStartEnd(t,!1);return e(a),e(o),n=new KRange(i),n.setStart(a.node,a.offset),n.setEnd(o.node,o.offset),n}var s=t.startContainer;return i=s.ownerDocument||s,n=new KRange(i),n.setStart(s,t.startOffset),n.setEnd(t.endContainer,t.endOffset),n}function KRange(t){this.init(t)}function _range(t){return t.nodeName?new KRange(t):t.constructor===KRange?t:_toRange(t)}function _nativeCommand(t,e,i){try{t.execCommand(e,!1,i)}catch(n){}}function _nativeCommandValue(t,e){var i="";try{i=t.queryCommandValue(e)}catch(n){}return"string"!=typeof i&&(i=""),i}function _getSel(t){var e=_getWin(t);return _IERANGE?t.selection:e.getSelection()}function _getRng(t){var e,i=_getSel(t);try{e=i.rangeCount>0?i.getRangeAt(0):i.createRange()}catch(n){}return!_IERANGE||e&&(e.item||e.parentElement().ownerDocument===t)?e:null}function _singleKeyMap(t){var e,i,n={};return _each(t,function(t,a){e=t.split(",");for(var o=0,s=e.length;o<s;o++)i=e[o],n[i]=a}),n}function _hasAttrOrCss(t,e){return _hasAttrOrCssByKey(t,e,"*")||_hasAttrOrCssByKey(t,e)}function _hasAttrOrCssByKey(t,e,i){if(i=i||t.name,1!==t.type)return!1;var n=_singleKeyMap(e);if(!n[i])return!1;for(var a=n[i].split(","),o=0,s=a.length;o<s;o++){var r=a[o];if("*"===r)return!0;var l=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(r),c=l[1]?"css":"attr";r=l[2];var d=l[3]||"";if(""===d&&""!==t[c](r))return!0;if(""!==d&&t[c](r)===d)return!0}return!1}function _removeAttrOrCss(t,e){1==t.type&&(_removeAttrOrCssByKey(t,e,"*"),_removeAttrOrCssByKey(t,e))}function _removeAttrOrCssByKey(t,e,i){if(i=i||t.name,1===t.type){var n=_singleKeyMap(e);if(n[i]){for(var a=n[i].split(","),o=!1,s=0,r=a.length;s<r;s++){var l=a[s];if("*"===l){o=!0;break}var c=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(l);l=c[2],c[1]?(l=_toCamel(l),t[0].style[l]&&(t[0].style[l]="")):t.removeAttr(l)}o&&t.remove(!0)}}}function _getInnerNode(t){for(var e=t;e.first();)e=e.first();return e}function _isEmptyNode(t){return 1==t.type&&!t.isSingle()&&""===t.html().replace(/<[^>]+>/g,"")}function _mergeWrapper(t,e){t=t.clone(!0);for(var i=_getInnerNode(t),n=t,a=!1;e;){for(;n;)n.name===e.name&&(_mergeAttrs(n,e.attr(),e.css()),a=!0),n=n.first();a||i.append(e.clone(!1)),a=!1,e=e.first()}return t}function _wrapNode(t,e){if(e=e.clone(!0),3==t.type)return _getInnerNode(e).append(t.clone(!1)),t.replaceWith(e),e;for(var i,n=t;(i=t.first())&&1==i.children().length;)t=i;i=t.first();for(var a=t.doc.createDocumentFragment();i;)a.appendChild(i[0]),i=i.next();return e=_mergeWrapper(n,e),a.firstChild&&_getInnerNode(e).append(a),n.replaceWith(e),e}function _mergeAttrs(t,e,i){_each(e,function(e,i){"style"!==e&&t.attr(e,i)}),_each(i,function(e,i){t.css(e,i)})}function _inPreElement(t){for(;t&&"body"!=t.name;){if(_PRE_TAG_MAP[t.name]||"div"==t.name&&t.hasClass("ke-script"))return!0;t=t.parent()}return!1}function KCmd(t){this.init(t)}function _cmd(t){if(t.nodeName){var e=_getDoc(t);t=_range(e).selectNodeContents(e.body).collapse(!1)}return new KCmd(t)}function _drag(t){var e=t.moveEl,i=t.moveFn,n=t.clickEl||e,a=t.beforeDrag,o=t.iframeFix===undefined||t.iframeFix,s=[document];o&&K("iframe").each(function(){var t=_formatUrl(this.src||"","absolute");if(!/^https?:\/\//.test(t)){var e;try{e=_iframeDoc(this)}catch(i){}if(e){var n=K(this).pos();K(e).data("pos-x",n.x),K(e).data("pos-y",n.y),s.push(e)}}}),n.mousedown(function(t){function o(t){t.preventDefault();var e=K(_getDoc(t.target)),a=_round((e.data("pos-x")||0)+t.pageX-f),o=_round((e.data("pos-y")||0)+t.pageY-g);i.call(n,d,h,u,p,a,o)}function r(t){t.preventDefault()}function l(t){t.preventDefault(),K(s).unbind("mousemove",o).unbind("mouseup",l).unbind("selectstart",r),c.releaseCapture&&c.releaseCapture()}t.stopPropagation();var c=n.get(),d=_removeUnit(e.css("left")),h=_removeUnit(e.css("top")),u=e.width(),p=e.height(),f=t.pageX,g=t.pageY;a&&a(),K(s).mousemove(o).mouseup(l).bind("selectstart",r),c.setCapture&&c.setCapture()})}function KWidget(t){this.init(t)}function _widget(t){return new KWidget(t)}function _iframeDoc(t){return t=_get(t),t.contentDocument||t.contentWindow.document}function _getInitHtml(t,e,i,n){var a=[""===_direction?"<html>":'<html dir="'+_direction+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}","img.ke-flash {"," border:1px solid #AAA;"," background-image:url("+t+"common/flash.gif);"," background-position:center center;"," background-repeat:no-repeat;"," width:100px;"," height:100px;","}","img.ke-rm {"," border:1px solid #AAA;"," background-image:url("+t+"common/rm.gif);"," background-position:center center;"," background-repeat:no-repeat;"," width:100px;"," height:100px;","}","img.ke-media {"," border:1px solid #AAA;"," background-image:url("+t+"common/media.gif);"," background-position:center center;"," background-repeat:no-repeat;"," width:100px;"," height:100px;","}","img.ke-anchor {"," border:1px dashed #666;"," width:16px;"," height:16px;","}",".ke-script, .ke-noscript, .ke-display-none {"," display:none;"," font-size:0;"," width:0;"," height:0;","}",".ke-pagebreak {"," border:1px dotted #AAA;"," font-size:0;"," height:2px;","}","</style>"];return _isArray(i)||(i=[i]),_each(i,function(t,e){e&&a.push('<link href="'+e+'" rel="stylesheet" />')}),n&&a.push("<style>"+n+"</style>"),a.push("</head><body "+(e?'class="'+e+'"':"")+"></body></html>"),a.join("\n")}function _elementVal(t,e){if(t.hasVal()){if(e===undefined){var i=t.val();return i=i.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,"")}return t.val(e)}return t.html(e)}function KEdit(t){this.init(t)}function _edit(t){return new KEdit(t)}function _selectToolbar(t,e){var i=this,n=i.get(t);if(n){if(n.hasClass("ke-disabled"))return;e(n)}}function KToolbar(t){this.init(t)}function _toolbar(t){return new KToolbar(t)}function KMenu(t){this.init(t)}function _menu(t){return new KMenu(t)}function KColorPicker(t){this.init(t)}function _colorpicker(t){return new KColorPicker(t)}function KUploadButton(t){this.init(t)}function _uploadbutton(t){return new KUploadButton(t)}function _createButton(t){t=t||{};var e=t.name||"",i=K('<span class="ke-button-common ke-button-outer" title="'+e+'"></span>'),n=K('<input class="ke-button-common ke-button" type="button" value="'+e+'" />');return t.click&&n.click(t.click),i.append(n),i}function KDialog(t){this.init(t)}function _dialog(t){return new KDialog(t)}function _tabs(t){var e=_widget(t),i=e.remove,n=t.afterSelect,a=e.div,o=[];a.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(t){t.preventDefault()});var s=K('<ul class="ke-tabs-ul ke-clearfix"></ul>');return a.append(s),e.add=function(t){var e=K('<li class="ke-tabs-li">'+t.title+"</li>");e.data("tab",t),o.push(e),s.append(e)},e.selectedIndex=0,e.select=function(t){e.selectedIndex=t,_each(o,function(i,n){n.unbind(),i===t?(n.addClass("ke-tabs-li-selected"),K(n.data("tab").panel).show("")):(n.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){K(this).addClass("ke-tabs-li-on")}).mouseout(function(){K(this).removeClass("ke-tabs-li-on")}).click(function(){e.select(i)}),K(n.data("tab").panel).hide())}),n&&n.call(e,t)},e.remove=function(){_each(o,function(){this.remove()}),s.remove(),i.call(e)},e}function _loadScript(t,e){var i=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),n=document.createElement("script");i.appendChild(n),n.src=t,n.charset="utf-8",n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(e&&e(),n.onload=n.onreadystatechange=null,i.removeChild(n))}}function _chopQuery(t){var e=t.indexOf("?");return e>0?t.substr(0,e):t}function _loadStyle(t){for(var e=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),i=document.createElement("link"),n=_chopQuery(_formatUrl(t,"absolute")),a=K('link[rel="stylesheet"]',e),o=0,s=a.length;o<s;o++)if(_chopQuery(_formatUrl(a[o].href,"absolute"))===n)return;e.appendChild(i),i.href=t,i.rel="stylesheet"}function _ajax(t,e,i,n,a){i=i||"GET",a=a||"json";var o=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(o.open(i,t,!0),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status&&e){var t=_trim(o.responseText);"json"==a&&(t=_json(t)),e(t)}},"POST"==i){var s=[];_each(n,function(t,e){s.push(encodeURIComponent(t)+"="+encodeURIComponent(e))});try{o.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(r){}o.send(s.join("&"))}else o.send(null)}function _plugin(t,e){return t===undefined?_plugins:e?void(_plugins[t]=e):_plugins[t]}function _parseLangKey(t){var e,i="core";return(e=/^(\w+)\.(\w+)$/.exec(t))&&(i=e[1],t=e[2]),{ns:i,key:t}}function _lang(t,e){if(e=e===undefined?K.options.langType:e,"string"==typeof t){if(!_language[e])return"no language";var i=t.length-1;if("."===t.substr(i))return _language[e][t.substr(0,i)];var n=_parseLangKey(t);return _language[e][n.ns][n.key]}_each(t,function(t,i){var n=_parseLangKey(t);_language[e]||(_language[e]={}),_language[e][n.ns]||(_language[e][n.ns]={}),_language[e][n.ns][n.key]=i})}function _getImageFromRange(t,e){if(!t.collapsed){t=t.cloneRange().up();var i=t.startContainer,n=t.startOffset;if(_WEBKIT||t.isControl()){var a=K(i.childNodes[n]);if(a&&"img"==a.name)return e(a)?a:void 0}}}function _bindContextmenuEvent(){var t=this,e=t.edit.doc;K(e).contextmenu(function(e){if(t.menu&&t.hideMenu(),!t.useContextmenu)return void e.preventDefault();if(0!==t._contextmenus.length){var i=0,n=[];for(_each(t._contextmenus,function(){return"-"==this.title?void n.push(this):void(this.cond&&this.cond()&&(n.push(this),this.width&&this.width>i&&(i=this.width)))});n.length>0&&"-"==n[0].title;)n.shift();for(;n.length>0&&"-"==n[n.length-1].title;)n.pop();var a=null;if(_each(n,function(t){"-"==this.title&&"-"==a.title&&delete n[t],a=this}),n.length>0){e.preventDefault();var o=K(t.edit.iframe).pos(),s=_menu({x:o.x+e.clientX,y:o.y+e.clientY,width:i,css:{visibility:"hidden"},shadowMode:t.shadowMode});_each(n,function(){this.title&&s.addItem(this)});var r=_docElement(s.doc),l=s.div.height();e.clientY+l>=r.clientHeight-100&&s.pos(s.x,_removeUnit(s.y)-l),s.div.css("visibility","visible"),t.menu=s}}})}function _bindNewlineEvent(){function t(t){for(var e=K(t.commonAncestor());e&&(1!=e.type||e.isStyle());)e=e.parent();return e.name}var e=this,i=e.edit.doc,n=e.newlineTag;if(!(_IE&&"br"!==n||_GECKO&&_V<3&&"p"!==n||_OPERA&&_V<9)){var a=_toMap("h1,h2,h3,h4,h5,h6,pre,li"),o=_toMap("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");K(i).keydown(function(s){if(!(13!=s.which||s.shiftKey||s.ctrlKey||s.altKey)){e.cmd.selection();var r=t(e.cmd.range);if("marquee"!=r&&"select"!=r)return"br"!==n||a[r]?void(o[r]||_nativeCommand(i,"formatblock","<p>")):(s.preventDefault(),void e.insertHtml("<br />"+(_IE&&_V<9?"":"​")))}}),K(i).keyup(function(a){if(!(13!=a.which||a.shiftKey||a.ctrlKey||a.altKey)&&"br"!=n){if(_GECKO){var s=e.cmd.commonAncestor("p"),r=e.cmd.commonAncestor("a");return void(r&&""==r.text()&&(r.remove(!0),e.cmd.range.selectNodeContents(s[0]).collapse(!0),e.cmd.select()))}e.cmd.selection();var l=t(e.cmd.range);if("marquee"!=l&&"select"!=l){o[l]||_nativeCommand(i,"formatblock","<p>");var c=e.cmd.commonAncestor("div");if(c){for(var d=K("<p></p>"),h=c[0].firstChild;h;){var u=h.nextSibling;d.append(h),h=u}c.before(d),c.remove(),e.cmd.range.selectNodeContents(d[0]),e.cmd.select()}}}})}}function _bindTabEvent(){var t=this,e=t.edit.doc;K(e).keydown(function(i){if(9==i.which){if(i.preventDefault(),t.afterTab)return void t.afterTab.call(t,i);var n=t.cmd,a=n.range;a.shrink(),a.collapsed&&1==a.startContainer.nodeType&&(a.insertNode(K("@&nbsp;",e)[0]),n.select()),t.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function _bindFocusEvent(){var t=this;K(t.edit.textarea[0],t.edit.win).focus(function(e){t.afterFocus&&t.afterFocus.call(t,e),t.container.addClass("focus")}).blur(function(e){t.afterBlur&&t.afterBlur.call(t,e),t.container.removeClass("focus")})}function _removeBookmarkTag(t){return _trim(t.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/gi,""))}function _removeTempTag(t){return t.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/gi,"")}function _addBookmarkToStack(t,e){if(0===t.length)return void t.push(e);var i=t[t.length-1];_removeBookmarkTag(e.html)!==_removeBookmarkTag(i.html)&&t.push(e)}function _undoToRedo(t,e){var i,n,a=this,o=a.edit,s=o.doc.body;if(0===t.length)return a;o.designMode?(i=a.cmd.range,n=i.createBookmark(!0),n.html=s.innerHTML):n={html:s.innerHTML},_addBookmarkToStack(e,n);var r=t.pop();return _removeBookmarkTag(n.html)===_removeBookmarkTag(r.html)&&t.length>0&&(r=t.pop()),o.designMode?(o.html(r.html),r.start&&(i.moveToBookmark(r),a.select())):K(s).html(_removeBookmarkTag(r.html)),a}function KEditor(t){function e(t,e){KEditor.prototype[t]===undefined&&(i[t]=e),i.options[t]=e}var i=this;i.options={},_each(t,function(i,n){e(i,t[i])}),_each(K.options,function(t,n){i[t]===undefined&&e(t,n)});var n=K(i.srcElement||"<textarea/>");i.width||(i.width=n[0].style.width||n.width()),i.height||(i.height=n[0].style.height||n.height()),e("width",_undef(i.width,i.minWidth)),e("height",_undef(i.height,i.minHeight)),e("width",_addUnit(i.width)),e("height",_addUnit(i.height)),_MOBILE&&(!_IOS||_V<534)&&(i.designMode=!1),i.srcElement=n,i.initContent="",i.plugin={},i.isCreated=!1,i._handlers={},i._contextmenus=[],i._undoStack=[],i._redoStack=[],i._firstAddBookmark=!0,i.menu=i.contextmenu=null,i.dialogs=[]}function _editor(t){return new KEditor(t)}function _create(t,e){function i(t){return _each(_plugins,function(e,i){_isFunction(i)&&i.call(t,KindEditor)}),t.create()}if(e=e||{},e.basePath=_undef(e.basePath,K.basePath),e.themesPath=_undef(e.themesPath,e.basePath+"themes/"),e.langPath=_undef(e.langPath,e.basePath+"lang/"),e.pluginsPath=_undef(e.pluginsPath,e.basePath+"plugins/"),_undef(e.loadStyleMode,K.options.loadStyleMode)){_undef(e.themeType,K.options.themeType);_loadStyle(e.basePath+"/kindeditor.min.css")}var n=K(t);if(n&&0!==n.length){if(n.length>1)return n.each(function(){_create(this,e)}),_instances[0];e.srcElement=n[0];var a=new KEditor(e);return _instances.push(a),_language[a.langType]?i(a):(_loadScript(a.langPath+a.langType+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){i(a)}),a)}}function _eachEditor(t,e){K(t).each(function(t,i){K.each(_instances,function(t,n){if(n&&n.srcElement[0]==i)return e.call(n,t),!1})})}if(!window.KindEditor){window.console||(window.console={}),console.log||(console.log=function(){});var _VERSION="4.1.9 (2013-10-08)",_ua=navigator.userAgent.toLowerCase(),_IE=_ua.indexOf("msie")>-1&&_ua.indexOf("opera")==-1,_GECKO=_ua.indexOf("gecko")>-1&&_ua.indexOf("khtml")==-1,_WEBKIT=_ua.indexOf("applewebkit")>-1,_OPERA=_ua.indexOf("opera")>-1,_MOBILE=_ua.indexOf("mobile")>-1,_IOS=/ipad|iphone|ipod/.test(_ua),_QUIRKS="CSS1Compat"!=document.compatMode,_IERANGE=!window.getSelection,_matches=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(_ua),_V=_matches?_matches[1]:"0",_TIME=(new Date).getTime(),_round=Math.round,K={DEBUG:!1,VERSION:_VERSION,IE:_IE,GECKO:_GECKO,WEBKIT:_WEBKIT,OPERA:_OPERA,V:_V,TIME:_TIME,each:_each,isArray:_isArray,isFunction:_isFunction,inArray:_inArray,inString:_inString,trim:_trim,addUnit:_addUnit,removeUnit:_removeUnit,escape:_escape,unescape:_unescape,toCamel:_toCamel,toHex:_toHex,toMap:_toMap,toArray:_toArray,undef:_undef,invalidUrl:_invalidUrl,addParam:_addParam,extend:_extend,json:_json},_INLINE_TAG_MAP=_toMap("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),_BLOCK_TAG_MAP=_toMap("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),_SINGLE_TAG_MAP=_toMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),_STYLE_TAG_MAP=_toMap("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),_CONTROL_TAG_MAP=_toMap("img,table,input,textarea,button"),_PRE_TAG_MAP=_toMap("pre,style,script"),_NOSPLIT_TAG_MAP=_toMap("html,head,body,td,tr,table,ol,ul,li"),_AUTOCLOSE_TAG_MAP=_toMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),_FILL_ATTR_MAP=_toMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),_VALUE_TAG_MAP=_toMap("input,button,textarea,select");K.basePath=_getBasePath(),K.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:K.basePath,themesPath:K.basePath+"themes/",langPath:K.basePath+"lang/",pluginsPath:K.basePath+"plugins/",themeType:"default",langType:"zh_CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:!0,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","multiimage","flash","media","insertfile","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],noDisableItems:["source","fullscreen"],colorTable:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],embed:["id","class","src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var _useCapture=!1,_INPUT_KEY_MAP=_toMap("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),_CURSORMOVE_KEY_MAP=_toMap("33..40"),_CHANGE_KEY_MAP={};_each(_INPUT_KEY_MAP,function(t,e){_CHANGE_KEY_MAP[t]=e}),_each(_CURSORMOVE_KEY_MAP,function(t,e){_CHANGE_KEY_MAP[t]=e});var _EVENT_PROPS="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");_extend(KEvent,{init:function(t,e){var i=this,n=t.ownerDocument||t.document||t;if(i.event=e,_each(_EVENT_PROPS,function(t,n){i[n]=e[n]}),i.target||(i.target=i.srcElement||n),3===i.target.nodeType&&(i.target=i.target.parentNode),!i.relatedTarget&&i.fromElement&&(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),null==i.pageX&&null!=i.clientX){var a=n.documentElement,o=n.body;i.pageX=i.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),i.pageY=i.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}switch(!i.which&&(i.charCode||0===i.charCode?i.charCode:i.keyCode)&&(i.which=i.charCode||i.keyCode),!i.metaKey&&i.ctrlKey&&(i.metaKey=i.ctrlKey),i.which||i.button===undefined||(i.which=1&i.button?1:2&i.button?3:4&i.button?2:0),i.which){case 186:i.which=59;break;case 187:case 107:case 43:i.which=61;break;case 189:case 45:i.which=109;break;case 42:i.which=106;break;case 47:i.which=111;break;case 78:i.which=110}i.which>=96&&i.which<=105&&(i.which-=48)},preventDefault:function(){var t=this.event;t.preventDefault&&t.preventDefault(),t.returnValue=!1},stopPropagation:function(){var t=this.event;t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},stop:function(){this.preventDefault(),this.stopPropagation()}});var _eventExpendo="kindeditor_"+_TIME,_eventId=0,_eventData={},_readyFinished=!1;_IE&&window[window.attachEvent?"attachEvent":"addEventListener"]("onunload",function(){_each(_eventData,function(t,e){e.el&&_unbind(e.el)})}),K.ctrl=_ctrl,K.ready=_ready,K.formatUrl=_formatUrl,K.formatHtml=_formatHtml,K.getCssList=_getCssList,K.getAttrList=_getAttrList,K.mediaType=_mediaType,K.mediaAttrs=_mediaAttrs,K.mediaEmbed=_mediaEmbed,K.mediaImg=_mediaImg,K.clearMsWord=_clearMsWord,K.tmpl=_tmpl;var _getSetAttrDiv=document.createElement("div");_getSetAttrDiv.setAttribute("className","t");var _GET_SET_ATTRIBUTE="t"!==_getSetAttrDiv.className;K.query=_query,K.queryAll=_queryAll,_extend(KNode,{init:function(t){var e=this;t=_isArray(t)?t:[t];for(var i=0,n=0,a=t.length;n<a;n++)t[n]&&(e[n]=t[n].constructor===KNode?t[n][0]:t[n],i++);e.length=i,e.doc=_getDoc(e[0]),e.name=_getNodeName(e[0]),e.type=e.length>0?e[0].nodeType:null,e.win=_getWin(e[0])},each:function(t){for(var e=this,i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e;return e},bind:function(t,e){return this.each(function(){_bind(this,t,e)}),this},unbind:function(t,e){return this.each(function(){_unbind(this,t,e)}),this},fire:function(t){return this.length<1?this:(_fire(this[0],t),this)},hasAttr:function(t){return!(this.length<1)&&!!_getAttr(this[0],t)},attr:function(t,e){var i=this;return t===undefined?_getAttrList(i.outer()):"object"==typeof t?(_each(t,function(t,e){i.attr(t,e)}),i):e===undefined?(e=i.length<1?null:_getAttr(i[0],t),null===e?"":e):(i.each(function(){_setAttr(this,t,e)}),i)},removeAttr:function(t){return this.each(function(){_removeAttr(this,t)}),this},get:function(t){return this.length<1?null:this[t||0]},eq:function(t){return this.length<1?null:this[t]?new KNode(this[t]):null},hasClass:function(t){return!(this.length<1)&&_hasClass(this[0],t)},addClass:function(t){return this.each(function(){_hasClass(this,t)||(this.className=_trim(this.className+" "+t))}),this},removeClass:function(t){return this.each(function(){_hasClass(this,t)&&(this.className=_trim(this.className.replace(new RegExp("(^|\\s)"+t+"(\\s|$)")," ")))}),this},html:function(t){var e=this;return t===undefined?e.length<1||1!=e.type?"":_formatHtml(e[0].innerHTML):(e.each(function(){_setHtml(this,t)}),e)},text:function(){var t=this;return t.length<1?"":_IE?t[0].innerText:t[0].textContent},hasVal:function(){return!(this.length<1)&&_hasVal(this[0])},val:function(t){var e=this;return t===undefined?e.length<1?"":e.hasVal()?e[0].value:e.attr("value"):(e.each(function(){_hasVal(this)?this.value=t:_setAttr(this,"value",t)}),e)},css:function(t,e){var i=this;return t===undefined?_getCssList(i.attr("style")):"object"==typeof t?(_each(t,function(t,e){i.css(t,e)}),i):e===undefined?i.length<1?"":i[0].style[_toCamel(t)]||_computedCss(i[0],t)||"":(i.each(function(){this.style[_toCamel(t)]=e}),i)},width:function(t){var e=this;return t===undefined?e.length<1?0:e[0].offsetWidth:e.css("width",_addUnit(t))},height:function(t){var e=this;return t===undefined?e.length<1?0:e[0].offsetHeight:e.css("height",_addUnit(t))},opacity:function(t){return this.each(function(){this.style.opacity===undefined?this.style.filter=1==t?"":"alpha(opacity="+100*t+")":this.style.opacity=1==t?"":t}),this},data:function(t,e){var i=this;return t="kindeditor_data_"+t,e===undefined?i.length<1?null:i[0][t]:(this.each(function(){this[t]=e}),i)},pos:function(){var t=this,e=t[0],i=0,n=0;if(e)if(e.getBoundingClientRect){var a=e.getBoundingClientRect(),o=_getScrollPos(t.doc);i=a.left+o.x,n=a.top+o.y}else for(;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:_round(i),y:_round(n)}},clone:function(t){return new KNode(this.length<1?[]:this[0].cloneNode(t))},append:function(t){return this.each(function(){this.appendChild&&this.appendChild(_get(t))}),this},appendTo:function(t){return this.each(function(){_get(t).appendChild(this)}),this},before:function(t){return this.each(function(){this.parentNode.insertBefore(_get(t),this)}),this},after:function(t){return this.each(function(){this.nextSibling?this.parentNode.insertBefore(_get(t),this.nextSibling):this.parentNode.appendChild(_get(t))}),this},replaceWith:function(t){
var e=[];return this.each(function(i,n){_unbind(n);var a=_get(t);n.parentNode.replaceChild(a,n),e.push(a)}),K(e)},empty:function(){var t=this;return t.each(function(t,e){for(var i=e.firstChild;i;){if(!e.parentNode)return;var n=i.nextSibling;i.parentNode.removeChild(i),i=n}}),t},remove:function(t){var e=this;return e.each(function(i,n){if(n.parentNode){if(_unbind(n),t)for(var a=n.firstChild;a;){var o=a.nextSibling;n.parentNode.insertBefore(a,n),a=o}n.parentNode.removeChild(n),delete e[i]}}),e.length=0,e},show:function(t){var e=this;return t===undefined&&(t=e._originDisplay||""),"none"!=e.css("display")?e:e.css("display",t)},hide:function(){var t=this;return t.length<1?t:(t._originDisplay=t[0].style.display,t.css("display","none"))},outer:function(){var t=this;if(t.length<1)return"";var e,i=t.doc.createElement("div");return i.appendChild(t[0].cloneNode(!0)),e=_formatHtml(i.innerHTML),i=null,e},isSingle:function(){return!!_SINGLE_TAG_MAP[this.name]},isInline:function(){return!!_INLINE_TAG_MAP[this.name]},isBlock:function(){return!!_BLOCK_TAG_MAP[this.name]},isStyle:function(){return!!_STYLE_TAG_MAP[this.name]},isControl:function(){return!!_CONTROL_TAG_MAP[this.name]},contains:function(t){return!(this.length<1)&&_contains(this[0],_get(t))},parent:function(){if(this.length<1)return null;var t=this[0].parentNode;return t?new KNode(t):null},children:function(){if(this.length<1)return new KNode([]);for(var t=[],e=this[0].firstChild;e;)3==e.nodeType&&""===_trim(e.nodeValue)||t.push(e),e=e.nextSibling;return new KNode(t)},first:function(){var t=this.children();return t.length>0?t.eq(0):null},last:function(){var t=this.children();return t.length>0?t.eq(t.length-1):null},index:function(){if(this.length<1)return-1;for(var t=-1,e=this[0];e;)t++,e=e.previousSibling;return t},prev:function(){if(this.length<1)return null;var t=this[0].previousSibling;return t?new KNode(t):null},next:function(){if(this.length<1)return null;var t=this[0].nextSibling;return t?new KNode(t):null},scan:function(t,e){function i(n){for(var a=e?n.firstChild:n.lastChild;a;){var o=e?a.nextSibling:a.previousSibling;if(t(a)===!1)return!1;if(i(a)===!1)return!1;a=o}}if(!(this.length<1))return e=e===undefined||e,i(this[0]),this}}),_each("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),function(t,e){KNode.prototype[e]=function(t){return t?this.bind(e,t):this.fire(e)}});var _K=K;K=function(t,e){function i(t){return t[0]||(t=[]),new KNode(t)}if(t!==undefined&&null!==t){if("string"==typeof t){e&&(e=_get(e));var n=t.length;if("@"===t.charAt(0)&&(t=t.substr(1)),t.length!==n||/<.+>/.test(t)){var a=e?e.ownerDocument||e:document,o=a.createElement("div"),s=[];o.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+t;for(var r=0,l=o.childNodes.length;r<l;r++){var c=o.childNodes[r];"__kindeditor_temp_tag__"!=c.id&&s.push(c)}return i(s)}return i(_queryAll(t,e))}return t&&t.constructor===KNode?t:(t.toArray&&(t=t.toArray()),i(_isArray(t)?t:_toArray(arguments)))}},_each(_K,function(t,e){K[t]=e}),K.NodeClass=KNode,window.KindEditor=K;var _START_TO_START=0,_START_TO_END=1,_END_TO_END=2,_END_TO_START=3,_BOOKMARK_ID=0;_extend(KRange,{init:function(t){var e=this;e.startContainer=t,e.startOffset=0,e.endContainer=t,e.endOffset=0,e.collapsed=!0,e.doc=t},commonAncestor:function(){function t(t){for(var e=[];t;)e.push(t),t=t.parentNode;return e}for(var e,i,n=t(this.startContainer),a=t(this.endContainer),o=0,s=n.length,r=a.length;++o&&(e=n[s-o],i=a[r-o],e&&i&&e===i););return n[s-o+1]},setStart:function(t,e){var i=this,n=i.doc;return i.startContainer=t,i.startOffset=e,i.endContainer===n&&(i.endContainer=t,i.endOffset=e),_updateCollapsed(this)},setEnd:function(t,e){var i=this,n=i.doc;return i.endContainer=t,i.endOffset=e,i.startContainer===n&&(i.startContainer=t,i.startOffset=e),_updateCollapsed(this)},setStartBefore:function(t){return this.setStart(t.parentNode||this.doc,K(t).index())},setStartAfter:function(t){return this.setStart(t.parentNode||this.doc,K(t).index()+1)},setEndBefore:function(t){return this.setEnd(t.parentNode||this.doc,K(t).index())},setEndAfter:function(t){return this.setEnd(t.parentNode||this.doc,K(t).index()+1)},selectNode:function(t){return this.setStartBefore(t).setEndAfter(t)},selectNodeContents:function(t){var e=K(t);if(3==e.type||e.isSingle())return this.selectNode(t);var i=e.children();return i.length>0?this.setStartBefore(i[0]).setEndAfter(i[i.length-1]):this.setStart(t,0).setEnd(t,0)},collapse:function(t){return t?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(t,e){var i=this.get(),n=e.get();if(!_IERANGE)return i.compareBoundaryPoints(t,n);var a={};a[_START_TO_START]="StartToStart",a[_START_TO_END]="EndToStart",a[_END_TO_END]="EndToEnd",a[_END_TO_START]="StartToEnd";var o=i.compareEndPoints(a[t],n);if(0!==o)return o;var s,r,l,c,d;if(t!==_START_TO_START&&t!==_END_TO_START||(s=this.startContainer,c=this.startOffset),t!==_START_TO_END&&t!==_END_TO_END||(s=this.endContainer,c=this.endOffset),t!==_START_TO_START&&t!==_START_TO_END||(r=e.startContainer,d=e.startOffset),t!==_END_TO_END&&t!==_END_TO_START||(r=e.endContainer,d=e.endOffset),s===r){var h=c-d;return h>0?1:h<0?-1:0}for(l=r;l&&l.parentNode!==s;)l=l.parentNode;if(l)return K(l).index()>=c?-1:1;for(l=s;l&&l.parentNode!==r;)l=l.parentNode;return l?K(l).index()>=d?1:-1:(l=K(r).next(),l&&l.contains(s)?1:(l=K(s).next(),l&&l.contains(r)?-1:void 0))},cloneRange:function(){return new KRange(this.doc).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var t=this.get(),e=_IERANGE?t.text:t.toString();return e.replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return _copyAndDelete(this,!0,!1)},deleteContents:function(){return _copyAndDelete(this,!1,!0)},extractContents:function(){return _copyAndDelete(this,!0,!0)},insertNode:function(t){var e,i,n,a=this,o=a.startContainer,s=a.startOffset,r=a.endContainer,l=a.endOffset,c=1;return"#document-fragment"===t.nodeName.toLowerCase()&&(e=t.firstChild,i=t.lastChild,c=t.childNodes.length),1==o.nodeType?(n=o.childNodes[s],n?(o.insertBefore(t,n),o===r&&(l+=c)):o.appendChild(t)):3==o.nodeType&&(0===s?(o.parentNode.insertBefore(t,o),o.parentNode===r&&(l+=c)):s>=o.nodeValue.length?o.nextSibling?o.parentNode.insertBefore(t,o.nextSibling):o.parentNode.appendChild(t):(n=s>0?o.splitText(s):o,o.parentNode.insertBefore(t,n),o===r&&(r=n,l-=s))),e?a.setStartBefore(e).setEndAfter(i):a.selectNode(t),a.compareBoundaryPoints(_END_TO_END,a.cloneRange().setEnd(r,l))>=1?a:a.setEnd(r,l)},surroundContents:function(t){return t.appendChild(this.extractContents()),this.insertNode(t).selectNode(t)},isControl:function(){var t=this,e=t.startContainer,i=t.startOffset,n=t.endContainer,a=t.endOffset;return 1==e.nodeType&&e===n&&i+1===a&&K(e.childNodes[i]).isControl()},get:function(t){var e,i=this,n=i.doc;if(!_IERANGE){e=n.createRange();try{e.setStart(i.startContainer,i.startOffset),e.setEnd(i.endContainer,i.endOffset)}catch(a){}return e}if(t&&i.isControl())return e=n.body.createControlRange(),e.addElement(i.startContainer.childNodes[i.startOffset]),e;var o=i.cloneRange().down();return e=n.body.createTextRange(),e.setEndPoint("StartToStart",_getEndRange(o.startContainer,o.startOffset)),e.setEndPoint("EndToStart",_getEndRange(o.endContainer,o.endOffset)),e},html:function(){return K(this.cloneContents()).outer()},down:function(){function t(t,i,n){if(1==t.nodeType){var a=K(t).children();if(0!==a.length){var o,s,r,l;i>0&&(o=a.eq(i-1)),i<a.length&&(s=a.eq(i)),o&&3==o.type&&(r=o[0],l=r.nodeValue.length),s&&3==s.type&&(r=s[0],l=0),r&&(n?e.setStart(r,l):e.setEnd(r,l))}}}var e=this;return t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1),e},up:function(){function t(t,i,n){3==t.nodeType&&(0===i?n?e.setStartBefore(t):e.setEndBefore(t):i==t.nodeValue.length&&(n?e.setStartAfter(t):e.setEndAfter(t)))}var e=this;return t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1),e},enlarge:function(t){function e(e,n,a){var o,s=K(e);if(!(3==s.type||_NOSPLIT_TAG_MAP[s.name]||!t&&s.isBlock()))if(0===n){for(;!s.prev()&&(o=s.parent(),o&&!_NOSPLIT_TAG_MAP[o.name]&&(t||!o.isBlock()));)s=o;a?i.setStartBefore(s[0]):i.setEndBefore(s[0])}else if(n==s.children().length){for(;!s.next()&&(o=s.parent(),o&&!_NOSPLIT_TAG_MAP[o.name]&&(t||!o.isBlock()));)s=o;a?i.setStartAfter(s[0]):i.setEndAfter(s[0])}}var i=this;return i.up(),e(i.startContainer,i.startOffset,!0),e(i.endContainer,i.endOffset,!1),i},shrink:function(){for(var t,e=this,i=e.collapsed;1==e.startContainer.nodeType&&(t=e.startContainer.childNodes[e.startOffset])&&1==t.nodeType&&!K(t).isSingle();)e.setStart(t,0);if(i)return e.collapse(i);for(;1==e.endContainer.nodeType&&e.endOffset>0&&(t=e.endContainer.childNodes[e.endOffset-1])&&1==t.nodeType&&!K(t).isSingle();)e.setEnd(t,t.childNodes.length);return e},createBookmark:function(t){var e,i=this,n=i.doc,a=K('<span style="display:none;"></span>',n)[0];return a.id="__kindeditor_bookmark_start_"+_BOOKMARK_ID++ +"__",i.collapsed||(e=a.cloneNode(!0),e.id="__kindeditor_bookmark_end_"+_BOOKMARK_ID++ +"__"),e&&i.cloneRange().collapse(!1).insertNode(e).setEndBefore(e),i.insertNode(a).setStartAfter(a),{start:t?"#"+a.id:a,end:e?t?"#"+e.id:e:null}},moveToBookmark:function(t){var e=this,i=e.doc,n=K(t.start,i),a=t.end?K(t.end,i):null;return!n||n.length<1?e:(e.setStartBefore(n[0]),n.remove(),a&&a.length>0?(e.setEndBefore(a[0]),a.remove()):e.collapse(!0),e)},dump:function(){console.log("--------------------"),console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset),console.log(3==this.endContainer.nodeType?this.endContainer.nodeValue:this.endContainer,this.endOffset)}}),K.RangeClass=KRange,K.range=_range,K.START_TO_START=_START_TO_START,K.START_TO_END=_START_TO_END,K.END_TO_END=_END_TO_END,K.END_TO_START=_END_TO_START,_extend(KCmd,{init:function(t){var e=this,i=t.doc;e.doc=i,e.win=_getWin(i),e.sel=_getSel(i),e.range=t},selection:function(t){var e=this,i=e.doc,n=_getRng(i);return e.sel=_getSel(i),n?(e.range=_range(n),"html"==K(e.range.startContainer).name&&e.range.selectNodeContents(i.body).collapse(!1),e):(t&&e.range.selectNodeContents(i.body).collapse(!1),e)},select:function(t){t=_undef(t,!0);var e,i=this,n=i.sel,a=i.range.cloneRange().shrink(),o=a.startContainer,s=a.startOffset,r=(a.endContainer,a.endOffset,_getDoc(o)),l=i.win,c=!1;if(t&&1==o.nodeType&&a.collapsed){if(_IERANGE){var d=K("<span>&nbsp;</span>",r);a.insertNode(d[0]),e=r.body.createTextRange();try{e.moveToElementText(d[0])}catch(h){}return e.collapse(!1),e.select(),d.remove(),l.focus(),i}if(_WEBKIT){var u=o.childNodes;(K(o).isInline()||s>0&&K(u[s-1]).isInline()||u[s]&&K(u[s]).isInline())&&(a.insertNode(r.createTextNode("​")),c=!0)}}if(_IERANGE)try{e=a.get(!0),e.select()}catch(p){}else if(c&&a.collapse(!1),e=a.get(!0),n.removeAllRanges(),n.addRange(e),r!==document){var f=K(e.endContainer).pos();l.scrollTo(f.x,f.y)}return l.focus(),i},wrap:function(t){var e,i=this,n=i.doc,a=i.range;if(e=K(t,n),a.collapsed)return a.shrink(),a.insertNode(e[0]).selectNodeContents(e[0]),i;if(e.isBlock()){for(var o=e.clone(!0),s=o;s.first();)s=s.first();return s.append(a.extractContents()),a.insertNode(o[0]).selectNode(o[0]),i}a.enlarge();var r=a.createBookmark(),l=a.commonAncestor(),c=!1;return K(l).scan(function(t){if(!c&&t==r.start)return void(c=!0);if(c){if(t==r.end)return!1;var i=K(t);if(_inPreElement(i))return;if(3==i.type&&_trim(t.nodeValue).length>0){for(var n;(n=i.parent())&&n.isStyle()&&1==n.children().length;)i=n;_wrapNode(i,e)}}}),a.moveToBookmark(r),i},split:function(t,e){for(var i,n=this.range,a=n.doc,o=n.cloneRange().collapse(t),s=o.startContainer,r=o.startOffset,l=3==s.nodeType?s.parentNode:s,c=!1;l&&l.parentNode;){if(i=K(l),e){if(!i.isStyle())break;if(!_hasAttrOrCss(i,e))break}else if(_NOSPLIT_TAG_MAP[i.name])break;c=!0,l=l.parentNode}if(c){var d=a.createElement("span");n.cloneRange().collapse(!t).insertNode(d),t?o.setStartBefore(l.firstChild).setEnd(s,r):o.setStart(s,r).setEndAfter(l.lastChild);var h=o.extractContents(),u=h.firstChild,p=h.lastChild;t?(o.insertNode(h),n.setStartAfter(p).setEndBefore(d)):(l.appendChild(h),n.setStartBefore(d).setEndBefore(u));var f=d.parentNode;if(f==n.endContainer){var g=K(d).prev(),m=K(d).next();g&&m&&3==g.type&&3==m.type?n.setEnd(g[0],g[0].nodeValue.length):t||n.setEnd(n.endContainer,n.endOffset-1)}f.removeChild(d)}return this},remove:function(t){var e=this,i=e.doc,n=e.range;if(n.enlarge(),0===n.startOffset){for(var a,o=K(n.startContainer);(a=o.parent())&&a.isStyle()&&1==a.children().length;)o=a;n.setStart(o[0],0),o=K(n.startContainer),o.isBlock()&&_removeAttrOrCss(o,t);var s=o.parent();s&&s.isBlock()&&_removeAttrOrCss(s,t)}var r,l;if(n.collapsed){if(e.split(!0,t),r=n.startContainer,l=n.startOffset,l>0){var c=K(r.childNodes[l-1]);c&&_isEmptyNode(c)&&(c.remove(),n.setStart(r,l-1))}var d=K(r.childNodes[l]);return d&&_isEmptyNode(d)&&d.remove(),_isEmptyNode(r)&&(n.startBefore(r),r.remove()),n.collapse(!0),e}e.split(!0,t),e.split(!1,t);var h=i.createElement("span"),u=i.createElement("span");n.cloneRange().collapse(!1).insertNode(u),n.cloneRange().collapse(!0).insertNode(h);var p=[],f=!1;K(n.commonAncestor()).scan(function(t){return f||t!=h?t!=u&&void(f&&p.push(t)):void(f=!0)}),K(h).remove(),K(u).remove(),r=n.startContainer,l=n.startOffset;var g=n.endContainer,m=n.endOffset;if(l>0){var v=K(r.childNodes[l-1]);v&&_isEmptyNode(v)&&(v.remove(),n.setStart(r,l-1),r==g&&n.setEnd(g,m-1));var _=K(r.childNodes[l]);_&&_isEmptyNode(_)&&(_.remove(),r==g&&n.setEnd(g,m-1))}var y=K(g.childNodes[n.endOffset]);y&&_isEmptyNode(y)&&y.remove();var b=n.createBookmark(!0);return _each(p,function(e,i){_removeAttrOrCss(K(i),t)}),n.moveToBookmark(b),e},commonNode:function(t){function e(e){for(var i=e,n=e;n;){if(_hasAttrOrCss(K(n),t))return K(n);n=n.parentNode}for(;i&&(i=i.lastChild);)if(_hasAttrOrCss(K(i),t))return K(i);return null}var i=this.range,n=i.endContainer,a=i.endOffset,o=3==n.nodeType||0===a?n:n.childNodes[a-1],s=e(o);if(s)return s;if(1==o.nodeType||3==n.nodeType&&0===a){var r=K(o).prev();if(r)return e(r)}return null},commonAncestor:function(t){function e(e){for(;e;){if(1==e.nodeType&&e.tagName.toLowerCase()===t)return e;e=e.parentNode}return null}var i=this.range,n=i.startContainer,a=i.startOffset,o=i.endContainer,s=i.endOffset,r=3==n.nodeType||0===a?n:n.childNodes[a-1],l=3==o.nodeType||0===s?o:o.childNodes[s-1],c=e(r),d=e(l);return c&&d&&c===d?K(c):null},state:function(t){var e=this,i=e.doc,n=!1;try{n=i.queryCommandState(t)}catch(a){}return n},val:function(t){function e(t){return t.toLowerCase()}var i=this,n=i.doc;i.range;t=e(t);var a,o="";return"fontfamily"===t||"fontname"===t?(o=_nativeCommandValue(n,"fontname"),o=o.replace(/['"]/g,""),e(o)):"formatblock"===t?(o=_nativeCommandValue(n,t),""===o&&(a=i.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}),a&&(o=a.name)),"Normal"===o&&(o="p"),e(o)):"fontsize"===t?(a=i.commonNode({"*":".font-size"}),a&&(o=a.css("font-size")),e(o)):"forecolor"===t?(a=i.commonNode({"*":".color"}),a&&(o=a.css("color")),o=_toHex(o),""===o&&(o="default"),e(o)):"hilitecolor"===t?(a=i.commonNode({"*":".background-color"}),a&&(o=a.css("background-color")),o=_toHex(o),""===o&&(o="default"),e(o)):o},toggle:function(t,e){var i=this;return i.commonNode(e)?i.remove(e):i.wrap(t),i.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(t){return this.toggle('<span style="color:'+t+';"></span>',{span:".color="+t,font:"color"})},hilitecolor:function(t){return this.toggle('<span style="background-color:'+t+';"></span>',{span:".background-color="+t})},fontsize:function(t){return this.toggle('<span style="font-size:'+t+';"></span>',{span:".font-size="+t,font:"size"})},fontname:function(t){return this.fontfamily(t)},fontfamily:function(t){return this.toggle('<span style="font-family:'+t+';"></span>',{span:".font-family="+t,font:"face"})},removeformat:function(){var t={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"},e=_STYLE_TAG_MAP;return _each(e,function(e,i){t[e]="*"}),this.remove(t),this.select()},inserthtml:function(t,e){function i(t,e){e='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+e;var i=t.get();i.item?i.item(0).outerHTML=e:i.pasteHTML(e);var n=t.doc.getElementById("__kindeditor_temp_tag__");n.parentNode.removeChild(n);var o=_toRange(i);t.setEnd(o.endContainer,o.endOffset),t.collapse(!1),a.select(!1)}function n(t,e){var i=t.doc,n=i.createDocumentFragment();K("@"+e,i).each(function(){n.appendChild(this)}),t.deleteContents(),t.insertNode(n),t.collapse(!1),a.select(!1)}var a=this,o=a.range;if(""===t)return a;if(_IERANGE&&e){try{i(o,t)}catch(s){n(o,t)}return a}return n(o,t),a},hr:function(){return this.inserthtml("<hr />")},print:function(){return this.win.print(),this},insertimage:function(t,e,i,n,a,o){e=_undef(e,""),a=_undef(a,0);var s='<img src="'+_escape(t)+'" data-ke-src="'+_escape(t)+'" ';return i&&(s+='width="'+_escape(i)+'" '),n&&(s+='height="'+_escape(n)+'" '),e&&(s+='title="'+_escape(e)+'" '),o&&(s+='align="'+_escape(o)+'" '),s+='alt="'+_escape(e)+'" ',s+="/>",this.inserthtml(s)},createlink:function(t,e){function i(t,e,i){K(t).attr("href",e).attr("data-ke-src",e),i?K(t).attr("target",i):K(t).removeAttr("target")}var n=this,a=n.doc,o=n.range;n.select();var s=n.commonNode({a:"*"});s&&!o.isControl()&&(o.selectNode(s.get()),n.select());var r='<a href="'+_escape(t)+'" data-ke-src="'+_escape(t)+'" ';if(e&&(r+=' target="'+_escape(e)+'"'),o.collapsed)return r+=">"+_escape(t)+"</a>",n.inserthtml(r);if(o.isControl()){var l=K(o.startContainer.childNodes[o.startOffset]);return r+="></a>",l.after(K(r,a)),l.next().append(l),o.selectNode(l[0]),n.select()}var c=o.startContainer,d=o.startOffset,h=o.endContainer,u=o.endOffset;if(1==c.nodeType&&c===h&&d+1===u){var p=c.childNodes[d];if("a"==p.nodeName.toLowerCase())return i(p,t,e),n}return _nativeCommand(a,"createlink","__kindeditor_temp_url__"),K('a[href="__kindeditor_temp_url__"]',a).each(function(){i(this,t,e)}),n},unlink:function(){var t=this,e=t.doc,i=t.range;if(t.select(),i.collapsed){var n=t.commonNode({a:"*"});if(n&&(i.selectNode(n.get()),t.select()),_nativeCommand(e,"unlink",null),_WEBKIT&&"img"===K(i.startContainer).name){var a=K(i.startContainer).parent();"a"===a.name&&a.remove(!0)}}else _nativeCommand(e,"unlink",null);return t}}),_each("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(t,e){KCmd.prototype[e]=function(t){var i=this;return i.select(),_nativeCommand(i.doc,e,t),_IERANGE&&_inArray(e,"justifyleft,justifycenter,justifyright,justifyfull".split(","))>=0&&i.selection(),(!_IERANGE||_inArray(e,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0)&&i.selection(),i}}),_each("cut,copy,paste".split(","),function(t,e){KCmd.prototype[e]=function(){var t=this;if(!t.doc.queryCommandSupported(e))throw"not supported";return t.select(),_nativeCommand(t.doc,e,null),t}}),K.CmdClass=KCmd,K.cmd=_cmd,_extend(KWidget,{init:function(t){var e=this;if(e.name=t.name||"",e.doc=t.doc||document,e.win=_getWin(e.doc),e.x=_addUnit(t.x),e.y=_addUnit(t.y),e.z=t.z,e.width=_addUnit(t.width),e.height=_addUnit(t.height),e.div=K('<div style="display:block;"></div>'),e.options=t,e._alignEl=t.alignEl,e.width&&e.div.css("width",e.width),e.height&&e.div.css("height",e.height),e.z&&e.div.css({position:"absolute",left:e.x,top:e.y,"z-index":e.z}),!e.z||e.x!==undefined&&e.y!==undefined||e.autoPos(e.width,e.height),t.cls&&e.div.addClass(t.cls),t.shadowMode&&e.div.addClass("ke-shadow"),t.css&&e.div.css(t.css),t.src?K(t.src).replaceWith(e.div):K(e.doc.body).append(e.div),t.html&&e.div.html(t.html),t.autoScroll)if(_IE&&_V<7||_QUIRKS){var i=_getScrollPos();K(e.win).bind("scroll",function(t){var n=_getScrollPos(),a=n.x-i.x,o=n.y-i.y;e.pos(_removeUnit(e.x)+a,_removeUnit(e.y)+o,!1)})}else e.div.css("position","fixed")},pos:function(t,e,i){var n=this;return i=_undef(i,!0),null!==t&&(t=t<0?0:_addUnit(t),n.div.css("left",t),i&&(n.x=t)),null!==e&&(e=e<0?0:_addUnit(e),n.div.css("top",e),i&&(n.y=e)),n},autoPos:function(t,e){var i=this,n=_removeUnit(t)||0,a=_removeUnit(e)||0,o=_getScrollPos();if(i._alignEl){var s=K(i._alignEl),r=s.pos(),l=_round(s[0].clientWidth/2-n/2),c=_round(s[0].clientHeight/2-a/2);x=l<0?r.x:r.x+l,y=c<0?r.y:r.y+c}else{var d=_docElement(i.doc);x=_round(o.x+(d.clientWidth-n)/2),y=_round(o.y+(d.clientHeight-a)/2)}return _IE&&_V<7||_QUIRKS||(x-=o.x,y-=o.y),i.pos(x,y)},remove:function(){var t=this;return(_IE&&_V<7||_QUIRKS)&&K(t.win).unbind("scroll"),t.div.remove(),_each(t,function(e){t[e]=null}),this},show:function(){return this.div.show(),this},hide:function(){return this.div.hide(),this},draggable:function(t){var e=this;return t=t||{},t.moveEl=e.div,t.moveFn=function(t,i,n,a,o,s){(t+=o)<0&&(t=0),(i+=s)<0&&(i=0),e.pos(t,i)},_drag(t),e}}),K.WidgetClass=KWidget,K.widget=_widget;var html,_direction="";(html=document.getElementsByTagName("html"))&&(_direction=html[0].dir),_extend(KEdit,KWidget,{init:function(t){function e(){var e=_iframeDoc(i.iframe);e.open(),r&&(e.domain=document.domain),e.write(_getInitHtml(n,a,o,s)),e.close(),i.win=i.iframe[0].contentWindow,i.doc=e;var l=_cmd(e);i.afterChange(function(t){l.selection()}),_WEBKIT&&K(e).click(function(t){"img"===K(t.target).name&&(l.selection(!0),l.range.selectNode(t.target),l.select())}),_IE&&(i._mousedownHandler=function(){var t=l.range.cloneRange();t.shrink(),t.isControl()&&i.blur()},K(document).mousedown(i._mousedownHandler),K(e).keydown(function(t){if(8==t.which){l.selection();var e=l.range;e.isControl()&&(e.collapse(!0),K(e.startContainer.childNodes[e.startOffset]).remove(),t.preventDefault())}})),i.cmd=l,i.html(_elementVal(i.srcElement)),_IE?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.removeAttribute("disabled")):e.designMode="on",t.afterCreate&&t.afterCreate.call(i)}var i=this;KEdit.parent.init.call(i,t),i.srcElement=K(t.srcElement),i.div.addClass("ke-edit"),i.designMode=_undef(t.designMode,!0),i.beforeGetHtml=t.beforeGetHtml,i.beforeSetHtml=t.beforeSetHtml,i.afterSetHtml=t.afterSetHtml;var n=_undef(t.themesPath,""),a=t.bodyClass,o=t.cssPath,s=t.cssData,r="res:"!=location.protocol&&location.host.replace(/:\d+/,"")!==document.domain,l="document.open();"+(r?'document.domain="'+document.domain+'";':"")+"document.close();",c=_IE?' src="javascript:void(function(){'+encodeURIComponent(l)+'}())"':"";i.iframe=K('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+c+"></iframe>").css("width","100%"),i.textarea=K('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%"),i.tabIndex=isNaN(parseInt(t.tabIndex,10))?i.srcElement.attr("tabindex"):parseInt(t.tabIndex,10),i.iframe.attr("tabindex",i.tabIndex),i.textarea.attr("tabindex",i.tabIndex),i.width&&i.setWidth(i.width),i.height&&i.setHeight(i.height),i.designMode?i.textarea.hide():i.iframe.hide(),r&&i.iframe.bind("load",function(t){i.iframe.unbind("load"),_IE?e():setTimeout(e,0)}),i.div.append(i.iframe),i.div.append(i.textarea),i.srcElement.hide(),!r&&e()},setWidth:function(t){return this.div.css("width",_addUnit(t)),this},setHeight:function(t){var e=this;return t=_addUnit(t),e.div.css("height",t),e.iframe.css("height",t),(_IE&&_V<8||_QUIRKS)&&(t=_addUnit(_removeUnit(t)-2)),e.textarea.css("height",t),e},remove:function(){var t=this,e=t.doc;K(e.body).unbind(),K(e).unbind(),K(t.win).unbind(),t._mousedownHandler&&K(document).unbind("mousedown",t._mousedownHandler),_elementVal(t.srcElement,t.html()),t.srcElement.show(),e.write(""),t.iframe.unbind(),t.textarea.unbind(),KEdit.parent.remove.call(t)},html:function(t,e){var i=this,n=i.doc;if(i.designMode){var a=n.body;return t===undefined?(t=e?"<!doctype html><html>"+a.parentNode.innerHTML+"</html>":a.innerHTML,i.beforeGetHtml&&(t=i.beforeGetHtml(t)),_GECKO&&"<br />"==t&&(t=""),t):(i.beforeSetHtml&&(t=i.beforeSetHtml(t)),_IE&&_V>=9&&(t=t.replace(/(<.*?checked=")checked(".*>)/gi,"$1$2")),K(a).html(t),i.afterSetHtml&&i.afterSetHtml(),i)}return t===undefined?i.textarea.val():(i.textarea.val(t),i)},design:function(t){var e,i=this;return(t===undefined?!i.designMode:t)?i.designMode||(e=i.html(),i.designMode=!0,i.html(e),i.textarea.hide(),i.iframe.show()):i.designMode&&(e=i.html(),i.designMode=!1,i.html(e),i.iframe.hide(),i.textarea.show()),i.focus()},focus:function(){var t=this;return t.designMode?t.win.focus():t.textarea[0].focus(),t},blur:function(){var t=this;if(_IE){var e=K('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',t.div);t.div.append(e),e[0].focus(),e.remove()}else t.designMode?t.win.blur():t.textarea[0].blur();return t},afterChange:function(t){function e(e){setTimeout(function(){t(e)},1)}var i=this,n=i.doc,a=n.body;return K(n).keyup(function(e){e.ctrlKey||e.altKey||!_CHANGE_KEY_MAP[e.which]||t(e)}),K(n).mouseup(t).contextmenu(t),K(i.win).blur(t),K(a).bind("paste",e),K(a).bind("cut",e),i}}),K.EditClass=KEdit,K.edit=_edit,K.iframeDoc=_iframeDoc,_extend(KToolbar,KWidget,{init:function(t){function e(t){var e=K(t);return e.hasClass("ke-outline")?e:e.hasClass("ke-toolbar-icon")?e.parent():void 0}function i(t,i){var n=e(t.target);if(n){if(n.hasClass("ke-disabled"))return;if(n.hasClass("ke-selected"))return;n[i]("ke-on")}}var n=this;KToolbar.parent.init.call(n,t),n.disableMode=_undef(t.disableMode,!1),n.noDisableItemMap=_toMap(_undef(t.noDisableItems,[])),n._itemMap={},n.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(t){t.preventDefault()}).attr("unselectable","on"),n.div.mouseover(function(t){i(t,"addClass")}).mouseout(function(t){i(t,"removeClass")}).click(function(t){var i=e(t.target);if(i){if(i.hasClass("ke-disabled"))return;n.options.click.call(this,t,i.attr("data-name"))}})},get:function(t){return this._itemMap[t]?this._itemMap[t]:this._itemMap[t]=K("span.ke-icon-"+t,this.div).parent()},select:function(t){return _selectToolbar.call(this,t,function(t){t.addClass("ke-selected")}),self},unselect:function(t){return _selectToolbar.call(this,t,function(t){t.removeClass("ke-selected").removeClass("ke-on")}),self},enable:function(t){var e=this,i=t.get?t:e.get(t);return i&&(i.removeClass("ke-disabled"),i.opacity(1)),e},disable:function(t){var e=this,i=t.get?t:e.get(t);return i&&(i.removeClass("ke-selected").addClass("ke-disabled"),i.opacity(.5)),e},disableAll:function(t,e){var i=this,n=i.noDisableItemMap;return e&&(n=_toMap(e)),(t===undefined?!i.disableMode:t)?(K("span.ke-outline",i.div).each(function(){var t=K(this),e=t[0].getAttribute("data-name",2);n[e]||i.disable(t)}),i.disableMode=!0):(K("span.ke-outline",i.div).each(function(){var t=K(this),e=t[0].getAttribute("data-name",2);n[e]||i.enable(t)}),i.disableMode=!1),i}}),K.ToolbarClass=KToolbar,K.toolbar=_toolbar,_extend(KMenu,KWidget,{init:function(t){var e=this;t.z=t.z||811213,KMenu.parent.init.call(e,t),e.centerLineMode=_undef(t.centerLineMode,!0),e.div.addClass("ke-menu").bind("click,mousedown",function(t){t.stopPropagation()}).attr("unselectable","on")},addItem:function(t){var e=this;if("-"===t.title)return void e.div.append(K('<div class="ke-menu-separator"></div>'));var i=K('<div class="ke-menu-item" unselectable="on"></div>'),n=K('<div class="ke-inline-block ke-menu-item-left"></div>'),a=K('<div class="ke-inline-block ke-menu-item-right"></div>'),o=_addUnit(t.height),s=_undef(t.iconClass,"");e.div.append(i),o&&(i.css("height",o),a.css("line-height",o));var r;return e.centerLineMode&&(r=K('<div class="ke-inline-block ke-menu-item-center"></div>'),o&&r.css("height",o)),i.mouseover(function(t){K(this).addClass("ke-menu-item-on"),r&&r.addClass("ke-menu-item-center-on")}).mouseout(function(t){K(this).removeClass("ke-menu-item-on"),r&&r.removeClass("ke-menu-item-center-on")}).click(function(e){t.click.call(K(this)),e.stopPropagation()}).append(n),r&&i.append(r),i.append(a),t.checked&&(s="ke-icon-checked"),""!==s&&n.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+s+'"></span>'),a.html(t.title),e},remove:function(){var t=this;return t.options.beforeRemove&&t.options.beforeRemove.call(t),K(".ke-menu-item",t.div[0]).unbind(),KMenu.parent.remove.call(t),t}}),K.MenuClass=KMenu,K.menu=_menu,_extend(KColorPicker,KWidget,{init:function(t){var e=this;t.z=t.z||811213,KColorPicker.parent.init.call(e,t);var i=t.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];e.selectedColor=(t.selectedColor||"").toLowerCase(),e._cells=[],e.div.addClass("ke-colorpicker").bind("click,mousedown",function(t){t.stopPropagation()}).attr("unselectable","on");var n=e.doc.createElement("table");e.div.append(n),n.className="ke-colorpicker-table",n.cellPadding=0,n.cellSpacing=0,n.border=0;var a=n.insertRow(0),o=a.insertCell(0);o.colSpan=i[0].length,e._addAttr(o,"","ke-colorpicker-cell-top");for(var s=0;s<i.length;s++){a=n.insertRow(s+1);for(var r=0;r<i[s].length;r++)o=a.insertCell(r),e._addAttr(o,i[s][r],"ke-colorpicker-cell")}},_addAttr:function(t,e,i){var n=this;t=K(t).addClass(i),n.selectedColor===e.toLowerCase()&&t.addClass("ke-colorpicker-cell-selected"),t.attr("title",e||n.options.noColor),t.mouseover(function(t){K(this).addClass("ke-colorpicker-cell-on")}),t.mouseout(function(t){K(this).removeClass("ke-colorpicker-cell-on")}),t.click(function(t){t.stop(),n.options.click.call(K(this),e)}),e?t.append(K('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",e)):t.html(n.options.noColor),K(t).attr("unselectable","on"),n._cells.push(t)},remove:function(){var t=this;return _each(t._cells,function(){this.unbind()}),KColorPicker.parent.remove.call(t),t}}),K.ColorPickerClass=KColorPicker,K.colorpicker=_colorpicker,_extend(KUploadButton,{init:function(t){var e=this,i=K(t.button),n=t.fieldName||"file",a=t.url||"",o=i.val(),s=t.extraParams||{},r=i[0].className||"",l=t.target||"kindeditor_upload_iframe_"+(new Date).getTime();t.afterError=t.afterError||function(t){alert(t)};var c=[];for(var d in s)c.push('<input type="hidden" name="'+d+'" value="'+s[d]+'" />');var h=['<div class="ke-inline-block '+r+'">',t.target?"":'<iframe name="'+l+'" style="display:none;"></iframe>',t.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+l+'" action="'+a+'">','<span class="ke-button-common">',c.join(""),'<input type="button" class="ke-button-common ke-button" value="'+o+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+n+'" tabindex="-1" />',t.form?"</div>":"</form>","</div>"].join(""),u=K(h,i.doc);i.hide(),i.before(u),e.div=u,e.button=i,e.iframe=t.target?K('iframe[name="'+l+'"]'):K("iframe",u),e.form=t.form?K(t.form):K("form",u),e.fileBox=K(".ke-upload-file",u),e.options=t},submit:function(){var t=this,e=t.iframe;return e.bind("load",function(){e.unbind();var i=document.createElement("form");t.fileBox.before(i),K(i).append(t.fileBox),i.reset(),K(i).remove(!0);var n,a=K.iframeDoc(e),o=a.getElementsByTagName("pre")[0],s="";s=o?o.innerHTML:a.body.innerHTML,s=_unescape(s),e[0].src="javascript:false";try{n=K.json(s)}catch(r){t.options.afterError.call(t,"<!doctype html><html>"+a.body.parentNode.innerHTML+"</html>");
}n&&t.options.afterUpload.call(t,n)}),t.form[0].submit(),t},remove:function(){var t=this;return t.fileBox&&t.fileBox.unbind(),t.iframe.remove(),t.div.remove(),t.button.show(),t}}),K.UploadButtonClass=KUploadButton,K.uploadbutton=_uploadbutton,_extend(KDialog,KWidget,{init:function(t){var e=this,i=_undef(t.shadowMode,!0);t.z=t.z||811213,t.shadowMode=!1,t.autoScroll=_undef(t.autoScroll,!0),KDialog.parent.init.call(e,t);var n=t.title,a=K(t.body,e.doc),o=t.previewBtn,s=t.yesBtn,r=t.noBtn,l=t.closeBtn,c=_undef(t.showMask,!0);e.div.addClass("ke-dialog").bind("click,mousedown",function(t){t.stopPropagation()});var d=K('<div class="ke-dialog-content"></div>').appendTo(e.div);_IE&&_V<7?e.iframeMask=K('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(e.div):i&&K('<div class="ke-dialog-shadow"></div>').appendTo(e.div);var h=K('<div class="ke-dialog-header"></div>');d.append(h),h.html(n),e.closeIcon=K('<span class="ke-dialog-icon-close" title="'+l.name+'"></span>').click(l.click),h.append(e.closeIcon),e.draggable({clickEl:h,beforeDrag:t.beforeDrag});var u=K('<div class="ke-dialog-body"></div>');d.append(u),u.append(a);var p=K('<div class="ke-dialog-footer"></div>');if((o||s||r)&&d.append(p),_each([{btn:o,name:"preview"},{btn:s,name:"yes"},{btn:r,name:"no"}],function(){if(this.btn){var t=_createButton(this.btn);t.addClass("ke-dialog-"+this.name),p.append(t)}}),e.height&&u.height(_removeUnit(e.height)-h.height()-p.height()),e.div.width(e.div.width()),e.div.height(e.div.height()),e.mask=null,c){var f=_docElement(e.doc),g=Math.max(f.scrollWidth,f.clientWidth),m=Math.max(f.scrollHeight,f.clientHeight);e.mask=_widget({x:0,y:0,z:e.z-1,cls:"ke-dialog-mask",width:g,height:m})}e.autoPos(e.div.width(),e.div.height()),e.footerDiv=p,e.bodyDiv=u,e.headerDiv=h,e.isLoading=!1},setMaskIndex:function(t){var e=this;e.mask.div.css("z-index",t)},showLoading:function(t){t=_undef(t,"");var e=this,i=e.bodyDiv;return e.loading=K('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(i.height()/3)+'px;">'+t+"</div></div>").width(i.width()).height(i.height()).css("top",e.headerDiv.height()+"px"),i.css("visibility","hidden").after(e.loading),e.isLoading=!0,e},hideLoading:function(){return this.loading&&this.loading.remove(),this.bodyDiv.css("visibility","visible"),this.isLoading=!1,this},remove:function(){var t=this;return t.options.beforeRemove&&t.options.beforeRemove.call(t),t.mask&&t.mask.remove(),t.iframeMask&&t.iframeMask.remove(),t.closeIcon.unbind(),K("input",t.div).unbind(),K("button",t.div).unbind(),t.footerDiv.unbind(),t.bodyDiv.unbind(),t.headerDiv.unbind(),K("iframe",t.div).each(function(){K(this).remove()}),KDialog.parent.remove.call(t),t}}),K.DialogClass=KDialog,K.dialog=_dialog,K.tabs=_tabs,K.loadScript=_loadScript,K.loadStyle=_loadStyle,K.ajax=_ajax;var _plugins={},_language={};KEditor.prototype={lang:function(t){return _lang(t,this.langType)},loadPlugin:function(t,e){var i=this;return _plugins[t]?_isFunction(_plugins[t])?(_plugins[t].call(i,KindEditor),e&&e.call(i),i):(setTimeout(function(){i.loadPlugin(t,e)},100),i):(_plugins[t]="loading",_loadScript(i.pluginsPath+t+"/"+t+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){setTimeout(function(){_plugins[t]&&i.loadPlugin(t,e)},0)}),i)},handler:function(t,e){var i=this;return i._handlers[t]||(i._handlers[t]=[]),_isFunction(e)?(i._handlers[t].push(e),i):(_each(i._handlers[t],function(){e=this.call(i,e)}),e)},clickToolbar:function(t,e){var i=this,n="clickToolbar"+t;return e===undefined?i._handlers[n]?i.handler(n):(i.loadPlugin(t,function(){i.handler(n)}),i):i.handler(n,e)},updateState:function(){var t=this;return _each("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough".split(","),function(e,i){t.cmd.state(i)?t.toolbar.select(i):t.toolbar.unselect(i)}),t},addContextmenu:function(t){return this._contextmenus.push(t),this},afterCreate:function(t){return this.handler("afterCreate",t)},beforeRemove:function(t){return this.handler("beforeRemove",t)},beforeGetHtml:function(t){return this.handler("beforeGetHtml",t)},beforeSetHtml:function(t){return this.handler("beforeSetHtml",t)},afterSetHtml:function(t){return this.handler("afterSetHtml",t)},create:function(){function t(){return 0===l.height()?void setTimeout(t,100):void e.resize(n,a,!1)}var e=this,i=e.fullscreenMode;if(e.isCreated)return e;if(e.srcElement.data("kindeditor"))return e;e.srcElement.data("kindeditor","true"),i?_docElement().style.overflow="hidden":_docElement().style.overflow="";var n=i?_docElement().clientWidth+"px":e.width,a=i?_docElement().clientHeight+"px":e.height;(_IE&&_V<8||_QUIRKS)&&(a=_addUnit(_removeUnit(a)+2));var o=e.container=K(e.layout);i?K(document.body).append(o):e.srcElement.before(o);var s=K(".toolbar",o),r=K(".edit",o),l=e.statusbar=K(".statusbar",o);o.removeClass("container").addClass("ke-container ke-container-"+e.themeType).css("width",n),i?(o.css({position:"absolute",left:0,top:0,"z-index":811211}),_GECKO||(e._scrollPos=_getScrollPos()),window.scrollTo(0,0),K(document.body).css({height:"1px",overflow:"hidden"}),K(document.body.parentNode).css("overflow","hidden"),e._fullscreenExecuted=!0):(e._fullscreenExecuted&&(K(document.body).css({height:"",overflow:""}),K(document.body.parentNode).css("overflow","")),e._scrollPos&&window.scrollTo(e._scrollPos.x,e._scrollPos.y));var c=[];K.each(e.items,function(t,i){"|"==i?c.push('<span class="ke-inline-block ke-separator"></span>'):"/"==i?c.push('<div class="ke-hr"></div>'):(c.push('<span class="ke-outline" data-name="'+i+'" title="'+e.lang(i)+'" unselectable="on">'),c.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+i+'" unselectable="on"></span></span>'))});var d=e.toolbar=_toolbar({src:s,html:c.join(""),noDisableItems:e.noDisableItems,click:function(t,i){if(t.stop(),e.menu){var n=e.menu.name;if(e.hideMenu(),n===i)return}e.clickToolbar(i)}}),h=_removeUnit(a)-d.div.height(),u=e.edit=_edit({height:h>0&&_removeUnit(a)>e.minHeight?h:e.minHeight,src:r,srcElement:e.srcElement,designMode:e.designMode,themesPath:e.themesPath,bodyClass:e.bodyClass,cssPath:e.cssPath,cssData:e.cssData,beforeGetHtml:function(t){return t=e.beforeGetHtml(t),t=_removeBookmarkTag(_removeTempTag(t)),_formatHtml(t,e.filterMode?e.htmlTags:null,e.urlType,e.wellFormatMode,e.indentChar)},beforeSetHtml:function(t){return t=_formatHtml(t,e.filterMode?e.htmlTags:null,"",!1),e.beforeSetHtml(t)},afterSetHtml:function(){e.edit=u=this,e.afterSetHtml()},afterCreate:function(){if(e.edit=u=this,e.cmd=u.cmd,e._docMousedownFn=function(t){e.menu&&e.hideMenu()},K(u.doc,document).mousedown(e._docMousedownFn),_bindContextmenuEvent.call(e),_bindNewlineEvent.call(e),_bindTabEvent.call(e),_bindFocusEvent.call(e),u.afterChange(function(t){u.designMode&&(e.updateState(),e.addBookmark(),e.options.afterChange&&e.options.afterChange.call(e))}),u.textarea.keyup(function(t){t.ctrlKey||t.altKey||!_INPUT_KEY_MAP[t.which]||e.options.afterChange&&e.options.afterChange.call(e)}),e.readonlyMode&&e.readonly(),e.isCreated=!0,""===e.initContent&&(e.initContent=e.html()),e._undoStack.length>0){var t=e._undoStack.pop();t.start&&(e.html(t.html),u.cmd.range.moveToBookmark(t),e.select())}e.afterCreate(),e.options.afterCreate&&e.options.afterCreate.call(e)}});return l.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>'),e._fullscreenResizeHandler&&(K(window).unbind("resize",e._fullscreenResizeHandler),e._fullscreenResizeHandler=null),t(),i?(e._fullscreenResizeHandler=function(t){e.isCreated&&e.resize(_docElement().clientWidth,_docElement().clientHeight,!1)},K(window).bind("resize",e._fullscreenResizeHandler),d.select("fullscreen"),l.first().css("visibility","hidden"),l.last().css("visibility","hidden")):(_GECKO&&K(window).bind("scroll",function(t){e._scrollPos=_getScrollPos()}),e.resizeType>0?_drag({moveEl:o,clickEl:l,moveFn:function(t,i,n,a,o,s){a+=s,e.resize(null,a)}}):l.first().css("visibility","hidden"),2===e.resizeType?_drag({moveEl:o,clickEl:l.last(),moveFn:function(t,i,n,a,o,s){n+=o,a+=s,e.resize(n,a)}}):l.last().css("visibility","hidden")),e},remove:function(){var t=this;return t.isCreated?(t.beforeRemove(),t.srcElement.data("kindeditor",""),t.menu&&t.hideMenu(),_each(t.dialogs,function(){t.hideDialog()}),K(document).unbind("mousedown",t._docMousedownFn),t.toolbar.remove(),t.edit.remove(),t.statusbar.last().unbind(),t.statusbar.unbind(),t.container.remove(),t.container=t.toolbar=t.edit=t.menu=null,t.dialogs=[],t.isCreated=!1,t):t},resize:function(t,e,i){var n=this;return i=_undef(i,!0),t&&(/%/.test(t)||(t=_removeUnit(t),t=t<n.minWidth?n.minWidth:t),n.container.css("width",_addUnit(t)),i&&(n.width=_addUnit(t))),e&&(e=_removeUnit(e),editHeight=_removeUnit(e)-n.toolbar.div.height()-n.statusbar.height(),editHeight=editHeight<n.minHeight?n.minHeight:editHeight,n.edit.setHeight(editHeight),i&&(n.height=_addUnit(e))),n},select:function(){return this.isCreated&&this.cmd.select(),this},html:function(t){var e=this;return t===undefined?e.isCreated?e.edit.html():_elementVal(e.srcElement):(e.isCreated?e.edit.html(t):_elementVal(e.srcElement,t),e.isCreated&&e.cmd.selection(),e)},fullHtml:function(){return this.isCreated?this.edit.html(undefined,!0):""},text:function(t){var e=this;return t===undefined?_trim(e.html().replace(/<(?!img|embed).*?>/gi,"").replace(/&nbsp;/gi," ")):e.html(_escape(t))},isEmpty:function(){return""===_trim(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return _trim(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==_trim(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){var t=this.isCreated?this.cmd.range.html():"";return t=_removeBookmarkTag(_removeTempTag(t))},count:function(t){var e=this;return t=(t||"html").toLowerCase(),"html"===t?e.html().length:"text"===t?e.text().replace(/<(?:img|embed).*?>/gi,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(t){t=t.toLowerCase();var e=this,i=e.cmd,n=_inArray(t,"selectall,copy,paste,print".split(","))<0;return n&&e.addBookmark(!1),i[t].apply(i,_toArray(arguments,1)),n&&(e.updateState(),e.addBookmark(!1),e.options.afterChange&&e.options.afterChange.call(e)),e},insertHtml:function(t,e){return this.isCreated?(t=this.beforeSetHtml(t),this.exec("inserthtml",t,e),this):this},appendHtml:function(t){if(this.html(this.html()+t),this.isCreated){var e=this.cmd;e.range.selectNodeContents(e.doc.body).collapse(!1),e.select()}return this},sync:function(){return _elementVal(this.srcElement,this.html()),this},focus:function(){return this.isCreated?this.edit.focus():this.srcElement[0].focus(),this},blur:function(){return this.isCreated?this.edit.blur():this.srcElement[0].blur(),this},addBookmark:function(t){t=_undef(t,!0);var e,i=this,n=i.edit,a=n.doc.body,o=_removeTempTag(a.innerHTML);if(t&&i._undoStack.length>0){var s=i._undoStack[i._undoStack.length-1];if(Math.abs(o.length-_removeBookmarkTag(s.html).length)<i.minChangeSize)return i}if(n.designMode&&!i._firstAddBookmark){var r=i.cmd.range;e=r.createBookmark(!0),e.html=_removeTempTag(a.innerHTML),r.moveToBookmark(e)}else e={html:o};return i._firstAddBookmark=!1,_addBookmarkToStack(i._undoStack,e),i},undo:function(){return _undoToRedo.call(this,this._undoStack,this._redoStack)},redo:function(){return _undoToRedo.call(this,this._redoStack,this._undoStack)},fullscreen:function(t){return this.fullscreenMode=t===undefined?!this.fullscreenMode:t,this.addBookmark(!1),this.remove().create()},readonly:function(t){t=_undef(t,!0);var e=this,i=e.edit,n=i.doc;e.designMode?e.toolbar.disableAll(t,[]):_each(e.noDisableItems,function(){e.toolbar[t?"disable":"enable"](this)}),_IE?n.body.contentEditable=!t:n.designMode=t?"off":"on",i.textarea[0].disabled=t},createMenu:function(t){var e=this,i=t.name,n=e.toolbar.get(i),a=n.pos();return t.x=a.x,t.y=a.y+n.height(),t.z=e.options.zIndex,t.shadowMode=_undef(t.shadowMode,e.shadowMode),t.selectedColor!==undefined?(t.cls="ke-colorpicker-"+e.themeType,t.noColor=e.lang("noColor"),e.menu=_colorpicker(t)):(t.cls="ke-menu-"+e.themeType,t.centerLineMode=!1,e.menu=_menu(t)),e.menu},hideMenu:function(){return this.menu.remove(),this.menu=null,this},hideContextmenu:function(){return this.contextmenu.remove(),this.contextmenu=null,this},createDialog:function(t){var e=this;t.name;if(t.z=e.options.zIndex,t.shadowMode=_undef(t.shadowMode,e.shadowMode),t.closeBtn=_undef(t.closeBtn,{name:e.lang("close"),click:function(t){e.hideDialog(),_IE&&e.cmd&&e.cmd.select()}}),t.noBtn=_undef(t.noBtn,{name:e.lang(t.yesBtn?"no":"close"),click:function(t){e.hideDialog(),_IE&&e.cmd&&e.cmd.select()}}),"page"!=e.dialogAlignType&&(t.alignEl=e.container),t.cls="ke-dialog-"+e.themeType,e.dialogs.length>0){var i=e.dialogs[0],n=e.dialogs[e.dialogs.length-1];i.setMaskIndex(n.z+2),t.z=n.z+3,t.showMask=!1}var a=_dialog(t);return e.dialogs.push(a),a},hideDialog:function(){var t=this;if(t.dialogs.length>0&&t.dialogs.pop().remove(),t.dialogs.length>0){var e=t.dialogs[0],i=t.dialogs[t.dialogs.length-1];e.setMaskIndex(i.z-1)}return t},errorDialog:function(t){var e=this,i=e.createDialog({width:750,title:e.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),n=K("iframe",i.div),a=K.iframeDoc(n);return a.open(),a.write(t),a.close(),K(a.body).css("background-color","#FFF"),n[0].contentWindow.focus(),e}},_instances=[],K.remove=function(t){_eachEditor(t,function(t){this.remove(),_instances.splice(t,1)})},K.sync=function(t){_eachEditor(t,function(){this.sync()})},K.html=function(t,e){_eachEditor(t,function(){this.html(e)})},K.insertHtml=function(t,e){_eachEditor(t,function(){this.insertHtml(e)})},K.appendHtml=function(t,e){_eachEditor(t,function(){this.appendHtml(e)})},_IE&&_V<7&&_nativeCommand(document,"BackgroundImageCache",!0),K.EditorClass=KEditor,K.editor=_editor,K.create=_create,K.instances=_instances,K.plugin=_plugin,K.lang=_lang,_plugin("core",function(t){var e=this,i={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};if(e.afterSetHtml(function(){e.options.afterChange&&e.options.afterChange.call(e)}),e.afterCreate(function(){if("form"==e.syncType){for(var i=t(e.srcElement),n=!1;i=i.parent();)if("form"==i.name){n=!0;break}if(n){i.bind("submit",function(i){e.sync(),t(window).bind("unload",function(){e.edit.textarea.remove()})});var a=t('[type="reset"]',i);a.click(function(){e.html(e.initContent),e.cmd.selection()}),e.beforeRemove(function(){i.unbind(),a.unbind()})}}}),e.clickToolbar("source",function(){e.edit.designMode?(e.toolbar.disableAll(!0),e.edit.design(!1),e.toolbar.select("source")):(e.toolbar.disableAll(!1),e.edit.design(!0),e.toolbar.unselect("source"),_GECKO?setTimeout(function(){e.cmd.selection()},0):e.cmd.selection()),e.designMode=e.edit.designMode}),e.afterCreate(function(){e.designMode||e.toolbar.disableAll(!0).select("source")}),e.clickToolbar("fullscreen",function(){e.fullscreen()}),e.fullscreenShortcut){var n=!1;e.afterCreate(function(){if(t(e.edit.doc,e.edit.textarea).keyup(function(t){27==t.which&&setTimeout(function(){e.fullscreen()},0)}),n){if(_IE&&!e.designMode)return;e.focus()}n||(n=!0)})}_each("undo,redo".split(","),function(t,n){i[n]&&e.afterCreate(function(){_ctrl(this.edit.doc,i[n],function(){e.clickToolbar(n)})}),e.clickToolbar(n,function(){e[n]()})}),e.clickToolbar("formatblock",function(){var t=e.lang("formatblock.formatBlock"),i={h1:28,h2:24,h3:18,H4:14,p:12},n=e.cmd.val("formatblock"),a=e.createMenu({name:"formatblock",width:"en"==e.langType?200:150});_each(t,function(t,o){var s="font-size:"+i[t]+"px;";"h"===t.charAt(0)&&(s+="font-weight:bold;"),a.addItem({title:'<span style="'+s+'" unselectable="on">'+o+"</span>",height:i[t]+12,checked:n===t||n===o,click:function(){e.select().exec("formatblock","<"+t+">").hideMenu()}})})}),e.clickToolbar("fontname",function(){var t=e.cmd.val("fontname"),i=e.createMenu({name:"fontname",width:150});_each(e.lang("fontname.fontName"),function(n,a){i.addItem({title:'<span style="font-family: '+n+';" unselectable="on">'+a+"</span>",checked:t===n.toLowerCase()||t===a.toLowerCase(),click:function(){e.exec("fontname",n).hideMenu()}})})}),e.clickToolbar("fontsize",function(){var t=e.cmd.val("fontsize"),i=e.createMenu({name:"fontsize",width:150});_each(e.fontSizeTable,function(n,a){i.addItem({title:'<span style="font-size:'+a+';" unselectable="on">'+a+"</span>",height:_removeUnit(a)+12,checked:t===a,click:function(){e.exec("fontsize",a).hideMenu()}})})}),_each("forecolor,hilitecolor".split(","),function(t,i){e.clickToolbar(i,function(){e.createMenu({name:i,selectedColor:e.cmd.val(i)||"default",colors:e.colorTable,click:function(t){e.exec(i,t).hideMenu()}})})}),_each("cut,copy,paste".split(","),function(t,i){e.clickToolbar(i,function(){e.focus();try{e.exec(i,null)}catch(t){alert(e.lang(i+"Error"))}})}),e.clickToolbar("about",function(){var t='<div style="margin:20px;"><div>KindEditor '+_VERSION+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';e.createDialog({name:"about",width:350,title:e.lang("about"),body:t})}),e.plugin.getSelectedLink=function(){return e.cmd.commonAncestor("a")},e.plugin.getSelectedImage=function(){return _getImageFromRange(e.edit.cmd.range,function(t){return!/^ke-\w+$/i.test(t[0].className)})},e.plugin.getSelectedFlash=function(){return _getImageFromRange(e.edit.cmd.range,function(t){return"ke-flash"==t[0].className})},e.plugin.getSelectedMedia=function(){return _getImageFromRange(e.edit.cmd.range,function(t){return"ke-media"==t[0].className||"ke-rm"==t[0].className})},e.plugin.getSelectedAnchor=function(){return _getImageFromRange(e.edit.cmd.range,function(t){return"ke-anchor"==t[0].className})},_each("link,image,flash,media,anchor".split(","),function(t,i){var n=i.charAt(0).toUpperCase()+i.substr(1);_each("edit,delete".split(","),function(t,a){e.addContextmenu({title:e.lang(a+n),click:function(){e.loadPlugin(i,function(){e.plugin[i][a](),e.hideMenu()})},cond:e.plugin["getSelected"+n],width:150,iconClass:"edit"==a?"ke-icon-"+i:undefined})}),e.addContextmenu({title:"-"})}),e.plugin.getSelectedTable=function(){return e.cmd.commonAncestor("table")},e.plugin.getSelectedRow=function(){return e.cmd.commonAncestor("tr")},e.plugin.getSelectedCell=function(){return e.cmd.commonAncestor("td")},_each("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete".split(","),function(t,i){var n=_inArray(i,["prop","delete"])<0?e.plugin.getSelectedCell:e.plugin.getSelectedTable;e.addContextmenu({title:e.lang("table"+i),click:function(){e.loadPlugin("table",function(){e.plugin.table[i](),e.hideMenu()})},cond:n,width:170,iconClass:"ke-icon-table"+i})}),e.addContextmenu({title:"-"}),_each("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),function(t,n){i[n]&&e.afterCreate(function(){_ctrl(this.edit.doc,i[n],function(){e.cmd.selection(),e.clickToolbar(n)})}),e.clickToolbar(n,function(){e.focus().exec(n,null)})}),e.afterCreate(function(){function i(){n.range.moveToBookmark(a),n.select(),_WEBKIT&&(t("div."+r,o).each(function(){t(this).after("<br />").remove(!0)}),t("span.Apple-style-span",o).remove(!0),t("span.Apple-tab-span",o).remove(!0),t("span[style]",o).each(function(){"nowrap"==t(this).css("white-space")&&t(this).remove(!0)}),t("meta",o).remove());var i=o[0].innerHTML;o.remove(),""!==i&&(_WEBKIT&&(i=i.replace(/(<br>)\1/gi,"$1")),2===e.pasteType&&(i=i.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,""),/schemas-microsoft-com|worddocument|mso-\w+/i.test(i)?i=_clearMsWord(i,e.filterMode?e.htmlTags:t.options.htmlTags):(i=_formatHtml(i,e.filterMode?e.htmlTags:null),i=e.beforeSetHtml(i))),1===e.pasteType&&(i=i.replace(/&nbsp;/gi," "),i=i.replace(/\n\s*\n/g,"\n"),i=i.replace(/<br[^>]*>/gi,"\n"),i=i.replace(/<\/p><p[^>]*>/gi,"\n"),i=i.replace(/<[^>]+>/g,""),i=i.replace(/ {2}/g," &nbsp;"),"p"==e.newlineTag?/\n/.test(i)&&(i=i.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")):i=i.replace(/\n/g,"<br />$&")),e.insertHtml(i,!0))}var n,a,o,s=e.edit.doc,r="__kindeditor_paste__",l=!1;t(s.body).bind("paste",function(c){if(0===e.pasteType)return void c.stop();if(!l){if(l=!0,t("div."+r,s).remove(),n=e.cmd.selection(),a=n.range.createBookmark(),o=t('<div class="'+r+'"></div>',s).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:t(a.start).pos().y+"px","white-space":"nowrap"}),t(s.body).append(o),_IE){var d=n.range.get(!0);d.moveToElementText(o[0]),d.select(),d.execCommand("paste"),c.preventDefault()}else n.range.selectNodeContents(o[0]),n.select();setTimeout(function(){i(),l=!1},0)}})}),e.beforeGetHtml(function(t){return _IE&&_V<=8&&(t=t.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(t,e){return unescape(e)}),t=t.replace(/(<input)((?:\s+[^>]*)?>)/gi,function(t,e,i){return/\s+type="[^"]+"/i.test(t)?t:e+' type="text"'+i})),t.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/gi,function(t,e,i,n){return e+_unescape(i).replace(/\s+/g," ")+n}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/gi,function(t){var e=_getAttrList(t),i=_getCssList(e.style||""),n=_mediaAttrs(e["data-ke-tag"]),a=_undef(i.width,""),o=_undef(i.height,"");return/px/i.test(a)&&(a=_removeUnit(a)),/px/i.test(o)&&(o=_removeUnit(o)),n.width=_undef(e.width,a),n.height=_undef(e.height,o),_mediaEmbed(n)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/gi,function(t){var e=_getAttrList(t);return'<a name="'+unescape(e["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(t,e,i){return"<script"+unescape(e)+">"+unescape(i)+"</script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(t,e,i){return"<noscript"+unescape(e)+">"+unescape(i)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/gi,function(t,e,i,n){return t=t.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(t,e,n){return e+_unescape(i)+n}),t=t.replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/gi,function(t,e,i){return e+i})}),e.beforeSetHtml(function(t){return _IE&&_V<=8&&(t=t.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/gi,function(t){var e=_getAttrList(t),i=_getCssList(e.style||"");return"none"==i.display?'<div class="ke-display-none" data-ke-input-tag="'+escape(t)+'"></div>':t})),t.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/gi,function(t){var i=_getAttrList(t);return i.src=_undef(i.src,""),i.width=_undef(i.width,0),i.height=_undef(i.height,0),_mediaImg(e.themesPath+"common/blank.gif",i)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/gi,function(t){var i=_getAttrList(t);return i.href!==undefined?t:'<img class="ke-anchor" src="'+e.themesPath+'common/anchor.gif" data-ke-name="'+escape(i.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/gi,function(t,e,i){return'<div class="ke-script" data-ke-script-attr="'+escape(e)+'">'+escape(i)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/gi,function(t,e,i){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(e)+'">'+escape(i)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/gi,function(t,e,i,n,a){return t.match(/\sdata-ke-src="[^"]*"/i)?t:t=e+i+'="'+n+'" data-ke-src="'+_escape(n)+'"'+a}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/gi,function(t,e,i){return e+"data-ke-"+i}).replace(/<table[^>]*\s+border="0"[^>]*>/gi,function(t){return t.indexOf("ke-zeroborder")>=0?t:_addClassToTag(t,"ke-zeroborder")})})})}}(window),KindEditor.lang({source:"HTML代码",preview:"预览",undo:"后退(Ctrl+Z)",redo:"前进(Ctrl+Y)",cut:"剪切(Ctrl+X)",copy:"复制(Ctrl+C)",paste:"粘贴(Ctrl+V)",plainpaste:"粘贴为无格式文本",wordpaste:"从Word粘贴",selectall:"全选(Ctrl+A)",justifyleft:"左对齐",justifycenter:"居中",justifyright:"右对齐",justifyfull:"两端对齐",insertorderedlist:"编号",insertunorderedlist:"项目符号",indent:"增加缩进",outdent:"减少缩进",subscript:"下标",superscript:"上标",formatblock:"段落",fontname:"字体",fontsize:"文字大小",forecolor:"文字颜色",hilitecolor:"文字背景",bold:"粗体(Ctrl+B)",italic:"斜体(Ctrl+I)",underline:"下划线(Ctrl+U)",strikethrough:"删除线",removeformat:"删除格式",image:"图片",multiimage:"批量图片上传",flash:"Flash",media:"视音频",table:"表格",tablecell:"单元格",hr:"插入横线",emoticons:"插入表情",link:"超级链接",unlink:"取消超级链接",fullscreen:"全屏显示",about:"关于",print:"打印(Ctrl+P)",filemanager:"文件空间",code:"插入程序代码",map:"Google地图",baidumap:"百度地图",lineheight:"行距",clearhtml:"清理HTML代码",pagebreak:"插入分页符",quickformat:"一键排版",insertfile:"插入文件",template:"插入模板",anchor:"锚点",yes:"确定",no:"取消",close:"关闭",editImage:"图片属性",deleteImage:"删除图片",editFlash:"Flash属性",deleteFlash:"删除Flash",editMedia:"视音频属性",deleteMedia:"删除视音频",editLink:"超级链接属性",deleteLink:"取消超级链接",editAnchor:"锚点属性",deleteAnchor:"删除锚点",tableprop:"表格属性",tablecellprop:"单元格属性",tableinsert:"插入表格",tabledelete:"删除表格",tablecolinsertleft:"左侧插入列",tablecolinsertright:"右侧插入列",tablerowinsertabove:"上方插入行",tablerowinsertbelow:"下方插入行",tablerowmerge:"向下合并单元格",tablecolmerge:"向右合并单元格",tablerowsplit:"拆分行",tablecolsplit:"拆分列",tablecoldelete:"删除列",tablerowdelete:"删除行",noColor:"无颜色",pleaseSelectFile:"请选择文件。",invalidImg:"请输入有效的URL地址。\n只允许jpg,gif,bmp,png格式。",invalidMedia:"请输入有效的URL地址。\n只允许swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb格式。",invalidWidth:"宽度必须为数字。",invalidHeight:"高度必须为数字。",invalidBorder:"边框必须为数字。",invalidUrl:"请输入有效的URL地址。",invalidRows:"行数为必选项，只允许输入大于0的数字。",invalidCols:"列数为必选项，只允许输入大于0的数字。",invalidPadding:"边距必须为数字。",invalidSpacing:"间距必须为数字。",invalidJson:"服务器发生故障。",uploadSuccess:"上传成功。",cutError:"您的浏览器安全设置不允许使用剪切操作，请使用快捷键(Ctrl+X)来完成。",copyError:"您的浏览器安全设置不允许使用复制操作，请使用快捷键(Ctrl+C)来完成。",pasteError:"您的浏览器安全设置不允许使用粘贴操作，请使用快捷键(Ctrl+V)来完成。",ajaxLoading:"加载中，请稍候 ...",uploadLoading:"上传中，请稍候 ...",uploadError:"上传错误","plainpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","wordpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","code.pleaseInput":"请输入程序代码。","link.url":"URL","link.linkType":"打开类型","link.newWindow":"新窗口","link.selfWindow":"当前窗口","flash.url":"URL","flash.width":"宽度","flash.height":"高度","flash.upload":"上传","flash.viewServer":"文件空间","media.url":"URL","media.width":"宽度","media.height":"高度","media.autostart":"自动播放","media.upload":"上传","media.viewServer":"文件空间","image.remoteImage":"网络图片","image.localImage":"本地上传","image.remoteUrl":"图片地址","image.localUrl":"上传文件","image.size":"图片大小","image.width":"宽","image.height":"高","image.resetSize":"重置大小","image.align":"对齐方式","image.defaultAlign":"默认方式","image.leftAlign":"左对齐","image.rightAlign":"右对齐","image.imgTitle":"图片说明","image.upload":"浏览...","image.viewServer":"图片空间","multiimage.uploadDesc":"允许用户同时上传<%=uploadLimit%>张图片，单张图片容量不超过<%=sizeLimit%>","multiimage.startUpload":"开始上传","multiimage.clearAll":"全部清空","multiimage.insertAll":"全部插入","multiimage.queueLimitExceeded":"文件数量超过限制。","multiimage.fileExceedsSizeLimit":"文件大小超过限制。","multiimage.zeroByteFile":"无法上传空文件。","multiimage.invalidFiletype":"文件类型不正确。","multiimage.unknownError":"发生异常，无法上传。","multiimage.pending":"等待上传","multiimage.uploadError":"上传失败","filemanager.emptyFolder":"空文件夹","filemanager.moveup":"移到上一级文件夹","filemanager.viewType":"显示方式：","filemanager.viewImage":"缩略图","filemanager.listImage":"详细信息","filemanager.orderType":"排序方式：","filemanager.fileName":"名称","filemanager.fileSize":"大小","filemanager.fileType":"类型","insertfile.url":"URL","insertfile.title":"文件说明","insertfile.upload":"上传","insertfile.viewServer":"文件空间","table.cells":"单元格数","table.rows":"行数","table.cols":"列数","table.size":"大小","table.width":"宽度","table.height":"高度","table.percent":"%","table.px":"px","table.space":"边距间距","table.padding":"边距","table.spacing":"间距","table.align":"对齐方式","table.textAlign":"水平对齐","table.verticalAlign":"垂直对齐","table.alignDefault":"默认","table.alignLeft":"左对齐","table.alignCenter":"居中","table.alignRight":"右对齐","table.alignTop":"顶部","table.alignMiddle":"中部","table.alignBottom":"底部","table.alignBaseline":"基线","table.border":"边框","table.borderWidth":"边框","table.borderColor":"颜色","table.backgroundColor":"背景颜色","map.address":"地址: ","map.search":"搜索","baidumap.address":"地址: ","baidumap.search":"搜索","baidumap.insertDynamicMap":"插入动态地图","anchor.name":"锚点名称","formatblock.formatBlock":{h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",p:"正 文"},"fontname.fontName":{SimSun:"宋体",NSimSun:"新宋体",FangSong_GB2312:"仿宋_GB2312",KaiTi_GB2312:"楷体_GB2312",SimHei:"黑体","Microsoft YaHei":"微软雅黑",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"单倍行距"},{1.5:"1.5倍行距"},{2:"2倍行距"},{2.5:"2.5倍行距"},{3:"3倍行距"}],"template.selectTemplate":"可选模板","template.replaceContent":"替换当前内容","template.fileList":{"1.html":"图片和文字","2.html":"表格","3.html":"项目编号"}},"zh_CN"),KindEditor.plugin("anchor",function(t){var e=this,i="anchor",n=e.lang(i+".");e.plugin.anchor={edit:function(){var a=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keName">'+n.name+"</label>",'<input class="ke-input-text" type="text" id="keName" name="name" value="" style="width:100px;" />',"</div>","</div>"].join(""),o=e.createDialog({name:i,width:300,title:e.lang(i),body:a,yesBtn:{name:e.lang("yes"),click:function(t){e.insertHtml('<a name="'+r.val()+'">').hideDialog().focus()}}}),s=o.div,r=t('input[name="name"]',s),l=e.plugin.getSelectedAnchor();l&&r.val(unescape(l.attr("data-ke-name"))),r[0].focus(),r[0].select()},"delete":function(){e.plugin.getSelectedAnchor().remove()}},e.clickToolbar(i,e.plugin.anchor.edit)}),KindEditor.plugin("autoheight",function(t){function e(){n.iframe.height(o),i.resize(null,Math.max((t.IE?a.scrollHeight:a.offsetHeight)+76,o))}var i=this;if(i.autoHeightMode){var n=i.edit,a=n.doc.body,o=t.removeUnit(i.height);n.iframe[0].scroll="no",a.style.overflowY="hidden",n.afterChange(e),i.isCreated?e():i.afterCreate(e)}}),KindEditor.plugin("baidumap",function(t){var e=this,i="baidumap",n=e.lang(i+"."),a=t.undef(e.mapWidth,558),o=t.undef(e.mapHeight,360);e.clickToolbar(i,function(){function s(){r=g[0].contentWindow,l=t.iframeDoc(g)}var r,l,c=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',n.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+n.search+'" />',"</span>","</div>",'<div class="ke-right">','<input type="checkbox" id="keInsertDynamicMap" name="insertDynamicMap" value="1" /> <label for="keInsertDynamicMap">'+n.insertDynamicMap+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-map" style="width:'+a+"px;height:"+o+'px;"></div>',"</div>"].join(""),d=e.createDialog({name:i,width:a+42,title:e.lang(i),body:c,yesBtn:{name:e.lang("yes"),click:function(t){var i=r.map,n=i.getCenter(),s=n.lng+","+n.lat,l=i.getZoom(),c=[f[0].checked?e.pluginsPath+"baidumap/index.html":"http://api.map.baidu.com/staticimage","?center="+encodeURIComponent(s),"&zoom="+encodeURIComponent(l),"&width="+a,"&height="+o,"&markers="+encodeURIComponent(s),"&markerStyles="+encodeURIComponent("l,A")].join("");f[0].checked?e.insertHtml('<iframe src="'+c+'" frameborder="0" style="width:'+(a+2)+"px;height:"+(o+2)+'px;"></iframe>'):e.exec("insertimage",c),e.hideDialog().focus()}},beforeRemove:function(){p.remove(),l&&l.write(""),g.remove()}}),h=d.div,u=t('[name="address"]',h),p=t('[name="searchBtn"]',h),f=t('[name="insertDynamicMap"]',d.div),g=t('<iframe class="ke-textarea" frameborder="0" src="'+e.pluginsPath+'baidumap/map.html" style="width:'+a+"px;height:"+o+'px;"></iframe>');g.bind("load",function(){g.unbind("load"),t.IE?s():setTimeout(s,0)}),t(".ke-map",h).replaceWith(g),
p.click(function(){r.search(u.val())})})}),KindEditor.plugin("clearhtml",function(t){var e=this,i="clearhtml";e.clickToolbar(i,function(){e.focus();var i=e.html();i=i.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/gi,""),i=i.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/gi,""),i=t.formatHtml(i,{a:["href","target"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title",".width",".height"],table:["border"],"td,th":["rowspan","colspan"],"div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":[]}),e.html(i),e.cmd.selection(!0),e.addBookmark()})}),KindEditor.plugin("code",function(t){var e=this,i="code";e.clickToolbar(i,function(){var n=e.lang(i+"."),a=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">','<select class="ke-code-type">','<option value="js">JavaScript</option>','<option value="html">HTML</option>','<option value="css">CSS</option>','<option value="php">PHP</option>','<option value="pl">Perl</option>','<option value="py">Python</option>','<option value="rb">Ruby</option>','<option value="java">Java</option>','<option value="vb">ASP/VB</option>','<option value="cpp">C/C++</option>','<option value="cs">C#</option>','<option value="xml">XML</option>','<option value="bsh">Shell</option>','<option value="">Other</option>',"</select>","</div>",'<textarea class="ke-textarea" style="width:408px;height:260px;"></textarea>',"</div>"].join(""),o=e.createDialog({name:i,width:450,title:e.lang(i),body:a,yesBtn:{name:e.lang("yes"),click:function(i){var a=t(".ke-code-type",o.div).val(),r=s.val(),l=""===a?"":" lang-"+a,c='<pre class="prettyprint'+l+'">\n'+t.escape(r)+"</pre> ";return""===t.trim(r)?(alert(n.pleaseInput),void s[0].focus()):void e.insertHtml(c).hideDialog().focus()}}}),s=t("textarea",o.div);s[0].focus()})}),KindEditor.plugin("emoticons",function(t){var e=this,i="emoticons",n=e.emoticonsPath||e.pluginsPath+"emoticons/images/",a=void 0===e.allowPreviewEmoticons||e.allowPreviewEmoticons,o=1;e.clickToolbar(i,function(){function s(i,a,o){w?i.mouseover(function(){a>v?(w.css("left",0),w.css("right","")):(w.css("left",""),w.css("right",0)),k.attr("src",n+o+".gif"),t(this).addClass("ke-on")}):i.mouseover(function(){t(this).addClass("ke-on")}),i.mouseout(function(){t(this).removeClass("ke-on")}),i.click(function(t){e.insertHtml('<img src="'+n+o+'.gif" border="0" alt="" />').hideMenu().focus(),t.stop()})}function r(e,i){var a=document.createElement("table");i.append(a),w&&(t(a).mouseover(function(){w.show("block")}),t(a).mouseout(function(){w.hide()}),y.push(t(a))),a.className="ke-table",a.cellPadding=0,a.cellSpacing=0,a.border=0;for(var o=(e-1)*g+f,r=0;r<h;r++)for(var l=a.insertRow(r),c=0;c<u;c++){var d=t(l.insertCell(c));d.addClass("ke-cell"),s(d,c,o);var p=t('<span class="ke-img"></span>').css("background-position","-"+24*o+"px 0px").css("background-image","url("+n+"static.gif)");d.append(p),y.push(d),o++}return a}function l(){t.each(y,function(){this.unbind()})}function c(t,e){t.click(function(t){l(),x.parentNode.removeChild(x),C.remove(),x=r(e,_),d(e),o=e,t.stop()})}function d(e){C=t('<div class="ke-page"></div>'),_.append(C);for(var i=1;i<=m;i++){if(e!==i){var n=t('<a href="javascript:;">['+i+"]</a>");c(n,i),C.append(n),y.push(n)}else C.append(t("@["+i+"]"));C.append(t("@&nbsp;"))}}var h=5,u=9,p=135,f=0,g=h*u,m=Math.ceil(p/g),v=Math.floor(u/2),_=t('<div class="ke-plugin-emoticons"></div>'),y=[],b=e.createMenu({name:i,beforeRemove:function(){l()}});b.div.append(_);var w,k;a&&(w=t('<div class="ke-preview"></div>').css("right",0),k=t('<img class="ke-preview-img" src="'+n+f+'.gif" />'),_.append(w),w.append(k));var C,x=r(o,_);d(o)})}),KindEditor.plugin("filemanager",function(t){function e(t,e,i){return t+" ("+Math.ceil(e/1024)+"KB, "+i+")"}function i(t,i){i.is_dir?t.attr("title",i.filename):t.attr("title",e(i.filename,i.filesize,i.datetime))}var n=this,a="filemanager",o=t.undef(n.fileManagerJson,n.basePath+"php/file_manager_json.php"),s=n.pluginsPath+a+"/images/",r=n.lang(a+".");n.plugin.filemanagerDialog=function(e){function l(e,i,a){var s="path="+e+"&order="+i+"&dir="+g;y.showLoading(n.lang("ajaxLoading")),t.ajax(t.addParam(o,s+"&"+(new Date).getTime()),function(t){y.hideLoading(),a(t)})}function c(e,i,n,a){var o=t.formatUrl(i.current_url+n.filename,"absolute"),s=encodeURIComponent(i.current_dir_path+n.filename+"/");n.is_dir?e.click(function(t){l(s,x.val(),a)}):n.is_photo?e.click(function(t){v.call(this,o,n.filename)}):e.click(function(t){v.call(this,o,n.filename)}),T.push(e)}function d(e,i){function n(){"VIEW"==C.val()?l(e.current_dir_path,x.val(),u):l(e.current_dir_path,x.val(),h)}t.each(T,function(){this.unbind()}),k.unbind(),C.unbind(),x.unbind(),e.current_dir_path&&k.click(function(t){l(e.moveup_dir_path,x.val(),i)}),C.change(n),x.change(n),w.html("")}function h(e){d(e,h);var i=document.createElement("table");i.className="ke-table",i.cellPadding=0,i.cellSpacing=0,i.border=0,w.append(i);for(var n=e.file_list,a=0,o=n.length;a<o;a++){var l=n[a],u=t(i.insertRow(a));u.mouseover(function(e){t(this).addClass("ke-on")}).mouseout(function(e){t(this).removeClass("ke-on")});var p=s+(l.is_dir?"folder-16.gif":"file-16.gif"),f=t('<img src="'+p+'" width="16" height="16" alt="'+l.filename+'" align="absmiddle" />'),g=t(u[0].insertCell(0)).addClass("ke-cell ke-name").append(f).append(document.createTextNode(" "+l.filename));!l.is_dir||l.has_file?(u.css("cursor","pointer"),g.attr("title",l.filename),c(g,e,l,h)):g.attr("title",r.emptyFolder),t(u[0].insertCell(1)).addClass("ke-cell ke-size").html(l.is_dir?"-":Math.ceil(l.filesize/1024)+"KB"),t(u[0].insertCell(2)).addClass("ke-cell ke-datetime").html(l.datetime)}}function u(e){d(e,u);for(var n=e.file_list,a=0,o=n.length;a<o;a++){var l=n[a],h=t('<div class="ke-inline-block ke-item"></div>');w.append(h);var p=t('<div class="ke-inline-block ke-photo"></div>').mouseover(function(e){t(this).addClass("ke-on")}).mouseout(function(e){t(this).removeClass("ke-on")});h.append(p);var f=e.current_url+l.filename,g=l.is_dir?s+"folder-64.gif":l.is_photo?f:s+"file-64.gif",m=t('<img src="'+g+'" width="80" height="80" alt="'+l.filename+'" />');!l.is_dir||l.has_file?(p.css("cursor","pointer"),i(p,l),c(p,e,l,u)):p.attr("title",r.emptyFolder),p.append(m),h.append('<div class="ke-name" title="'+l.filename+'">'+l.filename+"</div>")}}var p=t.undef(e.width,650),f=t.undef(e.height,510),g=t.undef(e.dirName,""),m=t.undef(e.viewType,"VIEW").toUpperCase(),v=e.clickFn,_=['<div style="padding:10px 20px;">','<div class="ke-plugin-filemanager-header">','<div class="ke-left">','<img class="ke-inline-block" name="moveupImg" src="'+s+'go-up.gif" width="16" height="16" border="0" alt="" /> ','<a class="ke-inline-block" name="moveupLink" href="javascript:;">'+r.moveup+"</a>","</div>",'<div class="ke-right">',r.viewType+' <select class="ke-inline-block" name="viewType">','<option value="VIEW">'+r.viewImage+"</option>",'<option value="LIST">'+r.listImage+"</option>","</select> ",r.orderType+' <select class="ke-inline-block" name="orderType">','<option value="NAME">'+r.fileName+"</option>",'<option value="SIZE">'+r.fileSize+"</option>",'<option value="TYPE">'+r.fileType+"</option>","</select>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-plugin-filemanager-body"></div>',"</div>"].join(""),y=n.createDialog({name:a,width:p,height:f,title:n.lang(a),body:_}),b=y.div,w=t(".ke-plugin-filemanager-body",b),k=(t('[name="moveupImg"]',b),t('[name="moveupLink"]',b)),C=(t('[name="viewServer"]',b),t('[name="viewType"]',b)),x=t('[name="orderType"]',b),T=[];return C.val(m),l("",x.val(),"VIEW"==m?u:h),y}}),KindEditor.plugin("flash",function(t){var e=this,i="flash",n=e.lang(i+"."),a=t.undef(e.allowFlashUpload,!0),o=t.undef(e.allowFileManager,!1),s=t.undef(e.formatUploadUrl,!0),r=t.undef(e.extraFileUploadParams,{}),l=t.undef(e.filePostName,"imgFile"),c=t.undef(e.uploadJson,e.basePath+"php/upload_json.php");e.plugin.flash={edit:function(){var d=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+n.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+n.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+n.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+n.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="550" maxlength="4" /> ',"</div>",'<div class="ke-dialog-row">','<label for="keHeight" style="width:60px;">'+n.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="400" maxlength="4" /> ',"</div>","</div>"].join(""),h=e.createDialog({name:i,width:450,title:e.lang(i),body:d,yesBtn:{name:e.lang("yes"),click:function(i){var n=t.trim(p.val()),a=g.val(),o=m.val();if("http://"==n||t.invalidUrl(n))return alert(e.lang("invalidUrl")),void p[0].focus();if(!/^\d*$/.test(a))return alert(e.lang("invalidWidth")),void g[0].focus();if(!/^\d*$/.test(o))return alert(e.lang("invalidHeight")),void m[0].focus();var s=t.mediaImg(e.themesPath+"common/blank.gif",{src:n,type:t.mediaType(".swf"),width:a,height:o,quality:"high"});e.insertHtml(s).hideDialog().focus()}}}),u=h.div,p=t('[name="url"]',u),f=t('[name="viewServer"]',u),g=t('[name="width"]',u),m=t('[name="height"]',u);if(p.val("http://"),a){var v=t.uploadbutton({button:t(".ke-upload-button",u)[0],fieldName:l,extraParams:r,url:t.addParam(c,"dir=flash"),afterUpload:function(n){if(h.hideLoading(),0===n.error){var a=n.url;s&&(a=t.formatUrl(a,"absolute")),p.val(a),e.afterUpload&&e.afterUpload.call(e,a,n,i),alert(e.lang("uploadSuccess"))}else alert(n.message)},afterError:function(t){h.hideLoading(),e.errorDialog(t)}});v.fileBox.change(function(t){h.showLoading(e.lang("uploadLoading")),v.submit()})}else t(".ke-upload-button",u).hide();o?f.click(function(i){e.loadPlugin("filemanager",function(){e.plugin.filemanagerDialog({viewType:"LIST",dirName:"flash",clickFn:function(i,n){e.dialogs.length>1&&(t('[name="url"]',u).val(i),e.afterSelectFile&&e.afterSelectFile.call(e,i),e.hideDialog())}})})}):f.hide();var _=e.plugin.getSelectedFlash();if(_){var y=t.mediaAttrs(_.attr("data-ke-tag"));p.val(y.src),g.val(t.removeUnit(_.css("width"))||y.width||0),m.val(t.removeUnit(_.css("height"))||y.height||0)}p[0].focus(),p[0].select()},"delete":function(){e.plugin.getSelectedFlash().remove(),e.addBookmark()}},e.clickToolbar(i,e.plugin.flash.edit)}),KindEditor.plugin("image",function(t){var e=this,i="image",n=t.undef(e.allowImageUpload,!0),a=t.undef(e.allowImageRemote,!0),o=t.undef(e.formatUploadUrl,!0),s=t.undef(e.allowFileManager,!1),r=t.undef(e.uploadJson,e.basePath+"php/upload_json.php"),l=t.undef(e.imageTabIndex,0),c=e.pluginsPath+"image/images/",d=t.undef(e.extraFileUploadParams,{}),h=t.undef(e.filePostName,"imgFile"),u=t.undef(e.fillDescAfterUploadImage,!1),p=e.lang(i+".");e.plugin.imageDialog=function(n){function a(t,e){M.val(t),F.val(e),L=t,N=e}var l=(n.imageUrl,t.undef(n.imageWidth,""),t.undef(n.imageHeight,""),t.undef(n.imageTitle,""),t.undef(n.imageAlign,""),t.undef(n.showRemote,!0)),f=t.undef(n.showLocal,!0),g=t.undef(n.tabIndex,0),m=n.clickFn,v="kindeditor_upload_iframe_"+(new Date).getTime(),_=[];for(var y in d)_.push('<input type="hidden" name="'+y+'" value="'+d[y]+'" />');var b,w=['<div style="padding:20px;">','<div class="tabs"></div>','<div class="tab1" style="display:none;">','<div class="ke-dialog-row">','<label for="remoteUrl" style="width:60px;">'+p.remoteUrl+"</label>",'<input type="text" id="remoteUrl" class="ke-input-text" name="url" value="" style="width:200px;" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+p.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="remoteWidth" style="width:60px;">'+p.size+"</label>",p.width+' <input type="text" id="remoteWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> ',p.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> ','<img class="ke-refresh-btn" src="'+c+'refresh.png" width="16" height="16" alt="" style="cursor:pointer;" title="'+p.resetSize+'" />',"</div>",'<div class="ke-dialog-row">','<label style="width:60px;">'+p.align+"</label>",'<input type="radio" name="align" class="ke-inline-block" value="" checked="checked" /> <img name="defaultImg" src="'+c+'align_top.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="left" /> <img name="leftImg" src="'+c+'align_left.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="right" /> <img name="rightImg" src="'+c+'align_right.gif" width="23" height="25" alt="" />',"</div>",'<div class="ke-dialog-row">','<label for="remoteTitle" style="width:60px;">'+p.imgTitle+"</label>",'<input type="text" id="remoteTitle" class="ke-input-text" name="title" value="" style="width:200px;" />',"</div>","</div>",'<div class="tab2" style="display:none;">','<iframe name="'+v+'" style="display:none;"></iframe>','<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+v+'" action="'+t.addParam(r,"dir=image")+'">','<div class="ke-dialog-row">',_.join(""),'<label style="width:60px;">'+p.localUrl+"</label>",'<input type="text" name="localUrl" class="ke-input-text" tabindex="-1" style="width:200px;" readonly="true" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+p.upload+'" />',"</div>","</form>","</div>","</div>"].join(""),k=f||s?450:400,C=f&&l?300:250,x=e.createDialog({name:i,width:k,height:C,title:e.lang(i),body:w,yesBtn:{name:e.lang("yes"),click:function(i){if(!x.isLoading){if(f&&l&&b&&1===b.selectedIndex||!l)return""==I.fileBox.val()?void alert(e.lang("pleaseSelectFile")):(x.showLoading(e.lang("uploadLoading")),I.submit(),void E.val(""));var n=t.trim(S.val()),a=M.val(),o=F.val(),s=A.val(),r="";return U.each(function(){if(this.checked)return r=this.value,!1}),"http://"==n||t.invalidUrl(n)?(alert(e.lang("invalidUrl")),void S[0].focus()):/^\d*$/.test(a)?/^\d*$/.test(o)?void m.call(e,n,s,a,o,0,r):(alert(e.lang("invalidHeight")),void F[0].focus()):(alert(e.lang("invalidWidth")),void M[0].focus())}}},beforeRemove:function(){D.unbind(),M.unbind(),F.unbind(),P.unbind()}}),T=x.div,S=t('[name="url"]',T),E=t('[name="localUrl"]',T),D=t('[name="viewServer"]',T),M=t('.tab1 [name="width"]',T),F=t('.tab1 [name="height"]',T),P=t(".ke-refresh-btn",T),A=t('.tab1 [name="title"]',T),U=t('.tab1 [name="align"]',T);l&&f?(b=t.tabs({src:t(".tabs",T),afterSelect:function(t){}}),b.add({title:p.remoteImage,panel:t(".tab1",T)}),b.add({title:p.localImage,panel:t(".tab2",T)}),b.select(g)):l?t(".tab1",T).show():f&&t(".tab2",T).show();var I=t.uploadbutton({button:t(".ke-upload-button",T)[0],fieldName:h,form:t(".ke-form",T),target:v,width:70,afterUpload:function(n){if(x.hideLoading(),0===n.error){var a=n.url;o&&(a=t.formatUrl(a,"absolute")),e.afterUpload&&e.afterUpload.call(e,a,n,i),u?(t(".ke-dialog-row #remoteUrl",T).val(a),t(".ke-tabs-li",T)[0].click(),t(".ke-refresh-btn",T).click()):m.call(e,a,n.title,n.width,n.height,n.border,n.align)}else alert(n.message)},afterError:function(t){x.hideLoading(),e.errorDialog(t)}});I.fileBox.change(function(t){E.val(I.fileBox.val())}),s?D.click(function(i){e.loadPlugin("filemanager",function(){e.plugin.filemanagerDialog({viewType:"VIEW",dirName:"image",clickFn:function(i,n){e.dialogs.length>1&&(t('[name="url"]',T).val(i),e.afterSelectFile&&e.afterSelectFile.call(e,i),e.hideDialog())}})})}):D.hide();var L=0,N=0;return P.click(function(e){var i=t('<img src="'+S.val()+'" />',document).css({position:"absolute",visibility:"hidden",top:0,left:"-1000px"});i.bind("load",function(){a(i.width(),i.height()),i.remove()}),t(document.body).append(i)}),M.change(function(t){L>0&&F.val(Math.round(N/L*parseInt(this.value,10)))}),F.change(function(t){N>0&&M.val(Math.round(L/N*parseInt(this.value,10)))}),S.val(n.imageUrl),a(n.imageWidth,n.imageHeight),A.val(n.imageTitle),U.each(function(){if(this.value===n.imageAlign)return this.checked=!0,!1}),l&&0===g&&(S[0].focus(),S[0].select()),x},e.plugin.image={edit:function(){var t=e.plugin.getSelectedImage();e.plugin.imageDialog({imageUrl:t?t.attr("data-ke-src"):"http://",imageWidth:t?t.width():"",imageHeight:t?t.height():"",imageTitle:t?t.attr("title"):"",imageAlign:t?t.attr("align"):"",showRemote:a,showLocal:n,tabIndex:t?0:l,clickFn:function(i,n,a,o,s,r){t?(t.attr("src",i),t.attr("data-ke-src",i),t.attr("width",a),t.attr("height",o),t.attr("title",n),t.attr("align",r),t.attr("alt",n)):e.exec("insertimage",i,n,a,o,s,r),setTimeout(function(){e.hideDialog().focus()},0)}})},"delete":function(){var t=e.plugin.getSelectedImage();"a"==t.parent().name&&(t=t.parent()),t.remove(),e.addBookmark()}},e.clickToolbar(i,e.plugin.image.edit)}),KindEditor.plugin("insertfile",function(t){var e=this,i="insertfile",n=t.undef(e.allowFileUpload,!0),a=t.undef(e.allowFileManager,!1),o=t.undef(e.formatUploadUrl,!0),s=t.undef(e.uploadJson,e.basePath+"php/upload_json.php"),r=t.undef(e.extraFileUploadParams,{}),l=t.undef(e.filePostName,"imgFile"),c=e.lang(i+".");e.plugin.fileDialog=function(d){var h=t.undef(d.fileUrl,"http://"),u=t.undef(d.fileTitle,""),p=d.clickFn,f=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+c.url+"</label>",'<input type="text" id="keUrl" name="url" class="ke-input-text" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+c.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+c.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keTitle" style="width:60px;">'+c.title+"</label>",'<input type="text" id="keTitle" class="ke-input-text" name="title" value="" style="width:160px;" /></div>',"</div>","</form>","</div>"].join(""),g=e.createDialog({name:i,width:450,title:e.lang(i),body:f,yesBtn:{name:e.lang("yes"),click:function(i){var n=t.trim(v.val()),a=y.val();return"http://"==n||t.invalidUrl(n)?(alert(e.lang("invalidUrl")),void v[0].focus()):(""===t.trim(a)&&(a=n),void p.call(e,n,a))}}}),m=g.div,v=t('[name="url"]',m),_=t('[name="viewServer"]',m),y=t('[name="title"]',m);if(n){var b=t.uploadbutton({button:t(".ke-upload-button",m)[0],fieldName:l,url:t.addParam(s,"dir=file"),extraParams:r,afterUpload:function(n){if(g.hideLoading(),0===n.error){var a=n.url;o&&(a=t.formatUrl(a,"absolute")),v.val(a),e.afterUpload&&e.afterUpload.call(e,a,n,i),alert(e.lang("uploadSuccess"))}else alert(n.message)},afterError:function(t){g.hideLoading(),e.errorDialog(t)}});b.fileBox.change(function(t){g.showLoading(e.lang("uploadLoading")),b.submit()})}else t(".ke-upload-button",m).hide();a?_.click(function(i){e.loadPlugin("filemanager",function(){e.plugin.filemanagerDialog({viewType:"LIST",dirName:"file",clickFn:function(i,n){e.dialogs.length>1&&(t('[name="url"]',m).val(i),e.afterSelectFile&&e.afterSelectFile.call(e,i),e.hideDialog())}})})}):_.hide(),v.val(h),y.val(u),v[0].focus(),v[0].select()},e.clickToolbar(i,function(){e.plugin.fileDialog({clickFn:function(t,i){var n='<a class="ke-insertfile" href="'+t+'" data-ke-src="'+t+'" target="_blank">'+i+"</a>";e.insertHtml(n).hideDialog().focus()}})})}),KindEditor.plugin("lineheight",function(t){var e=this,i="lineheight",n=e.lang(i+".");e.clickToolbar(i,function(){var a="",o=e.cmd.commonNode({"*":".line-height"});o&&(a=o.css("line-height"));var s=e.createMenu({name:i,width:150});t.each(n.lineHeight,function(i,n){t.each(n,function(t,i){s.addItem({title:i,checked:a===t,click:function(){e.cmd.toggle('<span style="line-height:'+t+';"></span>',{span:".line-height="+t}),e.updateState(),e.addBookmark(),e.hideMenu()}})})})})}),KindEditor.plugin("link",function(t){var e=this,i="link";e.plugin.link={edit:function(){var n=e.lang(i+"."),a='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+n.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+n.linkType+'</label><select id="keType" name="type"></select></div></div>',o=e.createDialog({name:i,width:450,title:e.lang(i),body:a,yesBtn:{name:e.lang("yes"),click:function(i){var n=t.trim(r.val());return"http://"==n||t.invalidUrl(n)?(alert(e.lang("invalidUrl")),void r[0].focus()):void e.exec("createlink",n,l.val()).hideDialog().focus()}}}),s=o.div,r=t('input[name="url"]',s),l=t('select[name="type"]',s);r.val("http://"),l[0].options[0]=new Option(n.newWindow,"_blank"),l[0].options[1]=new Option(n.selfWindow,""),e.cmd.selection();var c=e.plugin.getSelectedLink();c&&(e.cmd.range.selectNode(c[0]),e.cmd.select(),r.val(c.attr("data-ke-src")),l.val(c.attr("target"))),r[0].focus(),r[0].select()},"delete":function(){e.exec("unlink",null)}},e.clickToolbar(i,e.plugin.link.edit)}),KindEditor.plugin("map",function(t){var e=this,i="map",n=e.lang(i+".");e.clickToolbar(i,function(){function a(){o=u[0].contentWindow,s=t.iframeDoc(u)}var o,s,r=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">',n.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+n.search+'" />',"</span>","</div>",'<div class="ke-map" style="width:558px;height:360px;"></div>',"</div>"].join(""),l=e.createDialog({name:i,width:600,title:e.lang(i),body:r,yesBtn:{name:e.lang("yes"),click:function(t){var i=(o.geocoder,o.map),n=i.getCenter().lat()+","+i.getCenter().lng(),a=i.getZoom(),s=i.getMapTypeId(),r="http://maps.googleapis.com/maps/api/staticmap";r+="?center="+encodeURIComponent(n),r+="&zoom="+encodeURIComponent(a),r+="&size=558x360",r+="&maptype="+encodeURIComponent(s),r+="&markers="+encodeURIComponent(n),r+="&language="+e.langType,r+="&sensor=false",e.exec("insertimage",r).hideDialog().focus()}},beforeRemove:function(){h.remove(),s&&s.write(""),u.remove()}}),c=l.div,d=t('[name="address"]',c),h=t('[name="searchBtn"]',c),u=(["<!doctype html><html><head>",'<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />',"<style>"," html { height: 100% }"," body { height: 100%; margin: 0; padding: 0; background-color: #FFF }"," #map_canvas { height: 100% }","</style>",'<script src="http://maps.googleapis.com/maps/api/js?sensor=false&language='+e.langType+'"></script>',"<script>","var map, geocoder;","function initialize() {"," var latlng = new google.maps.LatLng(31.230393, 121.473704);"," var options = {","   zoom: 11,","   center: latlng,","   disableDefaultUI: true,","   panControl: true,","   zoomControl: true,","   mapTypeControl: true,","   scaleControl: true,","   streetViewControl: false,","   overviewMapControl: true,","   mapTypeId: google.maps.MapTypeId.ROADMAP"," };",' map = new google.maps.Map(document.getElementById("map_canvas"), options);'," geocoder = new google.maps.Geocoder();"," geocoder.geocode({latLng: latlng}, function(results, status) {","   if (status == google.maps.GeocoderStatus.OK) {","     if (results[3]) {",'       parent.document.getElementById("kindeditor_plugin_map_address").value = results[3].formatted_address;',"     }","   }"," });","}","function search(address) {"," if (!map) return;"," geocoder.geocode({address : address}, function(results, status) {","   if (status == google.maps.GeocoderStatus.OK) {","     map.setZoom(11);","     map.setCenter(results[0].geometry.location);","     var marker = new google.maps.Marker({","       map: map,","       position: results[0].geometry.location","     });","   } else {",'     alert("Invalid address: " + address);',"   }"," });","}","</script>","</head>",'<body onload="initialize();">','<div id="map_canvas" style="width:100%; height:100%"></div>',"</body></html>"].join("\n"),t('<iframe class="ke-textarea" frameborder="0" src="'+e.pluginsPath+'map/map.html" style="width:558px;height:360px;"></iframe>'));u.bind("load",function(){u.unbind("load"),t.IE?a():setTimeout(a,0)}),t(".ke-map",c).replaceWith(u),h.click(function(){o.search(d.val())})})}),KindEditor.plugin("media",function(t){var e=this,i="media",n=e.lang(i+"."),a=t.undef(e.allowMediaUpload,!0),o=t.undef(e.allowFileManager,!1),s=t.undef(e.formatUploadUrl,!0),r=t.undef(e.extraFileUploadParams,{}),l=t.undef(e.filePostName,"imgFile"),c=t.undef(e.uploadJson,e.basePath+"php/upload_json.php");e.plugin.media={edit:function(){var d=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+n.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+n.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+n.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+n.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="550" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keHeight" style="width:60px;">'+n.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="400" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAutostart">'+n.autostart+"</label>",'<input type="checkbox" id="keAutostart" name="autostart" value="" /> ',"</div>","</div>"].join(""),h=e.createDialog({name:i,width:450,height:230,title:e.lang(i),body:d,yesBtn:{name:e.lang("yes"),click:function(i){var n=t.trim(p.val()),a=g.val(),o=m.val();if("http://"==n||t.invalidUrl(n))return alert(e.lang("invalidUrl")),void p[0].focus();if(!/^\d*$/.test(a))return alert(e.lang("invalidWidth")),void g[0].focus();if(!/^\d*$/.test(o))return alert(e.lang("invalidHeight")),void m[0].focus();var s=t.mediaImg(e.themesPath+"common/blank.gif",{src:n,type:t.mediaType(n),width:a,height:o,autostart:v[0].checked?"true":"false",loop:"true"});e.insertHtml(s).hideDialog().focus()}}}),u=h.div,p=t('[name="url"]',u),f=t('[name="viewServer"]',u),g=t('[name="width"]',u),m=t('[name="height"]',u),v=t('[name="autostart"]',u);if(p.val("http://"),a){var _=t.uploadbutton({button:t(".ke-upload-button",u)[0],fieldName:l,extraParams:r,url:t.addParam(c,"dir=media"),afterUpload:function(n){if(h.hideLoading(),0===n.error){var a=n.url;s&&(a=t.formatUrl(a,"absolute")),p.val(a),e.afterUpload&&e.afterUpload.call(e,a,n,i),alert(e.lang("uploadSuccess"))}else alert(n.message)},afterError:function(t){h.hideLoading(),e.errorDialog(t)}});_.fileBox.change(function(t){h.showLoading(e.lang("uploadLoading")),_.submit()})}else t(".ke-upload-button",u).hide();o?f.click(function(i){e.loadPlugin("filemanager",function(){e.plugin.filemanagerDialog({viewType:"LIST",dirName:"media",clickFn:function(i,n){e.dialogs.length>1&&(t('[name="url"]',u).val(i),e.afterSelectFile&&e.afterSelectFile.call(e,i),e.hideDialog())}})})}):f.hide();var y=e.plugin.getSelectedMedia();if(y){var b=t.mediaAttrs(y.attr("data-ke-tag"));p.val(b.src),g.val(t.removeUnit(y.css("width"))||b.width||0),m.val(t.removeUnit(y.css("height"))||b.height||0),v[0].checked="true"===b.autostart}p[0].focus(),p[0].select()},"delete":function(){e.plugin.getSelectedMedia().remove(),e.addBookmark()}},e.clickToolbar(i,e.plugin.media.edit)}),function(t){function e(t){this.init(t)}t.extend(e,{init:function(e){function i(e,i){t(".ke-status > div",e).hide(),t(".ke-message",e).addClass("ke-error").show().html(t.escape(i))}var n=this;e.afterError=e.afterError||function(t){alert(t)},n.options=e,n.progressbars={},n.div=t(e.container).html(['<div class="ke-swfupload">','<div class="ke-swfupload-top">','<div class="ke-inline-block ke-swfupload-button">','<input type="button" value="Browse" />',"</div>",'<div class="ke-inline-block ke-swfupload-desc">'+e.uploadDesc+"</div>",'<span class="ke-button-common ke-button-outer ke-swfupload-startupload">','<input type="button" class="ke-button-common ke-button" value="'+e.startButtonValue+'" />',"</span>","</div>",'<div class="ke-swfupload-body"></div>',"</div>"].join("")),n.bodyDiv=t(".ke-swfupload-body",n.div);var a={debug:!1,upload_url:e.uploadUrl,flash_url:e.flashUrl,file_post_name:e.filePostName,button_placeholder:t(".ke-swfupload-button > input",n.div)[0],button_image_url:e.buttonImageUrl,button_width:e.buttonWidth,button_height:e.buttonHeight,button_cursor:SWFUpload.CURSOR.HAND,file_types:e.fileTypes,file_types_description:e.fileTypesDesc,file_upload_limit:e.fileUploadLimit,file_size_limit:e.fileSizeLimit,post_params:e.postParams,file_queued_handler:function(t){t.url=n.options.fileIconUrl,n.appendFile(t)},file_queue_error_handler:function(i,n,a){var o="";switch(n){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:o=e.queueLimitExceeded;break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:o=e.fileExceedsSizeLimit;break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:o=e.zeroByteFile;break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:o=e.invalidFiletype;break;default:o=e.unknownError}t.DEBUG&&alert(o)},upload_start_handler:function(e){var i=this,n=t('div[data-id="'+e.id+'"]',i.bodyDiv);t(".ke-status > div",n).hide(),t(".ke-progressbar",n).show()},upload_progress_handler:function(t,e,i){var a=Math.round(100*e/i),o=n.progressbars[t.id];o.bar.css("width",Math.round(80*a/100)+"px"),o.percent.html(a+"%")},upload_error_handler:function(e,a,o){if(e&&e.filestatus==SWFUpload.FILE_STATUS.ERROR){var s=t('div[data-id="'+e.id+'"]',n.bodyDiv).eq(0);i(s,n.options.errorMessage)}},upload_success_handler:function(e,a){var o=t('div[data-id="'+e.id+'"]',n.bodyDiv).eq(0),s={};try{s=t.json(a)}catch(r){n.options.afterError.call(this,"<!doctype html><html>"+a+"</html>")}return 0!==s.error?void i(o,t.DEBUG?s.message:n.options.errorMessage):(e.url=s.url,t(".ke-img",o).attr("src",e.url).attr("data-status",e.filestatus).data("data",s),void t(".ke-status > div",o).hide())}};n.swfu=new SWFUpload(a),t(".ke-swfupload-startupload input",n.div).click(function(){n.swfu.startUpload()})},getUrlList:function(){var e=[];return t(".ke-img",self.bodyDiv).each(function(){var i=t(this),n=i.attr("data-status");n==SWFUpload.FILE_STATUS.COMPLETE&&e.push(i.data("data"))}),e},removeFile:function(e){var i=this;i.swfu.cancelUpload(e);var n=t('div[data-id="'+e+'"]',i.bodyDiv);t(".ke-photo",n).unbind(),t(".ke-delete",n).unbind(),n.remove()},removeFiles:function(){var e=this;t(".ke-item",e.bodyDiv).each(function(){e.removeFile(t(this).attr("data-id"))})},appendFile:function(e){var i=this,n=t('<div class="ke-inline-block ke-item" data-id="'+e.id+'"></div>');i.bodyDiv.append(n);var a=t('<div class="ke-inline-block ke-photo"></div>').mouseover(function(e){t(this).addClass("ke-on")}).mouseout(function(e){t(this).removeClass("ke-on")});n.append(a);var o=t('<img src="'+e.url+'" class="ke-img" data-status="'+e.filestatus+'" width="80" height="80" alt="'+e.name+'" />');a.append(o),t('<span class="ke-delete"></span>').appendTo(a).click(function(){i.removeFile(e.id)});var s=t('<div class="ke-status"></div>').appendTo(a);t(['<div class="ke-progressbar">','<div class="ke-progressbar-bar"><div class="ke-progressbar-bar-inner"></div></div>','<div class="ke-progressbar-percent">0%</div></div>'].join("")).hide().appendTo(s),t('<div class="ke-message">'+i.options.pendingMessage+"</div>").appendTo(s),n.append('<div class="ke-name">'+e.name+"</div>"),i.progressbars[e.id]={
bar:t(".ke-progressbar-bar-inner",a),percent:t(".ke-progressbar-percent",a)}},remove:function(){this.removeFiles(),this.swfu.destroy(),this.div.html("")}}),t.swfupload=function(t,i){return new e(t,i)}}(KindEditor),KindEditor.plugin("multiimage",function(t){var e=this,i="multiimage",n=(t.undef(e.formatUploadUrl,!0),t.undef(e.uploadJson,e.basePath+"php/upload_json.php")),a=e.pluginsPath+"multiimage/images/",o=t.undef(e.imageSizeLimit,"1MB"),s=(t.undef(e.imageFileTypes,"*.jpg;*.gif;*.png"),t.undef(e.imageUploadLimit,20)),r=t.undef(e.filePostName,"imgFile"),l=e.lang(i+".");e.plugin.multiImageDialog=function(c){var d=c.clickFn,h=t.tmpl(l.uploadDesc,{uploadLimit:s,sizeLimit:o}),u=['<div style="padding:20px;">','<div class="swfupload">',"</div>","</div>"].join(""),p=e.createDialog({name:i,width:650,height:510,title:e.lang(i),body:u,previewBtn:{name:l.insertAll,click:function(t){d.call(e,g.getUrlList())}},yesBtn:{name:l.clearAll,click:function(t){g.removeFiles()}},beforeRemove:function(){(!t.IE||t.V<=8)&&g.remove()}}),f=p.div,g=t.swfupload({container:t(".swfupload",f),buttonImageUrl:a+("zh_CN"==e.langType?"select-files-zh_CN.png":"select-files-en.png"),buttonWidth:"zh_CN"==e.langType?72:88,buttonHeight:23,fileIconUrl:a+"image.png",uploadDesc:h,startButtonValue:l.startUpload,uploadUrl:t.addParam(n,"dir=image"),flashUrl:a+"swfupload.swf",filePostName:r,fileTypes:"*.jpg;*.jpeg;*.gif;*.png;*.bmp",fileTypesDesc:"Image Files",fileUploadLimit:s,fileSizeLimit:o,postParams:t.undef(e.extraFileUploadParams,{}),queueLimitExceeded:l.queueLimitExceeded,fileExceedsSizeLimit:l.fileExceedsSizeLimit,zeroByteFile:l.zeroByteFile,invalidFiletype:l.invalidFiletype,unknownError:l.unknownError,pendingMessage:l.pending,errorMessage:l.uploadError,afterError:function(t){e.errorDialog(t)}});return p},e.clickToolbar(i,function(){e.plugin.multiImageDialog({clickFn:function(i){0!==i.length&&(t.each(i,function(t,i){e.afterUpload&&e.afterUpload.call(e,i.url,i,"multiimage"),e.exec("insertimage",i.url,i.title,i.width,i.height,i.border,i.align)}),setTimeout(function(){e.hideDialog().focus()},0))}})})}),function(){window.SWFUpload=function(t){this.initSWFUpload(t)},SWFUpload.prototype.initSWFUpload=function(t){try{this.customSettings={},this.settings=t,this.eventQueue=[],this.movieName="KindEditor_SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(e){throw delete SWFUpload.instances[this.movieName],e}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(t){if("string"!=typeof t||t.match(/^https?:\/\//i)||t.match(/^\//))return t;var e=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return e<=0?path="/":path=window.location.pathname.substr(0,e)+"/",path+t},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(t,e){this.settings[t]=void 0==this.settings[t]?e:this.settings[t]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var t,e;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(t=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==t)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;e=document.createElement("div"),e.innerHTML=this.getFlashHTML(),t.parentNode.replaceChild(e.firstChild,t),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){var t="";return KindEditor.IE&&KindEditor.V>8&&(t=' classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"'),['<object id="',this.movieName,'"'+t+' type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var t=this.buildParamString(),e=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(e),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(t),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var t=this.settings.post_params,e=[];if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i.toString())+"="+encodeURIComponent(t[i].toString()));return e.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var t=null;if(t=this.getMovieElement(),t&&"unknown"==typeof t.CallFunction){for(var e in t)try{"function"==typeof t[e]&&(t[e]=null)}catch(i){}try{t.parentNode.removeChild(t)}catch(n){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(a){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","\t","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","\t","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","\t","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","\t","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","\t","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","\t","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","\t","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","\t","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","\t","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(t,e,i){return void 0==e?this.settings[t]=i:this.settings[t]=e},SWFUpload.prototype.getSetting=function(t){return void 0!=this.settings[t]?this.settings[t]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(t){this.callFlash("StartUpload",[t])},SWFUpload.prototype.cancelUpload=function(t,e){e!==!1&&(e=!0),this.callFlash("CancelUpload",[t,e])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(t){this.callFlash("SetStats",[t])},SWFUpload.prototype.getFile=function(t){return"number"==typeof t?this.callFlash("GetFileByIndex",[t]):this.callFlash("GetFile",[t])},SWFUpload.prototype.addFileParam=function(t,e,i){return this.callFlash("AddFileParam",[t,e,i])},SWFUpload.prototype.removeFileParam=function(t,e){this.callFlash("RemoveFileParam",[t,e])},SWFUpload.prototype.setUploadURL=function(t){this.settings.upload_url=t.toString(),this.callFlash("SetUploadURL",[t])},SWFUpload.prototype.setPostParams=function(t){this.settings.post_params=t,this.callFlash("SetPostParams",[t])},SWFUpload.prototype.addPostParam=function(t,e){this.settings.post_params[t]=e,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(t){delete this.settings.post_params[t],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(t,e){this.settings.file_types=t,this.settings.file_types_description=e,this.callFlash("SetFileTypes",[t,e])},SWFUpload.prototype.setFileSizeLimit=function(t){this.settings.file_size_limit=t,this.callFlash("SetFileSizeLimit",[t])},SWFUpload.prototype.setFileUploadLimit=function(t){this.settings.file_upload_limit=t,this.callFlash("SetFileUploadLimit",[t])},SWFUpload.prototype.setFileQueueLimit=function(t){this.settings.file_queue_limit=t,this.callFlash("SetFileQueueLimit",[t])},SWFUpload.prototype.setFilePostName=function(t){this.settings.file_post_name=t,this.callFlash("SetFilePostName",[t])},SWFUpload.prototype.setUseQueryString=function(t){this.settings.use_query_string=t,this.callFlash("SetUseQueryString",[t])},SWFUpload.prototype.setRequeueOnError=function(t){this.settings.requeue_on_error=t,this.callFlash("SetRequeueOnError",[t])},SWFUpload.prototype.setHTTPSuccess=function(t){"string"==typeof t&&(t=t.replace(" ","").split(",")),this.settings.http_success=t,this.callFlash("SetHTTPSuccess",[t])},SWFUpload.prototype.setAssumeSuccessTimeout=function(t){this.settings.assume_success_timeout=t,this.callFlash("SetAssumeSuccessTimeout",[t])},SWFUpload.prototype.setDebugEnabled=function(t){this.settings.debug_enabled=t,this.callFlash("SetDebugEnabled",[t])},SWFUpload.prototype.setButtonImageURL=function(t){void 0==t&&(t=""),this.settings.button_image_url=t,this.callFlash("SetButtonImageURL",[t])},SWFUpload.prototype.setButtonDimensions=function(t,e){this.settings.button_width=t,this.settings.button_height=e;var i=this.getMovieElement();void 0!=i&&(i.style.width=t+"px",i.style.height=e+"px"),this.callFlash("SetButtonDimensions",[t,e])},SWFUpload.prototype.setButtonText=function(t){this.settings.button_text=t,this.callFlash("SetButtonText",[t])},SWFUpload.prototype.setButtonTextPadding=function(t,e){this.settings.button_text_top_padding=e,this.settings.button_text_left_padding=t,this.callFlash("SetButtonTextPadding",[t,e])},SWFUpload.prototype.setButtonTextStyle=function(t){this.settings.button_text_style=t,this.callFlash("SetButtonTextStyle",[t])},SWFUpload.prototype.setButtonDisabled=function(t){this.settings.button_disabled=t,this.callFlash("SetButtonDisabled",[t])},SWFUpload.prototype.setButtonAction=function(t){this.settings.button_action=t,this.callFlash("SetButtonAction",[t])},SWFUpload.prototype.setButtonCursor=function(t){this.settings.button_cursor=t,this.callFlash("SetButtonCursor",[t])},SWFUpload.prototype.queueEvent=function(t,e){void 0==e?e=[]:e instanceof Array||(e=[e]);var i=this;if("function"==typeof this.settings[t])this.eventQueue.push(function(){this.settings[t].apply(this,e)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[t])throw"Event handler "+t+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var t=this.eventQueue?this.eventQueue.shift():null;"function"==typeof t&&t.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(t){var e,i=/[$]([0-9a-f]{4})/i,n={};if(void 0!=t){for(var a in t.post)if(t.post.hasOwnProperty(a)){e=a;for(var o;null!==(o=i.exec(e));)e=e.replace(o[0],String.fromCharCode(parseInt("0x"+o[1],16)));n[e]=t.post[a]}t.post=n}return t},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(t){return!1}},SWFUpload.prototype.flashReady=function(){var t=this.getMovieElement();return t?(this.cleanUp(t),void this.queueEvent("swfupload_loaded_handler")):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(t){try{if(this.movieElement&&"unknown"==typeof t.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var e in t)try{"function"==typeof t[e]&&(t[e]=null)}catch(i){}}}catch(n){}window.__flash__removeCallback=function(t,e){try{t&&(t[e]=null)}catch(i){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("file_queued_handler",t)},SWFUpload.prototype.fileQueueError=function(t,e,i){t=this.unescapeFilePostParams(t),this.queueEvent("file_queue_error_handler",[t,e,i])},SWFUpload.prototype.fileDialogComplete=function(t,e,i){this.queueEvent("file_dialog_complete_handler",[t,e,i])},SWFUpload.prototype.uploadStart=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("return_upload_start_handler",t)},SWFUpload.prototype.returnUploadStart=function(t){var e;if("function"==typeof this.settings.upload_start_handler)t=this.unescapeFilePostParams(t),e=this.settings.upload_start_handler.call(this,t);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===e&&(e=!0),e=!!e,this.callFlash("ReturnUploadStart",[e])},SWFUpload.prototype.uploadProgress=function(t,e,i){t=this.unescapeFilePostParams(t),this.queueEvent("upload_progress_handler",[t,e,i])},SWFUpload.prototype.uploadError=function(t,e,i){t=this.unescapeFilePostParams(t),this.queueEvent("upload_error_handler",[t,e,i])},SWFUpload.prototype.uploadSuccess=function(t,e,i){t=this.unescapeFilePostParams(t),this.queueEvent("upload_success_handler",[t,e,i])},SWFUpload.prototype.uploadComplete=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("upload_complete_handler",t)},SWFUpload.prototype.debug=function(t){this.queueEvent("debug_handler",t)},SWFUpload.prototype.debugMessage=function(t){if(this.settings.debug){var e,i=[];if("object"==typeof t&&"string"==typeof t.name&&"string"==typeof t.message){for(var n in t)t.hasOwnProperty(n)&&i.push(n+": "+t[n]);e=i.join("\n")||"",i=e.split("\n"),e="EXCEPTION: "+i.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(e)}else SWFUpload.Console.writeLine(t)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(t){var e,i;try{e=document.getElementById("SWFUpload_Console"),e||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),e=document.createElement("textarea"),e.id="SWFUpload_Console",e.style.fontFamily="monospace",e.setAttribute("wrap","off"),e.wrap="off",e.style.overflow="auto",e.style.width="700px",e.style.height="350px",e.style.margin="5px",i.appendChild(e)),e.value+=t+"\n",e.scrollTop=e.scrollHeight-e.clientHeight}catch(n){alert("Exception: "+n.name+" Message: "+n.message)}}}(),function(){"function"==typeof SWFUpload&&(SWFUpload.queue={},SWFUpload.prototype.initSettings=function(t){return function(){"function"==typeof t&&t.call(this),this.queueSettings={},this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0,this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler,this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler,this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler,this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler,this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(SWFUpload.prototype.initSettings),SWFUpload.prototype.startUpload=function(t){this.queueSettings.queue_cancelled_flag=!1,this.callFlash("StartUpload",[t])},SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=!0,this.stopUpload();for(var t=this.getStats();t.files_queued>0;)this.cancelUpload(),t=this.getStats()},SWFUpload.queue.uploadStartHandler=function(t){var e;return"function"==typeof this.queueSettings.user_upload_start_handler&&(e=this.queueSettings.user_upload_start_handler.call(this,t)),e=e!==!1,this.queueSettings.queue_cancelled_flag=!e,e},SWFUpload.queue.uploadCompleteHandler=function(t){var e,i=this.queueSettings.user_upload_complete_handler;if(t.filestatus===SWFUpload.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++,e="function"==typeof i?i.call(this,t)!==!1:t.filestatus!==SWFUpload.FILE_STATUS.QUEUED){var n=this.getStats();n.files_queued>0&&this.queueSettings.queue_cancelled_flag===!1?this.startUpload():this.queueSettings.queue_cancelled_flag===!1?(this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]),this.queueSettings.queue_upload_count=0):(this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)}})}(),KindEditor.plugin("pagebreak",function(t){var e=this,i="pagebreak",n=t.undef(e.pagebreakHtml,'<hr style="page-break-after: always;" class="ke-pagebreak" />');e.clickToolbar(i,function(){var i=e.cmd,a=i.range;e.focus();var o="br"==e.newlineTag||t.WEBKIT?"":'<span id="__kindeditor_tail_tag__"></span>';if(e.insertHtml(n+o),""!==o){var s=t("#__kindeditor_tail_tag__",e.edit.doc);a.selectNodeContents(s[0]),s.removeAttr("id"),i.select()}})}),KindEditor.plugin("plainpaste",function(t){var e=this,i="plainpaste";e.clickToolbar(i,function(){var n=e.lang(i+"."),a='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+n.comment+'</div><textarea class="ke-textarea" style="width:408px;height:260px;"></textarea></div>',o=e.createDialog({name:i,width:450,title:e.lang(i),body:a,yesBtn:{name:e.lang("yes"),click:function(i){var n=s.val();n=t.escape(n),n=n.replace(/ {2}/g," &nbsp;"),n="p"==e.newlineTag?n.replace(/^/,"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>"):n.replace(/\n/g,"<br />$&"),e.insertHtml(n).hideDialog().focus()}}}),s=t("textarea",o.div);s[0].focus()})}),KindEditor.plugin("preview",function(t){var e=this,i="preview";e.clickToolbar(i,function(){var n=(e.lang(i+"."),'<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>'),a=e.createDialog({name:i,width:750,title:e.lang(i),body:n}),o=t("iframe",a.div),s=t.iframeDoc(o);s.open(),s.write(e.fullHtml()),s.close(),t(s.body).css("background-color","#FFF"),o[0].contentWindow.focus()})}),KindEditor.plugin("quickformat",function(t){function e(t){for(var e=t.first();e&&e.first();)e=e.first();return e}var i=this,n="quickformat",a=t.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");i.clickToolbar(n,function(){i.focus();for(var n,o=i.edit.doc,s=i.cmd.range,r=t(o.body).first(),l=[],c=[],d=s.createBookmark(!0);r;){n=r.next();var h=e(r);h&&"img"==h.name||(a[r.name]?(r.html(r.html().replace(/^(\s|&nbsp;|　)+/gi,"")),r.css("text-indent","2em")):c.push(r),(!n||a[n.name]||a[r.name]&&!a[n.name])&&(c.length>0&&l.push(c),c=[])),r=n}t.each(l,function(e,i){var n=t('<p style="text-indent:2em;"></p>',o);i[0].before(n),t.each(i,function(t,e){n.append(e)})}),s.moveToBookmark(d),i.addBookmark()})}),KindEditor.plugin("table",function(t){function e(t,e){e=e.toUpperCase(),t.css("background-color",e),t.css("color","#000000"===e?"#FFFFFF":"#000000"),t.html(e)}function i(i,n){function o(){t.each(l,function(){this.remove()}),l=[],t(document).unbind("click,mousedown",o),i.unbind("click,mousedown",o)}n.bind("click,mousedown",function(t){t.stopPropagation()}),n.click(function(n){o();var s=t(this),r=s.pos(),c=t.colorpicker({x:r.x,y:r.y+s.height(),z:811214,selectedColor:t(this).html(),colors:a.colorTable,noColor:a.lang("noColor"),shadowMode:a.shadowMode,click:function(t){e(s,t),o()}});l.push(c),t(document).bind("click,mousedown",o),i.bind("click,mousedown",o)})}function n(t,e,i){for(var n=0,a=0,o=e.cells.length;a<o&&e.cells[a]!=i;a++)n+=e.cells[a].rowSpan-1;return i.cellIndex-n}var a=this,o="table",s=a.lang(o+"."),r="ke-zeroborder",l=[];a.plugin.table={prop:function(n){var l=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keRows" style="width:90px;">'+s.cells+"</label>",s.rows+' <input type="text" id="keRows" class="ke-input-text ke-input-number" name="rows" value="" maxlength="4" /> &nbsp; ',s.cols+' <input type="text" class="ke-input-text ke-input-number" name="cols" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+s.size+"</label>",s.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+s.percent+"</option>",'<option value="px">'+s.px+"</option>","</select> &nbsp; ",s.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+s.percent+"</option>",'<option value="px">'+s.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="kePadding" style="width:90px;">'+s.space+"</label>",s.padding+' <input type="text" id="kePadding" class="ke-input-text ke-input-number" name="padding" value="" maxlength="4" /> &nbsp; ',s.spacing+' <input type="text" class="ke-input-text ke-input-number" name="spacing" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+s.align+"</label>",'<select id="keAlign" name="align">','<option value="">'+s.alignDefault+"</option>",'<option value="left">'+s.alignLeft+"</option>",'<option value="center">'+s.alignCenter+"</option>",'<option value="right">'+s.alignRight+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+s.border+"</label>",s.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',s.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+s.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),c=a.cmd.range.createBookmark(),d=a.createDialog({name:o,width:500,title:a.lang(o),body:l,beforeRemove:function(){k.unbind()},yesBtn:{name:a.lang("yes"),click:function(e){var i=u.val(),n=p.val(),o=f.val(),s=g.val(),l=m.val(),d=v.val(),h=_.val(),x=y.val(),T=b.val(),S=w.val(),E=t(k[0]).html()||"",D=t(k[1]).html()||"";if(0==i||!/^\d+$/.test(i))return alert(a.lang("invalidRows")),void u[0].focus();if(0==n||!/^\d+$/.test(n))return alert(a.lang("invalidRows")),void p[0].focus();if(!/^\d*$/.test(o))return alert(a.lang("invalidWidth")),void f[0].focus();if(!/^\d*$/.test(s))return alert(a.lang("invalidHeight")),void g[0].focus();if(!/^\d*$/.test(h))return alert(a.lang("invalidPadding")),void _[0].focus();if(!/^\d*$/.test(x))return alert(a.lang("invalidSpacing")),void y[0].focus();if(!/^\d*$/.test(S))return alert(a.lang("invalidBorder")),void w[0].focus();if(C)return""!==o?C.width(o+l):C.css("width",""),void 0!==C[0].width&&C.removeAttr("width"),""!==s?C.height(s+d):C.css("height",""),void 0!==C[0].height&&C.removeAttr("height"),C.css("background-color",D),void 0!==C[0].bgColor&&C.removeAttr("bgColor"),""!==h?C[0].cellPadding=h:C.removeAttr("cellPadding"),""!==x?C[0].cellSpacing=x:C.removeAttr("cellSpacing"),""!==T?C[0].align=T:C.removeAttr("align"),""!==S?C.attr("border",S):C.removeAttr("border"),""===S||"0"===S?C.addClass(r):C.removeClass(r),""!==E?C.attr("borderColor",E):C.removeAttr("borderColor"),a.hideDialog().focus(),a.cmd.range.moveToBookmark(c),a.cmd.select(),void a.addBookmark();var M="";""!==o&&(M+="width:"+o+l+";"),""!==s&&(M+="height:"+s+d+";"),""!==D&&(M+="background-color:"+D+";");var F="<table";""!==M&&(F+=' style="'+M+'"'),""!==h&&(F+=' cellpadding="'+h+'"'),""!==x&&(F+=' cellspacing="'+x+'"'),""!==T&&(F+=' align="'+T+'"'),""!==S&&(F+=' border="'+S+'"'),""!==S&&"0"!==S||(F+=' class="'+r+'"'),""!==E&&(F+=' bordercolor="'+E+'"'),F+=">";for(var P=0;P<i;P++){F+="<tr>";for(var A=0;A<n;A++)F+="<td>"+(t.IE?"&nbsp;":"<br />")+"</td>";F+="</tr>"}F+="</table>",t.IE||(F+="<br />"),a.insertHtml(F),a.select().hideDialog().focus(),a.addBookmark()}}}),h=d.div,u=t('[name="rows"]',h).val(3),p=t('[name="cols"]',h).val(2),f=t('[name="width"]',h).val(100),g=t('[name="height"]',h),m=t('[name="widthType"]',h),v=t('[name="heightType"]',h),_=t('[name="padding"]',h).val(2),y=t('[name="spacing"]',h).val(0),b=t('[name="align"]',h),w=t('[name="border"]',h).val(1),k=t(".ke-input-color",h);i(h,k.eq(0)),i(h,k.eq(1)),e(k.eq(0),"#000000"),e(k.eq(1),""),u[0].focus(),u[0].select();var C;if(!n&&(C=a.plugin.getSelectedTable())){u.val(C[0].rows.length),
p.val(C[0].rows.length>0?C[0].rows[0].cells.length:0),u.attr("disabled",!0),p.attr("disabled",!0);var x,T=C[0].style.width||C[0].width,S=C[0].style.height||C[0].height;void 0!==T&&(x=/^(\d+)((?:px|%)*)$/.exec(T))?(f.val(x[1]),m.val(x[2])):f.val(""),void 0!==S&&(x=/^(\d+)((?:px|%)*)$/.exec(S))&&(g.val(x[1]),v.val(x[2])),_.val(C[0].cellPadding||""),y.val(C[0].cellSpacing||""),b.val(C[0].align||""),w.val(void 0===C[0].border?"":C[0].border),e(k.eq(0),t.toHex(C.attr("borderColor")||"")),e(k.eq(1),t.toHex(C[0].style.backgroundColor||C[0].bgColor||"")),f[0].focus(),f[0].select()}},cellprop:function(){var n=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+s.size+"</label>",s.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+s.percent+"</option>",'<option value="px">'+s.px+"</option>","</select> &nbsp; ",s.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+s.percent+"</option>",'<option value="px">'+s.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+s.align+"</label>",s.textAlign+' <select id="keAlign" name="textAlign">','<option value="">'+s.alignDefault+"</option>",'<option value="left">'+s.alignLeft+"</option>",'<option value="center">'+s.alignCenter+"</option>",'<option value="right">'+s.alignRight+"</option>","</select> ",s.verticalAlign+' <select name="verticalAlign">','<option value="">'+s.alignDefault+"</option>",'<option value="top">'+s.alignTop+"</option>",'<option value="middle">'+s.alignMiddle+"</option>",'<option value="bottom">'+s.alignBottom+"</option>",'<option value="baseline">'+s.alignBaseline+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+s.border+"</label>",s.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',s.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+s.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),r=a.cmd.range.createBookmark(),l=a.createDialog({name:o,width:500,title:a.lang("tablecell"),body:n,beforeRemove:function(){y.unbind()},yesBtn:{name:a.lang("yes"),click:function(e){var i=d.val(),n=h.val(),o=u.val(),s=p.val(),l=(f.val(),g.val(),m.val()),c=v.val(),b=_.val(),k=t(y[0]).html()||"",C=t(y[1]).html()||"";return/^\d*$/.test(i)?/^\d*$/.test(n)?/^\d*$/.test(b)?(w.css({width:""!==i?i+o:"",height:""!==n?n+s:"","background-color":C,"text-align":l,"vertical-align":c,"border-width":b,"border-style":""!==b?"solid":"","border-color":k}),a.hideDialog().focus(),a.cmd.range.moveToBookmark(r),a.cmd.select(),void a.addBookmark()):(alert(a.lang("invalidBorder")),void _[0].focus()):(alert(a.lang("invalidHeight")),void h[0].focus()):(alert(a.lang("invalidWidth")),void d[0].focus())}}}),c=l.div,d=t('[name="width"]',c).val(100),h=t('[name="height"]',c),u=t('[name="widthType"]',c),p=t('[name="heightType"]',c),f=t('[name="padding"]',c).val(2),g=t('[name="spacing"]',c).val(0),m=t('[name="textAlign"]',c),v=t('[name="verticalAlign"]',c),_=t('[name="border"]',c).val(1),y=t(".ke-input-color",c);i(c,y.eq(0)),i(c,y.eq(1)),e(y.eq(0),"#000000"),e(y.eq(1),""),d[0].focus(),d[0].select();var b,w=a.plugin.getSelectedCell(),k=w[0].style.width||w[0].width||"",C=w[0].style.height||w[0].height||"";(b=/^(\d+)((?:px|%)*)$/.exec(k))?(d.val(b[1]),u.val(b[2])):d.val(""),(b=/^(\d+)((?:px|%)*)$/.exec(C))&&(h.val(b[1]),p.val(b[2])),m.val(w[0].style.textAlign||""),v.val(w[0].style.verticalAlign||"");var x=w[0].style.borderWidth||"";x&&(x=parseInt(x)),_.val(x),e(y.eq(0),t.toHex(w[0].style.borderColor||"")),e(y.eq(1),t.toHex(w[0].style.backgroundColor||"")),d[0].focus(),d[0].select()},insert:function(){this.prop(!0)},"delete":function(){var t=a.plugin.getSelectedTable();a.cmd.range.setStartBefore(t[0]).collapse(!0),a.cmd.select(),t.remove(),a.addBookmark()},colinsert:function(e){var i=a.plugin.getSelectedTable()[0],o=a.plugin.getSelectedRow()[0],s=a.plugin.getSelectedCell()[0],r=s.cellIndex+e;r+=i.rows[0].cells.length-o.cells.length;for(var l=0,c=i.rows.length;l<c;l++){var d=i.rows[l],h=d.insertCell(r);h.innerHTML=t.IE?"":"<br />",r=n(i,d,h)}a.cmd.range.selectNodeContents(s).collapse(!0),a.cmd.select(),a.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(e){var i=a.plugin.getSelectedTable()[0],n=a.plugin.getSelectedRow()[0],o=a.plugin.getSelectedCell()[0],s=n.rowIndex;1===e&&(s=n.rowIndex+(o.rowSpan-1)+e);for(var r=i.insertRow(s),l=0,c=n.cells.length;l<c;l++){n.cells[l].rowSpan>1&&(c-=n.cells[l].rowSpan-1);var d=r.insertCell(l);1===e&&n.cells[l].colSpan>1&&(d.colSpan=n.cells[l].colSpan),d.innerHTML=t.IE?"":"<br />"}for(var h=s;h>=0;h--){var u=i.rows[h].cells;if(u.length>l){for(var p=o.cellIndex;p>=0;p--)u[p].rowSpan>1&&(u[p].rowSpan+=1);break}}a.cmd.range.selectNodeContents(o).collapse(!0),a.cmd.select(),a.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var t=a.plugin.getSelectedTable()[0],e=a.plugin.getSelectedRow()[0],i=a.plugin.getSelectedCell()[0],n=e.rowIndex,o=n+i.rowSpan,s=t.rows[o];if(!(t.rows.length<=o)){var r=i.cellIndex;if(!(s.cells.length<=r)){var l=s.cells[r];i.colSpan===l.colSpan&&(i.rowSpan+=l.rowSpan,s.deleteCell(r),a.cmd.range.selectNodeContents(i).collapse(!0),a.cmd.select(),a.addBookmark())}}},colmerge:function(){var t=(a.plugin.getSelectedTable()[0],a.plugin.getSelectedRow()[0]),e=a.plugin.getSelectedCell()[0],i=(t.rowIndex,e.cellIndex),n=i+1;if(!(t.cells.length<=n)){var o=t.cells[n];e.rowSpan===o.rowSpan&&(e.colSpan+=o.colSpan,t.deleteCell(n),a.cmd.range.selectNodeContents(e).collapse(!0),a.cmd.select(),a.addBookmark())}},rowsplit:function(){var e=a.plugin.getSelectedTable()[0],i=a.plugin.getSelectedRow()[0],o=a.plugin.getSelectedCell()[0],s=i.rowIndex;if(1!==o.rowSpan){for(var r=n(e,i,o),l=1,c=o.rowSpan;l<c;l++){var d=e.rows[s+l],h=d.insertCell(r);o.colSpan>1&&(h.colSpan=o.colSpan),h.innerHTML=t.IE?"":"<br />",r=n(e,d,h)}t(o).removeAttr("rowSpan"),a.cmd.range.selectNodeContents(o).collapse(!0),a.cmd.select(),a.addBookmark()}},colsplit:function(){var e=(a.plugin.getSelectedTable()[0],a.plugin.getSelectedRow()[0]),i=a.plugin.getSelectedCell()[0],n=i.cellIndex;if(1!==i.colSpan){for(var o=1,s=i.colSpan;o<s;o++){var r=e.insertCell(n+o);i.rowSpan>1&&(r.rowSpan=i.rowSpan),r.innerHTML=t.IE?"":"<br />"}t(i).removeAttr("colSpan"),a.cmd.range.selectNodeContents(i).collapse(!0),a.cmd.select(),a.addBookmark()}},coldelete:function(){for(var e=a.plugin.getSelectedTable()[0],i=a.plugin.getSelectedRow()[0],n=a.plugin.getSelectedCell()[0],o=n.cellIndex,s=0,r=e.rows.length;s<r;s++){var l=e.rows[s],c=l.cells[o];c.colSpan>1?(c.colSpan-=1,1===c.colSpan&&t(c).removeAttr("colSpan")):l.deleteCell(o),c.rowSpan>1&&(s+=c.rowSpan-1)}0===i.cells.length?(a.cmd.range.setStartBefore(e).collapse(!0),a.cmd.select(),t(e).remove()):a.cmd.selection(!0),a.addBookmark()},rowdelete:function(){for(var e=a.plugin.getSelectedTable()[0],i=a.plugin.getSelectedRow()[0],n=a.plugin.getSelectedCell()[0],o=i.rowIndex,s=n.rowSpan-1;s>=0;s--)e.deleteRow(o+s);0===e.rows.length?(a.cmd.range.setStartBefore(e).collapse(!0),a.cmd.select(),t(e).remove()):a.cmd.selection(!0),a.addBookmark()}},a.clickToolbar(o,a.plugin.table.prop)}),KindEditor.plugin("template",function(t){function e(e){return a+e+"?ver="+encodeURIComponent(t.DEBUG?t.TIME:t.VERSION)}var i=this,n="template",a=(i.lang(n+"."),i.pluginsPath+n+"/html/");i.clickToolbar(n,function(){var a=i.lang(n+"."),o=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',a.selectTemplate+" <select>"];t.each(a.fileList,function(t,e){o.push('<option value="'+t+'">'+e+"</option>")}),html=[o.join(""),"</select></div>",'<div class="ke-right">','<input type="checkbox" id="keReplaceFlag" name="replaceFlag" value="1" /> <label for="keReplaceFlag">'+a.replaceContent+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<iframe class="ke-textarea" frameborder="0" style="width:458px;height:260px;background-color:#FFF;"></iframe>',"</div>"].join("");var s=i.createDialog({name:n,width:500,title:i.lang(n),body:html,yesBtn:{name:i.lang("yes"),click:function(e){var n=t.iframeDoc(c);i[l[0].checked?"html":"insertHtml"](n.body.innerHTML).hideDialog().focus()}}}),r=t("select",s.div),l=t('[name="replaceFlag"]',s.div),c=t("iframe",s.div);l[0].checked=!0,c.attr("src",e(r.val())),r.change(function(){c.attr("src",e(this.value))})})}),KindEditor.plugin("wordpaste",function(t){var e=this,i="wordpaste";e.clickToolbar(i,function(){var n=e.lang(i+"."),a='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+n.comment+'</div><iframe class="ke-textarea" frameborder="0" style="width:408px;height:260px;"></iframe></div>',o=e.createDialog({name:i,width:450,title:e.lang(i),body:a,yesBtn:{name:e.lang("yes"),click:function(i){var n=l.body.innerHTML;n=t.clearMsWord(n,e.filterMode?e.htmlTags:t.options.htmlTags),e.insertHtml(n).hideDialog().focus()}}}),s=o.div,r=t("iframe",s),l=t.iframeDoc(r);t.IE||(l.designMode="on"),l.open(),l.write("<!doctype html><html><head><title>WordPaste</title></head>"),l.write('<body style="background-color:#FFF;font-size:12px;margin:2px;">'),t.IE||l.write("<br />"),l.write("</body></html>"),l.close(),t.IE&&(l.body.contentEditable="true"),r[0].contentWindow.focus()})});