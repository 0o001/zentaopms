var Y=(e,t,a)=>new Promise((l,o)=>{var c=_=>{try{f(a.next(_))}catch(I){o(I)}},g=_=>{try{f(a.throw(_))}catch(I){o(I)}},f=_=>_.done?l(_.value):Promise.resolve(_.value).then(c,g);f((a=a.apply(e,t)).next())});import{d as U,v as y,R as Z,ca as ue,X as _e,o as i,m as p,cb as de,cc as pe,cd as ee,ce as ve,a as me,cf as ge,cg as fe,ch as he,ci as ye,j as te,an as Ce,y as be,r as E,e as h,f as s,z as v,F as N,A as P,t as S,ab as b,w as R,D as ke,E as Oe,cj as Se,c0 as Ee,u as Ie,a3 as xe,aA as Ae,a1 as L,bR as De,c as F,b_ as Le,ad as we}from"./index.js";import{C as Te}from"./index-5b127088.js";import{a as Ne,f as Pe,b as Re,p as $e}from"./index-df1aead3.js";import{u as ze,E as q,P as w,i as T}from"./chartEditStore-a057772d.js";import{i as ae}from"./icon-5a76aa29.js";import{l as Fe,c as J}from"./index-3118fd16.js";import{u as ne}from"./chartLayoutStore-590be4db.js";const Be={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},X=U({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=y(""),l=()=>Y(this,null,function*(){a.value=yield Ne(t.chartConfig)});return Z(()=>t.chartConfig.key,()=>l(),{immediate:!0}),(o,c)=>{const g=ue("lazy");return _e((i(),p("img",Be,null,512)),[[g,a.value]])}}});function Ue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ke=Ue;function Ge(e,t,a){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var c=Array(o);++l<o;)c[l]=e[l+t];return c}var Ve=Ge,He=de,Me=Ve;function je(e,t){return t.length<2?e:He(e,Me(t,0,-1))}var Ye=je,qe=ee,Je=Ke,Xe=Ye,Qe=pe;function We(e,t){return t=qe(t,e),e=Xe(e,t),e==null||delete e[Qe(Je(t))]}var Ze=We,et=ve;function tt(e){return et(e)?void 0:e}var at=tt,nt=me,st=ye,ot=Ze,ct=ee,lt=ge,rt=at,it=fe,ut=he,_t=1,dt=2,pt=4,vt=it(function(e,t){var a={};if(e==null)return a;var l=!1;t=nt(t,function(c){return c=ct(c,e),l||(l=c.length>1),c}),lt(e,ut(e),a),l&&(a=st(a,_t|dt|pt,rt));for(var o=t.length;o--;)ot(a,t[o]);return a}),mt=vt;const gt=e=>(ke("data-v-70d33c34"),e=e(),Oe(),e),ft={class:"go-chart-common"},ht={key:0,class:"charts"},yt={class:"tree-top"},Ct=gt(()=>v("span",null,"\u6240\u6709\u5206\u7EC4",-1)),bt={class:"chapter chapter-first"},kt={class:"label-count"},Ot=["onDragstart"],St={key:1,class:"chapter chapter-last"},Et=["onDragstart"],It={key:1,class:"no-charts"},xt={class:"chart-content-list"},At=U({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var M,j;const t=e,a=Fe(()=>Ce(()=>import("./index-413b464f.js"),["static/js/index-413b464f.js","static/css/index-edd8c06a.css","static/js/index-8e749a98.js","static/css/index-1fb675e6.css","static/js/index.js","static/css/index-0098e772.css","static/js/icon-5a76aa29.js","static/js/chartEditStore-a057772d.js","static/js/plugin-1ad4ab90.js","static/js/chartLayoutStore-590be4db.js","static/js/index-3118fd16.js","static/css/index-3cd64027.css","static/js/index-5adb8d73.js","static/js/index-1148a7a5.js","static/css/index-c496491e.css","static/js/index-df1aead3.js","static/css/index-187eb1a6.css","static/js/table_scrollboard-e30c6082.js","static/js/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-6e947f65.js","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-7160ca0a.css","static/js/useTargetData.hook-8fdba0b8.js","static/js/index-5b127088.js","static/css/index-6e69bef0.css"])),{ChevronUpOutlineIcon:l,ChevronDownOutlineIcon:o}=ae.ionicons5,c=(M=window.dimensions)!=null?M:[],g=y(c[0]?c[0].value:""),f=(j=window.treeData)!=null?j:[],_=f.chart?y(t.menu=="Charts"?f.chart[g.value]:f.pivot[g.value]):y(),I=()=>{_.value=f.chart?t.menu=="Charts"?f.chart[g.value]:f.pivot[g.value]:""},x=y(!1),C=y([]),se=()=>{x.value=!x.value;for(const r in _.value){C.value[_.value[r].id]=x.value;for(const n in _.value[r].child)C.value[_.value[r].child[n].id]=x.value}},K=r=>{C.value[r]=!C.value[r]};let u=be({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const $=y(),oe=r=>{for(const n in r){u.selectOptions=r[n];break}};Z(()=>t.selectOptions,r=>{if(u.categorysNum=0,!!r){r.list.forEach(n=>{const A=u.categorys[n.category];u.categorys[n.category]=A&&A.length?[...A,n]:[n],u.categoryNames[n.category]=n.categoryName,u.categorys.all.push(n)});for(const n in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:n,label:u.categoryNames[n]});oe(u.categorys),$.value=u.menuOptions[0].key}},{immediate:!0});const ce=r=>{u.selectOptions=u.categorys[r]},G=ze(),V=(r,n)=>{J(n.chartKey,Pe(n)),J(n.conKey,Re(n)),r.dataTransfer.setData(Se.DRAG_KEY,Ee(mt(n,["image"]))),G.setEditCanvas(q.IS_CREATE,!0)},H=()=>{G.setEditCanvas(q.IS_CREATE,!1)};return(r,n)=>{const A=E("n-select"),z=E("n-icon"),le=E("n-menu"),re=E("n-scrollbar");return i(),p("div",ft,[e.menu=="Charts"||e.menu=="Tables"?(i(),p("div",ht,[h(A,{class:"dimension-btn",value:g.value,"onUpdate:value":[n[0]||(n[0]=m=>g.value=m),I],options:s(c)},null,8,["value","options"]),v("div",yt,[Ct,h(z,{size:"16",component:x.value?s(l):s(o),onClick:se},null,8,["component"])]),(i(!0),p(N,null,P(s(_),(m,Ht)=>(i(),p("div",{class:"tree-body",key:m.id},[v("div",null,[v("div",bt,[h(z,{size:"16",component:C.value[m.id]?s(l):s(o),onClick:d=>K(m.id)},null,8,["component","onClick"]),v("label",null,S(m.title),1),v("label",kt,S(m.count),1)]),m.child&&C.value[m.id]?(i(!0),p(N,{key:0},P(m.child,d=>(i(),p("div",{class:"tree-child",key:d.id},[d.type!="chapter"?(i(),p("div",{key:0,class:"item-box",draggable:"",onDragstart:O=>V(O,d.chartConfig),onDragend:H},[h(s(X),{class:"list-img",chartConfig:d.chartConfig},null,8,["chartConfig"]),v("span",null,S(d.title),1)],40,Ot)):b("",!0),d.type=="chapter"?(i(),p("div",St,[h(z,{size:"16",component:C.value[d.id]?s(l):s(o),onClick:O=>K(d.id)},null,8,["component","onClick"]),v("label",null,S(d.title),1)])):b("",!0),d.child&&C.value[d.id]?(i(!0),p(N,{key:2},P(d.child,O=>(i(),p("div",{class:"tree-child",key:d.id},[O.type!="chapter"?(i(),p("div",{key:0,class:"item-box",draggable:"",onDragstart:ie=>V(ie,O.chartConfig),onDragend:H},[h(s(X),{class:"list-img",chartConfig:O.chartConfig},null,8,["chartConfig"]),v("span",null,S(O.title),1)],40,Et)):b("",!0)]))),128)):b("",!0)]))),128)):b("",!0)])]))),128))])):b("",!0),e.menu!="Charts"&&e.menu!="Tables"?(i(),p("div",It,[h(le,{class:"chart-menu-width",value:$.value,"onUpdate:value":[n[1]||(n[1]=m=>$.value=m),ce],options:s(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),v("div",xt,[h(re,null,{default:R(()=>[h(s(a),{menuOptions:s(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):b("",!0)])}}});var Dt=te(At,[["__scopeId","data-v-70d33c34"]]);const Lt=Ie(),wt=y(Lt.getAppTheme);ne();const{getCharts:Tt}=xe(ne()),Nt=Ae({id:"usePackagesStore",state:()=>({packagesList:Object.freeze($e)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Pt,RoadmapIcon:Rt,SpellCheckIcon:$t,GraphicalDataFlowIcon:zt}=ae.carbon,{getPackagesList:Q}=Nt(),k=[],W={[w.CHARTS]:{icon:L(Rt),label:T.CHARTS},[w.INFORMATIONS]:{icon:L($t),label:T.INFORMATIONS},[w.TABLES]:{icon:L(Pt),label:T.TABLES},[w.DECORATES]:{icon:L(zt),label:T.DECORATES}},Ft=()=>{for(const e in Q)k.push({key:e,icon:W[e].icon,label:W[e].label,list:Q[e]})};Ft();k[0].key;const D=y(k[0].key),B=y(k[0]),Bt=e=>{for(const t in k)k[t].key==e&&(B.value=k[t])};const Ut={class:"menu-width-box"},Kt={class:"menu-component-box"},Gt=U({__name:"index",setup(e){return De(t=>({"0fa28f36":s(wt)})),(t,a)=>{const l=E("n-tab-pane"),o=E("n-tabs");return i(),F(s(Te),{class:we(["go-content-charts",{scoped:!s(Tt)}]),backIcon:!1},{default:R(()=>[v("aside",null,[v("div",Ut,[h(o,{value:s(D),"onUpdate:value":[a[0]||(a[0]=c=>Le(D)?D.value=c:null),s(Bt)],class:"tabs-box",size:"small",type:"segment"},{default:R(()=>[(i(!0),p(N,null,P(s(k),c=>(i(),F(l,{key:c.key,name:c.key,size:"small","display-directive":"show:lazy"},{tab:R(()=>[v("span",null,S(c.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),v("div",Kt,[s(B)?(i(),F(s(Dt),{selectOptions:s(B),menu:s(D),key:s(D)},null,8,["selectOptions","menu"])):b("",!0)])])])]),_:1},8,["class"])}}});var Vt=te(Gt,[["__scopeId","data-v-5c983491"]]),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"}));export{X as _,Zt as i,mt as o};
