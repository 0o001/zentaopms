var J=(e,t,s)=>new Promise((r,l)=>{var n=f=>{try{y(s.next(f))}catch(b){l(b)}},I=f=>{try{y(s.throw(f))}catch(b){l(b)}},y=f=>f.done?r(f.value):Promise.resolve(f.value).then(n,I);y((s=s.apply(e,t)).next())});import{d as G,v as g,R as z,cb as ue,X as de,o as c,m as p,cc as ve,cd as ee,ce as _e,cf as pe,a as me,cg as ge,ch as fe,ci as ye,cj as he,j as te,an as Ce,a5 as be,y as ke,r as L,c as E,aa as m,z as _,e as O,f as o,w as $,F as M,A as F,t as D,ck as Oe,c2 as Se,G as Ee,H as Ie,u as xe,a3 as De,aH as Le,a1 as w,bJ as Te,bS as Ae,ad as we}from"./index.js";import{C as Ne}from"./index-864882c6.js";import{i as Re,u as Pe,f as $e,j as ze,E as Y,g as ne,p as Me,P as N,k as R}from"./useSync.hook-cae0f7f7.js";import{i as ae}from"./icon-a9afa6f2.js";import{l as Fe,c as q}from"./index-f3f1cf53.js";const Ue={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},X=G({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,s=g(""),r=()=>J(this,null,function*(){s.value=yield Re(t.chartConfig)});return z(()=>t.chartConfig.key,()=>r(),{immediate:!0}),(l,n)=>{const I=ue("lazy");return de((c(),p("img",Ue,null,512)),[[I,s.value]])}}});function Be(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ge=Be;function He(e,t,s){var r=-1,l=e.length;t<0&&(t=-t>l?0:l+t),s=s>l?l:s,s<0&&(s+=l),l=t>s?0:s-t>>>0,t>>>=0;for(var n=Array(l);++r<l;)n[r]=e[r+t];return n}var Ke=He,Ve=ve,je=Ke;function Je(e,t){return t.length<2?e:Ve(e,je(t,0,-1))}var Ye=Je,qe=ee,Xe=Ge,Qe=Ye,We=_e;function Ze(e,t){return t=qe(t,e),e=Qe(e,t),e==null||delete e[We(Xe(t))]}var et=Ze,tt=pe;function nt(e){return tt(e)?void 0:e}var at=nt,st=me,ot=he,lt=et,ct=ee,it=ge,rt=at,ut=fe,dt=ye,vt=1,_t=2,pt=4,mt=ut(function(e,t){var s={};if(e==null)return s;var r=!1;t=st(t,function(n){return n=ct(n,e),r||(r=n.length>1),n}),it(e,dt(e),s),r&&(s=ot(s,vt|_t|pt,rt));for(var l=t.length;l--;)lt(s,t[l]);return s}),gt=mt;const ft=e=>(Ee("data-v-729b0584"),e=e(),Ie(),e),yt={class:"go-chart-common"},ht={key:0,class:"charts"},Ct={class:"tree-top"},bt=ft(()=>_("span",null,"\u6240\u6709\u5206\u7EC4",-1)),kt={class:"tree-body"},Ot={class:"chapter chapter-first"},St=["title"],Et={class:"label-count"},It=["onDragstart"],xt=["title"],Dt={key:1,class:"chapter chapter-last"},Lt=["title"],Tt=["onDragstart"],At=["title"],wt={key:1,class:"no-charts"},Nt={class:"chart-content-list"},Rt=G({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){const t=e,s=Fe(()=>Ce(()=>import("./index-066f3565.js"),["static/js/index-066f3565.js","static/css/index-f25f4c30.css","static/js/index-77a864e1.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-a1e82c00.css","static/js/icon-a9afa6f2.js","static/js/useSync.hook-cae0f7f7.js","static/css/useSync.hook-21d4301c.css","static/js/plugin-25b8b76b.js","static/js/tables_list-a4e5b822.js","static/js/index-f3f1cf53.js","static/css/index-95e0b0d7.css","static/js/index-bda8e617.js","static/js/index-565d14ab.js","static/css/index-24d4cc74.css","static/js/index-864882c6.js","static/css/index-3e214e52.css"])),{ChevronUpOutlineIcon:r,ChevronDownOutlineIcon:l}=ae.ionicons5,n=Pe(),I=g(n.getDimensions),y=g(n.getDimension),f=g(n.getScopeList),b=g(n.getScope);z(()=>n.getDimensions,()=>{I.value=n.getDimensions,y.value=n.getDimension}),z(()=>n.getScopeList,()=>{f.value=n.getScopeList,b.value=n.getScope});const T=be(()=>{const i=n.getTreeData,{chart:a,pivot:h,metric:x}=i;return a&&t.menu=="Charts"?a[y.value]:h&&t.menu=="Tables"?h[y.value]:x&&t.menu=="Metrics"?x[b.value]:[]}),A=g(!1),k=g([]),se=()=>{A.value=!A.value;for(const i in T.value){k.value[T.value[i].id]=A.value;for(const a in T.value[i].child)k.value[T.value[i].child[a].id]=A.value}},H=i=>{k.value[i]=!k.value[i]};let u=ke({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const U=g(),oe=i=>{for(const a in i){u.selectOptions=i[a];break}};z(()=>t.selectOptions,i=>{if(u.categorysNum=0,!!i){i.list.forEach(a=>{const h=u.categorys[a.category];u.categorys[a.category]=h&&h.length?[...h,a]:[a],u.categoryNames[a.category]=a.categoryName,u.categorys.all.push(a)});for(const a in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:a,label:u.categoryNames[a]});oe(u.categorys),U.value=u.menuOptions[0].key}},{immediate:!0});const le=i=>{u.selectOptions=u.categorys[i]},K=(i,a)=>{q(a.chartKey,$e(a)),q(a.conKey,ze(a)),i.dataTransfer.setData(Oe.DRAG_KEY,Se(gt(a,["image"]))),n.setEditCanvas(Y.IS_CREATE,!0)},V=()=>{n.setEditCanvas(Y.IS_CREATE,!1)};return(i,a)=>{const h=L("n-select"),x=L("n-icon"),j=L("n-scrollbar"),ce=L("n-menu");return c(),p("div",yt,[e.menu=="Charts"||e.menu=="Tables"||e.menu=="Metrics"?(c(),p("div",ht,[e.menu=="Charts"||e.menu=="Tables"?(c(),E(h,{key:0,class:"dimension-btn",value:y.value,"onUpdate:value":a[0]||(a[0]=v=>y.value=v),options:I.value},null,8,["value","options"])):m("",!0),e.menu=="Metrics"?(c(),E(h,{key:1,class:"dimension-btn",value:b.value,"onUpdate:value":a[1]||(a[1]=v=>b.value=v),options:f.value},null,8,["value","options"])):m("",!0),_("div",Ct,[bt,O(x,{size:"16",component:A.value?o(r):o(l),onClick:se},null,8,["component"])]),_("div",kt,[O(j,null,{default:$(()=>[(c(!0),p(M,null,F(o(T),(v,qt)=>(c(),p("div",{key:v.id,class:"tree-item"},[_("div",null,[_("div",Ot,[O(x,{size:"16",component:k.value[v.id]?o(r):o(l),onClick:d=>H(v.id)},null,8,["component","onClick"]),_("label",{title:v.title,class:"text-nowrap label-title"},D(v.title),9,St),_("label",Et,D(v.count),1)]),v.child&&k.value[v.id]?(c(!0),p(M,{key:0},F(v.child,d=>(c(),p("div",{class:"tree-child",key:d.id},[d.type!="chapter"?(c(),p("div",{key:0,class:"item-box",draggable:"",onDragstart:C=>K(C,d.chartConfig),onDragend:V},[d.chartConfig.image?(c(),E(o(X),{key:0,class:"list-img",chartConfig:d.chartConfig},null,8,["chartConfig"])):m("",!0),_("span",{title:d.title},D(d.title),9,xt)],40,It)):m("",!0),d.type=="chapter"?(c(),p("div",Dt,[O(x,{size:"16",component:k.value[d.id]?o(r):o(l),onClick:C=>H(d.id)},null,8,["component","onClick"]),_("label",{title:d.title,class:"text-nowrap"},D(d.title),9,Lt)])):m("",!0),d.child&&k.value[d.id]?(c(!0),p(M,{key:2},F(d.child,(C,ie)=>(c(),p("div",{class:"tree-child",key:ie},[C.type!="chapter"?(c(),p("div",{key:0,class:"item-box",draggable:"true",onDragstart:re=>K(re,C.chartConfig),onDragend:V},[C.chartConfig.image?(c(),E(o(X),{key:0,class:"list-img",chartConfig:C.chartConfig},null,8,["chartConfig"])):m("",!0),_("p",{title:C.title,class:"text-nowrap"},D(C.title),9,At)],40,Tt)):m("",!0)]))),128)):m("",!0)]))),128)):m("",!0)])]))),128))]),_:1})])])):m("",!0),e.menu!="Charts"&&e.menu!="Tables"&&e.menu!="Metrics"?(c(),p("div",wt,[O(ce,{class:"chart-menu-width",value:U.value,"onUpdate:value":[a[2]||(a[2]=v=>U.value=v),le],options:o(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),_("div",Nt,[O(j,null,{default:$(()=>[O(o(s),{menuOptions:o(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):m("",!0)])}}});var Pt=te(Rt,[["__scopeId","data-v-729b0584"]]);const $t=xe(),zt=g($t.getAppTheme);ne();const{getCharts:Mt}=De(ne()),Ft=Le({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(Me)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Ut,RoadmapIcon:Bt,SpellCheckIcon:Gt,GraphicalDataFlowIcon:Q}=ae.carbon,{getPackagesList:W}=Ft(),S=[],Z={[N.CHARTS]:{icon:w(Bt),label:R.CHARTS},[N.INFORMATIONS]:{icon:w(Gt),label:R.INFORMATIONS},[N.TABLES]:{icon:w(Ut),label:R.TABLES},[N.DECORATES]:{icon:w(Q),label:R.DECORATES},[N.METRICS]:{icon:w(Q),label:R.METRICS}},Ht=()=>{for(const e in W)S.push({key:e,icon:Z[e].icon,label:Z[e].label,list:W[e]})};Ht();S[0].key;const P=g(S[0].key),B=g(S[0]),Kt=e=>{for(const t in S)S[t].key==e&&(B.value=S[t])};const Vt={class:"menu-width-box"},jt={class:"menu-component-box"},Jt=G({__name:"index",setup(e){return Te(t=>({"7563b37f":o(zt)})),(t,s)=>{const r=L("n-tab-pane"),l=L("n-tabs");return c(),E(o(Ne),{class:we(["go-content-charts",{scoped:!o(Mt)}]),backIcon:!1},{default:$(()=>[_("aside",null,[_("div",Vt,[O(l,{value:o(P),"onUpdate:value":[s[0]||(s[0]=n=>Ae(P)?P.value=n:null),o(Kt)],class:"tabs-box",size:"small",type:"segment"},{default:$(()=>[(c(!0),p(M,null,F(o(S),n=>(c(),E(r,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:$(()=>[_("span",null,D(n.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),_("div",jt,[o(B)?(c(),E(o(Pt),{selectOptions:o(B),menu:o(P),key:o(P)},null,8,["selectOptions","menu"])):m("",!0)])])])]),_:1},8,["class"])}}});var Yt=te(Jt,[["__scopeId","data-v-7ab8059c"]]),nn=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"}));export{X as _,nn as i,gt as o};
