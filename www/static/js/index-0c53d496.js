var Z=(e,t,a)=>new Promise((i,o)=>{var l=p=>{try{E(a.next(p))}catch(g){o(g)}},h=p=>{try{E(a.throw(p))}catch(g){o(g)}},E=p=>p.done?i(p.value):Promise.resolve(p.value).then(l,h);E((a=a.apply(e,t)).next())});import{d as B,v as f,R as le,ca as ge,X as fe,o as c,m,cb as he,cc as ye,cd as ce,ce as Ce,a as be,cf as ke,cg as Oe,ch as Se,ci as Ee,j as ie,an as Ie,y as we,r as x,c as R,f as n,ab as y,z as _,e as C,w as P,F as $,A as z,t as w,D as xe,E as Te,cj as Le,c1 as Ae,u as De,a3 as Ne,aA as Re,a1 as L,bR as Pe,b_ as $e,ad as ze}from"./index.js";import{C as Me}from"./index-dcda7a9d.js";import{a as Fe,f as Ue,b as Be,p as Ke}from"./index-8c12c248.js";import{u as Ge,E as ee,P as A,k as D}from"./chartEditStore-67a65fa4.js";import{i as re}from"./icon-9aec0c60.js";import{l as Ve,c as te}from"./index-5651f90b.js";import{u as ue}from"./chartLayoutStore-acc8e390.js";const He={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},ae=B({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=f(""),i=()=>Z(this,null,function*(){a.value=yield Fe(t.chartConfig)});return le(()=>t.chartConfig.key,()=>i(),{immediate:!0}),(o,l)=>{const h=ge("lazy");return fe((c(),m("img",He,null,512)),[[h,a.value]])}}});function je(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ye=je;function qe(e,t,a){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var l=Array(o);++i<o;)l[i]=e[i+t];return l}var Je=qe,Xe=he,Qe=Je;function We(e,t){return t.length<2?e:Xe(e,Qe(t,0,-1))}var Ze=We,et=ce,tt=Ye,at=Ze,st=ye;function nt(e,t){return t=et(t,e),e=at(e,t),e==null||delete e[st(tt(t))]}var ot=nt,lt=Ce;function ct(e){return lt(e)?void 0:e}var it=ct,rt=be,ut=Ee,dt=ot,vt=ce,_t=ke,mt=it,pt=Oe,gt=Se,ft=1,ht=2,yt=4,Ct=pt(function(e,t){var a={};if(e==null)return a;var i=!1;t=rt(t,function(l){return l=vt(l,e),i||(i=l.length>1),l}),_t(e,gt(e),a),i&&(a=ut(a,ft|ht|yt,mt));for(var o=t.length;o--;)dt(a,t[o]);return a}),bt=Ct;const kt=e=>(xe("data-v-b56f07e0"),e=e(),Te(),e),Ot={class:"go-chart-common"},St={key:0,class:"charts"},Et={class:"tree-top"},It=kt(()=>_("span",null,"\u6240\u6709\u5206\u7EC4",-1)),wt={class:"tree-body"},xt={class:"chapter chapter-first"},Tt=["title"],Lt={class:"label-count"},At=["onDragstart"],Dt=["title"],Nt={key:1,class:"chapter chapter-last"},Rt=["title"],Pt=["onDragstart"],$t=["title"],zt={key:1,class:"no-charts"},Mt={class:"chart-content-list"},Ft=B({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var Y,q,J,X,Q;const t=e,a=Ve(()=>Ie(()=>import("./index-56811a76.js"),["static/js/index-56811a76.js","static/css/index-f25f4c30.css","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-8f28c69f.css","static/js/index-d09fca06.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-c34cea1e.css","static/js/icon-9aec0c60.js","static/js/chartEditStore-67a65fa4.js","static/js/plugin-4ed82e2a.js","static/js/chartLayoutStore-acc8e390.js","static/js/index-5651f90b.js","static/css/index-8038d4fd.css","static/js/index-f43c19b8.js","static/js/index-632ff969.js","static/css/index-24d4cc74.css","static/js/index-8c12c248.js","static/css/index-40c41b91.css","static/js/tables_list-16bd57ab.js","static/js/SettingItemBox-ec00809b.js","static/js/CollapseItem-0af36d57.js","static/js/useTargetData.hook-2a4e58b8.js","static/js/index-dcda7a9d.js","static/css/index-3e214e52.css"])),{ChevronUpOutlineIcon:i,ChevronDownOutlineIcon:o}=re.ionicons5,l=(Y=window.dimensions)!=null?Y:[],h=f((q=window.dimension)!=null?q:l[0]?l[0].value:""),E=(J=window.scopeList)!=null?J:[],p=f((X=window.scopeList)!=null?X:E[0]?E[0].value:""),g=(Q=window.treeData)!=null?Q:[],b=g.chart?f(t.menu=="Charts"?g.chart[h.value]:t.menu=="Tables"?g.pivot[h.value]:g.metric[p.value]):f(),K=()=>{g.chart?t.menu=="Charts"?b.value=g.chart[h.value]:t.menu=="Tables"?b.value=g.pivot[h.value]:t.menu=="Metrics"&&(b.value=g.metric[p.value]):b.value=""},T=f(!1),k=f([]),de=()=>{T.value=!T.value;for(const r in b.value){k.value[b.value[r].id]=T.value;for(const s in b.value[r].child)k.value[b.value[r].child[s].id]=T.value}},G=r=>{k.value[r]=!k.value[r]};let u=we({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const M=f(),ve=r=>{for(const s in r){u.selectOptions=r[s];break}};le(()=>t.selectOptions,r=>{if(u.categorysNum=0,!!r){r.list.forEach(s=>{const I=u.categorys[s.category];u.categorys[s.category]=I&&I.length?[...I,s]:[s],u.categoryNames[s.category]=s.categoryName,u.categorys.all.push(s)});for(const s in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:s,label:u.categoryNames[s]});ve(u.categorys),M.value=u.menuOptions[0].key}},{immediate:!0});const _e=r=>{u.selectOptions=u.categorys[r]},V=Ge(),H=(r,s)=>{te(s.chartKey,Ue(s)),te(s.conKey,Be(s)),r.dataTransfer.setData(Le.DRAG_KEY,Ae(bt(s,["image"]))),V.setEditCanvas(ee.IS_CREATE,!0)},j=()=>{V.setEditCanvas(ee.IS_CREATE,!1)};return(r,s)=>{const I=x("n-select"),F=x("n-icon"),W=x("n-scrollbar"),me=x("n-menu");return c(),m("div",Ot,[e.menu=="Charts"||e.menu=="Tables"||e.menu=="Metrics"?(c(),m("div",St,[e.menu=="Charts"||e.menu=="Tables"?(c(),R(I,{key:0,class:"dimension-btn",value:h.value,"onUpdate:value":[s[0]||(s[0]=v=>h.value=v),K],options:n(l)},null,8,["value","options"])):y("",!0),e.menu=="Metrics"?(c(),R(I,{key:1,class:"dimension-btn",value:p.value,"onUpdate:value":[s[1]||(s[1]=v=>p.value=v),K],options:n(E)},null,8,["value","options"])):y("",!0),_("div",Et,[It,C(F,{size:"16",component:T.value?n(i):n(o),onClick:de},null,8,["component"])]),_("div",wt,[C(W,null,{default:P(()=>[(c(!0),m($,null,z(n(b),(v,ea)=>(c(),m("div",{key:v.id,class:"tree-item"},[_("div",null,[_("div",xt,[C(F,{size:"16",component:k.value[v.id]?n(i):n(o),onClick:d=>G(v.id)},null,8,["component","onClick"]),_("label",{title:v.title,class:"text-nowrap label-title"},w(v.title),9,Tt),_("label",Lt,w(v.count),1)]),v.child&&k.value[v.id]?(c(!0),m($,{key:0},z(v.child,d=>(c(),m("div",{class:"tree-child",key:d.id},[d.type!="chapter"?(c(),m("div",{key:0,class:"item-box",draggable:"",onDragstart:O=>H(O,d.chartConfig),onDragend:j},[C(n(ae),{class:"list-img",chartConfig:d.chartConfig},null,8,["chartConfig"]),_("span",{title:d.title},w(d.title),9,Dt)],40,At)):y("",!0),d.type=="chapter"?(c(),m("div",Nt,[C(F,{size:"16",component:k.value[d.id]?n(i):n(o),onClick:O=>G(d.id)},null,8,["component","onClick"]),_("label",{title:d.title,class:"text-nowrap"},w(d.title),9,Rt)])):y("",!0),d.child&&k.value[d.id]?(c(!0),m($,{key:2},z(d.child,O=>(c(),m("div",{class:"tree-child",key:d.id},[O.type!="chapter"?(c(),m("div",{key:0,class:"item-box",draggable:"",onDragstart:pe=>H(pe,O.chartConfig),onDragend:j},[C(n(ae),{class:"list-img",chartConfig:O.chartConfig},null,8,["chartConfig"]),_("span",{title:O.title,class:"text-nowrap"},w(O.title),9,$t)],40,Pt)):y("",!0)]))),128)):y("",!0)]))),128)):y("",!0)])]))),128))]),_:1})])])):y("",!0),e.menu!="Charts"&&e.menu!="Tables"&&e.menu!="Metrics"?(c(),m("div",zt,[C(me,{class:"chart-menu-width",value:M.value,"onUpdate:value":[s[2]||(s[2]=v=>M.value=v),_e],options:n(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),_("div",Mt,[C(W,null,{default:P(()=>[C(n(a),{menuOptions:n(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):y("",!0)])}}});var Ut=ie(Ft,[["__scopeId","data-v-b56f07e0"]]);const Bt=De(),Kt=f(Bt.getAppTheme);ue();const{getCharts:Gt}=Ne(ue()),Vt=Re({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(Ke)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Ht,RoadmapIcon:jt,SpellCheckIcon:Yt,GraphicalDataFlowIcon:se}=re.carbon,{getPackagesList:ne}=Vt(),S=[],oe={[A.CHARTS]:{icon:L(jt),label:D.CHARTS},[A.INFORMATIONS]:{icon:L(Yt),label:D.INFORMATIONS},[A.TABLES]:{icon:L(Ht),label:D.TABLES},[A.DECORATES]:{icon:L(se),label:D.DECORATES},[A.METRICS]:{icon:L(se),label:D.METRICS}},qt=()=>{for(const e in ne)S.push({key:e,icon:oe[e].icon,label:oe[e].label,list:ne[e]})};qt();S[0].key;const N=f(S[0].key),U=f(S[0]),Jt=e=>{for(const t in S)S[t].key==e&&(U.value=S[t])};const Xt={class:"menu-width-box"},Qt={class:"menu-component-box"},Wt=B({__name:"index",setup(e){return Pe(t=>({"7563b37f":n(Kt)})),(t,a)=>{const i=x("n-tab-pane"),o=x("n-tabs");return c(),R(n(Me),{class:ze(["go-content-charts",{scoped:!n(Gt)}]),backIcon:!1},{default:P(()=>[_("aside",null,[_("div",Xt,[C(o,{value:n(N),"onUpdate:value":[a[0]||(a[0]=l=>$e(N)?N.value=l:null),n(Jt)],class:"tabs-box",size:"small",type:"segment"},{default:P(()=>[(c(!0),m($,null,z(n(S),l=>(c(),R(i,{key:l.key,name:l.key,size:"small","display-directive":"show:lazy"},{tab:P(()=>[_("span",null,w(l.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),_("div",Qt,[n(U)?(c(),R(n(Ut),{selectOptions:n(U),menu:n(N),key:n(N)},null,8,["selectOptions","menu"])):y("",!0)])])])]),_:1},8,["class"])}}});var Zt=ie(Wt,[["__scopeId","data-v-7ab8059c"]]),ra=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"}));export{ae as _,ra as i,bt as o};
