var Bt=Object.defineProperty,At=Object.defineProperties;var It=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var Ut=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var at=(e,t,o)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,M=(e,t)=>{for(var o in t||(t={}))Ut.call(t,o)&&at(e,o,t[o]);if(st)for(var o of st(t))Ot.call(t,o)&&at(e,o,t[o]);return e},ae=(e,t)=>At(e,It(t));var re=(e,t,o)=>new Promise((u,n)=>{var f=c=>{try{h(o.next(c))}catch(d){n(d)}},v=c=>{try{h(o.throw(c))}catch(d){n(d)}},h=c=>c.done?u(c.value):Promise.resolve(c.value).then(f,v);h((o=o.apply(e,t)).next())});import{u as J,i as q,c as _t,j as D,k as xe,a as Ct,C as Rt,l as Ht}from"./chartEditStore-066de5d6.js";import{n as Qe,ad as mt,cx as Pt,c9 as Ge,cy as Y,cl as Ie,at as Nt,c as oe,d as ee,b_ as me,u as s,m as ye,R as $,o as E,e as U,f as je,F as ce,s as pe,ao as se,V as W,U as _e,q as k,G as P,w as S,Y as ve,aO as Ke,aP as be,aQ as ze,aR as yt,as as j,ac as Et,p as et,au as rt,N as ue,aM as St,r as I,cz as Yt,Q as De,l as z,cA as ut,z as Me,A as $e,g as T,h as Ce,t as ne,aG as Xt,cb as N,cc as K,b6 as Gt,cB as Kt,c8 as zt,cC as Vt,a2 as Ue,a$ as Oe,aD as Te,aE as ct,av as Wt,cD as qt,W as Tt,a1 as lt,aW as Re,ah as it,a5 as He,a6 as Pe,c7 as Jt,a3 as Zt,cE as Qt,ch as jt,a4 as eo,ce as to,S as we,aX as Ne}from"./index-ed17d07a.js";import{u as tt,d as oo}from"./index-9cef82c0.js";import{a as no}from"./useKeyboard.hook-99fa5929.js";import{c as wt,l as Le,f as so,b as ao}from"./index-6be04ae3.js";import{a as ro,b as dt,l as uo,g as co}from"./plugin-15ab4596.js";import{C as lo}from"./index-2b34b930.js";import{u as xt,C as Ve}from"./chartLayoutStore-da26a299.js";import{i as fe}from"./icon-c5f6d281.js";import{G as io}from"./index-4223be11.js";import"./index-74a6a17b.js";import"./theme-color-42133380.js";import"./table_scrollboard-3d700369.js";import"./GlobalSetting.vue_vue_type_style_index_0_scoped_true_lang-e23277d4.js";import"./useTargetData.hook-796669c2.js";const he=J(),po=()=>{Qe(()=>{he.setEditCanvas(q.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),he.setEditCanvas(q.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const e=he.listenerScale();mt(()=>{he.setEditCanvas(q.EDIT_LAYOUT_DOM,null),he.setEditCanvas(q.EDIT_CONTENT_DOM,null),e()})})},m=J(),{onClickOutSide:vo}=tt(),fo=e=>re(void 0,null,function*(){e.preventDefault();try{ro();const t=e.dataTransfer.getData(Pt.DRAG_KEY);if(!t){dt();return}m.setEditCanvas(q.IS_CREATE,!1);const o=Ge(t);let u=yield wt(o);Y(u,e.offsetX-u.attr.w/2,e.offsetY-u.attr.h/2),m.addComponentList(u,!1,!0),m.setTargetSelectChart(u.id),dt()}catch(t){uo(),window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...")}}),pt=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},bt=(e,t)=>{if(t){m.setTargetSelectChart(t.id);return}m.setTargetSelectChart(void 0)},ho=(e,t)=>{var d;if(e.which==2||(d=window.$KeyboardActive)!=null&&d.space)return;bt();const o=e.offsetX,u=e.offsetY,n=e.screenX,f=e.screenY,v=m.getEditCanvas.scale;m.setMousePosition(void 0,void 0,o,u);const h=Le.exports.throttle(p=>{m.setTargetSelectChart(),m.setEditCanvas(q.IS_SELECT,!0);const a=o+p.screenX-n,r=u+p.screenY-f;m.setMousePosition(a,r);const i={x1:0,y1:0,x2:0,y2:0};a>o&&r>u?(i.x1=o,i.y1=u,i.x2=Math.round(o+(p.screenX-n)/v),i.y2=Math.round(u+(p.screenY-f)/v)):a>o&&r<u?(i.x1=o,i.y1=Math.round(u-(f-p.screenY)/v),i.x2=Math.round(o+(p.screenX-n)/v),i.y2=u):a<o&&r>u?(i.x1=Math.round(o-(n-p.screenX)/v),i.y1=u,i.x2=o,i.y2=Math.round(u+(p.screenY-f)/v)):(i.x1=Math.round(o-(n-p.screenX)/v),i.y1=Math.round(u-(f-p.screenY)/v),i.x2=o,i.y2=u),m.getComponentList.forEach(l=>{if(!m.getTargetChart.selectId.includes(l.id)){const{x:g,y:C,w:x,h:F}=l.attr,L={x1:g,y1:C,x2:g+x,y2:C+F};L.x1-i.x1>=0&&L.y1-i.y1>=0&&L.x2-i.x2<=0&&L.y2-i.y2<=0&&!l.status.lock&&!l.status.hide&&m.setTargetSelectChart(l.id,!0)}})},30),c=()=>{h.cancel(),m.setEditCanvas(q.IS_SELECT,!1),m.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",c)},Lt=()=>({mouseClickHandle:(n,f)=>{var v;if(n.preventDefault(),n.stopPropagation(),!f.status.lock&&(v=window.$KeyboardActive)!=null&&v.ctrl)if(m.targetChart.selectId.includes(f.id)){const h=m.targetChart.selectId.filter(c=>c!==f.id);m.setTargetSelectChart(h)}else m.setTargetSelectChart(f.id,!0)},mousedownHandle:(n,f)=>{var C;if(n.preventDefault(),n.stopPropagation(),f.status.lock||(vo(),n.buttons===Ie.LEFT&&((C=window.$KeyboardActive)==null?void 0:C.ctrl)))return;const v=m.getTargetChart.selectId;if(n.buttons===Ie.RIGHT&&v.length>1&&v.includes(f.id)||(m.setTargetSelectChart(f.id),n.buttons===Ie.RIGHT))return;const h=m.getEditCanvas.scale,c=m.getEditCanvasConfig.width,d=m.getEditCanvasConfig.height,p=new Map;m.getTargetChart.selectId.forEach(x=>{const F=m.fetchTargetIndex(x);if(F!==-1){const{x:L,y:w,w:H,h:X}=Nt(m.getComponentList[F]).attr;p.set(x,{x:L,y:w,w:H,h:X})}});const a=n.screenX,r=n.screenY;let i=[];m.getTargetChart.selectId.forEach(x=>{if(!p.has(x))return;const F=m.fetchTargetIndex(x);i.push(Le.exports.cloneDeep(m.getComponentList[F]))}),m.setMousePosition(void 0,void 0,a,r);const l=Le.exports.throttle(x=>{m.setEditCanvas(q.IS_DRAG,!0),m.setMousePosition(x.screenX,x.screenY);let F=(x.screenX-a)/h,L=(x.screenY-r)/h;m.getTargetChart.selectId.forEach(w=>{if(!p.has(w))return;const H=m.fetchTargetIndex(w),{x:X,y:te,w:O,h:_}=p.get(w),A=m.getComponentList[H];let R=Math.round(X+F),y=Math.round(te+L);const b=50;R=R<-O+b?-O+b:R,y=y<-_+b?-_+b:y,R=R>c-b?c-b:R,y=y>d-b?d-b:y,A&&(A.attr=Object.assign(A.attr,{x:R,y}))})},20),g=()=>{try{m.setMousePosition(0,0,0,0),m.setEditCanvas(q.IS_DRAG,!1),i.length&&(m.getTargetChart.selectId.forEach(x=>{if(!p.has(x))return;const F=m.fetchTargetIndex(x),L=m.getComponentList[F];i.forEach(w=>{w.id===x&&(w.attr=Object.assign(w.attr,{offsetX:L.attr.x-w.attr.x,offsetY:L.attr.y-w.attr.y}))})}),m.moveComponentList(i)),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",g)}catch(x){console.log(x)}};document.addEventListener("mousemove",l),document.addEventListener("mouseup",g)},mouseenterHandle:(n,f)=>{n.preventDefault(),n.stopPropagation(),m.getEditCanvas.isSelect||m.setTargetHoverChart(f.id)},mouseleaveHandle:(n,f)=>{n.preventDefault(),n.stopPropagation(),m.setEditCanvas(q.IS_DRAG,!1),m.setTargetHoverChart(void 0)}}),go=(e,t,o)=>{e.stopPropagation(),e.preventDefault(),m.setEditCanvas(q.IS_DRAG,!0);const u=m.getEditCanvas.scale,n=o.x,f=o.y,v=o.w,h=o.h,c=e.screenX,d=e.screenY;m.setMousePosition(c,d);const p=Le.exports.throttle(r=>{m.setMousePosition(r.screenX,r.screenY);let i=Math.round((r.screenX-c)/u),l=Math.round((r.screenY-d)/u);const g=/t/.test(t),C=/b/.test(t),x=/l/.test(t),F=/r/.test(t),L=h+(g?-l:C?l:0),w=v+(x?-i:F?i:0);o.h=L>0?L:0,o.w=w>0?w:0,o.x=n+(x?i:0),o.y=f+(g?l:0)},50),a=()=>{m.setEditCanvas(q.IS_DRAG,!1),m.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",a)},Fe=(e,t)=>e?{zIndex:t+1,left:`${e.x}px`,top:`${e.y}px`}:{},de=(e,t)=>e?{width:`${t?t*e.w:e.w}px`,height:`${t?t*e.h:e.h}px`}:{},_o=(e,t,o,u)=>{const{w:n,h:f}=o,v=/t/.test(e),h=/b/.test(e),c=/l/.test(e),d=/r/.test(e);let p=0,a=0;return e.length===2?(p=c?0:n,a=v?0:f):((v||h)&&(p=n/2,a=v?0:f),(c||d)&&(p=c?0:n,a=Math.floor(f/2))),{left:`${p}px`,top:`${a}px`,cursor:u[t]+"-resize"}};const Co=["onMousedown"],mo=ee({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const t=e;me(a=>({89737518:s(v)}));const o=ye(),u=J(),n=["t","r","b","l","lt","rt","lb","rb"],f=["n","e","s","w","nw","ne","sw","se"],v=$(()=>o.getAppTheme),h=$(()=>t.item.status.lock?!1:t.item.id===u.getTargetChart.hoverId),c=$(()=>{const a=t.item.id;return t.item.status.lock?!1:u.getTargetChart.selectId.find(r=>r===a)}),d=$(()=>t.item.status.lock),p=$(()=>t.item.status.hide);return(a,r)=>(E(),U("div",{class:se(["go-shape-box",{lock:s(d),hide:s(p)}])},[je(a.$slots,"default",{},void 0,!0),e.hiddenPoint?_e("",!0):(E(!0),U(ce,{key:0},pe(s(c)?n:[],(i,l)=>(E(),U("div",{class:se(`shape-point ${i}`),key:l,style:W(s(_o)(i,l,e.item.attr,f)),onMousedown:g=>s(go)(g,i,e.item.attr)},null,46,Co))),128)),k("div",{class:"shape-modal",style:W(s(de)(e.item.attr))},[k("div",{class:se(["shape-modal-select",{active:s(c)}])},null,2),k("div",{class:se(["shape-modal-change",{selectActive:s(c),hoverActive:s(h)}])},null,2)],4)],2))}});var We=oe(mo,[["__scopeId","data-v-61fcf376"]]);const yo={class:"go-edit-group-box"},Eo=ee({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const t=J(),{handleContextMenu:o}=tt(),{mouseenterHandle:u,mouseleaveHandle:n,mousedownHandle:f,mouseClickHandle:v}=Lt(),h=(p,a,r)=>{const i=l=>a.filter(g=>l.includes(g.key));if(t.getTargetChart.selectId.length>1)return i([j.GROUP,j.DELETE]);{const l=[];r.status.lock?l.push(j.LOCK):l.push(j.UNLOCK),r.status.hide?l.push(j.HIDE):l.push(j.SHOW);const g=[j.UN_GROUP];return[...i(g),oo(),...p.filter(C=>!l.includes(C.key))]}},c=$(()=>{const p=t.getEditCanvasConfig.chartThemeColor;return _t[p]}),d=$(()=>t.getEditCanvasConfig.chartThemeSetting);return(p,a)=>(E(),U("div",yo,[(E(),P(s(We),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:se(s(Ke)(e.groupData.styles.animations)),style:W(M(M(M(M(M({},s(Fe)(e.groupData.attr,e.groupIndex)),s(de)(e.groupData.attr)),s(be)(e.groupData.styles)),s(ze)(e.groupData.styles)),s(yt)(e.groupData.styles))),onClick:a[0]||(a[0]=r=>s(v)(r,e.groupData)),onMousedown:a[1]||(a[1]=r=>s(f)(r,e.groupData)),onMouseenter:a[2]||(a[2]=r=>s(u)(r,e.groupData)),onMouseleave:a[3]||(a[3]=r=>s(n)(r,e.groupData)),onContextmenu:a[4]||(a[4]=r=>s(o)(r,e.groupData,h))},{default:S(()=>[(E(!0),U(ce,null,pe(e.groupData.groupList,r=>(E(),P(s(We),{key:r.id,"data-id":r.id,index:e.groupIndex,item:r,hiddenPoint:!0,style:W(M({},s(Fe)(r.attr,e.groupIndex)))},{default:S(()=>[(E(),P(ve(r.chartConfig.chartKey),{class:se(["edit-content-chart",s(Ke)(r.styles.animations)]),chartConfig:r,themeSetting:s(d),themeColor:s(c),style:W(M(M(M({},s(de)(r.attr)),s(be)(r.styles)),s(ze)(r.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}});const So={class:"go-edit-align-line"},To=ee({__name:"index",setup(e){me(l=>({"7e4eb55d":s(v)}));const t=ye(),o=J(),u=Et(),n=et({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),f=l=>l?{left:`${l.x?l.x:0}px`,top:`${l.y?l.y:0}px`}:{},v=$(()=>t.getAppTheme),h=$(()=>u.getChartAlignRange),c=$(()=>o.getEditCanvas[q.IS_DRAG]),d=(l,g)=>Math.abs(l-g)<=h.value,p=$(()=>o.getTargetChart.selectId),a=$(()=>o.getComponentList[o.fetchTargetIndex()]),r=$(()=>{var l;return((l=a.value)==null?void 0:l.attr)||{}}),i=$(()=>({id:"0",attr:{w:rt(o.getEditCanvasConfig.width),h:rt(o.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ue(()=>o.getMousePosition,St(()=>{try{if(!c.value||p.value.length!==1)return;const l=r.value.w,g=r.value.h,C=r.value.x,x=C+l/2,F=C+l,L=[C,x,F],w=r.value.y,H=w+g/2,X=w+g,te=[w,H,X];n.select.clear(),n.sorptioned.y=!1;const O=o.getComponentList.map(_=>({id:_.id,attr:_.attr}));O.push(i.value),n.lineArr.forEach(_=>{O.forEach(A=>{if(p.value[0]===A.id)return;const R=A.attr.w,y=A.attr.h,b=A.attr.x,G=b+R/2,B=b+R,ke=[b,G,B],V=A.attr.y,Z=V+y/2,Q=V+y,nt=[V,Z,Q];_.includes("rowt")&&(d(w,V)&&(n.select.set(_,{y:V}),Y(a.value,C,V)),d(w,Z)&&(n.select.set(_,{y:Z}),Y(a.value,C,Z)),d(w,Q)&&(n.select.set(_,{y:Q}),Y(a.value,C,Q))),_.includes("rowc")&&(d(H,V)&&(n.select.set(_,{y:V}),Y(a.value,C,V-g/2)),d(H,Z)&&(n.select.set(_,{y:Z}),Y(a.value,C,Z-g/2)),d(H,Q)&&(n.select.set(_,{y:Q}),Y(a.value,C,Q-g/2))),_.includes("rowb")&&(d(X,V)&&(n.select.set(_,{y:V}),Y(a.value,C,V-g)),d(X,Z)&&(n.select.set(_,{y:Z}),Y(a.value,C,Z-g)),d(X,Q)&&(n.select.set(_,{y:Q}),Y(a.value,C,Q-g))),_.includes("coll")&&(d(C,b)&&(n.select.set(_,{x:b}),Y(a.value,b,w)),d(C,G)&&(n.select.set(_,{x:G}),Y(a.value,G,w)),d(C,B)&&(n.select.set(_,{x:B}),Y(a.value,B,w))),_.includes("colc")&&(d(x,b)&&(n.select.set(_,{x:b}),Y(a.value,b-l/2,w)),d(x,G)&&(n.select.set(_,{x:G}),Y(a.value,G-l/2,w)),d(x,B)&&(n.select.set(_,{x:B}),Y(a.value,B-l/2,w))),_.includes("colr")&&(d(F,b)&&(n.select.set(_,{x:b}),Y(a.value,b-l,w)),d(F,G)&&(n.select.set(_,{x:G}),Y(a.value,G-l,w)),d(F,B)&&(n.select.set(_,{x:B}),Y(a.value,B-l,w)))})})}catch(l){console.log(l)}},200),{deep:!0}),ue(()=>c.value,l=>{l||(n.select.clear(),n.sorptioned.y=!1)}),(l,g)=>(E(),U("div",So,[(E(!0),U(ce,null,pe(n.lineArr,C=>(E(),U("div",{class:se(["line",[C.includes("row")?"row":"col",n.select.has(C)&&"visible"]]),key:C,style:W(f(n.select.get(C)))},null,6))),128))]))}});var wo=oe(To,[["__scopeId","data-v-0b9debc6"]]);const xo=ee({__name:"index",setup(e){return(t,o)=>{const u=I("n-watermark");return E(),P(u,{id:"go-edit-watermark",content:s(Yt),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});var bo=oe(xo,[["__scopeId","data-v-60cb5871"]]);const Ft=e=>(Me("data-v-ca44f6dc"),e=e(),$e(),e),Lo=Ft(()=>k("div",{class:"select-background"},null,-1)),Fo=Ft(()=>k("div",{class:"select-border"},null,-1)),Do=[Lo,Fo],Mo=ee({__name:"index",setup(e){me(h=>({"2cf55ebd":s(f)}));const t=ye(),o=J(),{isSelect:u,scale:n}=De(o.getEditCanvas),f=$(()=>t.getAppTheme),v=z();return ue(()=>o.getMousePosition,h=>{if(!u.value)return;const{startX:c,startY:d,x:p,y:a}=h,r={zIndex:ut,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};p>c&&a>d?(r.x=c,r.y=d,r.w=Math.round((p-c)/n.value),r.h=Math.round((a-d)/n.value)):p>c&&a<d?(r.x=c,r.w=Math.round((p-c)/n.value),r.h=Math.round((d-a)/n.value),r.y=d-r.h):p<c&&a>d?(r.y=d,r.w=Math.round((c-p)/n.value),r.h=Math.round((a-d)/n.value),r.x=c-r.w):(r.w=Math.round((c-p)/n.value),r.h=Math.round((d-a)/n.value),r.x=c-r.w,r.y=d-r.h),v.value=M(M({},Fe(r,ut)),de(r))},{deep:!0}),(h,c)=>s(u)?(E(),U("div",{key:0,class:"go-edit-select",style:W(v.value)},Do,4)):_e("",!0)}});var $o=oe(Mo,[["__scopeId","data-v-ca44f6dc"]]);const ko=ee({__name:"index",setup(e){const t=J(),{getEditCanvasConfig:o,getEditCanvas:u}=De(t),n=$(()=>({w:o.value.width,h:o.value.height})),f=$(()=>{const h={transform:`scale(${u.value.scale})`};return M(M({},de(n.value)),h)}),v=$(()=>{const h=u.value.isCreate&&{"z-index":99999};return M(M({},de(n.value)),h)});return(h,c)=>(E(),U("div",{class:"go-edit-range go-transition",style:W(s(f)),onMousedown:c[0]||(c[0]=d=>s(ho)(d,void 0))},[je(h.$slots,"default",{},void 0,!0),T(s(bo)),T(s(wo)),T(s($o)),k("div",{class:"go-edit-range-model",style:W(s(v))},null,4)],36))}});var Bo=oe(ko,[["__scopeId","data-v-0465a366"]]),Dt=!!(typeof window!="undefined"&&window.document&&window.document.createElement),qe=!1,Je=!1;try{var Ye={get passive(){return qe=!0},get once(){return Je=qe=!0}};Dt&&(window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,!0))}catch(e){}function Ao(e,t,o,u){if(u&&typeof u!="boolean"&&!Je){var n=u.once,f=u.capture,v=o;!Je&&n&&(v=o.__once||function h(c){this.removeEventListener(t,h,f),o.call(this,c)},o.__once=v),e.addEventListener(t,v,qe?u:f)}e.addEventListener(t,o,u)}function Io(e,t,o,u){var n=u&&typeof u!="boolean"?u.capture:u;e.removeEventListener(t,o,n),o.__once&&e.removeEventListener(t,o.__once,n)}function vt(e,t,o,u){return Ao(e,t,o,u),function(){Io(e,t,o,u)}}var ft=new Date().getTime();function Uo(e){var t=new Date().getTime(),o=Math.max(0,16-(t-ft)),u=setTimeout(e,o);return ft=t,u}var Oo=["","webkit","moz","o","ms"],ht=Uo,gt=function(t,o){return t+(t?o[0].toUpperCase()+o.substr(1):o)+"AnimationFrame"};Dt&&Oo.some(function(e){var t=gt(e,"request");return t in window&&(gt(e,"cancel"),ht=function(u){return window[t](u)}),!!ht});Function.prototype.bind.call(Function.prototype.call,[].slice);Function.prototype.bind.call(Function.prototype.call,[].slice);const Ro={class:"go-sketch-rule"},Ho={key:1,class:"fix-edit-screens-block"},Po=ee({__name:"index",setup(e){me(y=>({b14e8092:s(H),"00f7c3e2":s(L),"1eb612fe":r.value}));const t=J(),o=xt(),u=ye(),n=20;let f=[0,0],v=[0,0];const h=z(),c=z(!0),d=z(),p=z(),a=z(!1),r=z("auto"),{width:i,height:l}=De(t.getEditCanvasConfig),g=z(0),C=z(0),x=et({h:[],v:[]}),F=$(()=>t.getEditCanvas.scale),L=$(()=>`${l.value*2}px`),w=$(()=>u.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),H=$(()=>u.getAppTheme),X=y=>{if(y.ctrlKey||y.metaKey){y.preventDefault();let b=F.value;if(y.wheelDelta>=0&&F.value<2){b=F.value+.05,t.setScale(b);return}y.wheelDelta<0&&F.value>.1&&(b=F.value-.05,t.setScale(b))}},te=()=>{if(!h.value)return;const y=h.value.getBoundingClientRect(),b=d.value.getBoundingClientRect();g.value=(y.left+n-b.left)/F.value,C.value=(y.top+n-b.top)/F.value},O=y=>{var V,Z;if(y.preventDefault(),y.stopPropagation(),y.which==2)a.value=!0;else if(!((V=window.$KeyboardActive)!=null&&V.space))return;(Z=document.activeElement)==null||Z.blur();const b=y.pageX,G=y.pageY,B=vt(window,"mousemove",Q=>{const nt=Q.pageX-b,kt=Q.pageY-G,[Be,Ee]=f,[Ae,Se]=v;f=[Ee,nt],v=[Se,kt],h.value.scrollLeft-=Ee>Be?Math.abs(Ee-Be):-Math.abs(Ee-Be),h.value.scrollTop-=Se>Ae?Math.abs(Se-Ae):-Math.abs(Se-Ae)}),ke=vt(window,"mouseup",()=>{B(),ke(),f=[0,0],v=[0,0],a.value=!1})},_=()=>{const y=document.getElementById("go-chart-edit-layout");return y?{height:y.clientHeight-25,width:y.clientWidth}:{width:i.value,height:l.value}},A=()=>{c.value=!1,setTimeout(()=>{c.value=!0},10)},R=()=>{const{width:y,height:b}=p.value.getBoundingClientRect(),{width:G,height:B}=_();h.value.scrollLeft=y/2-G/2,h.value.scrollTop=b/2-B/2};return ue(()=>u.getDarkTheme,()=>{A()}),ue(()=>F.value,(y,b)=>{b!==y&&o.getRePositionCanvas?(o.setItemUnHandle(Ve.RE_POSITION_CANVAS,!1),te(),setTimeout(()=>{R(),A()},400)):St(A,20)}),ue(()=>a.value,y=>{r.value=y?"grab":"auto"}),Qe(()=>{h.value&&(h.value.addEventListener("wheel",X,{passive:!1}),R())}),mt(()=>{h.value&&h.value.removeEventListener("wheel",X)}),window.onKeySpacePressHold=y=>{a.value=y},(y,b)=>{const G=I("sketch-rule");return E(),U("div",Ro,[c.value?(E(),P(G,{key:0,thick:n,scale:s(F),width:_().width,height:_().height,startX:g.value,startY:C.value,lines:x,palette:s(w)},null,8,["scale","width","height","startX","startY","lines","palette"])):_e("",!0),k("div",{ref_key:"$app",ref:h,class:"edit-screens",onScroll:te},[k("div",{ref_key:"$container",ref:p,class:"edit-screen-container",style:W({width:s(i)*2+"px"})},[k("div",{ref_key:"refSketchRuleBox",ref:d,class:"canvas",onMousedown:O,style:W({marginLeft:"-"+(_().width/2-25)+"px"})},[k("div",{style:W({pointerEvents:a.value?"none":"auto"})},[je(y.$slots,"default",{},void 0,!0)],4)],36)],4)],544),s(u).getDarkTheme?(E(),U("div",Ho)):_e("",!0)])}}});var No=oe(Po,[["__scopeId","data-v-16596de5"]]);const Xe={[D.ADD]:"\u65B0\u589E",[D.DELETE]:"\u5220\u9664",[D.UPDATE]:"\u66F4\u65B0",[D.MOVE]:"\u79FB\u52A8",[D.PASTE]:"\u7C98\u8D34",[D.COPY]:"\u590D\u5236",[D.CUT]:"\u526A\u5207",[D.TOP]:"\u7F6E\u9876",[D.BOTTOM]:"\u7F6E\u5E95",[D.UP]:"\u4E0A\u79FB",[D.DOWN]:"\u4E0B\u79FB",[D.GROUP]:"\u6210\u7EC4",[D.UN_GROUP]:"\u89E3\u7EC4",[D.LOCK]:"\u9501\u5B9A",[D.UNLOCK]:"\u89E3\u9501",[D.HIDE]:"\u9690\u85CF",[D.SHOW]:"\u663E\u793A",[xe.CANVAS]:"\u753B\u5E03\u521D\u59CB\u5316"};var Yo=Array.prototype,Xo=Yo.reverse;function Go(e){return e==null?e:Xo.call(e)}var Ko=Go;const Mt=e=>(Me("data-v-3d118cd5"),e=e(),$e(),e),zo={class:"go-flex-items-center"},Vo=Mt(()=>k("span",{class:"btn-text"},"\u5386\u53F2\u8BB0\u5F55",-1)),Wo={class:"history-list-box"},qo=["title"],Jo=Mt(()=>k("div",{class:"popover-modal"},null,-1)),Zo=ee({__name:"index",setup(e){const{DesktopOutlineIcon:t,PencilIcon:o,TrashIcon:u,CopyIcon:n,LayersIcon:f,DuplicateIcon:v,HelpOutlineIcon:h,LockClosedOutlineIcon:c,LockOpenOutlineIcon:d,EyeOffOutlineIcon:p,EyeOutlineIcon:a}=fe.ionicons5,{StackedMoveIcon:r,Carbon3DCursorIcon:i,Carbon3DSoftwareIcon:l}=fe.carbon,g=Ct(),C=L=>{if(L.targetType===xe.CANVAS)return t;switch(L.actionType){case D.UPDATE:return o;case D.DELETE:return u;case D.PASTE:return n;case D.TOP:return f;case D.BOTTOM:return f;case D.UP:return f;case D.DOWN:return f;case D.MOVE:return r;case D.ADD:return v;case D.GROUP:return i;case D.UN_GROUP:return l;case D.LOCK:return c;case D.UNLOCK:return d;case D.HIDE:return p;case D.SHOW:return a;default:return o}},x=L=>{if(L.targetType===xe.CANVAS)return Xe[xe.CANVAS];if(L.actionType===D.GROUP||L.actionType===D.UN_GROUP)return`${Xe[L.actionType]}`;if(L.historyData.length)return`${Xe[L.actionType]} - ${L.historyData[0].chartConfig.title}`},F=$(()=>{const w=g.getBackStack.map(H=>({label:x(H),icon:C(H)}));return Ko(w.filter(H=>H.label))});return(L,w)=>{const H=I("n-button"),X=I("n-icon"),te=I("n-text"),O=I("n-scrollbar"),_=I("n-popover"),A=I("n-tooltip");return E(),U("div",zo,[T(_,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:S(()=>[T(H,{class:"mr-10",secondary:"",size:"small",disabled:s(F).length===0},{default:S(()=>[Vo]),_:1},8,["disabled"])]),default:S(()=>[k("div",Wo,[T(O,{style:{"max-height":"500px"}},{default:S(()=>[(E(!0),U(ce,null,pe(s(F),(R,y)=>(E(),U("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:y,title:R.label},[T(X,{class:"item-icon",size:"16",depth:2,component:R.icon},null,8,["component"]),T(te,{depth:"2"},{default:S(()=>[Ce(ne(R.label),1)]),_:2},1024)],8,qo))),128))]),_:1}),Jo])]),_:1}),T(A,{trigger:"hover"},{trigger:S(()=>[T(X,{size:"21",depth:3},{default:S(()=>[T(s(h))]),_:1})]),default:S(()=>[k("span",null,"\u6700\u591A\u53EA\u4FDD\u7559"+ne(s(Xt))+"\u6761\u8BB0\u5F55",1)]),_:1})])}}});var Qo=oe(Zo,[["__scopeId","data-v-3d118cd5"]]);const ot=e=>(Me("data-v-b7bd4f6a"),e=e(),$e(),e),jo=ot(()=>k("th",null,"\u529F\u80FD",-1)),en=ot(()=>k("th",null,"Win \u5FEB\u6377\u952E",-1)),tn=ot(()=>k("span",null," Mac \u5FEB\u6377\u952E ",-1)),on={key:0},nn={key:1},sn=ee({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:t}){const o=e,{CloseIcon:u}=fe.ionicons5,n=z(!1);ue(()=>o.modelShow,h=>{n.value=h});const f=[{label:"\u62D6\u62FD\u753B\u5E03",win:`${N.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${K.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,macSource:!0},{label:"\u5411 \u4E0A/\u53F3/\u4E0B/\u5DE6 \u79FB\u52A8",win:`${N.CTRL.toUpperCase()} + \u2191 \u6216 \u2192 \u6216 \u2193 \u6216 \u2190`,mac:`${K.CTRL.toUpperCase()} + \u2191 `},{label:"\u9501\u5B9A",win:`${N.CTRL.toUpperCase()} + L `,mac:`${K.CTRL.toUpperCase()} + L `},{label:"\u89E3\u9501",win:`${N.CTRL.toUpperCase()} + ${N.SHIFT.toUpperCase()}+ L `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + L `},{label:"\u5C55\u793A",win:`${N.CTRL.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + H `},{label:"\u9690\u85CF",win:`${N.CTRL.toUpperCase()} + ${N.SHIFT.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + H `},{label:"\u5220\u9664",win:"Delete".toUpperCase(),mac:`${K.CTRL.toUpperCase()} + Backspace `},{label:"\u590D\u5236",win:`${N.CTRL.toUpperCase()} + C `,mac:`${K.CTRL.toUpperCase()} + C `},{label:"\u526A\u5207",win:`${N.CTRL.toUpperCase()} + X `,mac:`${K.CTRL.toUpperCase()} + X `},{label:"\u7C98\u8D34",win:`${N.CTRL.toUpperCase()} + V `,mac:`${K.CTRL.toUpperCase()} + V `},{label:"\u540E\u9000",win:`${N.CTRL.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + Z `},{label:"\u524D\u8FDB",win:`${N.CTRL.toUpperCase()} + ${N.SHIFT.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + Z `},{label:"\u591A\u9009",win:`${N.CTRL.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + \u{1F5B1}\uFE0F `},{label:"\u521B\u5EFA\u5206\u7EC4",win:`${N.CTRL.toUpperCase()} + G / \u{1F5B1}\uFE0F `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + G / \u{1F5B1}\uFE0F`},{label:"\u89E3\u9664\u5206\u7EC4",win:`${N.CTRL.toUpperCase()} + ${N.SHIFT.toUpperCase()} + G `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + ${N.SHIFT.toUpperCase()} + G `}],v=()=>{t("update:modelShow",!1)};return(h,c)=>{const d=I("n-icon"),p=I("n-space"),a=I("n-gradient-text"),r=I("n-table"),i=I("n-modal");return E(),P(i,{show:n.value,"onUpdate:show":c[0]||(c[0]=l=>n.value=l),"mask-closable":!0,onAfterLeave:v},{default:S(()=>[T(r,{class:"model-content",bordered:!1,"single-line":!1},{default:S(()=>[k("thead",null,[k("tr",null,[jo,en,k("th",null,[T(p,{justify:"space-between"},{default:S(()=>[tn,T(d,{size:"20",class:"go-cursor-pointer",onClick:v},{default:S(()=>[T(s(u))]),_:1})]),_:1})])])]),k("tbody",null,[(E(),U(ce,null,pe(f,(l,g)=>k("tr",{key:g},[k("td",null,ne(l.label),1),k("td",null,ne(l.win),1),l.macSource?(E(),U("td",on,ne(l.mac),1)):(E(),U("td",nn,[T(a,{size:22},{default:S(()=>[Ce(ne(l.mac.substr(0,1)),1)]),_:2},1024),Ce(" + "+ne(l.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});var an=oe(sn,[["__scopeId","data-v-b7bd4f6a"]]);const rn=e=>(Me("data-v-66885b97"),e=e(),$e(),e),un={class:"go-edit-shortcut"},cn=rn(()=>k("span",null,"\u5FEB\u6377\u952E",-1)),ln=ee({__name:"index",setup(e){const{DicomOverlayIcon:t}=fe.carbon,o=z(!1);return(u,n)=>{const f=I("n-icon"),v=I("n-button"),h=I("n-tooltip");return E(),U("div",un,[T(an,{modelShow:o.value,"onUpdate:modelShow":n[0]||(n[0]=c=>o.value=c)},null,8,["modelShow"]),T(h,{trigger:"hover"},{trigger:S(()=>[T(v,{class:"scale-btn",secondary:"",size:"small",onClick:n[1]||(n[1]=c=>o.value=!0)},{default:S(()=>[T(f,{size:"21",depth:3},{default:S(()=>[T(s(t))]),_:1})]),_:1})]),default:S(()=>[cn]),_:1})])}}});var dn=oe(ln,[["__scopeId","data-v-66885b97"]]);const pn={class:"go-edit-bottom"},vn=ee({__name:"index",setup(e){me(C=>({60209769:n.value}));const{LockClosedOutlineIcon:t,LockOpenOutlineIcon:o}=fe.ionicons5,u=ye(),n=z(u.getAppTheme),f=J(),{lockScale:v,scale:h}=De(f.getEditCanvas);let c=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"\u81EA\u9002\u5E94",value:0}];const d=z(""),p=C=>{if(C===0){f.computedScale();return}f.setScale(C/100)},a=()=>{f.setEditCanvas(q.LOCK_SCALE,!v.value)},r=z(100),i=C=>`${C}%`,l=C=>{f.setScale(C/100)},g=et({100:""});return Gt(()=>{const C=(h.value*100).toFixed(0);d.value=`${C}%`,r.value=parseInt(C)}),(C,x)=>{const F=I("n-text"),L=I("n-space"),w=I("n-select"),H=I("n-icon"),X=I("n-button"),te=I("n-tooltip"),O=I("n-slider");return E(),U("div",pn,[T(L,null,{default:S(()=>[T(s(Qo)),T(F,{id:"keyboard-dress-show",depth:"3"})]),_:1}),T(L,{class:"bottom-ri"},{default:S(()=>[T(dn),T(w,{disabled:s(v),class:"scale-btn",value:d.value,"onUpdate:value":[x[0]||(x[0]=_=>d.value=_),p],size:"mini",options:s(c)},null,8,["disabled","value","options"]),T(te,{trigger:"hover"},{trigger:S(()=>[T(X,{onClick:a,text:""},{default:S(()=>[T(H,{class:se(["lock-icon",{color:s(v)}]),size:"18",depth:2},{default:S(()=>[s(v)?(E(),P(s(t),{key:0})):(E(),P(s(o),{key:1}))]),_:1},8,["class"])]),_:1})]),default:S(()=>[k("span",null,ne(s(v)?"\u89E3\u9501":"\u9501\u5B9A")+"\u5F53\u524D\u6BD4\u4F8B",1)]),_:1}),T(O,{class:"scale-slider",value:r.value,"onUpdate:value":[x[1]||(x[1]=_=>r.value=_),l],"default-value":50,min:10,max:200,step:5,"format-tooltip":i,disabled:s(v),marks:g},null,8,["value","disabled","marks"])]),_:1})])}}});var fn=oe(vn,[["__scopeId","data-v-4c80a168"]]);const ge=J(),hn=()=>{ge.setTargetSelectChart(void 0),Kt(zt(ge.getStorageInfo||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),t=document.getElementById("go-edit-watermark");if(!e||!t){window.$message.error("\u5BFC\u51FA\u5931\u8D25\uFF01");return}const o=ge.getEditCanvas.scale;ge.setScale(1,!0),t.style.display="block",setTimeout(()=>{Vt(e,()=>{t&&(t.style.display="none"),ge.setScale(o,!0)})},600)};var Ze=(e=>(e.TXT="text/plain",e.JSON="application/json",e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e))(Ze||{});const gn=e=>e,_n=(e,t)=>{try{if(t.id){const o="vnodeBeforeMount"in t.events,u="vnodeMounted"in t.events;return o&&(e.events.advancedEvents.vnodeBeforeMount=t==null?void 0:t.events.vnodeBeforeMount),u&&(e.events.advancedEvents.vnodeMounted=t==null?void 0:t.events.vnodeMounted),(o||u)&&(t.events={baseEvent:{[Te.ON_CLICK]:void 0,[Te.ON_DBL_CLICK]:void 0,[Te.ON_MOUSE_ENTER]:void 0,[Te.ON_MOUSE_LEAVE]:void 0},advancedEvents:{[ct.VNODE_MOUNTED]:void 0,[ct.VNODE_BEFORE_MOUNT]:void 0}}),e}}catch(o){return e}},le=(e,t,o=!1)=>{if(_n(e,t),o)return Oe(e,t);const u=t.option;if(!u)return Oe(e,t);if(t.option=void 0,u)return ae(M({},Oe(e,t)),{option:u})},$t=()=>{const e=J(),t=Ct(),o=xt();return{updateComponent:(n,f=!1,v=!1)=>re(void 0,null,function*(){f&&(e.componentList=[],t.clearBackStack(),t.clearForwardStack()),n.editCanvasConfig=gn(n.editCanvasConfig),n.componentList.forEach(c=>re(void 0,null,function*(){const d=p=>{window.$vue.component(p.chartConfig.chartKey)||(window.$vue.component(p.chartConfig.chartKey,so(p.chartConfig)),window.$vue.component(p.chartConfig.conKey,ao(p.chartConfig)))};c.isGroup?c.groupList.forEach(p=>{d(p)}):d(c)}));const h=(c,d)=>re(void 0,null,function*(){let p=yield wt(c.chartConfig);d?d(v?le(p,ae(M({},c),{id:Ue()})):le(p,c)):v?e.addComponentList(le(p,ae(M({},c),{id:Ue()})),!1,!0):e.addComponentList(le(p,c),!1,!0)});for(const c in n)if(c===Rt.COMPONENT_LIST){let d=0;const p=n[c].length;for(const a of n[c]){let r=parseInt((parseFloat(`${++d/p}`)*100).toString());if(o.setItemUnHandle(Ve.PERCENTAGE,r),a.isGroup){let i=new Ht;v?i=le(i,ae(M({},a),{id:Ue()})):i=le(i,a);const l=[];for(const g of a.groupList)yield h(g,C=>{l.push(C)});i.groupList=l,e.addComponentList(i,!1,!0)}else yield h(a)}}else{if(c!=="editCanvasConfig"&&c!=="requestGlobalConfig")return;le(e[c],n[c],!0)}o.setItemUnHandle(Ve.PERCENTAGE,0)})}},Cn=()=>{const e=z(),{updateComponent:t}=$t();return{importUploadFileListRef:e,importBeforeUpload:({file:n})=>{e.value=[];const f=n.file.type;return f!==Ze.JSON&&f!==Ze.TXT?(window.$message.warning("\u4EC5\u652F\u6301\u4E0A\u4F20 \u3010JSON\u3011 \u683C\u5F0F\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0},importCustomRequest:n=>{const{file:f}=n;Wt(()=>{f.file?qt(f.file).then(v=>{co({message:"\u8BF7\u9009\u62E9\u5BFC\u5165\u65B9\u5F0F:",positiveText:"\u65B0\u589E\uFF08\u53EF\u64A4\u56DE\uFF09",negativeText:"\u8986\u76D6\uFF08\u4E0D\u53EF\u64A4\u56DE\uFF09",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>re(void 0,null,function*(){try{v=Ge(v),yield t(v,!1,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(h){console.log(h),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}}),onNegativeCallback:()=>re(void 0,null,function*(){try{v=Ge(v),yield t(v,!0,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(h){console.log(h),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}})})}):window.$message.error("\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6570\u636E\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01")})}}},{updateComponent:mn}=$t(),yn=J(),En=()=>{const e=f=>mn(f.detail,!0,!1),t=()=>re(void 0,null,function*(){dispatchEvent(new CustomEvent(Re.CHART,{detail:yn.getStorageInfo}))}),o=()=>{addEventListener("blur",t),addEventListener(Re.JSON,e)},u=()=>{removeEventListener(Re.JSON,e),removeEventListener("blur",t)};return(f,v)=>{v==lt.CHART_HOME_NAME&&u(),f==lt.CHART_HOME_NAME&&o()}},Sn=()=>{const e=Tt();ue(()=>e.name,En(),{immediate:!0})};var ie=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(ie||{});const Tn={class:"btn-item"},wn=ee({__name:"index",setup(e){const{DownloadIcon:t,ShareIcon:o,PawIcon:u,SettingsSharpIcon:n,CreateIcon:f}=fe.ionicons5,v=Et(),h=J();Tt(),Sn();let c=null;const d=z(!1),p=z(!0),a=z(!0),{importUploadFileListRef:r,importCustomRequest:i,importBeforeUpload:l}=Cn(),g=$(()=>v.getChartToolsStatus===it.ASIDE),C=$(()=>v.getChartToolsStatusHide),x=$(()=>p.value&&C.value),F=$(()=>{if(!g.value)return te;const O=[];return te.map(_=>{O.unshift(_)}),O}),L=()=>{c=setTimeout(()=>{p.value&&(p.value=!1,a.value=!0)},200),setTimeout(()=>{a.value=!1},400)},w=()=>{clearTimeout(c),p.value||(p.value=!0)},H=()=>{window.$message.warning("\u5C06\u5F00\u542F\u5931\u7126\u66F4\u65B0\uFF01"),setTimeout(()=>{const O=Zt(Qt.CHART_EDIT_NAME,"href");if(!O)return;const _=jt();X(_),eo(O,[_],void 0,!0)},1e3)},X=O=>{const _=h.getStorageInfo,A=to(we.GO_CHART_STORAGE_LIST)||[];if(A!=null&&A.length){const R=A.findIndex(y=>y.id===O);R!==-1?(A.splice(R,1,ae(M({},_),{id:O})),Ne(we.GO_CHART_STORAGE_LIST,A)):(A.push(ae(M({},_),{id:O})),Ne(we.GO_CHART_STORAGE_LIST,A))}else Ne(we.GO_CHART_STORAGE_LIST,[ae(M({},_),{id:O})])},te=[{key:"import",type:ie.IMPORTUPLOAD,name:"\u5BFC\u5165",icon:o},{key:"export",type:ie.BUTTON,name:"\u5BFC\u51FA",icon:t,handle:hn},{key:"edit",type:ie.BUTTON,name:"\u7F16\u8F91",icon:f,handle:H},{key:"setting",type:ie.BUTTON,name:"\u8BBE\u7F6E",icon:n,handle:()=>{d.value=!0}}];return(O,_)=>{const A=I("n-icon"),R=I("n-text"),y=I("n-button"),b=I("n-upload"),G=I("n-tooltip");return E(),U(ce,null,[k("div",{class:se(["go-chart-edit-tools",[s(v).getChartToolsStatus,s(x)?"isMini":"unMini"]]),onClick:_[1]||(_[1]=B=>p.value&&(p.value=!1)),onMouseenter:L,onMouseleave:w},[He(T(A,{class:"asideLogo",size:"22"},{default:S(()=>[T(s(u))]),_:1},512),[[Pe,s(v).getChartToolsStatus===s(it).ASIDE&&s(x)]]),(E(!0),U(ce,null,pe(s(F),(B,ke)=>(E(),P(G,{key:B.key,disabled:!s(g)||s(C)&&a.value,trigger:"hover",placement:"left"},{trigger:S(()=>[k("div",Tn,[B.type===s(ie).BUTTON?(E(),P(y,{key:0,circle:s(g),secondary:"",onClick:B.handle},{icon:S(()=>[s(g)?(E(),P(A,{key:0,size:"22"},{default:S(()=>[(E(),P(ve(B.icon)))]),_:2},1024)):(E(),P(ve(B.icon),{key:1}))]),default:S(()=>[He(T(R,{depth:"3"},{default:S(()=>[Ce(ne(B.name),1)]),_:2},1536),[[Pe,!s(g)]])]),_:2},1032,["circle","onClick"])):B.type===s(ie).IMPORTUPLOAD?(E(),P(b,{key:1,"file-list":s(r),"onUpdate:fileList":_[0]||(_[0]=V=>Jt(r)?r.value=V:null),"show-file-list":!1,customRequest:s(i),onBeforeUpload:s(l)},{default:S(()=>[T(y,{circle:s(g),secondary:""},{icon:S(()=>[s(g)?(E(),P(A,{key:0,size:"22"},{default:S(()=>[(E(),P(ve(B.icon)))]),_:2},1024)):(E(),P(ve(B.icon),{key:1}))]),default:S(()=>[He(T(R,{depth:"3"},{default:S(()=>[Ce(ne(B.name),1)]),_:2},1536),[[Pe,!s(g)]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):_e("",!0)])]),default:S(()=>[k("span",null,ne(B.name),1)]),_:2},1032,["disabled"]))),128))],34),T(s(io),{modelShow:d.value,"onUpdate:modelShow":_[2]||(_[2]=B=>d.value=B)},null,8,["modelShow"])],64)}}});var xn=oe(wn,[["__scopeId","data-v-85226682"]]);const bn=ee({__name:"index",setup(e){const t=J(),{handleContextMenu:o}=tt();po();const{mouseenterHandle:u,mouseleaveHandle:n,mousedownHandle:f,mouseClickHandle:v}=Lt(),h=(a,r,i)=>{if(t.getTargetChart.selectId.length>1)return r.filter(g=>[j.GROUP,j.DELETE].includes(g.key));const l=[];return i.status.lock?l.push(j.LOCK):l.push(j.UNLOCK),i.status.hide?l.push(j.HIDE):l.push(j.SHOW),a.filter(g=>!l.includes(g.key))},c=$(()=>t.getEditCanvasConfig.chartThemeSetting),d=$(()=>{const a=t.getEditCanvasConfig.chartThemeColor;return _t[a]});$(()=>t.getEditCanvasConfig.filterShow);const p=$(()=>{const a=t.getEditCanvasConfig.background,r=t.getEditCanvasConfig.backgroundImage,g=t.getEditCanvasConfig.selectColor?{background:a||void 0}:{background:`url(${r}) no-repeat center center / cover !important`};return ae(M({},g),{width:"inherit",height:"inherit"})});return Qe(()=>{no()}),(a,r)=>(E(),P(s(lo),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:s(bt),onDrop:s(fo),onDragover:s(pt),onDragenter:s(pt)},{aside:S(()=>[T(s(xn))]),bottom:S(()=>[T(s(fn))]),default:S(()=>[T(s(No),null,{default:S(()=>[k("div",{id:"go-chart-edit-content",onContextmenu:r[0]||(r[0]=(...i)=>s(o)&&s(o)(...i))},[T(s(Bo),null,{default:S(()=>[k("div",{style:W(M(M({},s(be)(s(t).getEditCanvasConfig)),s(p)))},[(E(!0),U(ce,null,pe(s(t).getComponentList,(i,l)=>(E(),U("div",{key:i.id},[i.isGroup?(E(),P(s(Eo),{key:0,groupData:i,groupIndex:l},null,8,["groupData","groupIndex"])):(E(),P(s(We),{key:1,"data-id":i.id,index:l,style:W(M(M({},s(Fe)(i.attr,l)),s(yt)(i.styles))),item:i,onClick:g=>s(v)(g,i),onMousedown:g=>s(f)(g,i),onMouseenter:g=>s(u)(g,i),onMouseleave:g=>s(n)(g,i),onContextmenu:g=>s(o)(g,i,h)},{default:S(()=>[(E(),P(ve(i.chartConfig.chartKey),{class:se(["edit-content-chart",s(Ke)(i.styles.animations)]),chartConfig:i,themeSetting:s(c),themeColor:s(d),style:W(M(M(M({},s(de)(i.attr)),s(be)(i.styles)),s(ze)(i.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});var Xn=oe(bn,[["__scopeId","data-v-522918de"]]);export{Xn as default};
