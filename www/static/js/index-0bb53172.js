var q=(e,t,a)=>new Promise((c,o)=>{var l=d=>{try{h(a.next(d))}catch(I){o(I)}},f=d=>{try{h(a.throw(d))}catch(I){o(I)}},h=d=>d.done?c(d.value):Promise.resolve(d.value).then(l,f);h((a=a.apply(e,t)).next())});import{d as U,v as y,R as ee,cb as ue,X as _e,o as i,m as v,cc as de,cd as te,ce as pe,cf as ve,a as me,cg as ge,ch as fe,ci as he,cj as ye,j as ae,an as Ce,y as be,r as E,e as g,f as s,z as _,w as L,F as P,A as R,t as S,aa as b,ck as ke,c1 as Oe,G as Se,H as Ee,u as Ie,a3 as xe,aA as Ae,a1 as T,bT as De,c as F,c0 as Le,ad as Te}from"./index.js";import{C as we}from"./index-b46ec33f.js";import{a as Ne,f as Pe,b as Re,p as $e}from"./index-1fd470a3.js";import{u as ze,E as J,P as w,i as N}from"./chartEditStore-16ef03cd.js";import{i as ne}from"./icon-7c84be6c.js";import{l as Fe,c as X}from"./index-7fbadaa6.js";import{u as se}from"./chartLayoutStore-57801fe4.js";const Be={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},Q=U({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=y(""),c=()=>q(this,null,function*(){a.value=yield Ne(t.chartConfig)});return ee(()=>t.chartConfig.key,()=>c(),{immediate:!0}),(o,l)=>{const f=ue("lazy");return _e((i(),v("img",Be,null,512)),[[f,a.value]])}}});function Ue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ge=Ue;function Ke(e,t,a){var c=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var l=Array(o);++c<o;)l[c]=e[c+t];return l}var He=Ke,Ve=de,Me=He;function je(e,t){return t.length<2?e:Ve(e,Me(t,0,-1))}var Ye=je,qe=te,Je=Ge,Xe=Ye,Qe=pe;function We(e,t){return t=qe(t,e),e=Xe(e,t),e==null||delete e[Qe(Je(t))]}var Ze=We,et=ve;function tt(e){return et(e)?void 0:e}var at=tt,nt=me,st=ye,ot=Ze,lt=te,ct=ge,rt=at,it=fe,ut=he,_t=1,dt=2,pt=4,vt=it(function(e,t){var a={};if(e==null)return a;var c=!1;t=nt(t,function(l){return l=lt(l,e),c||(c=l.length>1),l}),ct(e,ut(e),a),c&&(a=st(a,_t|dt|pt,rt));for(var o=t.length;o--;)ot(a,t[o]);return a}),mt=vt;const gt=e=>(Se("data-v-2bff4cf0"),e=e(),Ee(),e),ft={class:"go-chart-common"},ht={key:0,class:"charts"},yt={class:"tree-top"},Ct=gt(()=>_("span",null,"\u6240\u6709\u5206\u7EC4",-1)),bt={class:"tree-body"},kt={class:"chapter chapter-first"},Ot={class:"label-count"},St=["onDragstart"],Et={key:1,class:"chapter chapter-last"},It=["onDragstart"],xt={key:1,class:"no-charts"},At={class:"chart-content-list"},Dt=U({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var M,j;const t=e,a=Fe(()=>Ce(()=>import("./index-70527fcf.js"),["static/js/index-70527fcf.js","static/css/index-f25f4c30.css","static/js/index-0f61a8a0.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-a1e82c00.css","static/js/icon-7c84be6c.js","static/js/chartEditStore-16ef03cd.js","static/js/plugin-da57b897.js","static/js/chartLayoutStore-57801fe4.js","static/js/index-7fbadaa6.js","static/css/index-8038d4fd.css","static/js/index-99e914f6.js","static/js/index-dd7b1dee.js","static/css/index-39296e52.css","static/js/index-1fd470a3.js","static/css/index-94ff02f2.css","static/js/tables_list-71790294.js","static/js/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-cd4ff293.js","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-20c8ee90.css","static/js/SettingItemBox-5f180e77.js","static/js/useTargetData.hook-2e47e566.js","static/js/index-b46ec33f.js","static/css/index-76be6209.css"])),{ChevronUpOutlineIcon:c,ChevronDownOutlineIcon:o}=ne.ionicons5,l=(M=window.dimensions)!=null?M:[],f=y(l[0]?l[0].value:""),h=(j=window.treeData)!=null?j:[],d=h.chart?y(t.menu=="Charts"?h.chart[f.value]:h.pivot[f.value]):y(),I=()=>{d.value=h.chart?t.menu=="Charts"?h.chart[f.value]:h.pivot[f.value]:""},x=y(!1),C=y([]),oe=()=>{x.value=!x.value;for(const r in d.value){C.value[d.value[r].id]=x.value;for(const n in d.value[r].child)C.value[d.value[r].child[n].id]=x.value}},G=r=>{C.value[r]=!C.value[r]};let u=be({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const $=y(),le=r=>{for(const n in r){u.selectOptions=r[n];break}};ee(()=>t.selectOptions,r=>{if(u.categorysNum=0,!!r){r.list.forEach(n=>{const A=u.categorys[n.category];u.categorys[n.category]=A&&A.length?[...A,n]:[n],u.categoryNames[n.category]=n.categoryName,u.categorys.all.push(n)});for(const n in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:n,label:u.categoryNames[n]});le(u.categorys),$.value=u.menuOptions[0].key}},{immediate:!0});const ce=r=>{u.selectOptions=u.categorys[r]},K=ze(),H=(r,n)=>{X(n.chartKey,Pe(n)),X(n.conKey,Re(n)),r.dataTransfer.setData(ke.DRAG_KEY,Oe(mt(n,["image"]))),K.setEditCanvas(J.IS_CREATE,!0)},V=()=>{K.setEditCanvas(J.IS_CREATE,!1)};return(r,n)=>{const A=E("n-select"),z=E("n-icon"),Y=E("n-scrollbar"),re=E("n-menu");return i(),v("div",ft,[e.menu=="Charts"||e.menu=="Tables"?(i(),v("div",ht,[g(A,{class:"dimension-btn",value:f.value,"onUpdate:value":[n[0]||(n[0]=m=>f.value=m),I],options:s(l)},null,8,["value","options"]),_("div",yt,[Ct,g(z,{size:"16",component:x.value?s(c):s(o),onClick:oe},null,8,["component"])]),_("div",bt,[g(Y,null,{default:L(()=>[(i(!0),v(P,null,R(s(d),(m,Mt)=>(i(),v("div",{key:m.id},[_("div",null,[_("div",kt,[g(z,{size:"16",component:C.value[m.id]?s(c):s(o),onClick:p=>G(m.id)},null,8,["component","onClick"]),_("label",null,S(m.title),1),_("label",Ot,S(m.count),1)]),m.child&&C.value[m.id]?(i(!0),v(P,{key:0},R(m.child,p=>(i(),v("div",{class:"tree-child",key:p.id},[p.type!="chapter"?(i(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:O=>H(O,p.chartConfig),onDragend:V},[g(s(Q),{class:"list-img",chartConfig:p.chartConfig},null,8,["chartConfig"]),_("span",null,S(p.title),1)],40,St)):b("",!0),p.type=="chapter"?(i(),v("div",Et,[g(z,{size:"16",component:C.value[p.id]?s(c):s(o),onClick:O=>G(p.id)},null,8,["component","onClick"]),_("label",null,S(p.title),1)])):b("",!0),p.child&&C.value[p.id]?(i(!0),v(P,{key:2},R(p.child,O=>(i(),v("div",{class:"tree-child",key:p.id},[O.type!="chapter"?(i(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:ie=>H(ie,O.chartConfig),onDragend:V},[g(s(Q),{class:"list-img",chartConfig:O.chartConfig},null,8,["chartConfig"]),_("span",null,S(O.title),1)],40,It)):b("",!0)]))),128)):b("",!0)]))),128)):b("",!0)])]))),128))]),_:1})])])):b("",!0),e.menu!="Charts"&&e.menu!="Tables"?(i(),v("div",xt,[g(re,{class:"chart-menu-width",value:$.value,"onUpdate:value":[n[1]||(n[1]=m=>$.value=m),ce],options:s(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),_("div",At,[g(Y,null,{default:L(()=>[g(s(a),{menuOptions:s(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):b("",!0)])}}});var Lt=ae(Dt,[["__scopeId","data-v-2bff4cf0"]]);const Tt=Ie(),wt=y(Tt.getAppTheme);se();const{getCharts:Nt}=xe(se()),Pt=Ae({id:"usePackagesStore",state:()=>({packagesList:Object.freeze($e)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Rt,RoadmapIcon:$t,SpellCheckIcon:zt,GraphicalDataFlowIcon:Ft}=ne.carbon,{getPackagesList:W}=Pt(),k=[],Z={[w.CHARTS]:{icon:T($t),label:N.CHARTS},[w.INFORMATIONS]:{icon:T(zt),label:N.INFORMATIONS},[w.TABLES]:{icon:T(Rt),label:N.TABLES},[w.DECORATES]:{icon:T(Ft),label:N.DECORATES}},Bt=()=>{for(const e in W)k.push({key:e,icon:Z[e].icon,label:Z[e].label,list:W[e]})};Bt();k[0].key;const D=y(k[0].key),B=y(k[0]),Ut=e=>{for(const t in k)k[t].key==e&&(B.value=k[t])};const Gt={class:"menu-width-box"},Kt={class:"menu-component-box"},Ht=U({__name:"index",setup(e){return De(t=>({"7563b37f":s(wt)})),(t,a)=>{const c=E("n-tab-pane"),o=E("n-tabs");return i(),F(s(we),{class:Te(["go-content-charts",{scoped:!s(Nt)}]),backIcon:!1},{default:L(()=>[_("aside",null,[_("div",Gt,[g(o,{value:s(D),"onUpdate:value":[a[0]||(a[0]=l=>Le(D)?D.value=l:null),s(Ut)],class:"tabs-box",size:"small",type:"segment"},{default:L(()=>[(i(!0),v(P,null,R(s(k),l=>(i(),F(c,{key:l.key,name:l.key,size:"small","display-directive":"show:lazy"},{tab:L(()=>[_("span",null,S(l.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),_("div",Kt,[s(B)?(i(),F(s(Lt),{selectOptions:s(B),menu:s(D),key:s(D)},null,8,["selectOptions","menu"])):b("",!0)])])])]),_:1},8,["class"])}}});var Vt=ae(Ht,[["__scopeId","data-v-7ab8059c"]]),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"}));export{Q as _,ea as i,mt as o};
