var Y=(e,t,a)=>new Promise((l,o)=>{var u=d=>{try{h(a.next(d))}catch(I){o(I)}},r=d=>{try{h(a.throw(d))}catch(I){o(I)}},h=d=>d.done?l(d.value):Promise.resolve(d.value).then(u,r);h((a=a.apply(e,t)).next())});import{d as U,v as y,R as Z,cb as ue,X as _e,o as c,m as v,cc as de,cd as ee,ce as pe,cf as ve,a as me,cg as ge,ch as fe,ci as he,cj as ye,j as te,an as Ce,y as be,r as S,e as f,f as s,z as m,F as R,A as $,t as E,aa as b,w as L,ck as ke,c1 as Oe,G as Se,H as Ee,u as Ie,a3 as xe,aA as Ae,a1 as T,bT as De,c as w,c0 as Le,L as Te,ad as we}from"./index.js";import{C as Ne}from"./index-0abf7ae9.js";import{a as Pe,f as Re,b as $e,p as ze}from"./index-760f71cb.js";import{u as Fe,E as q,P as N,i as P}from"./chartEditStore-ac923661.js";import{i as ae}from"./icon-5c6b1271.js";import{l as Be,c as J}from"./index-44e84cf4.js";import{u as ne}from"./chartLayoutStore-9d5c33b6.js";const Ue={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},X=U({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=y(""),l=()=>Y(this,null,function*(){a.value=yield Pe(t.chartConfig)});return Z(()=>t.chartConfig.key,()=>l(),{immediate:!0}),(o,u)=>{const r=ue("lazy");return _e((c(),v("img",Ue,null,512)),[[r,a.value]])}}});function Ge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ke=Ge;function He(e,t,a){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var u=Array(o);++l<o;)u[l]=e[l+t];return u}var Ve=He,Me=de,je=Ve;function Ye(e,t){return t.length<2?e:Me(e,je(t,0,-1))}var qe=Ye,Je=ee,Xe=Ke,Qe=qe,We=pe;function Ze(e,t){return t=Je(t,e),e=Qe(e,t),e==null||delete e[We(Xe(t))]}var et=Ze,tt=ve;function at(e){return tt(e)?void 0:e}var nt=at,st=me,ot=ye,ct=et,lt=ee,rt=ge,it=nt,ut=fe,_t=he,dt=1,pt=2,vt=4,mt=ut(function(e,t){var a={};if(e==null)return a;var l=!1;t=st(t,function(u){return u=lt(u,e),l||(l=u.length>1),u}),rt(e,_t(e),a),l&&(a=ot(a,dt|pt|vt,it));for(var o=t.length;o--;)ct(a,t[o]);return a}),gt=mt;const ft=e=>(Se("data-v-01d028a6"),e=e(),Ee(),e),ht={class:"go-chart-common"},yt={key:0,class:"charts"},Ct={class:"tree-top"},bt=ft(()=>m("span",null,"\u6240\u6709\u5206\u7EC4",-1)),kt={class:"chapter chapter-first"},Ot={class:"label-count"},St=["onDragstart"],Et={key:1,class:"chapter chapter-last"},It=["onDragstart"],xt={key:1,class:"no-charts"},At={class:"chart-content-list"},Dt=U({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var M,j;const t=e,a=Be(()=>Ce(()=>import("./index-8ad1bb4b.js"),["static/js/index-8ad1bb4b.js","static/css/index-f25f4c30.css","static/js/index-4edefa72.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-a1e82c00.css","static/js/icon-5c6b1271.js","static/js/chartEditStore-ac923661.js","static/js/plugin-b83a6fcc.js","static/js/chartLayoutStore-9d5c33b6.js","static/js/index-44e84cf4.js","static/css/index-8038d4fd.css","static/js/index-d59ca57a.js","static/js/index-d6d7fe8e.js","static/css/index-39296e52.css","static/js/index-760f71cb.js","static/css/index-a0430f68.css","static/js/tables_list-3a60c537.js","static/js/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-3bf74432.js","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-aebd28de.css","static/js/useTargetData.hook-da2b6121.js","static/js/index-0abf7ae9.js","static/css/index-a9cbbfc9.css"])),{ChevronUpOutlineIcon:l,ChevronDownOutlineIcon:o}=ae.ionicons5,u=(M=window.dimensions)!=null?M:[],r=y(u[0]?u[0].value:""),h=(j=window.treeData)!=null?j:[],d=h.chart?y(t.menu=="Charts"?h.chart[r.value]:h.pivot[r.value]):y(),I=()=>{d.value=h.chart?t.menu=="Charts"?h.chart[r.value]:h.pivot[r.value]:""},x=y(!1),C=y([]),se=()=>{x.value=!x.value;for(const i in d.value){C.value[d.value[i].id]=x.value;for(const n in d.value[i].child)C.value[d.value[i].child[n].id]=x.value}},G=i=>{C.value[i]=!C.value[i]};let _=be({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const z=y(),oe=i=>{for(const n in i){_.selectOptions=i[n];break}};Z(()=>t.selectOptions,i=>{if(_.categorysNum=0,!!i){i.list.forEach(n=>{const A=_.categorys[n.category];_.categorys[n.category]=A&&A.length?[...A,n]:[n],_.categoryNames[n.category]=n.categoryName,_.categorys.all.push(n)});for(const n in _.categorys)_.categorysNum+=1,_.menuOptions.push({key:n,label:_.categoryNames[n]});oe(_.categorys),z.value=_.menuOptions[0].key}},{immediate:!0});const ce=i=>{_.selectOptions=_.categorys[i]},K=Fe(),H=(i,n)=>{J(n.chartKey,Re(n)),J(n.conKey,$e(n)),i.dataTransfer.setData(ke.DRAG_KEY,Oe(gt(n,["image"]))),K.setEditCanvas(q.IS_CREATE,!0)},V=()=>{K.setEditCanvas(q.IS_CREATE,!1)};return(i,n)=>{const A=S("n-select"),F=S("n-icon"),le=S("n-menu"),re=S("n-scrollbar");return c(),v("div",ht,[e.menu=="Charts"||e.menu=="Tables"?(c(),v("div",yt,[f(A,{class:"dimension-btn",value:r.value,"onUpdate:value":[n[0]||(n[0]=g=>r.value=g),I],options:s(u)},null,8,["value","options"]),m("div",Ct,[bt,f(F,{size:"16",component:x.value?s(l):s(o),onClick:se},null,8,["component"])]),(c(!0),v(R,null,$(s(d),(g,Mt)=>(c(),v("div",{class:"tree-body",key:g.id},[m("div",null,[m("div",kt,[f(F,{size:"16",component:C.value[g.id]?s(l):s(o),onClick:p=>G(g.id)},null,8,["component","onClick"]),m("label",null,E(g.title),1),m("label",Ot,E(g.count),1)]),g.child&&C.value[g.id]?(c(!0),v(R,{key:0},$(g.child,p=>(c(),v("div",{class:"tree-child",key:p.id},[p.type!="chapter"?(c(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:O=>H(O,p.chartConfig),onDragend:V},[f(s(X),{class:"list-img",chartConfig:p.chartConfig},null,8,["chartConfig"]),m("span",null,E(p.title),1)],40,St)):b("",!0),p.type=="chapter"?(c(),v("div",Et,[f(F,{size:"16",component:C.value[p.id]?s(l):s(o),onClick:O=>G(p.id)},null,8,["component","onClick"]),m("label",null,E(p.title),1)])):b("",!0),p.child&&C.value[p.id]?(c(!0),v(R,{key:2},$(p.child,O=>(c(),v("div",{class:"tree-child",key:p.id},[O.type!="chapter"?(c(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:ie=>H(ie,O.chartConfig),onDragend:V},[f(s(X),{class:"list-img",chartConfig:O.chartConfig},null,8,["chartConfig"]),m("span",null,E(O.title),1)],40,It)):b("",!0)]))),128)):b("",!0)]))),128)):b("",!0)])]))),128))])):b("",!0),e.menu!="Charts"&&e.menu!="Tables"?(c(),v("div",xt,[f(le,{class:"chart-menu-width",value:z.value,"onUpdate:value":[n[1]||(n[1]=g=>z.value=g),ce],options:s(_).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),m("div",At,[f(re,null,{default:L(()=>[f(s(a),{menuOptions:s(_).selectOptions},null,8,["menuOptions"])]),_:1})])])):b("",!0)])}}});var Lt=te(Dt,[["__scopeId","data-v-01d028a6"]]);const Tt=Ie(),wt=y(Tt.getAppTheme);ne();const{getCharts:Nt}=xe(ne()),Pt=Ae({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(ze)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Rt,RoadmapIcon:$t,SpellCheckIcon:zt,GraphicalDataFlowIcon:Ft}=ae.carbon,{getPackagesList:Q}=Pt(),k=[],W={[N.CHARTS]:{icon:T($t),label:P.CHARTS},[N.INFORMATIONS]:{icon:T(zt),label:P.INFORMATIONS},[N.TABLES]:{icon:T(Rt),label:P.TABLES},[N.DECORATES]:{icon:T(Ft),label:P.DECORATES}},Bt=()=>{for(const e in Q)k.push({key:e,icon:W[e].icon,label:W[e].label,list:Q[e]})};Bt();k[0].key;const D=y(k[0].key),B=y(k[0]),Ut=e=>{for(const t in k)k[t].key==e&&(B.value=k[t])};const Gt={class:"menu-width-box"},Kt={class:"menu-component-box"},Ht=U({__name:"index",setup(e){return De(t=>({"3d2659ee":s(wt)})),(t,a)=>{const l=S("n-icon"),o=S("n-tab-pane"),u=S("n-tabs");return c(),w(s(Ne),{class:we(["go-content-charts",{scoped:!s(Nt)}]),backIcon:!1},{default:L(()=>[m("aside",null,[m("div",Gt,[f(u,{value:s(D),"onUpdate:value":[a[0]||(a[0]=r=>Le(D)?D.value=r:null),s(Ut)],class:"tabs-box",size:"small",type:"segment"},{default:L(()=>[(c(!0),v(R,null,$(s(k),r=>(c(),w(o,{key:r.key,name:r.key,size:"small","display-directive":"show:lazy"},{tab:L(()=>[m("span",null,E(r.label),1),f(l,{size:"16",class:"icon-position"},{default:L(()=>[(c(),w(Te(r.icon)))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),m("div",Kt,[s(B)?(c(),w(s(Lt),{selectOptions:s(B),menu:s(D),key:s(D)},null,8,["selectOptions","menu"])):b("",!0)])])])]),_:1},8,["class"])}}});var Vt=te(Ht,[["__scopeId","data-v-469c8c18"]]),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"}));export{X as _,ea as i,gt as o};
