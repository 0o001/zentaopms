var Wt=Object.defineProperty,zt=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var ht=Object.getOwnPropertySymbols;var qt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable;var gt=(e,n,t)=>n in e?Wt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,P=(e,n)=>{for(var t in n||(n={}))qt.call(n,t)&&gt(e,t,n[t]);if(ht)for(var t of ht(n))Jt.call(n,t)&&gt(e,t,n[t]);return e},fe=(e,n)=>zt(e,Vt(n));var le=(e,n,t)=>new Promise((o,a)=>{var v=g=>{try{y(t.next(g))}catch(p){a(p)}},l=g=>{try{y(t.throw(g))}catch(p){a(p)}},y=g=>g.done?o(g.value):Promise.resolve(g.value).then(v,l);y((t=t.apply(e,n)).next())});import{u as re,E as j,d as Xe,a as Ft,C as Qt,k as Zt,c as Lt,H as B,l as Ie}from"./chartEditStore-08b7867a.js";import{x as lt,a6 as bt,bb as jt,aj as D,c4 as Ot,c5 as Mt,ck as _t,U as We,aC as ze,aV as Ve,ay as Oe,az as mt,cj as en,c1 as nt,cl as V,c9 as qe,ak as tn,j as ce,d as ue,bR as ke,f as s,u as Fe,a5 as U,o as A,m as z,n as dt,F as he,A as ye,ad as de,aJ as ae,ab as ge,z as W,c as N,w as k,L as Ee,aI as ot,aK as He,aL as st,aM as Rt,a4 as ft,y as Ne,al as Ct,R as ve,r as I,cm as nn,a3 as Ke,v as Z,cn as yt,D as Bt,E as It,e as O,p as Se,t as pe,aB as on,a$ as sn,co as _e,cp as Pe,cq as an,c0 as rn,cr as un,am as cn,cs as ln,J as Ht,Q as Et,aQ as Je,X as Qe,Y as Ze,b_ as dn,V as fn,ct as pn,cu as vn,W as hn,c3 as gn,S as Me,aR as je}from"./index.js";import{u as pt,d as _n}from"./index-84fcf237.js";import{t as oe,f as mn,b as Cn,l as Pt,m as Ue,n as yn,o as we,q as $e,_ as En,r as Sn}from"./index-6bb56023.js";import{u as Ut,C as at}from"./chartLayoutStore-859454e4.js";import{a as wn,b as St,l as Tn,g as xn}from"./plugin-8471cd7e.js";import{C as An}from"./index-8f0598f9.js";import{i as De}from"./icon-d59d56ff.js";import{E as Dn}from"./index-05e1e768.js";import"./index-1a743aa0.js";import"./index-39d3fb21.js";import"./table_scrollboard-3667f4b7.js";/* empty css                                                                */import"./SettingItemBox-a90524c1.js";import"./CollapseItem-4a85a0e3.js";import"./useTargetData.hook-5df1ece2.js";const xe=re(),kn=()=>{lt(()=>{xe.setEditCanvas(j.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),xe.setEditCanvas(j.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const e=xe.listenerScale();bt(()=>{xe.setEditCanvas(j.EDIT_LAYOUT_DOM,null),xe.setEditCanvas(j.EDIT_CONTENT_DOM,null),e()})})};var $t={exports:{}};(function(e){(function(n){var t,o={},a={16:!1,18:!1,17:!1,91:!1},v="all",l={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},y={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},g=function(u){return y[u]||u.toUpperCase().charCodeAt(0)},p=[];for(t=1;t<20;t++)y["f"+t]=111+t;function m(u,f){for(var F=u.length;F--;)if(u[F]===f)return F;return-1}function r(u,f){if(u.length!=f.length)return!1;for(var F=0;F<u.length;F++)if(u[F]!==f[F])return!1;return!0}var c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function _(u){for(t in a)a[t]=u[c[t]]}function d(u){var f,F,L,Y,$,ie;if(f=u.keyCode,m(p,f)==-1&&p.push(f),(f==93||f==224)&&(f=91),f in a){a[f]=!0;for(L in l)l[L]==f&&(E[L]=!0);return}if(_(u),!!E.filter.call(this,u)&&f in o){for(ie=q(),Y=0;Y<o[f].length;Y++)if(F=o[f][Y],F.scope==ie||F.scope=="all"){$=F.mods.length>0;for(L in a)(!a[L]&&m(F.mods,+L)>-1||a[L]&&m(F.mods,+L)==-1)&&($=!1);(F.mods.length==0&&!a[16]&&!a[18]&&!a[17]&&!a[91]||$)&&F.method(u,F)===!1&&(u.preventDefault?u.preventDefault():u.returnValue=!1,u.stopPropagation&&u.stopPropagation(),u.cancelBubble&&(u.cancelBubble=!0))}}}function C(u){var f=u.keyCode,F,L=m(p,f);if(L>=0&&p.splice(L,1),(f==93||f==224)&&(f=91),f in a){a[f]=!1;for(F in l)l[F]==f&&(E[F]=!1)}}function i(){for(t in a)a[t]=!1;for(t in l)E[t]=!1}function E(u,f,F){var L,Y;L=h(u),F===void 0&&(F=f,f="all");for(var $=0;$<L.length;$++)Y=[],u=L[$].split("+"),u.length>1&&(Y=H(u),u=[u[u.length-1]]),u=u[0],u=g(u),u in o||(o[u]=[]),o[u].push({shortcut:L[$],scope:f,method:F,key:L[$],mods:Y})}function S(u,f){var F,L,Y=[],$,ie,Te;for(F=h(u),ie=0;ie<F.length;ie++){if(L=F[ie].split("+"),L.length>1&&(Y=H(L),u=L[L.length-1]),u=g(u),f===void 0&&(f=q()),!o[u])return;for($=0;$<o[u].length;$++)Te=o[u][$],Te.scope===f&&r(Te.mods,Y)&&(o[u][$]={})}}function M(u){return typeof u=="string"&&(u=g(u)),m(p,u)!=-1}function b(){return p.slice(0)}function G(u){var f=(u.target||u.srcElement).tagName;return!(f=="INPUT"||f=="SELECT"||f=="TEXTAREA")}for(t in l)E[t]=!1;function X(u){v=u||"all"}function q(){return v||"all"}function T(u){var f,F,L;for(f in o)for(F=o[f],L=0;L<F.length;)F[L].scope===u?F.splice(L,1):L++}function h(u){var f;return u=u.replace(/\s/g,""),f=u.split(","),f[f.length-1]==""&&(f[f.length-2]+=","),f}function H(u){for(var f=u.slice(0,u.length-1),F=0;F<f.length;F++)f[F]=l[f[F]];return f}function K(u,f,F){u.addEventListener?u.addEventListener(f,F,!1):u.attachEvent&&u.attachEvent("on"+f,function(){F(window.event)})}K(document,"keydown",function(u){d(u)}),K(document,"keyup",C),K(window,"focus",i);var x=n.key;function R(){var u=n.key;return n.key=x,u}n.key=E,n.key.setScope=X,n.key.getScope=q,n.key.deleteScope=T,n.key.filter=G,n.key.isPressed=M,n.key.getPressedKeyCodes=b,n.key.noConflict=R,n.key.unbind=S,e.exports=E})(jt)})($t);var ee=$t.exports;const te=re(),se=e=>`${Ot.CTRL}+${e}`,Re=e=>`${Ot.SHIFT}+${e}`,J={[D.ARROW_UP]:se("up"),[D.ARROW_RIGHT]:se("right"),[D.ARROW_DOWN]:se("down"),[D.ARROW_LEFT]:se("left"),[D.COPY]:se("c"),[D.CUT]:se("x"),[D.PARSE]:se("v"),[D.DELETE]:"delete",[D.BACK]:se("z"),[D.FORWORD]:se(Re("z")),[D.GROUP]:se("g"),[D.UN_GROUP]:se(Re("g")),[D.LOCK]:se("l"),[D.UNLOCK]:se(Re("l")),[D.HIDE]:se("h"),[D.SHOW]:se(Re("h"))},ne=e=>`${Mt.CTRL}+${e}`,Be=e=>`${Mt.SHIFT}+${e}`,Q={[D.ARROW_UP]:ne("arrowup"),[D.ARROW_RIGHT]:ne("arrowright"),[D.ARROW_DOWN]:ne("arrowdown"),[D.ARROW_LEFT]:ne("arrowleft"),[D.COPY]:ne("c"),[D.CUT]:ne("x"),[D.PARSE]:ne("v"),[D.DELETE]:ne("backspace"),[D.BACK]:ne("z"),[D.FORWORD]:ne(Be("z")),[D.GROUP]:ne("g"),[D.UN_GROUP]:ne(Be("g")),[D.LOCK]:ne("l"),[D.UNLOCK]:ne(Be("l")),[D.HIDE]:ne("h"),[D.SHOW]:ne(Be("h"))},Fn=[J.up,J.right,J.down,J.left,J.delete,J.copy,J.cut,J.parse,J.back,J.forward,J.group,J.unGroup,J.lock,J.unLock,J.hide,J.show],Ln=[Q.up,Q.right,Q.down,Q.left,Q.delete,Q.copy,Q.cut,Q.parse,Q.back,Q.forward,Q.group,Q.unGroup,Q.lock,Q.unLock,Q.hide,Q.show],bn=()=>{window.$KeyboardActive={ctrl:!1,space:!1},document.onkeydown=e=>{const{keyCode:n}=e;if(n==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(_t(e.keyCode),n){case 17:window.$KeyboardActive.ctrl=!0;break;case 32:window.$KeyboardActive.space=!0;break}},document.onkeyup=e=>{const{keyCode:n}=e;if(n==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(_t(),n){case 17:window.$KeyboardActive.ctrl=!1;break;case 32:window.$KeyboardActive.space=!1;break}}},On=()=>{const n=(t,o)=>{switch(o){case t.up:ee(o,oe(()=>(te.setMove(D.ARROW_UP),!1),50));break;case t.right:ee(o,oe(()=>(te.setMove(D.ARROW_RIGHT),!1),50));break;case t.down:ee(o,oe(()=>(te.setMove(D.ARROW_DOWN),!1),50));break;case t.left:ee(o,oe(()=>(te.setMove(D.ARROW_LEFT),!1),50));break;case t.delete:ee(o,Xe(()=>(te.removeComponentList(),!1),50));break;case t.copy:ee(o,Xe(()=>(te.setCopy(),!1),50));break;case t.cut:ee(o,Xe(()=>(te.setCut(),!1),50));break;case t.parse:ee(o,oe(()=>(te.setParse(),!1),50));break;case t.back:ee(o,oe(()=>(te.setBack(),!1),50));break;case t.forward:ee(o,oe(()=>(te.setForward(),!1),50));break;case t.group:ee(o,oe(()=>(te.setGroup(),!1),50));break;case t.unGroup:ee(o,oe(()=>(te.setUnGroup(),!1),50));break;case t.lock:ee(o,oe(()=>(te.setLock(),!1),50));break;case t.unLock:ee(o,oe(()=>(te.setUnLock(),!1),50));break;case t.hide:ee(o,oe(()=>(te.setHide(),!1),50));break;case t.show:ee(o,oe(()=>(te.setShow(),!1),50));break}};Fn.forEach(t=>{n(J,t)}),Ln.forEach(t=>{n(Q,t)}),bn()},Mn=e=>e,Rn=(e,n)=>{try{if(n.id){const t="vnodeBeforeMount"in n.events,o="vnodeMounted"in n.events;return t&&(e.events.advancedEvents.vnodeBeforeMount=n==null?void 0:n.events.vnodeBeforeMount),o&&(e.events.advancedEvents.vnodeMounted=n==null?void 0:n.events.vnodeMounted),(t||o)&&(n.events={baseEvent:{[Oe.ON_CLICK]:void 0,[Oe.ON_DBL_CLICK]:void 0,[Oe.ON_MOUSE_ENTER]:void 0,[Oe.ON_MOUSE_LEAVE]:void 0},advancedEvents:{[mt.VNODE_MOUNTED]:void 0,[mt.VNODE_BEFORE_MOUNT]:void 0}}),e}}catch(t){return e}},me=(e,n,t=!1)=>{if(Rn(e,n),t)return Ve(e,n);const o=n.option;if(!o)return Ve(e,n);if(n.option=void 0,o)return fe(P({},Ve(e,n)),{option:o})},vt=()=>{const e=re(),n=Ft(),t=Ut(),o=(l,y=!1,g=!1)=>le(void 0,null,function*(){y&&(e.componentList=[],e.editCanvasConfig.globalFilter=[],n.clearBackStack(),n.clearForwardStack()),l.editCanvasConfig=Mn(l.editCanvasConfig),l.componentList.forEach(r=>le(void 0,null,function*(){const c=_=>{window.$vue.component(_.chartConfig.chartKey)||(window.$vue.component(_.chartConfig.chartKey,mn(_.chartConfig)),window.$vue.component(_.chartConfig.conKey,Cn(_.chartConfig)))};r.isGroup?r.groupList.forEach(_=>{c(_)}):c(r)}));const p=l.editCanvasConfig.globalFilter;p.length>0&&e.addFilterList(p);const m=(r,c)=>le(void 0,null,function*(){let _=yield Pt(r.chartConfig);c?c(g?me(_,fe(P({},r),{id:We()})):me(_,r)):g?e.addComponentList(me(_,fe(P({},r),{id:We()})),!1,!0):e.addComponentList(me(_,r),!1,!0)});for(const r in l)if(r===Qt.COMPONENT_LIST){let c=0;const _=l[r].length;for(const d of l[r]){let C=parseInt((parseFloat(`${++c/_}`)*100).toString());if(t.setItemUnHandle(at.PERCENTAGE,C),d.isGroup){let i=new Zt;g?i=me(i,fe(P({},d),{id:We()})):i=me(i,d);const E=[];for(const S of d.groupList)yield m(S,M=>{E.push(M)});i.groupList=E,e.addComponentList(i,!1,!0)}else yield m(d)}}else(r==="editCanvasConfig"||r==="requestGlobalConfig")&&me(e[r],l[r],!0);t.setItemUnHandle(at.PERCENTAGE,0)}),a=()=>le(void 0,null,function*(){e.componentList=[],e.setEditCanvas(j.SAVE_STATUS,ze.START);const l=window.chartData;l&&(yield o(l))}),v=oe((l=!0)=>le(void 0,null,function*(){e.setEditCanvas(j.SAVE_STATUS,ze.START),e.getStorageInfo,setTimeout(()=>{e.setEditCanvas(j.SAVE_STATUS,ze.SUCCESS)},1e3)}),3e3);return{updateComponent:o,dataSyncFetch:a,dataSyncUpdate:v}},w=re(),{onClickOutSide:Bn}=pt(),In=e=>le(void 0,null,function*(){e.preventDefault();try{wn();const n=e.dataTransfer.getData(en.DRAG_KEY);if(!n){St();return}w.setEditCanvas(j.IS_CREATE,!1);const t=nt(n);let o=yield Pt(t);V(o,e.offsetX-o.attr.w/2,e.offsetY-o.attr.h/2),w.addComponentList(o,!1,!0),w.setTargetSelectChart(o.id),St()}catch(n){Tn(),window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...")}}),wt=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},Nt=(e,n)=>{if(n){w.setTargetSelectChart(n.id);return}w.setTargetSelectChart(void 0)},Hn=(e,n)=>{var p;if(e.which==2||(p=window.$KeyboardActive)!=null&&p.space)return;Nt();const t=e.offsetX,o=e.offsetY,a=e.screenX,v=e.screenY,l=w.getEditCanvas.scale;w.setMousePosition(void 0,void 0,t,o);const y=Ue.exports.throttle(m=>{w.setTargetSelectChart(),w.setEditCanvas(j.IS_SELECT,!0);const r=t+m.screenX-a,c=o+m.screenY-v;w.setMousePosition(r,c);const _={x1:0,y1:0,x2:0,y2:0};r>t&&c>o?(_.x1=t,_.y1=o,_.x2=Math.round(t+(m.screenX-a)/l),_.y2=Math.round(o+(m.screenY-v)/l)):r>t&&c<o?(_.x1=t,_.y1=Math.round(o-(v-m.screenY)/l),_.x2=Math.round(t+(m.screenX-a)/l),_.y2=o):r<t&&c>o?(_.x1=Math.round(t-(a-m.screenX)/l),_.y1=o,_.x2=t,_.y2=Math.round(o+(m.screenY-v)/l)):(_.x1=Math.round(t-(a-m.screenX)/l),_.y1=Math.round(o-(v-m.screenY)/l),_.x2=t,_.y2=o),w.getComponentList.forEach(d=>{if(!w.getTargetChart.selectId.includes(d.id)){const{x:C,y:i,w:E,h:S}=d.attr,M={x1:C,y1:i,x2:C+E,y2:i+S};M.x1-_.x1>=0&&M.y1-_.y1>=0&&M.x2-_.x2<=0&&M.y2-_.y2<=0&&!d.status.lock&&!d.status.hide&&w.setTargetSelectChart(d.id,!0)}})},30),g=()=>{y.cancel(),w.setEditCanvas(j.IS_SELECT,!1),w.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",g)},Kt=()=>({mouseClickHandle:(a,v)=>{var l;if(a.preventDefault(),a.stopPropagation(),!v.status.lock&&(l=window.$KeyboardActive)!=null&&l.ctrl)if(w.targetChart.selectId.includes(v.id)){const y=w.targetChart.selectId.filter(g=>g!==v.id);w.setTargetSelectChart(y)}else w.setTargetSelectChart(v.id,!0)},mousedownHandle:(a,v)=>{var i;if(a.preventDefault(),a.stopPropagation(),v.status.lock||(Bn(),a.buttons===qe.LEFT&&((i=window.$KeyboardActive)==null?void 0:i.ctrl)))return;const l=w.getTargetChart.selectId;if(a.buttons===qe.RIGHT&&l.length>1&&l.includes(v.id)||(w.setTargetSelectChart(v.id),a.buttons===qe.RIGHT))return;const y=w.getEditCanvas.scale,g=w.getEditCanvasConfig.width,p=w.getEditCanvasConfig.height,m=new Map;w.getTargetChart.selectId.forEach(E=>{const S=w.fetchTargetIndex(E);if(S!==-1){const{x:M,y:b,w:G,h:X}=tn(w.getComponentList[S]).attr;m.set(E,{x:M,y:b,w:G,h:X})}});const r=a.screenX,c=a.screenY;let _=[];w.getTargetChart.selectId.forEach(E=>{if(!m.has(E))return;const S=w.fetchTargetIndex(E);_.push(Ue.exports.cloneDeep(w.getComponentList[S]))}),w.setMousePosition(void 0,void 0,r,c);const d=Ue.exports.throttle(E=>{w.setEditCanvas(j.IS_DRAG,!0),w.setMousePosition(E.screenX,E.screenY);let S=(E.screenX-r)/y,M=(E.screenY-c)/y;w.getTargetChart.selectId.forEach(b=>{if(!m.has(b))return;const G=w.fetchTargetIndex(b),{x:X,y:q,w:T,h}=m.get(b),H=w.getComponentList[G];let K=Math.round(X+S),x=Math.round(q+M);const R=50;K=K<-T+R?-T+R:K,x=x<-h+R?-h+R:x,K=K>g-R?g-R:K,x=x>p-R?p-R:x,H&&(H.attr=Object.assign(H.attr,{x:K,y:x}))})},20),C=()=>{try{w.setMousePosition(0,0,0,0),w.setEditCanvas(j.IS_DRAG,!1),_.length&&(w.getTargetChart.selectId.forEach(E=>{if(!m.has(E))return;const S=w.fetchTargetIndex(E),M=w.getComponentList[S];_.forEach(b=>{b.id===E&&(b.attr=Object.assign(b.attr,{offsetX:M.attr.x-b.attr.x,offsetY:M.attr.y-b.attr.y}))})}),w.moveComponentList(_)),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",C)}catch(E){console.log(E)}};document.addEventListener("mousemove",d),document.addEventListener("mouseup",C)},mouseenterHandle:(a,v)=>{a.preventDefault(),a.stopPropagation(),w.getEditCanvas.isSelect||w.setTargetHoverChart(v.id)},mouseleaveHandle:(a,v)=>{a.preventDefault(),a.stopPropagation(),w.setEditCanvas(j.IS_DRAG,!1),w.setTargetHoverChart(void 0)}}),Pn=(e,n,t)=>{e.stopPropagation(),e.preventDefault(),w.setEditCanvas(j.IS_DRAG,!0);const o=w.getEditCanvas.scale,a=t.x,v=t.y,l=t.w,y=t.h,g=e.screenX,p=e.screenY;w.setMousePosition(g,p);const m=Ue.exports.throttle(c=>{w.setMousePosition(c.screenX,c.screenY);let _=Math.round((c.screenX-g)/o),d=Math.round((c.screenY-p)/o);const C=/t/.test(n),i=/b/.test(n),E=/l/.test(n),S=/r/.test(n),M=y+(C?-d:i?d:0),b=l+(E?-_:S?_:0);t.h=M>0?M:0,t.w=b>0?b:0,t.x=a+(E?_:0),t.y=v+(C?d:0)},50),r=()=>{w.setEditCanvas(j.IS_DRAG,!1),w.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",r)};const Un=["onMousedown"],$n=ue({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const n=e;ke(r=>({89737518:s(l)}));const t=Fe(),o=re(),a=["t","r","b","l","lt","rt","lb","rb"],v=["n","e","s","w","nw","ne","sw","se"],l=U(()=>t.getAppTheme),y=U(()=>n.item.status.lock?!1:n.item.id===o.getTargetChart.hoverId),g=U(()=>{const r=n.item.id;return n.item.status.lock?!1:o.getTargetChart.selectId.find(c=>c===r)}),p=U(()=>n.item.status.lock),m=U(()=>n.item.status.hide);return(r,c)=>(A(),z("div",{class:de(["go-shape-box",{lock:s(p),hide:s(m)}])},[dt(r.$slots,"default",{},void 0,!0),e.hiddenPoint?ge("",!0):(A(!0),z(he,{key:0},ye(s(g)?a:[],(_,d)=>(A(),z("div",{class:de(`shape-point ${_}`),key:d,style:ae(s(yn)(_,d,e.item.attr,v)),onMousedown:C=>s(Pn)(C,_,e.item.attr)},null,46,Un))),128)),W("div",{class:"shape-modal",style:ae(s(we)(e.item.attr))},[W("div",{class:de(["shape-modal-select",{active:s(g)}])},null,2),W("div",{class:de(["shape-modal-change",{selectActive:s(g),hoverActive:s(y)}])},null,2)],4)],2))}});var rt=ce($n,[["__scopeId","data-v-61fcf376"]]);const Nn={class:"go-edit-group-box"},Kn=ue({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const n=re(),{handleContextMenu:t}=pt(),{mouseenterHandle:o,mouseleaveHandle:a,mousedownHandle:v,mouseClickHandle:l}=Kt(),y=(m,r,c)=>{const _=d=>r.filter(C=>d.includes(C.key));if(n.getTargetChart.selectId.length>1)return _([D.GROUP,D.DELETE]);{const d=[];c.status.lock?d.push(D.LOCK):d.push(D.UNLOCK),c.status.hide?d.push(D.HIDE):d.push(D.SHOW);const C=[D.UN_GROUP];return[..._(C),_n(),...m.filter(i=>!d.includes(i.key))]}},g=U(()=>{const m=n.getEditCanvasConfig.chartThemeColor;return Lt[m]}),p=U(()=>n.getEditCanvasConfig.chartThemeSetting);return(m,r)=>(A(),z("div",Nn,[(A(),N(s(rt),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:de(s(ot)(e.groupData.styles.animations)),style:ae(P(P(P(P(P({},s($e)(e.groupData.attr,e.groupIndex)),s(we)(e.groupData.attr)),s(He)(e.groupData.styles)),s(st)(e.groupData.styles)),s(Rt)(e.groupData.styles))),onClick:r[0]||(r[0]=c=>s(l)(c,e.groupData)),onMousedown:r[1]||(r[1]=c=>s(v)(c,e.groupData)),onMouseenter:r[2]||(r[2]=c=>s(o)(c,e.groupData)),onMouseleave:r[3]||(r[3]=c=>s(a)(c,e.groupData)),onContextmenu:r[4]||(r[4]=c=>s(t)(c,e.groupData,y))},{default:k(()=>[(A(!0),z(he,null,ye(e.groupData.groupList,c=>(A(),N(s(rt),{key:c.id,"data-id":c.id,index:e.groupIndex,item:c,hiddenPoint:!0,style:ae(P({},s($e)(c.attr,e.groupIndex)))},{default:k(()=>[(A(),N(Ee(c.chartConfig.chartKey),{class:de(["edit-content-chart",s(ot)(c.styles.animations)]),chartConfig:c,themeSetting:s(p),themeColor:s(g),style:ae(P(P(P({},s(we)(c.attr)),s(He)(c.styles)),s(st)(c.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}});const Gn={class:"go-edit-align-line"},Yn=ue({__name:"index",setup(e){ke(d=>({"7e4eb55d":s(l)}));const n=Fe(),t=re(),o=ft(),a=Ne({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),v=d=>d?{left:`${d.x?d.x:0}px`,top:`${d.y?d.y:0}px`}:{},l=U(()=>n.getAppTheme),y=U(()=>o.getChartAlignRange),g=U(()=>t.getEditCanvas[j.IS_DRAG]),p=(d,C)=>Math.abs(d-C)<=y.value,m=U(()=>t.getTargetChart.selectId),r=U(()=>t.getComponentList[t.fetchTargetIndex()]),c=U(()=>{var d;return((d=r.value)==null?void 0:d.attr)||{}}),_=U(()=>({id:"0",attr:{w:Ct(t.getEditCanvasConfig.width),h:Ct(t.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ve(()=>t.getMousePosition,oe(()=>{try{if(!g.value||m.value.length!==1)return;const d=c.value.w,C=c.value.h,i=c.value.x,E=i+d/2,S=i+d,M=[i,E,S],b=c.value.y,G=b+C/2,X=b+C,q=[b,G,X];a.select.clear(),a.sorptioned.y=!1;const T=t.getComponentList.map(h=>({id:h.id,attr:h.attr}));T.push(_.value),a.lineArr.forEach(h=>{T.forEach(H=>{if(m.value[0]===H.id)return;const K=H.attr.w,x=H.attr.h,R=H.attr.x,u=R+K/2,f=R+K,F=[R,u,f],L=H.attr.y,Y=L+x/2,$=L+x,ie=[L,Y,$];h.includes("rowt")&&(p(b,L)&&(a.select.set(h,{y:L}),V(r.value,i,L)),p(b,Y)&&(a.select.set(h,{y:Y}),V(r.value,i,Y)),p(b,$)&&(a.select.set(h,{y:$}),V(r.value,i,$))),h.includes("rowc")&&(p(G,L)&&(a.select.set(h,{y:L}),V(r.value,i,L-C/2)),p(G,Y)&&(a.select.set(h,{y:Y}),V(r.value,i,Y-C/2)),p(G,$)&&(a.select.set(h,{y:$}),V(r.value,i,$-C/2))),h.includes("rowb")&&(p(X,L)&&(a.select.set(h,{y:L}),V(r.value,i,L-C)),p(X,Y)&&(a.select.set(h,{y:Y}),V(r.value,i,Y-C)),p(X,$)&&(a.select.set(h,{y:$}),V(r.value,i,$-C))),h.includes("coll")&&(p(i,R)&&(a.select.set(h,{x:R}),V(r.value,R,b)),p(i,u)&&(a.select.set(h,{x:u}),V(r.value,u,b)),p(i,f)&&(a.select.set(h,{x:f}),V(r.value,f,b))),h.includes("colc")&&(p(E,R)&&(a.select.set(h,{x:R}),V(r.value,R-d/2,b)),p(E,u)&&(a.select.set(h,{x:u}),V(r.value,u-d/2,b)),p(E,f)&&(a.select.set(h,{x:f}),V(r.value,f-d/2,b))),h.includes("colr")&&(p(S,R)&&(a.select.set(h,{x:R}),V(r.value,R-d,b)),p(S,u)&&(a.select.set(h,{x:u}),V(r.value,u-d,b)),p(S,f)&&(a.select.set(h,{x:f}),V(r.value,f-d,b)))})})}catch(d){console.log(d)}},200),{deep:!0}),ve(()=>g.value,d=>{d||(a.select.clear(),a.sorptioned.y=!1)}),(d,C)=>(A(),z("div",Gn,[(A(!0),z(he,null,ye(a.lineArr,i=>(A(),z("div",{class:de(["line",[i.includes("row")?"row":"col",a.select.has(i)&&"visible"]]),key:i,style:ae(v(a.select.get(i)))},null,6))),128))]))}});var Xn=ce(Yn,[["__scopeId","data-v-0b9debc6"]]);const Wn=ue({__name:"index",setup(e){return(n,t)=>{const o=I("n-watermark");return A(),N(o,{id:"go-edit-watermark",content:s(nn),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});var zn=ce(Wn,[["__scopeId","data-v-60cb5871"]]);const Gt=e=>(Bt("data-v-ca44f6dc"),e=e(),It(),e),Vn=Gt(()=>W("div",{class:"select-background"},null,-1)),qn=Gt(()=>W("div",{class:"select-border"},null,-1)),Jn=[Vn,qn],Qn=ue({__name:"index",setup(e){ke(y=>({"2cf55ebd":s(v)}));const n=Fe(),t=re(),{isSelect:o,scale:a}=Ke(t.getEditCanvas),v=U(()=>n.getAppTheme),l=Z();return ve(()=>t.getMousePosition,y=>{if(!o.value)return;const{startX:g,startY:p,x:m,y:r}=y,c={zIndex:yt,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};m>g&&r>p?(c.x=g,c.y=p,c.w=Math.round((m-g)/a.value),c.h=Math.round((r-p)/a.value)):m>g&&r<p?(c.x=g,c.w=Math.round((m-g)/a.value),c.h=Math.round((p-r)/a.value),c.y=p-c.h):m<g&&r>p?(c.y=p,c.w=Math.round((g-m)/a.value),c.h=Math.round((r-p)/a.value),c.x=g-c.w):(c.w=Math.round((g-m)/a.value),c.h=Math.round((p-r)/a.value),c.x=g-c.w,c.y=p-c.h),l.value=P(P({},$e(c,yt)),we(c))},{deep:!0}),(y,g)=>s(o)?(A(),z("div",{key:0,class:"go-edit-select",style:ae(l.value)},Jn,4)):ge("",!0)}});var Zn=ce(Qn,[["__scopeId","data-v-ca44f6dc"]]);const jn=ue({__name:"index",setup(e){const n=re(),{getEditCanvasConfig:t,getEditCanvas:o}=Ke(n),a=U(()=>({w:t.value.width,h:t.value.height})),v=U(()=>{const y={transform:`scale(${o.value.scale})`};return P(P({},we(a.value)),y)}),l=U(()=>{const y=o.value.isCreate&&{"z-index":99999};return P(P({},we(a.value)),y)});return(y,g)=>(A(),z("div",{class:"go-edit-range go-transition",style:ae(s(v)),onMousedown:g[0]||(g[0]=p=>s(Hn)(p,void 0))},[dt(y.$slots,"default",{},void 0,!0),O(s(zn)),O(s(Xn)),O(s(Zn)),W("div",{class:"go-edit-range-model",style:ae(s(l))},null,4)],36))}});var eo=ce(jn,[["__scopeId","data-v-0465a366"]]),Yt=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ut=!1,ct=!1;try{var et={get passive(){return ut=!0},get once(){return ct=ut=!0}};Yt&&(window.addEventListener("test",et,et),window.removeEventListener("test",et,!0))}catch(e){}function to(e,n,t,o){if(o&&typeof o!="boolean"&&!ct){var a=o.once,v=o.capture,l=t;!ct&&a&&(l=t.__once||function y(g){this.removeEventListener(n,y,v),t.call(this,g)},t.__once=l),e.addEventListener(n,l,ut?o:v)}e.addEventListener(n,t,o)}function no(e,n,t,o){var a=o&&typeof o!="boolean"?o.capture:o;e.removeEventListener(n,t,a),t.__once&&e.removeEventListener(n,t.__once,a)}function Tt(e,n,t,o){return to(e,n,t,o),function(){no(e,n,t,o)}}var xt=new Date().getTime();function oo(e){var n=new Date().getTime(),t=Math.max(0,16-(n-xt)),o=setTimeout(e,t);return xt=n,o}var so=["","webkit","moz","o","ms"],At=oo,Dt=function(n,t){return n+(n?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};Yt&&so.some(function(e){var n=Dt(e,"request");return n in window&&(Dt(e,"cancel"),At=function(o){return window[n](o)}),!!At});Function.prototype.bind.call(Function.prototype.call,[].slice);Function.prototype.bind.call(Function.prototype.call,[].slice);const ao={class:"go-sketch-rule"},ro={key:1,class:"fix-edit-screens-block"},uo=ue({__name:"index",setup(e){ke(x=>({b14e8092:s(G),"00f7c3e2":s(M),"1eb612fe":c.value}));const n=re(),t=Ut(),o=Fe(),a=20;let v=[0,0],l=[0,0];const y=Z(),g=Z(!0),p=Z(),m=Z(),r=Z(!1),c=Z("auto"),{width:_,height:d}=Ke(n.getEditCanvasConfig),C=Z(0),i=Z(0),E=Ne({h:[],v:[]}),S=U(()=>n.getEditCanvas.scale),M=U(()=>`${d.value*2}px`),b=U(()=>o.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),G=U(()=>o.getAppTheme),X=x=>{if(x.ctrlKey||x.metaKey){x.preventDefault();let R=S.value;if(x.wheelDelta>=0&&S.value<2){R=S.value+.05,n.setScale(R);return}x.wheelDelta<0&&S.value>.1&&(R=S.value-.05,n.setScale(R))}},q=()=>{if(!y.value)return;const x=y.value.getBoundingClientRect(),R=p.value.getBoundingClientRect();C.value=(x.left+a-R.left)/S.value,i.value=(x.top+a-R.top)/S.value},T=x=>{var L,Y;if(x.preventDefault(),x.stopPropagation(),x.which==2)r.value=!0;else if(!((L=window.$KeyboardActive)!=null&&L.space))return;(Y=document.activeElement)==null||Y.blur();const R=x.pageX,u=x.pageY,f=Tt(window,"mousemove",$=>{const ie=$.pageX-R,Te=$.pageY-u,[Ge,Le]=v,[Ye,be]=l;v=[Le,ie],l=[be,Te],y.value.scrollLeft-=Le>Ge?Math.abs(Le-Ge):-Math.abs(Le-Ge),y.value.scrollTop-=be>Ye?Math.abs(be-Ye):-Math.abs(be-Ye)}),F=Tt(window,"mouseup",()=>{f(),F(),v=[0,0],l=[0,0],r.value=!1})},h=()=>{const x=document.getElementById("go-chart-edit-layout");return x?{height:x.clientHeight-25,width:x.clientWidth}:{width:_.value,height:d.value}},H=()=>{g.value=!1,setTimeout(()=>{g.value=!0},10)},K=()=>{const{width:x,height:R}=m.value.getBoundingClientRect(),{width:u,height:f}=h();y.value.scrollLeft=x/2-u/2,y.value.scrollTop=R/2-f/2};return ve(()=>o.getDarkTheme,()=>{H()}),ve(()=>S.value,(x,R)=>{R!==x&&t.getRePositionCanvas?(t.setItemUnHandle(at.RE_POSITION_CANVAS,!1),q(),setTimeout(()=>{K(),H()},400)):oe(H,20)}),ve(()=>r.value,x=>{c.value=x?"grab":"auto"}),lt(()=>{y.value&&(y.value.addEventListener("wheel",X,{passive:!1}),K())}),bt(()=>{y.value&&y.value.removeEventListener("wheel",X)}),window.onKeySpacePressHold=x=>{r.value=x},(x,R)=>{const u=I("sketch-rule");return A(),z("div",ao,[g.value?(A(),N(u,{key:0,thick:a,scale:s(S),width:h().width,height:h().height,startX:C.value,startY:i.value,lines:E,palette:s(b)},null,8,["scale","width","height","startX","startY","lines","palette"])):ge("",!0),W("div",{ref_key:"$app",ref:y,class:"edit-screens",onScroll:q},[W("div",{ref_key:"$container",ref:m,class:"edit-screen-container",style:ae({width:s(_)*2+"px"})},[W("div",{ref_key:"refSketchRuleBox",ref:p,class:"canvas",onMousedown:T,style:ae({marginLeft:"-"+(h().width/2-25)+"px"})},[W("div",{style:ae({pointerEvents:r.value?"none":"auto"})},[dt(x.$slots,"default",{},void 0,!0)],4)],36)],4)],544),s(o).getDarkTheme?(A(),z("div",ro)):ge("",!0)])}}});var co=ce(uo,[["__scopeId","data-v-16596de5"]]);const tt={[B.ADD]:"\u65B0\u589E",[B.DELETE]:"\u5220\u9664",[B.UPDATE]:"\u66F4\u65B0",[B.MOVE]:"\u79FB\u52A8",[B.PASTE]:"\u7C98\u8D34",[B.COPY]:"\u590D\u5236",[B.CUT]:"\u526A\u5207",[B.TOP]:"\u7F6E\u9876",[B.BOTTOM]:"\u7F6E\u5E95",[B.UP]:"\u4E0A\u79FB",[B.DOWN]:"\u4E0B\u79FB",[B.GROUP]:"\u6210\u7EC4",[B.UN_GROUP]:"\u89E3\u7EC4",[B.LOCK]:"\u9501\u5B9A",[B.UNLOCK]:"\u89E3\u9501",[B.HIDE]:"\u9690\u85CF",[B.SHOW]:"\u663E\u793A",[Ie.CANVAS]:"\u753B\u5E03\u521D\u59CB\u5316"};var io=Array.prototype,lo=io.reverse;function fo(e){return e==null?e:lo.call(e)}var po=fo;const Xt=e=>(Bt("data-v-3d118cd5"),e=e(),It(),e),vo={class:"go-flex-items-center"},ho=Xt(()=>W("span",{class:"btn-text"},"\u5386\u53F2\u8BB0\u5F55",-1)),go={class:"history-list-box"},_o=["title"],mo=Xt(()=>W("div",{class:"popover-modal"},null,-1)),Co=ue({__name:"index",setup(e){const{DesktopOutlineIcon:n,PencilIcon:t,TrashIcon:o,CopyIcon:a,LayersIcon:v,DuplicateIcon:l,HelpOutlineIcon:y,LockClosedOutlineIcon:g,LockOpenOutlineIcon:p,EyeOffOutlineIcon:m,EyeOutlineIcon:r}=De.ionicons5,{StackedMoveIcon:c,Carbon3DCursorIcon:_,Carbon3DSoftwareIcon:d}=De.carbon,C=Ft(),i=M=>{if(M.targetType===Ie.CANVAS)return n;switch(M.actionType){case B.UPDATE:return t;case B.DELETE:return o;case B.PASTE:return a;case B.TOP:return v;case B.BOTTOM:return v;case B.UP:return v;case B.DOWN:return v;case B.MOVE:return c;case B.ADD:return l;case B.GROUP:return _;case B.UN_GROUP:return d;case B.LOCK:return g;case B.UNLOCK:return p;case B.HIDE:return m;case B.SHOW:return r;default:return t}},E=M=>{if(M.targetType===Ie.CANVAS)return tt[Ie.CANVAS];if(M.actionType===B.GROUP||M.actionType===B.UN_GROUP)return`${tt[M.actionType]}`;if(M.historyData.length)return`${tt[M.actionType]} - ${M.historyData[0].chartConfig.title}`},S=U(()=>{const b=C.getBackStack.map(G=>({label:E(G),icon:i(G)}));return po(b.filter(G=>G.label))});return(M,b)=>{const G=I("n-button"),X=I("n-icon"),q=I("n-text"),T=I("n-scrollbar"),h=I("n-popover"),H=I("n-tooltip");return A(),z("div",vo,[O(h,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:k(()=>[O(G,{class:"mr-10",secondary:"",size:"small",disabled:s(S).length===0},{default:k(()=>[ho]),_:1},8,["disabled"])]),default:k(()=>[W("div",go,[O(T,{style:{"max-height":"500px"}},{default:k(()=>[(A(!0),z(he,null,ye(s(S),(K,x)=>(A(),z("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:x,title:K.label},[O(X,{class:"item-icon",size:"16",depth:2,component:K.icon},null,8,["component"]),O(q,{depth:"2"},{default:k(()=>[Se(pe(K.label),1)]),_:2},1024)],8,_o))),128))]),_:1}),mo])]),_:1}),O(H,{trigger:"hover"},{trigger:k(()=>[O(X,{size:"21",depth:3},{default:k(()=>[O(s(y))]),_:1})]),default:k(()=>[W("span",null,"\u6700\u591A\u53EA\u4FDD\u7559"+pe(s(on))+"\u6761\u8BB0\u5F55",1)]),_:1})])}}});var yo=ce(Co,[["__scopeId","data-v-3d118cd5"]]);const Eo={class:"go-edit-bottom"},So=ue({__name:"index",setup(e){ke(i=>({60209769:a.value}));const{LockClosedOutlineIcon:n,LockOpenOutlineIcon:t}=De.ionicons5,o=Fe(),a=Z(o.getAppTheme),v=re(),{lockScale:l,scale:y}=Ke(v.getEditCanvas);let g=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"\u81EA\u9002\u5E94",value:0}];const p=Z(""),m=i=>{if(i===0){v.computedScale();return}v.setScale(i/100)},r=()=>{v.setEditCanvas(j.LOCK_SCALE,!l.value)},c=Z(100),_=i=>`${i}%`,d=i=>{v.setScale(i/100)},C=Ne({100:""});return sn(()=>{const i=(y.value*100).toFixed(0);p.value=`${i}%`,c.value=parseInt(i)}),(i,E)=>{const S=I("n-text"),M=I("n-space"),b=I("n-select"),G=I("n-icon"),X=I("n-button"),q=I("n-tooltip"),T=I("n-slider");return A(),z("div",Eo,[O(M,null,{default:k(()=>[O(s(yo)),O(S,{id:"keyboard-dress-show",depth:"3"})]),_:1}),O(M,{class:"bottom-ri"},{default:k(()=>[O(Dn),O(b,{disabled:s(l),class:"scale-btn",value:p.value,"onUpdate:value":[E[0]||(E[0]=h=>p.value=h),m],size:"mini",options:s(g)},null,8,["disabled","value","options"]),O(q,{trigger:"hover"},{trigger:k(()=>[O(X,{onClick:r,text:""},{default:k(()=>[O(G,{class:de(["lock-icon",{color:s(l)}]),size:"18",depth:2},{default:k(()=>[s(l)?(A(),N(s(n),{key:0})):(A(),N(s(t),{key:1}))]),_:1},8,["class"])]),_:1})]),default:k(()=>[W("span",null,pe(s(l)?"\u89E3\u9501":"\u9501\u5B9A")+"\u5F53\u524D\u6BD4\u4F8B",1)]),_:1}),O(T,{class:"scale-slider",value:c.value,"onUpdate:value":[E[1]||(E[1]=h=>c.value=h),d],"default-value":50,min:10,max:200,step:5,"format-tooltip":_,disabled:s(l),marks:C},null,8,["value","disabled","marks"])]),_:1})])}}});var wo=ce(So,[["__scopeId","data-v-4c80a168"]]);const To=Se("\u7CFB\u7EDF\u8BBE\u7F6E"),xo=ue({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:n}){const t=e,{HelpOutlineIcon:o,CloseIcon:a}=De.ionicons5,v=ft(),l=Z(!1),y=Ne([{key:_e.ASIDE_ALL_COLLAPSED,value:v.getAsideAllCollapsed,type:"switch",name:"\u83DC\u5355\u6298\u53E0",desc:"\u9996\u9875\u83DC\u5355\u6298\u53E0\u65F6\u9690\u85CF\u81F3\u754C\u9762\u5916"},{key:_e.HIDE_PACKAGE_ONE_CATEGORY,value:v.getHidePackageOneCategory,type:"switch",name:"\u9690\u85CF\u5206\u7C7B",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u8868\u5355\u5206\u7C7B\u53EA\u6709\u5355\u9879\u65F6\u9690\u85CF"},{key:_e.CHANGE_LANG_RELOAD,value:v.getChangeLangReload,type:"switch",name:"\u5207\u6362\u8BED\u8A00",desc:"\u5207\u6362\u8BED\u8A00\u91CD\u65B0\u52A0\u8F7D\u9875\u9762",tip:"\u82E5\u9047\u5230\u90E8\u5206\u533A\u57DF\u8BED\u8A00\u5207\u6362\u5931\u8D25\uFF0C\u5219\u5EFA\u8BAE\u5F00\u542F"},{key:"divider1",type:"divider",name:"",desc:"",value:""},{key:_e.CHART_TOOLS_STATUS_HIDE,value:v.getChartToolsStatusHide,type:"switch",name:"\u9690\u85CF\u5DE5\u5177\u680F",desc:"\u9F20\u6807\u79FB\u5165\u65F6\uFF0C\u4F1A\u5C55\u793A\u5207\u6362\u5230\u5C55\u5F00\u6A21\u5F0F"},{key:_e.CHART_TOOLS_STATUS,value:v.getChartToolsStatus,type:"select",name:"\u5DE5\u5177\u680F\u5C55\u793A",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u5DE5\u5177\u680F\u5C55\u793A\u65B9\u5F0F",options:[{label:"\u4FA7\u8FB9\u680F",value:Pe.ASIDE},{label:"\u5E95\u90E8 Dock",value:Pe.DOCK}]},{key:"divider0",type:"divider",name:"",desc:"",value:""},{key:_e.CHART_MOVE_DISTANCE,value:v.getChartMoveDistance,type:"number",name:"\u79FB\u52A8\u8DDD\u79BB",min:1,step:1,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u65B9\u5411\u952E\u63A7\u5236\u79FB\u52A8\u8DDD\u79BB"},{key:_e.CHART_ALIGN_RANGE,value:v.getChartAlignRange,type:"number",name:"\u5438\u9644\u8DDD\u79BB",min:10,step:2,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u79FB\u52A8\u56FE\u8868\u65F6\u7684\u5438\u9644\u8DDD\u79BB"}]);ve(()=>t.modelShow,m=>{l.value=m});const g=()=>{n("update:modelShow",!1)},p=(m,r)=>{v.setItem(r.key,r.value)};return(m,r)=>{const c=I("n-h3"),_=I("n-icon"),d=I("n-space"),C=I("n-divider"),i=I("n-text"),E=I("n-switch"),S=I("n-input-number"),M=I("n-select"),b=I("n-tooltip"),G=I("n-list-item"),X=I("n-list"),q=I("n-modal");return A(),N(q,{show:l.value,"onUpdate:show":r[0]||(r[0]=T=>l.value=T),onAfterLeave:g},{default:k(()=>[O(X,{bordered:"",class:"go-system-setting"},{header:k(()=>[O(d,{justify:"space-between"},{default:k(()=>[O(c,{class:"go-mb-0"},{default:k(()=>[To]),_:1}),O(_,{size:"20",class:"go-cursor-pointer",onClick:g},{default:k(()=>[O(s(a))]),_:1})]),_:1})]),default:k(()=>[(A(!0),z(he,null,ye(y,T=>(A(),N(G,{key:T.key},{default:k(()=>[T.type==="divider"?(A(),N(C,{key:0,style:{margin:"0"}})):(A(),N(d,{key:1,size:40},{default:k(()=>[O(d,null,{default:k(()=>[O(i,{class:"item-left"},{default:k(()=>[Se(pe(T.name),1)]),_:2},1024),T.type==="switch"?(A(),N(E,{key:0,value:T.value,"onUpdate:value":[h=>T.value=h,h=>p(h,T)],size:"small"},null,8,["value","onUpdate:value"])):T.type==="number"?(A(),N(S,{key:1,value:T.value,"onUpdate:value":[h=>T.value=h,h=>p(h,T)],class:"input-num-width",size:"small",step:T.step||null,suffix:T.suffix||null,min:T.min||0},null,8,["value","onUpdate:value","step","suffix","min"])):T.type==="select"?(A(),N(M,{key:2,class:"select-min-width",value:T.value,"onUpdate:value":[h=>T.value=h,h=>p(h,T)],size:"small",options:T.options},null,8,["value","onUpdate:value","options"])):ge("",!0)]),_:2},1024),O(d,null,{default:k(()=>[O(i,{class:"item-right"},{default:k(()=>[Se(pe(T.desc),1)]),_:2},1024),T.tip?(A(),N(b,{key:0,trigger:"hover"},{trigger:k(()=>[O(_,{size:"21"},{default:k(()=>[O(s(o))]),_:1})]),default:k(()=>[W("span",null,pe(T.tip),1)]),_:2},1024)):ge("",!0)]),_:2},1024)]),_:2},1024))]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])}}});var Ao=ce(xo,[["__scopeId","data-v-a43d81dc"]]);const Ae=re(),Do=()=>{Ae.setTargetSelectChart(void 0),an(rn(Ae.getStorageInfo||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),n=document.getElementById("go-edit-watermark");if(!e||!n){window.$message.error("\u5BFC\u51FA\u5931\u8D25\uFF01");return}const t=Ae.getEditCanvas.scale;Ae.setScale(1,!0),n.style.display="block",setTimeout(()=>{un(e,()=>{n&&(n.style.display="none"),Ae.setScale(t,!0)})},600)};var it=(e=>(e.TXT="text/plain",e.JSON="application/json",e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e))(it||{});const ko=()=>{const e=Z(),{updateComponent:n}=vt();return{importUploadFileListRef:e,importBeforeUpload:({file:a})=>{e.value=[];const v=a.file.type;return v!==it.JSON&&v!==it.TXT?(window.$message.warning("\u4EC5\u652F\u6301\u4E0A\u4F20 \u3010JSON\u3011 \u683C\u5F0F\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0},importCustomRequest:a=>{const{file:v}=a;cn(()=>{v.file?ln(v.file).then(l=>{xn({message:"\u8BF7\u9009\u62E9\u5BFC\u5165\u65B9\u5F0F:",positiveText:"\u65B0\u589E\uFF08\u53EF\u64A4\u56DE\uFF09",negativeText:"\u8986\u76D6\uFF08\u4E0D\u53EF\u64A4\u56DE\uFF09",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>le(void 0,null,function*(){try{l=nt(l),yield n(l,!1,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(y){console.log(y),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}}),onNegativeCallback:()=>le(void 0,null,function*(){try{l=nt(l),yield n(l,!0,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(y){console.log(y),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}})})}):window.$message.error("\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6570\u636E\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01")})}}},{updateComponent:Fo,dataSyncUpdate:kt}=vt(),Lo=re(),bo=()=>{const e=v=>Fo(v.detail,!0,!1),n=()=>le(void 0,null,function*(){kt&&(yield kt()),dispatchEvent(new CustomEvent(Je.CHART,{detail:Lo.getStorageInfo}))}),t=()=>{addEventListener("blur",n),addEventListener(Je.JSON,e)},o=()=>{removeEventListener(Je.JSON,e),removeEventListener("blur",n)};return(v,l)=>{l==Et.CHART_HOME_NAME&&o(),v==Et.CHART_HOME_NAME&&t()}},Oo=()=>{const e=Ht();ve(()=>e.name,bo(),{immediate:!0})};var Ce=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(Ce||{});const Mo={class:"btn-item"},Ro=ue({__name:"index",setup(e){const{DownloadIcon:n,ShareIcon:t,PawIcon:o,SettingsSharpIcon:a,CreateIcon:v}=De.ionicons5,l=ft(),y=re();Ht(),Oo();let g=null;const p=Z(!1),m=Z(!0),r=Z(!0),{importUploadFileListRef:c,importCustomRequest:_,importBeforeUpload:d}=ko(),C=U(()=>l.getChartToolsStatus===Pe.ASIDE),i=U(()=>l.getChartToolsStatusHide),E=U(()=>m.value&&i.value),S=U(()=>{if(!C.value)return q;const T=[];return q.map(h=>{T.unshift(h)}),T}),M=()=>{g=setTimeout(()=>{m.value&&(m.value=!1,r.value=!0)},200),setTimeout(()=>{r.value=!1},400)},b=()=>{clearTimeout(g),m.value||(m.value=!0)},G=()=>{window.$message.warning("\u5C06\u5F00\u542F\u5931\u7126\u66F4\u65B0\uFF01"),setTimeout(()=>{const T=fn(pn.CHART_EDIT_NAME,"href");if(!T)return;const h=vn();X(h),hn(T,[h],void 0,!0)},1e3)},X=T=>{const h=y.getStorageInfo,H=gn(Me.GO_CHART_STORAGE_LIST)||[];if(H!=null&&H.length){const K=H.findIndex(x=>x.id===T);K!==-1?(H.splice(K,1,fe(P({},h),{id:T})),je(Me.GO_CHART_STORAGE_LIST,H)):(H.push(fe(P({},h),{id:T})),je(Me.GO_CHART_STORAGE_LIST,H))}else je(Me.GO_CHART_STORAGE_LIST,[fe(P({},h),{id:T})])},q=[{key:"import",type:Ce.IMPORTUPLOAD,name:"\u5BFC\u5165",icon:t},{key:"export",type:Ce.BUTTON,name:"\u5BFC\u51FA",icon:n,handle:Do},{key:"edit",type:Ce.BUTTON,name:"\u7F16\u8F91",icon:v,handle:G},{key:"setting",type:Ce.BUTTON,name:"\u8BBE\u7F6E",icon:a,handle:()=>{p.value=!0}}];return(T,h)=>{const H=I("n-icon"),K=I("n-text"),x=I("n-button"),R=I("n-upload"),u=I("n-tooltip");return A(),z(he,null,[W("div",{class:de(["go-chart-edit-tools",[s(l).getChartToolsStatus,s(E)?"isMini":"unMini"]]),onClick:h[1]||(h[1]=f=>m.value&&(m.value=!1)),onMouseenter:M,onMouseleave:b},[Qe(O(H,{class:"asideLogo",size:"22"},{default:k(()=>[O(s(o))]),_:1},512),[[Ze,s(l).getChartToolsStatus===s(Pe).ASIDE&&s(E)]]),(A(!0),z(he,null,ye(s(S),(f,F)=>(A(),N(u,{key:f.key,disabled:!s(C)||s(i)&&r.value,trigger:"hover",placement:"left"},{trigger:k(()=>[W("div",Mo,[f.type===s(Ce).BUTTON?(A(),N(x,{key:0,circle:s(C),secondary:"",onClick:f.handle},{icon:k(()=>[s(C)?(A(),N(H,{key:0,size:"22"},{default:k(()=>[(A(),N(Ee(f.icon)))]),_:2},1024)):(A(),N(Ee(f.icon),{key:1}))]),default:k(()=>[Qe(O(K,{depth:"3"},{default:k(()=>[Se(pe(f.name),1)]),_:2},1536),[[Ze,!s(C)]])]),_:2},1032,["circle","onClick"])):f.type===s(Ce).IMPORTUPLOAD?(A(),N(R,{key:1,"file-list":s(c),"onUpdate:file-list":h[0]||(h[0]=L=>dn(c)?c.value=L:null),"show-file-list":!1,customRequest:s(_),onBeforeUpload:s(d)},{default:k(()=>[O(x,{circle:s(C),secondary:""},{icon:k(()=>[s(C)?(A(),N(H,{key:0,size:"22"},{default:k(()=>[(A(),N(Ee(f.icon)))]),_:2},1024)):(A(),N(Ee(f.icon),{key:1}))]),default:k(()=>[Qe(O(K,{depth:"3"},{default:k(()=>[Se(pe(f.name),1)]),_:2},1536),[[Ze,!s(C)]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):ge("",!0)])]),default:k(()=>[W("span",null,pe(f.name),1)]),_:2},1032,["disabled"]))),128))],34),O(s(Ao),{modelShow:p.value,"onUpdate:modelShow":h[2]||(h[2]=f=>p.value=f)},null,8,["modelShow"])],64)}}});var Bo=ce(Ro,[["__scopeId","data-v-85226682"]]);const Io=ue({__name:"index",setup(e){const n=re(),{handleContextMenu:t}=pt(),{dataSyncFetch:o}=vt();kn();const{mouseenterHandle:a,mouseleaveHandle:v,mousedownHandle:l,mouseClickHandle:y}=Kt(),g=(d,C,i)=>{if(n.getTargetChart.selectId.length>1)return C.filter(S=>[D.GROUP,D.DELETE].includes(S.key));const E=[];return i.status.lock?E.push(D.LOCK):E.push(D.UNLOCK),i.status.hide?E.push(D.HIDE):E.push(D.SHOW),d.filter(S=>!E.includes(S.key))},p=d=>{var C;return!!((C=d.chartConfig.filters)!=null&&C.length)},m=d=>{const C=d.chartConfig.filters;return!!(C!=null&&C.length)&&C[0].from!="query"},r=U(()=>n.getEditCanvasConfig.chartThemeSetting),c=U(()=>{const d=n.getEditCanvasConfig.chartThemeColor;return Lt[d]});U(()=>n.getEditCanvasConfig.filterShow);const _=U(()=>{const d=n.getEditCanvasConfig.background,C=n.getEditCanvasConfig.backgroundImage,S=n.getEditCanvasConfig.selectColor?{background:d||void 0}:{background:`url(${C}) no-repeat center center / cover !important`};return fe(P({},S),{width:"inherit",height:"inherit"})});return lt(()=>{On(),o()}),(d,C)=>(A(),N(s(An),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:s(Nt),onDrop:s(In),onDragover:s(wt),onDragenter:s(wt)},{aside:k(()=>[O(s(Bo))]),bottom:k(()=>[O(s(wo))]),default:k(()=>[O(s(co),null,{default:k(()=>[W("div",{id:"go-chart-edit-content",onContextmenu:C[0]||(C[0]=(...i)=>s(t)&&s(t)(...i))},[O(s(eo),null,{default:k(()=>[W("div",{style:ae(P(P({},s(He)(s(n).getEditCanvasConfig)),s(_)))},[(A(!0),z(he,null,ye(s(n).getComponentList,(i,E)=>(A(),z("div",{key:i.id},[i.isGroup?(A(),N(s(Kn),{key:0,groupData:i,groupIndex:E},null,8,["groupData","groupIndex"])):(A(),N(s(rt),{key:1,"data-id":i.id,index:E,style:ae(P(P({},s($e)(i.attr,E)),s(Rt)(i.styles))),item:i,onClick:S=>s(y)(S,i),onMousedown:S=>s(l)(S,i),onMouseenter:S=>s(a)(S,i),onMouseleave:S=>s(v)(S,i),onContextmenu:S=>s(t)(S,i,g)},{default:k(()=>[p(i)&&m(i)?(A(),N(s(En),{key:0,componentIdx:i.id,attr:i.attr,filters:i.chartConfig.filters},null,8,["componentIdx","attr","filters"])):ge("",!0),(A(),N(Ee(i.chartConfig.chartKey),{class:de(["edit-content-chart",s(ot)(i.styles.animations)]),chartConfig:i,themeSetting:s(r),themeColor:s(c),style:ae(P(P(P({},s(Sn)(i.attr,p(i))),s(He)(i.styles)),s(st)(i.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});var es=ce(Io,[["__scopeId","data-v-bff7ddf8"]]);export{es as default};
