var q=(e,t,s)=>new Promise((r,l)=>{var a=m=>{try{y(s.next(m))}catch(E){l(E)}},S=m=>{try{y(s.throw(m))}catch(E){l(E)}},y=m=>m.done?r(m.value):Promise.resolve(m.value).then(a,S);y((s=s.apply(e,t)).next())});import{d as G,v as h,R as U,cb as _e,X as ve,o as i,m as p,cc as pe,cd as ne,ce as me,cf as ge,a as fe,cg as he,ch as ye,ci as Ce,cj as be,j as se,an as ke,a5 as Oe,y as Se,r as x,c as R,aa as g,f as o,z as v,e as f,w as P,F as $,A as z,t as I,ck as Ee,c2 as Ie,G as xe,H as De,u as Te,a3 as Le,aH as we,a1 as L,bJ as Ae,bS as Ne,ad as Re}from"./index.js";import{C as Pe}from"./index-97b2e94e.js";import{i as $e,u as ze,f as Fe,j as Me,E as X,g as ae,p as Ue,P as w,k as A}from"./useSync.hook-f41f9754.js";import{i as oe}from"./icon-89b99ad8.js";import{l as Be,c as Q}from"./index-86e285f4.js";const Ge={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},W=G({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,s=h(""),r=()=>q(this,null,function*(){s.value=yield $e(t.chartConfig)});return U(()=>t.chartConfig.key,()=>r(),{immediate:!0}),(l,a)=>{const S=_e("lazy");return ve((i(),p("img",Ge,null,512)),[[S,s.value]])}}});function He(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ke=He;function Ve(e,t,s){var r=-1,l=e.length;t<0&&(t=-t>l?0:l+t),s=s>l?l:s,s<0&&(s+=l),l=t>s?0:s-t>>>0,t>>>=0;for(var a=Array(l);++r<l;)a[r]=e[r+t];return a}var je=Ve,Je=pe,Ye=je;function qe(e,t){return t.length<2?e:Je(e,Ye(t,0,-1))}var Xe=qe,Qe=ne,We=Ke,Ze=Xe,et=me;function tt(e,t){return t=Qe(t,e),e=Ze(e,t),e==null||delete e[et(We(t))]}var nt=tt,st=ge;function at(e){return st(e)?void 0:e}var ot=at,lt=fe,ct=be,it=nt,rt=ne,ut=he,dt=ot,_t=ye,vt=Ce,pt=1,mt=2,gt=4,ft=_t(function(e,t){var s={};if(e==null)return s;var r=!1;t=lt(t,function(a){return a=rt(a,e),r||(r=a.length>1),a}),ut(e,vt(e),s),r&&(s=ct(s,pt|mt|gt,dt));for(var l=t.length;l--;)it(s,t[l]);return s}),ht=ft;const yt=e=>(xe("data-v-e237d3a8"),e=e(),De(),e),Ct={class:"go-chart-common"},bt={key:0,class:"charts"},kt={class:"tree-top"},Ot=yt(()=>v("span",null,"\u6240\u6709\u5206\u7EC4",-1)),St={class:"tree-body"},Et={class:"chapter chapter-first"},It=["title"],xt={class:"label-count"},Dt=["onDragstart"],Tt=["title"],Lt={key:1,class:"chapter chapter-last"},wt=["title"],At=["onDragstart"],Nt=["title"],Rt={key:1,class:"no-charts"},Pt={class:"chart-content-list"},$t=G({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var j,J;const t=e,s=Be(()=>ke(()=>import("./index-dbe8031d.js"),["static/js/index-dbe8031d.js","static/css/index-f25f4c30.css","static/js/index-e56291fb.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-a1e82c00.css","static/js/icon-89b99ad8.js","static/js/useSync.hook-f41f9754.js","static/css/useSync.hook-7ccb77eb.css","static/js/plugin-dfc504ea.js","static/js/tables_list-16bd57ab.js","static/js/index-86e285f4.js","static/css/index-95e0b0d7.css","static/js/index-e25ecab6.js","static/js/index-e7184756.js","static/css/index-24d4cc74.css","static/js/index-97b2e94e.js","static/css/index-3e214e52.css"])),{ChevronUpOutlineIcon:r,ChevronDownOutlineIcon:l}=oe.ionicons5,a=ze(),S=h(a.getDimensions),y=h(a.getDimension);U(()=>a.getDimensions,()=>{S.value=a.getDimensions,y.value=a.getDimension});const m=(j=window.scopeList)!=null?j:[],E=h((J=window.scopeList)!=null?J:m[0]?m[0].value:""),D=Oe(()=>{const c=a.getTreeData,{chart:n,pivot:C}=c;return n&&t.menu=="Charts"?n[y.value]:C&&t.menu=="Tables"?C[y.value]:[]}),T=h(!1),b=h([]),le=()=>{T.value=!T.value;for(const c in D.value){b.value[D.value[c].id]=T.value;for(const n in D.value[c].child)b.value[D.value[c].child[n].id]=T.value}},H=c=>{b.value[c]=!b.value[c]};let u=Se({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const F=h(),ce=c=>{for(const n in c){u.selectOptions=c[n];break}};U(()=>t.selectOptions,c=>{if(u.categorysNum=0,!!c){c.list.forEach(n=>{const C=u.categorys[n.category];u.categorys[n.category]=C&&C.length?[...C,n]:[n],u.categoryNames[n.category]=n.categoryName,u.categorys.all.push(n)});for(const n in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:n,label:u.categoryNames[n]});ce(u.categorys),F.value=u.menuOptions[0].key}},{immediate:!0});const ie=c=>{u.selectOptions=u.categorys[c]},K=(c,n)=>{Q(n.chartKey,Fe(n)),Q(n.conKey,Me(n)),c.dataTransfer.setData(Ee.DRAG_KEY,Ie(ht(n,["image"]))),a.setEditCanvas(X.IS_CREATE,!0)},V=()=>{a.setEditCanvas(X.IS_CREATE,!1)};return(c,n)=>{const C=x("n-select"),M=x("n-icon"),Y=x("n-scrollbar"),re=x("n-menu");return i(),p("div",Ct,[e.menu=="Charts"||e.menu=="Tables"||e.menu=="Metrics"?(i(),p("div",bt,[e.menu=="Charts"||e.menu=="Tables"?(i(),R(C,{key:0,class:"dimension-btn",value:y.value,"onUpdate:value":n[0]||(n[0]=d=>y.value=d),options:S.value},null,8,["value","options"])):g("",!0),e.menu=="Metrics"?(i(),R(C,{key:1,class:"dimension-btn",value:E.value,"onUpdate:value":n[1]||(n[1]=d=>E.value=d),options:o(m)},null,8,["value","options"])):g("",!0),v("div",kt,[Ot,f(M,{size:"16",component:T.value?o(r):o(l),onClick:le},null,8,["component"])]),v("div",St,[f(Y,null,{default:P(()=>[(i(!0),p($,null,z(o(D),(d,Qt)=>(i(),p("div",{key:d.id,class:"tree-item"},[v("div",null,[v("div",Et,[f(M,{size:"16",component:b.value[d.id]?o(r):o(l),onClick:_=>H(d.id)},null,8,["component","onClick"]),v("label",{title:d.title,class:"text-nowrap label-title"},I(d.title),9,It),v("label",xt,I(d.count),1)]),d.child&&b.value[d.id]?(i(!0),p($,{key:0},z(d.child,_=>(i(),p("div",{class:"tree-child",key:_.id},[_.type!="chapter"?(i(),p("div",{key:0,class:"item-box",draggable:"",onDragstart:k=>K(k,_.chartConfig),onDragend:V},[f(o(W),{class:"list-img",chartConfig:_.chartConfig},null,8,["chartConfig"]),v("span",{title:_.title},I(_.title),9,Tt)],40,Dt)):g("",!0),_.type=="chapter"?(i(),p("div",Lt,[f(M,{size:"16",component:b.value[_.id]?o(r):o(l),onClick:k=>H(_.id)},null,8,["component","onClick"]),v("label",{title:_.title,class:"text-nowrap"},I(_.title),9,wt)])):g("",!0),_.child&&b.value[_.id]?(i(!0),p($,{key:2},z(_.child,(k,ue)=>(i(),p("div",{class:"tree-child",key:ue},[k.type!="chapter"?(i(),p("div",{key:0,class:"item-box",draggable:"",onDragstart:de=>K(de,k.chartConfig),onDragend:V},[f(o(W),{class:"list-img",chartConfig:k.chartConfig},null,8,["chartConfig"]),v("span",{title:k.title,class:"text-nowrap"},I(k.title),9,Nt)],40,At)):g("",!0)]))),128)):g("",!0)]))),128)):g("",!0)])]))),128))]),_:1})])])):g("",!0),e.menu!="Charts"&&e.menu!="Tables"&&e.menu!="Metrics"?(i(),p("div",Rt,[f(re,{class:"chart-menu-width",value:F.value,"onUpdate:value":[n[2]||(n[2]=d=>F.value=d),ie],options:o(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),v("div",Pt,[f(Y,null,{default:P(()=>[f(o(s),{menuOptions:o(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):g("",!0)])}}});var zt=se($t,[["__scopeId","data-v-e237d3a8"]]);const Ft=Te(),Mt=h(Ft.getAppTheme);ae();const{getCharts:Ut}=Le(ae()),Bt=we({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(Ue)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Gt,RoadmapIcon:Ht,SpellCheckIcon:Kt,GraphicalDataFlowIcon:Z}=oe.carbon,{getPackagesList:ee}=Bt(),O=[],te={[w.CHARTS]:{icon:L(Ht),label:A.CHARTS},[w.INFORMATIONS]:{icon:L(Kt),label:A.INFORMATIONS},[w.TABLES]:{icon:L(Gt),label:A.TABLES},[w.DECORATES]:{icon:L(Z),label:A.DECORATES},[w.METRICS]:{icon:L(Z),label:A.METRICS}},Vt=()=>{for(const e in ee)O.push({key:e,icon:te[e].icon,label:te[e].label,list:ee[e]})};Vt();O[0].key;const N=h(O[0].key),B=h(O[0]),jt=e=>{for(const t in O)O[t].key==e&&(B.value=O[t])};const Jt={class:"menu-width-box"},Yt={class:"menu-component-box"},qt=G({__name:"index",setup(e){return Ae(t=>({"7563b37f":o(Mt)})),(t,s)=>{const r=x("n-tab-pane"),l=x("n-tabs");return i(),R(o(Pe),{class:Re(["go-content-charts",{scoped:!o(Ut)}]),backIcon:!1},{default:P(()=>[v("aside",null,[v("div",Jt,[f(l,{value:o(N),"onUpdate:value":[s[0]||(s[0]=a=>Ne(N)?N.value=a:null),o(jt)],class:"tabs-box",size:"small",type:"segment"},{default:P(()=>[(i(!0),p($,null,z(o(O),a=>(i(),R(r,{key:a.key,name:a.key,size:"small","display-directive":"show:lazy"},{tab:P(()=>[v("span",null,I(a.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),v("div",Yt,[o(B)?(i(),R(o(zt),{selectOptions:o(B),menu:o(N),key:o(N)},null,8,["selectOptions","menu"])):g("",!0)])])])]),_:1},8,["class"])}}});var Xt=se(qt,[["__scopeId","data-v-7ab8059c"]]),an=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));export{W as _,an as i,ht as o};
