var J=Object.defineProperty;var L=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var U=(a,e,l)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,C=(a,e)=>{for(var l in e||(e={}))P.call(e,l)&&U(a,l,e[l]);if(L)for(var l of L(e))G.call(e,l)&&U(a,l,e[l]);return a};import{_ as K}from"./SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-96fc5e04.js";import{j as z,d as B,r as o,o as _,m as g,e as t,w as n,p as $,t as O,n as p,z as D,aJ as I,c as x,a3 as M,a5 as Q,f as u,aa as W,F as q,A as R}from"./index.js";import{u as V,l as X}from"./chartEditStore-3432bd27.js";import{i as Y}from"./icon-4c2ed461.js";import"./plugin-06d853b1.js";const Z=B({__name:"FilterItemBox",props:{name:{type:String,required:!1},alone:{type:Boolean,default:!1,required:!1},itemRightStyle:{type:Object,default:()=>{},required:!1},itemBoxStyle:{type:Object,default:()=>{},required:!1}},setup(a){return(e,l)=>{const r=o("n-space"),c=o("n-text");return _(),g("div",{class:"go-config-item-box",style:I(C({},a.itemBoxStyle))},[t(c,{class:"item-left",depth:"2"},{default:n(()=>[$(O(a.name)+" ",1),t(r,null,{default:n(()=>[p(e.$slots,"name",{},void 0,!0)]),_:3})]),_:3}),D("div",{class:"item-right",style:I(C({gridTemplateColumns:a.alone?"1fr":"1fr 1fr"},a.itemRightStyle))},[p(e.$slots,"default",{},void 0,!0)],4)],4)}}});var F=z(Z,[["__scopeId","data-v-05d1f298"]]);const ee=B({__name:"index",props:{name:{type:String,required:!0},expanded:{type:Boolean,required:!0,default:!1}},setup(a){const e=a,l=r=>{r.preventDefault(),r.stopPropagation()};return(r,c)=>{const h=o("n-collapse-item"),f=o("n-collapse");return _(),x(f,{"arrow-placement":"right","expanded-names":e.expanded?e.name:null,accordion:""},{"header-extra":n(()=>[D("div",{onClick:l},[p(r.$slots,"header")])]),default:n(()=>[t(h,{title:e.name,name:e.name},{default:n(()=>[p(r.$slots,"default")]),_:3},8,["title","name"])]),_:3},8,["expanded-names"])}}});const te={class:"go-config-item-box"},ne=B({__name:"index",props:{name:{type:String,required:!1},alone:{type:Boolean,default:!1,required:!1},itemRightStyle:{type:Object,default:()=>{},required:!1}},setup(a){return(e,l)=>{const r=o("n-text");return _(),g("div",te,[t(r,{class:"item-left",depth:"2"},{default:n(()=>[$(O(a.name)+" ",1),p(e.$slots,"name",{},void 0,!0)]),_:3}),D("div",{class:"item-right",style:I(C({gridTemplateColumns:a.alone?"1fr":"1fr 1fr"},a.itemRightStyle))},[p(e.$slots,"default",{},void 0,!0)],4)])}}});var ae=z(ne,[["__scopeId","data-v-61259120"]]);const le=B({__name:"index",props:{filter:{type:Object,required:!0},remove:{type:Function},idx:{type:Number,required:!0}},setup(a){const e=a,{RemoveIcon:l}=Y.ionicons5,{remove:r}=M(e),c={margin:"12px 0"},h=m=>!e.filter.name||e.filter.name.length==0?"\u7B5B\u9009\u5668 - \u672A\u547D\u540D"+m:"\u7B5B\u9009\u5668 - "+e.filter.name,f=V(),S=Q(()=>f.getComponentList.filter(d=>d.chartConfig.sourceID&&d.chartConfig.fields).map(d=>d.chartConfig).map(d=>{const k=[];for(const b in d.fields){const y=d.fields[b];k.push({value:y.field,label:y.name})}const v="diagram-"+d.sourceID;return{key:v,name:d.title,fields:k,expanded:e.filter.diagramIds.includes(v)}}));return(m,i)=>{const d=o("n-icon"),k=o("n-button"),v=o("n-select"),b=o("n-tree-select"),y=o("n-input"),j=o("n-checkbox"),E=o("n-gi"),N=o("n-grid"),T=o("n-checkbox-group"),w=o("n-space"),A=o("n-card");return _(),x(A,{title:h(e.idx),size:"small","header-style":{fontSize:"14px"}},{"header-extra":n(()=>[t(k,{quaternary:"",title:"\u79FB\u9664",onClick:u(r)},{default:n(()=>[t(d,{size:"20"},{default:n(()=>[t(u(l))]),_:1})]),_:1},8,["onClick"])]),default:n(()=>[t(u(F),{name:"\u7C7B\u578B",alone:!0,itemBoxStyle:c},{default:n(()=>[t(v,{value:e.filter.type,"onUpdate:value":i[0]||(i[0]=s=>e.filter.type=s),options:e.filter.typeOptions,size:"small"},null,8,["value","options"])]),_:1}),e.filter.type===u(X).SELECT?(_(),x(u(F),{key:0,name:"\u7B5B\u9009\u503C",alone:!0,itemBoxStyle:c},{default:n(()=>[t(b,{options:e.filter.fieldOptions,value:e.filter.field,"onUpdate:value":i[1]||(i[1]=s=>e.filter.field=s),size:"small"},null,8,["options","value"])]),_:1})):W("",!0),t(u(F),{name:"\u540D\u79F0",alone:!0,itemBoxStyle:c},{default:n(()=>[t(y,{value:e.filter.name,"onUpdate:value":i[2]||(i[2]=s=>e.filter.name=s),size:"small",maxlength:"6",minlength:"1","show-count":"",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["value"])]),_:1}),t(u(F),{name:"\u9ED8\u8BA4\u503C",alone:!0,itemBoxStyle:c},{default:n(()=>[t(y,{value:e.filter.defaultValue,"onUpdate:value":i[3]||(i[3]=s=>e.filter.defaultValue=s),size:"small"},null,8,["value"])]),_:1}),t(u(K),{name:"\u5173\u8054\u56FE\u8868",expanded:!0},{default:n(()=>[t(w,{vertical:"",size:[0,10]},{default:n(()=>[t(T,{value:e.filter.diagramIds,"onUpdate:value":i[4]||(i[4]=s=>e.filter.diagramIds=s)},{default:n(()=>[(_(!0),g(q,null,R(u(S),(s,se)=>(_(),x(N,{key:s.key,"x-gap":"12",cols:12},{default:n(()=>[t(E,{span:1},{default:n(()=>[t(j,{value:s.key},null,8,["value"])]),_:2},1024),t(E,{span:11},{default:n(()=>[t(u(ee),{name:s.name,expanded:e.filter.diagramIds.includes(s.key)},{default:n(()=>[t(u(ae),{name:"\u5173\u8054\u5B57\u6BB5",alone:!0},{default:n(()=>[t(v,{value:e.filter.diagramFields[s.key],"onUpdate:value":H=>e.filter.diagramFields[s.key]=H,options:s.fields,size:"small"},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["name","expanded"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["title"])}}});const oe=B({__name:"index",setup(a){const e=V(),l=()=>{e.addFilterList()},r=c=>{e.removeFilter(c)};return(c,h)=>{const f=o("n-button"),S=o("n-space");return _(),g(q,null,[t(f,{class:"btn-add",type:"info",onClick:l},{default:n(()=>[$(" + \u6DFB\u52A0 ")]),_:1}),t(S,{size:[0,10]},{default:n(()=>[(_(!0),g(q,null,R(u(e).getFilters,(m,i)=>(_(),x(u(le),{key:m.key,idx:i+1,filter:m,remove:()=>r(m.key)},null,8,["idx","filter","remove"]))),128))]),_:1})],64)}}});var me=z(oe,[["__scopeId","data-v-4274ce7e"]]);export{me as default};
