var X=(e,t,a)=>new Promise((l,o)=>{var c=_=>{try{f(a.next(_))}catch(I){o(I)}},h=_=>{try{f(a.throw(_))}catch(I){o(I)}},f=_=>_.done?l(_.value):Promise.resolve(_.value).then(c,h);f((a=a.apply(e,t)).next())});import{d as U,v as y,R as ae,ca as _e,X as pe,o as i,m as v,cb as ve,cc as me,cd as ne,ce as ge,a as he,cf as fe,cg as ye,ch as Ce,ci as be,j as se,an as ke,y as Oe,r as E,e as g,f as s,z as d,w as D,F as P,A as R,t as S,ab as b,D as Se,E as Ee,cj as Ie,c0 as xe,u as we,a3 as Ae,aA as De,a1 as L,bR as Le,c as F,b_ as Te,ad as Ne}from"./index.js";import{C as Pe}from"./index-8ff9fbe0.js";import{a as Re,f as $e,b as ze,p as Fe}from"./index-83fb0858.js";import{u as Be,E as Q,P as T,i as N}from"./chartEditStore-8e1937a4.js";import{i as oe}from"./icon-9275b84d.js";import{l as Ue,c as W}from"./index-82952d32.js";import{u as ce}from"./chartLayoutStore-eea11184.js";const Ke={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},Z=U({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=y(""),l=()=>X(this,null,function*(){a.value=yield Re(t.chartConfig)});return ae(()=>t.chartConfig.key,()=>l(),{immediate:!0}),(o,c)=>{const h=_e("lazy");return pe((i(),v("img",Ke,null,512)),[[h,a.value]])}}});function Ge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ve=Ge;function He(e,t,a){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var c=Array(o);++l<o;)c[l]=e[l+t];return c}var Me=He,je=ve,Ye=Me;function qe(e,t){return t.length<2?e:je(e,Ye(t,0,-1))}var Je=qe,Xe=ne,Qe=Ve,We=Je,Ze=me;function et(e,t){return t=Xe(t,e),e=We(e,t),e==null||delete e[Ze(Qe(t))]}var tt=et,at=ge;function nt(e){return at(e)?void 0:e}var st=nt,ot=he,ct=be,lt=tt,rt=ne,it=fe,ut=st,dt=ye,_t=Ce,pt=1,vt=2,mt=4,gt=dt(function(e,t){var a={};if(e==null)return a;var l=!1;t=ot(t,function(c){return c=rt(c,e),l||(l=c.length>1),c}),it(e,_t(e),a),l&&(a=ct(a,pt|vt|mt,ut));for(var o=t.length;o--;)lt(a,t[o]);return a}),ht=gt;const ft=e=>(Se("data-v-0680c5d5"),e=e(),Ee(),e),yt={class:"go-chart-common"},Ct={key:0,class:"charts"},bt={class:"tree-top"},kt=ft(()=>d("span",null,"\u6240\u6709\u5206\u7EC4",-1)),Ot={class:"tree-body"},St={class:"chapter chapter-first"},Et={class:"text-nowrap"},It={class:"label-count"},xt=["onDragstart"],wt={key:1,class:"chapter chapter-last"},At={class:"text-nowrap"},Dt=["onDragstart"],Lt={class:"text-nowrap"},Tt={key:1,class:"no-charts"},Nt={class:"chart-content-list"},Pt=U({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var M,j,Y,q;const t=e,a=Ue(()=>ke(()=>import("./index-5000e035.js"),["static/js/index-5000e035.js","static/css/index-edd8c06a.css","static/js/index-4813e975.js","static/css/index-1fb675e6.css","static/js/index.js","static/css/index-0098e772.css","static/js/icon-9275b84d.js","static/js/chartEditStore-8e1937a4.js","static/js/plugin-ca831a4a.js","static/js/chartLayoutStore-eea11184.js","static/js/index-82952d32.js","static/css/index-3cd64027.css","static/js/index-02ceb4bc.js","static/js/index-662f3bde.js","static/css/index-c496491e.css","static/js/index-83fb0858.js","static/css/index-187eb1a6.css","static/js/table_scrollboard-e30c6082.js","static/js/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-c4a100d2.js","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-314a8e76.css","static/js/SettingItemBox-4122dc9d.js","static/js/useTargetData.hook-3585e5c1.js","static/js/index-8ff9fbe0.js","static/css/index-66a1998b.css"])),{ChevronUpOutlineIcon:l,ChevronDownOutlineIcon:o}=oe.ionicons5,c=(M=window.dimensions)!=null?M:[],h=y((Y=window.dimension)!=null?Y:(j=c[0])==null?void 0:j.value),f=(q=window.treeData)!=null?q:[],_=f.chart?y(t.menu=="Charts"?f.chart[h.value]:f.pivot[h.value]):y(),I=()=>{_.value=f.chart?t.menu=="Charts"?f.chart[h.value]:f.pivot[h.value]:""},x=y(!1),C=y([]),le=()=>{x.value=!x.value;for(const r in _.value){C.value[_.value[r].id]=x.value;for(const n in _.value[r].child)C.value[_.value[r].child[n].id]=x.value}},K=r=>{C.value[r]=!C.value[r]};let u=Oe({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const $=y(),re=r=>{for(const n in r){u.selectOptions=r[n];break}};ae(()=>t.selectOptions,r=>{if(u.categorysNum=0,!!r){r.list.forEach(n=>{const w=u.categorys[n.category];u.categorys[n.category]=w&&w.length?[...w,n]:[n],u.categoryNames[n.category]=n.categoryName,u.categorys.all.push(n)});for(const n in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:n,label:u.categoryNames[n]});re(u.categorys),$.value=u.menuOptions[0].key}},{immediate:!0});const ie=r=>{u.selectOptions=u.categorys[r]},G=Be(),V=(r,n)=>{W(n.chartKey,$e(n)),W(n.conKey,ze(n)),r.dataTransfer.setData(Ie.DRAG_KEY,xe(ht(n,["image"]))),G.setEditCanvas(Q.IS_CREATE,!0)},H=()=>{G.setEditCanvas(Q.IS_CREATE,!1)};return(r,n)=>{const w=E("n-select"),z=E("n-icon"),J=E("n-scrollbar"),ue=E("n-menu");return i(),v("div",yt,[e.menu=="Charts"||e.menu=="Tables"?(i(),v("div",Ct,[g(w,{class:"dimension-btn",value:h.value,"onUpdate:value":[n[0]||(n[0]=m=>h.value=m),I],options:s(c)},null,8,["value","options"]),d("div",bt,[kt,g(z,{size:"16",component:x.value?s(l):s(o),onClick:le},null,8,["component"])]),d("div",Ot,[g(J,null,{default:D(()=>[(i(!0),v(P,null,R(s(_),(m,Xt)=>(i(),v("div",{key:m.id},[d("div",null,[d("div",St,[g(z,{size:"16",component:C.value[m.id]?s(l):s(o),onClick:p=>K(m.id)},null,8,["component","onClick"]),d("label",Et,S(m.title),1),d("label",It,S(m.count),1)]),m.child&&C.value[m.id]?(i(!0),v(P,{key:0},R(m.child,p=>(i(),v("div",{class:"tree-child",key:p.id},[p.type!="chapter"?(i(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:O=>V(O,p.chartConfig),onDragend:H},[g(s(Z),{class:"list-img",chartConfig:p.chartConfig},null,8,["chartConfig"]),d("span",null,S(p.title),1)],40,xt)):b("",!0),p.type=="chapter"?(i(),v("div",wt,[g(z,{size:"16",component:C.value[p.id]?s(l):s(o),onClick:O=>K(p.id)},null,8,["component","onClick"]),d("label",At,S(p.title),1)])):b("",!0),p.child&&C.value[p.id]?(i(!0),v(P,{key:2},R(p.child,O=>(i(),v("div",{class:"tree-child",key:p.id},[O.type!="chapter"?(i(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:de=>V(de,O.chartConfig),onDragend:H},[g(s(Z),{class:"list-img",chartConfig:O.chartConfig},null,8,["chartConfig"]),d("span",Lt,S(O.title),1)],40,Dt)):b("",!0)]))),128)):b("",!0)]))),128)):b("",!0)])]))),128))]),_:1})])])):b("",!0),e.menu!="Charts"&&e.menu!="Tables"?(i(),v("div",Tt,[g(ue,{class:"chart-menu-width",value:$.value,"onUpdate:value":[n[1]||(n[1]=m=>$.value=m),ie],options:s(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),d("div",Nt,[g(J,null,{default:D(()=>[g(s(a),{menuOptions:s(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):b("",!0)])}}});var Rt=se(Pt,[["__scopeId","data-v-0680c5d5"]]);const $t=we(),zt=y($t.getAppTheme);ce();const{getCharts:Ft}=Ae(ce()),Bt=De({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(Fe)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Ut,RoadmapIcon:Kt,SpellCheckIcon:Gt,GraphicalDataFlowIcon:Vt}=oe.carbon,{getPackagesList:ee}=Bt(),k=[],te={[T.CHARTS]:{icon:L(Kt),label:N.CHARTS},[T.INFORMATIONS]:{icon:L(Gt),label:N.INFORMATIONS},[T.TABLES]:{icon:L(Ut),label:N.TABLES},[T.DECORATES]:{icon:L(Vt),label:N.DECORATES}},Ht=()=>{for(const e in ee)k.push({key:e,icon:te[e].icon,label:te[e].label,list:ee[e]})};Ht();k[0].key;const A=y(k[0].key),B=y(k[0]),Mt=e=>{for(const t in k)k[t].key==e&&(B.value=k[t])};const jt={class:"menu-width-box"},Yt={class:"menu-component-box"},qt=U({__name:"index",setup(e){return Le(t=>({"39b2b54d":s(zt)})),(t,a)=>{const l=E("n-tab-pane"),o=E("n-tabs");return i(),F(s(Pe),{class:Ne(["go-content-charts",{scoped:!s(Ft)}]),backIcon:!1},{default:D(()=>[d("aside",null,[d("div",jt,[g(o,{value:s(A),"onUpdate:value":[a[0]||(a[0]=c=>Te(A)?A.value=c:null),s(Mt)],class:"tabs-box",size:"small",type:"segment"},{default:D(()=>[(i(!0),v(P,null,R(s(k),c=>(i(),F(l,{key:c.key,name:c.key,size:"small","display-directive":"show:lazy"},{tab:D(()=>[d("span",null,S(c.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),d("div",Yt,[s(B)?(i(),F(s(Rt),{selectOptions:s(B),menu:s(A),key:s(A)},null,8,["selectOptions","menu"])):b("",!0)])])])]),_:1},8,["class"])}}});var Jt=se(qt,[["__scopeId","data-v-0154e46d"]]),oa=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));export{Z as _,oa as i,ht as o};
