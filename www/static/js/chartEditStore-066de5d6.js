var M=Object.defineProperty,q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var G=(t,e,s)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,x=(t,e)=>{for(var s in e||(e={}))Y.call(e,s)&&G(t,s,e[s]);if(U)for(var s of U(e))z.call(e,s)&&G(t,s,e[s]);return t},y=(t,e)=>q(t,W(e));import{aw as K,ax as $,ay as V,az as X,aA as j,aB as J,a2 as m,aC as Z,au as w,aD as O,aE as F,aF as N,aG as Q,ac as tt,aH as et,aI as st,aJ as rt,i as _,aK as R,as as D,at,aL as ot}from"./index-ed17d07a.js";import{a as g,b as i,l as C}from"./plugin-15ab4596.js";var P=(t=>(t.ECHARTS="echarts",t.NAIVE_UI="naiveUI",t.COMMON="common",t.STATIC="static",t))(P||{}),it=(t=>(t.CHARTS="Charts",t.TABLES="Tables",t.INFORMATIONS="Informations",t.DECORATES="Decorates",t))(it||{}),ct=(t=>(t.CHARTS="\u56FE\u8868",t.TABLES="\u5217\u8868",t.INFORMATIONS="\u4FE1\u606F",t.DECORATES="\u5C0F\u7EC4\u4EF6",t))(ct||{}),nt=(t=>(t[t.VIEW=0]="VIEW",t[t.CONFIG=1]="CONFIG",t))(nt||{});const ht=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"];var ut={color:ht};const ft=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"];var dt={color:ft};const lt=["#fc97af","#87f7cf","#f7f494","#72ccff","#f7c5a0","#d4a4eb","#d2f5a6","#76f2f2"];var gt={color:lt};const Ct=["#893448","#d95850","#eb8146","#ffb248","#f2d643","#ebdba4"];var pt={color:Ct};const St=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];var Tt={color:St};const bt=["#9b8bba","#e098c7","#8fd3e8","#71669e","#cc70af","#7cb4cc"];var Lt={color:bt};const vt=["#e01f54","#5e4ea5","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"];var kt={color:vt};const At=["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"];var wt={color:At};const It=["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"];var Ot={color:It};const Rt=["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"];var Dt={color:Rt};const Et=["#516b91","#59c4e6","#edafda","#93b7e3","#a5e7f0","#cbb0e3"];var mt={color:Et};const xt=["#4ea397","#22c3aa","#7bd9a5","#d0648a","#f58db2","#f2b3c9"];var yt={color:xt};const _t={text:"",show:!0,textStyle:{color:"#BFBFBF",fontSize:18},subtextStyle:{color:"#A2A2A2",fontSize:14}},Bt={show:!0,name:"",nameGap:15,nameTextStyle:{color:"#B9B8CE",fontSize:12},inverse:!1,axisLabel:{show:!0,fontSize:12,color:"#B9B8CE",rotate:0},position:"bottom",axisLine:{show:!0,lineStyle:{color:"#B9B8CE",width:1},onZero:!0},axisTick:{show:!0,length:5},splitLine:{show:!1,lineStyle:{color:"#484753",width:1,type:"solid"}}},Ut={show:!0,name:"",nameGap:15,nameTextStyle:{color:"#B9B8CE",fontSize:12},inverse:!1,axisLabel:{show:!0,fontSize:12,color:"#B9B8CE",rotate:0},position:"left",axisLine:{show:!0,lineStyle:{color:"#B9B8CE",width:1},onZero:!0},axisTick:{show:!0,length:5},splitLine:{show:!0,lineStyle:{color:"#484753",width:1,type:"solid"}}},Gt={show:!0,top:"5%",textStyle:{color:"#B9B8CE"}},Ft={show:!1,left:"10%",top:"60",right:"10%",bottom:"60"};var Nt={title:_t,xAxis:Bt,yAxis:Ut,legend:Gt,grid:Ft};const Jt={dark:dt,customed:ut,macarons:Tt,walden:Dt,purplePassion:Lt,vintage:Ot,chalk:gt,westeros:mt,wonderland:yt,essos:pt,shine:wt,roma:kt},Pt="dark",Zt={dark:["#4992ff","#7cffb2","rgba(68, 181, 226, 0.3)","rgba(73, 146, 255, 0.5)","rgba(124, 255, 178, 0.5)"],customed:["#5470c6","#91cc75","rgba(84, 112, 198, 0.5)","rgba(84, 112, 198, 0.5)","rgba(145, 204, 117, 0.5)"],macarons:["#2ec7c9","#b6a2de","rgba(182, 162, 222, 0.3)","rgba(46, 199, 201, 0.5)","rgba(182, 162, 222, 0.5)"],walden:["#3fb1e3","#6be6c1","rgba(68, 181, 226, 0.3)","rgba(63, 177, 227, 0.5)","rgba(107, 230, 193, 0.5)"],purplePassion:["#9b8bba","#e098c7","rgba(182, 162, 222, 0.3)","rgba(155, 139, 186, 0.5)","rgba(237, 175, 218, 0.5)"],vintage:["#d87c7c","#919e8b","rgba(182, 162, 222, 0.3)","rgba(216, 124, 124, 0.5)","rgba(145, 158, 139, 0.5)"],chalk:["#fc97af","#87f7cf","rgba(135, 247, 207, 0.3)","rgba(252, 151, 175, 0.5)","rgba(135, 247, 207, 0.5)"],westeros:["#516b91","#edafda","rgba(81, 107, 145, 0.3)","rgba(81, 107, 145, 0.5)","rgba(89, 196, 230, 0.5)"],wonderland:["#4ea397","#22c3aa","rgba(68, 181, 226, 0.3)","rgba(78, 163, 151, 0.5)","rgba(34, 195, 170, 0.5)"],essos:["#893448","#d95850","rgba(137, 52, 72, 0.3)","rgba(137, 52, 72, 0.5)","rgba(217, 88, 80, 0.5)"],shine:["#c12e34","#0098d9","rgba(137, 52, 72, 0.3)","rgba(193, 46, 52, 0.5)","rgba(230, 182, 0, 0.5)"],roma:["#e01f54","#5e4ea5","rgba(137, 52, 72, 0.3)","rgba(224, 31, 84, 0.5)","rgba(94, 78, 165, 0.5)"]},Ht=y(x({},Nt),{dataset:null}),Mt={requestDataType:K.STATIC,requestHttpType:$.GET,requestUrl:"",requestInterval:void 0,requestIntervalUnit:V.SECOND,requestContentType:X.DEFAULT,requestParamsBodyType:j.NONE,requestSQLContent:{sql:"select * from  where"},requestParams:{Body:{"form-data":{},"x-www-form-urlencoded":{},json:"",xml:""},Header:{},Params:{}}};class qt{constructor(){this.id=m(),this.isGroup=!1,this.attr=y(x({},Z),{zIndex:-1}),this.styles={filterShow:!1,hueRotate:0,saturate:1,contrast:1,brightness:1,opacity:1,rotateZ:0,rotateX:0,rotateY:0,skewX:0,skewY:0,blendMode:"normal",animations:[]},this.preview={overFlowHidden:!1},this.status={lock:!1,hide:!1},this.request=w(Mt),this.filter=void 0,this.events={baseEvent:{[O.ON_CLICK]:void 0,[O.ON_DBL_CLICK]:void 0,[O.ON_MOUSE_ENTER]:void 0,[O.ON_MOUSE_LEAVE]:void 0},advancedEvents:{[F.VNODE_MOUNTED]:void 0,[F.VNODE_BEFORE_MOUNT]:void 0}}}}class Wt extends qt{constructor(){super(...arguments),this.isGroup=!0,this.chartConfig={key:"group",chartKey:"group",conKey:"group",category:"group",categoryName:"group",package:"group",chartFrame:P.COMMON,title:J,image:""},this.groupList=[],this.key="group",this.option={},this.id=m(),this.attr={w:0,h:0,x:0,y:0,offsetX:0,offsetY:0,zIndex:-1}}}var o=(t=>(t.ADD="add",t.DELETE="delete",t.UPDATE="update",t.MOVE="move",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.TOP="top",t.BOTTOM="bottom",t.UP="up",t.DOWN="down",t.GROUP="group",t.UN_GROUP="unGroup",t.LOCK="lock",t.UNLOCK="unLock",t.HIDE="hide",t.SHOW="show",t))(o||{}),d=(t=>(t.CANVAS="canvas",t.CHART="chart",t))(d||{}),Yt=(t=>(t.BACK_STACK="backStack",t.FORWARD_STACK="forwardStack",t))(Yt||{}),I=(t=>(t.ID="id",t.TARGET_TYPE="targetType",t.ACTION_TYPE="actionType",t.HISTORY_DATA="historyData",t))(I||{});const zt=N({id:"useChartHistoryStore",state:()=>({backStack:[],forwardStack:[]}),getters:{getBackStack(){return this.backStack},getForwardStack(){return this.forwardStack}},actions:{createStackItem(t,e,s=d.CHART){this.pushBackStackItem(Object.freeze({[I.ID]:new Date().getTime().toString(),[I.HISTORY_DATA]:t,[I.ACTION_TYPE]:e,[I.TARGET_TYPE]:s}))},canvasInit(t){this.createStackItem([t],o.ADD,d.CANVAS)},pushBackStackItem(t,e=!1){t instanceof Array?this.backStack=[...this.backStack,...t]:this.backStack.push(t),this.backStack.splice(0,this.backStack.length-Q),!e&&this.clearForwardStack()},pushForwardStack(t){t instanceof Array?this.forwardStack=[...this.forwardStack,...t]:this.forwardStack.push(t)},popBackStackItem(){if(this.backStack.length>0)return this.backStack.pop()},popForwardStack(){if(this.forwardStack.length>0)return this.forwardStack.pop()},clearForwardStack(){this.forwardStack=[]},clearBackStack(){const t=this.getBackStack[0];this.backStack=[t]},backAction(){try{if(g(),this.getBackStack.length>1){const t=this.popBackStackItem();if(!t){i();return}return this.pushForwardStack(t),i(),t}i()}catch(t){C()}},forwardAction(){try{if(g(),this.getForwardStack.length){const t=this.popForwardStack();if(!t){i();return}return this.pushBackStackItem(t,!0),i(),t}i()}catch(t){C()}},createAddHistory(t){this.createStackItem(t,o.ADD,d.CHART)},createUpdateHistory(t){this.createStackItem(t,o.UPDATE,d.CHART)},createDeleteHistory(t){this.createStackItem(t,o.DELETE,d.CHART)},createMoveHistory(t){this.createStackItem(t,o.MOVE,d.CHART)},createLayerHistory(t,e){this.createStackItem(t,e,d.CHART)},createPasteHistory(t){this.createStackItem(t,o.CUT,d.CHART)},createGroupHistory(t){this.createStackItem(t,o.GROUP,d.CHART)},createUnGroupHistory(t){this.createStackItem(t,o.UN_GROUP,d.CHART)},createLockHistory(t){this.createStackItem(t,o.LOCK,d.CHART)},createUnLockHistory(t){this.createStackItem(t,o.UNLOCK,d.CHART)},createHideHistory(t){this.createStackItem(t,o.HIDE,d.CHART)},createShowHistory(t){this.createStackItem(t,o.SHOW,d.CHART)}}});var B=(t=>(t.EDIT_LAYOUT_DOM="editLayoutDom",t.EDIT_CONTENT_DOM="editContentDom",t.OFFSET="offset",t.SCALE="scale",t.USER_SCALE="userScale",t.LOCK_SCALE="lockScale",t.IS_CREATE="isCreate",t.IS_DRAG="isDrag",t.IS_SELECT="isSelect",t))(B||{}),Kt=(t=>(t.PROJECT_NAME="projectName",t.WIDTH="width",t.HEIGHT="height",t.CHART_THEME_COLOR="chartThemeColor",t.CHART_THEME_SETTING="chartThemeSetting",t.BACKGROUND="background",t.BACKGROUND_IMAGE="backgroundImage",t.SELECT_COLOR="selectColor",t.PREVIEW_SCALE_TYPE="previewScaleType",t))(Kt||{}),B=(t=>(t.START_X="startX",t.START_Y="startY",t.X="x",t.Y="y",t))(B||{}),E=(t=>(t.EDIT_RANGE="editRange",t.EDIT_CANVAS="editCanvas",t.RIGHT_MENU_SHOW="rightMenuShow",t.MOUSE_POSITION="mousePosition",t.TARGET_CHART="targetChart",t.RECORD_CHART="recordChart",t.EDIT_CANVAS_CONFIG="editCanvasConfig",t.REQUEST_GLOBAL_CONFIG="requestGlobalConfig",t.COMPONENT_LIST="componentList",t))(E||{});const l=zt(),$t=tt(),Qt=N({id:"useChartEditStore",state:()=>({editCanvas:{editLayoutDom:null,editContentDom:null,offset:20,scale:1,userScale:1,lockScale:!1,isCreate:!1,isDrag:!1,isSelect:!1},rightMenuShow:!1,mousePosition:{startX:0,startY:0,x:0,y:0},targetChart:{hoverId:void 0,selectId:[]},recordChart:void 0,editCanvasConfig:{projectName:void 0,width:1920,height:1080,filterShow:!1,hueRotate:0,saturate:1,contrast:1,brightness:1,opacity:1,rotateZ:0,rotateX:0,rotateY:0,skewX:0,skewY:0,blendMode:"normal",background:void 0,backgroundImage:void 0,selectColor:!0,chartThemeColor:Pt,chartThemeSetting:Ht,previewScaleType:et},requestGlobalConfig:{requestDataPond:[],requestOriginUrl:"",requestInterval:st,requestIntervalUnit:rt,requestParams:{Body:{"form-data":{},"x-www-form-urlencoded":{},json:"",xml:""},Header:{},Params:{}}},componentList:[]}),getters:{getMousePosition(){return this.mousePosition},getRightMenuShow(){return this.rightMenuShow},getEditCanvas(){return this.editCanvas},getEditCanvasConfig(){return this.editCanvasConfig},getTargetChart(){return this.targetChart},getRecordChart(){return this.recordChart},getRequestGlobalConfig(){return this.requestGlobalConfig},getComponentList(){return this.componentList},getStorageInfo(){return{[E.EDIT_CANVAS_CONFIG]:this.getEditCanvasConfig,[E.COMPONENT_LIST]:this.getComponentList,[E.REQUEST_GLOBAL_CONFIG]:this.getRequestGlobalConfig}}},actions:{setEditCanvas(t,e){this.editCanvas[t]=e},setEditCanvasConfig(t,e){this.editCanvasConfig[t]=e},setRightMenuShow(t){this.rightMenuShow=t},setTargetHoverChart(t){this.targetChart.hoverId=t},setTargetSelectChart(t,e=!1){if(!this.targetChart.selectId.find(s=>s===t)){if(!t){this.targetChart.selectId=[];return}if(e){if(_(t)){this.targetChart.selectId.push(t);return}if(R(t)){this.targetChart.selectId.push(...t);return}}else{if(_(t)){this.targetChart.selectId=[t];return}if(R(t)){this.targetChart.selectId=t;return}}}},setRecordChart(t){this.recordChart=w(t)},setMousePosition(t,e,s,r){t&&(this.mousePosition.x=t),e&&(this.mousePosition.y=e),s&&(this.mousePosition.startX=s),r&&(this.mousePosition.startY=r)},fetchTargetIndex(t){const e=t||this.getTargetChart.selectId.length&&this.getTargetChart.selectId[0]||void 0;if(!e)return i(),-1;const s=this.componentList.findIndex(r=>r.id===e);if(s!==-1)return s;{const r=this.getComponentList.length;for(let a=0;a<r;a++)if(this.getComponentList[a].isGroup){for(const n of this.getComponentList[a].groupList)if(n.id===e)return a}}return-1},idPreFormat(t){const e=[];return t?(_(t)&&e.push(t),R(t)&&e.push(...t),e):(e.push(...this.getTargetChart.selectId),e)},addComponentList(t,e=!1,s=!1){if(t instanceof Array){t.forEach(r=>{this.addComponentList(r,e,s)});return}if(s&&l.createAddHistory([t]),e){this.componentList.unshift(t);return}this.componentList.push(t)},removeComponentList(t,e=!0){try{const s=this.idPreFormat(t),r=[];if(!s.length)return;g(),s.forEach(a=>{const n=this.fetchTargetIndex(a);n!==-1&&(r.push(this.getComponentList[n]),this.componentList.splice(n,1))}),e&&l.createDeleteHistory(r),i();return}catch(s){C()}},resetComponentPosition(t,e){const s=this.fetchTargetIndex(t.id);if(s>-1){const r=this.getComponentList[s];e?r.attr=Object.assign(r.attr,{x:t.attr.x+t.attr.offsetX,y:t.attr.y+t.attr.offsetY}):r.attr=Object.assign(r.attr,{x:t.attr.x,y:t.attr.y})}},moveComponentList(t){l.createMoveHistory(t)},updateComponentList(t,e){t<1&&t>this.getComponentList.length||(this.componentList[t]=e)},setPageStyle(t,e){const s=this.getEditCanvas.editContentDom;s&&(s.style[t]=e)},setBothEnds(t=!1,e=!0){try{if(this.getTargetChart.selectId.length>1)return;g();const s=this.getComponentList.length;if(s<2){i();return}const r=this.fetchTargetIndex(),a=this.getComponentList[r];if(r!==-1){if(t&&r===0||!t&&r===s-1){i();return}const n=(u,f)=>{const c=w(u);return c.attr.zIndex=f,c};e&&l.createLayerHistory([n(a,r)],t?o.BOTTOM:o.TOP),this.addComponentList(a,t),this.getComponentList.splice(t?r+1:r,1),i();return}}catch(s){C()}},setTop(t=!0){this.setBothEnds(!1,t)},setBottom(t=!0){this.setBothEnds(!0,t)},wrap(t=!1,e=!0){try{if(this.getTargetChart.selectId.length>1)return;g();const s=this.getComponentList.length;if(s<2){i();return}const r=this.fetchTargetIndex();if(r!==-1){if(t&&r===0||!t&&r===s-1){i();return}const a=t?r-1:r+1,n=this.getComponentList[r],u=this.getComponentList[a];e&&l.createLayerHistory([n],t?o.DOWN:o.UP),this.updateComponentList(r,u),this.updateComponentList(a,n),i();return}}catch(s){C()}},setUp(t=!0){this.wrap(!1,t)},setDown(t=!0){this.wrap(!0,t)},setCopy(t=!1){try{if(this.getTargetChart.selectId.length>1||document.getElementsByClassName("n-modal-body-wrapper").length)return;g();const e=this.fetchTargetIndex();if(e!==-1){const s={charts:this.getComponentList[e],type:t?o.CUT:o.COPY};this.setRecordChart(s),window.$message.success(t?"\u526A\u5207\u56FE\u8868\u6210\u529F":"\u590D\u5236\u56FE\u8868\u6210\u529F\uFF01"),i()}}catch(e){C()}},setCut(){this.setCopy(!0)},setParse(){try{g();const t=this.getRecordChart;if(t===void 0){i();return}const e=a=>(a=w(a),a.attr.x=this.getMousePosition.x+30,a.attr.y=this.getMousePosition.y+30,a.id=m(),a.isGroup&&a.groupList.forEach(n=>{n.id=m()}),a),s=t.type===o.CUT;(Array.isArray(t.charts)?t.charts:[t.charts]).forEach(a=>{this.addComponentList(e(a),void 0,!0),s&&(this.setTargetSelectChart(a.id),this.removeComponentList(void 0,!0))}),s&&this.setRecordChart(void 0),i()}catch(t){C()}},setBackAndSetForwardHandle(t,e=!1){if(t.targetType===d.CANVAS){this.editCanvas=t.historyData[0];return}this.setTargetSelectChart();let s=t.historyData;R(s)&&s.forEach(h=>{this.setTargetSelectChart(h.id,!0)});const r=t.actionType===o.ADD,a=t.actionType===o.DELETE;if(r||a){if(r&&e||a&&!e){s.forEach(h=>{this.addComponentList(h)});return}s.forEach(h=>{this.removeComponentList(h.id,!1)});return}if(t.actionType===o.MOVE){s.forEach(h=>{this.resetComponentPosition(h,e)});return}const u=t.actionType===o.TOP,f=t.actionType===o.BOTTOM;if(u||f){if(!e){u&&this.getComponentList.pop(),f&&this.getComponentList.shift(),this.getComponentList.splice(s[0].attr.zIndex,0,s[0]);return}u&&this.setTop(!1),f&&this.setBottom(!1)}const c=t.actionType===o.UP,p=t.actionType===o.DOWN;if(c||p){if(c&&e||p&&!e){this.setUp(!1);return}this.setDown(!1);return}const T=t.actionType===o.GROUP,S=t.actionType===o.UN_GROUP;if(T||S){if(T&&e||S&&!e){const h=[];s.length>1?s.forEach(A=>{h.push(A.id)}):s[0].groupList.forEach(H=>{h.push(H.id)}),this.setGroup(h,!1);return}s.length>1?this.setUnGroup([s[0].id],void 0,!1):this.setUnGroup([s[0].groupList[0].id],void 0,!1);return}const b=t.actionType===o.LOCK,L=t.actionType===o.UNLOCK;if(b||L){if(b&&e||L&&!e){s.forEach(h=>{this.setLock(!h.status.lock,!1)});return}s.forEach(h=>{this.setUnLock(!1)});return}const v=t.actionType===o.HIDE,k=t.actionType===o.SHOW;if(v||k){if(v&&e||k&&!e){s.forEach(h=>{this.setHide(!h.status.hide,!1)});return}s.forEach(h=>{this.setShow(!1)});return}},setBack(){try{g();const t=l.backAction();if(!t){i();return}this.setBackAndSetForwardHandle(t),i()}catch(t){C()}},setForward(){try{g();const t=l.forwardAction();if(!t){i();return}this.setBackAndSetForwardHandle(t,!0),i()}catch(t){C()}},setMove(t){const e=this.fetchTargetIndex();if(e===-1)return;const s=this.getComponentList[e].attr,r=$t.getChartMoveDistance;switch(t){case D.ARROW_UP:s.y-=r;break;case D.ARROW_RIGHT:s.x+=r;break;case D.ARROW_DOWN:s.y+=r;break;case D.ARROW_LEFT:s.x-=r;break}},setGroup(t,e=!0){try{const s=this.idPreFormat(t)||this.getTargetChart.selectId;if(s.length<2)return;g();const r=new Wt,a={l:this.getEditCanvasConfig.width,t:this.getEditCanvasConfig.height,r:0,b:0},n=[],u=[],f=[];s.forEach(c=>{const p=this.fetchTargetIndex(c);p!==-1&&this.getComponentList[p].isGroup?this.setUnGroup([c],T=>{T.forEach(S=>{this.addComponentList(S),f.push(S.id)})},!1):p!==-1&&f.push(c)}),f.forEach(c=>{const p=this.componentList.splice(this.fetchTargetIndex(c),1)[0],{x:T,y:S,w:b,h:L}=p.attr,{l:v,t:k,r:h,b:A}=a;a.l=v>T?T:v,a.t=k>S?S:k,a.r=h<T+b?T+b:h,a.b=A<S+L?S+L:A,n.push(p),u.push(at(p))}),e&&l.createGroupHistory(u),n.forEach(c=>{c.attr.x=c.attr.x-a.l,c.attr.y=c.attr.y-a.t,r.groupList.push(c)}),r.attr.x=a.l,r.attr.y=a.t,r.attr.w=a.r-a.l,r.attr.h=a.b-a.t,this.addComponentList(r),this.setTargetSelectChart(r.id),i()}catch(s){console.log(s),window.$message.error("\u521B\u5EFA\u5206\u7EC4\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\uFF01"),i()}},setUnGroup(t,e,s=!0){try{const r=t||this.getTargetChart.selectId;if(r.length!==1)return;g();const a=u=>{const f=this.getComponentList[u];!f.isGroup||(s&&l.createUnGroupHistory(w([f])),f.groupList.forEach(c=>{c.attr.x=c.attr.x+f.attr.x,c.attr.y=c.attr.y+f.attr.y,e||this.addComponentList(c)}),this.setTargetSelectChart(f.id),this.removeComponentList(f.id,!1),e&&e(f.groupList))},n=this.fetchTargetIndex(r[0]);n!==-1&&a(n),i()}catch(r){console.log(r),window.$message.error("\u89E3\u9664\u5206\u7EC4\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\uFF01"),i()}},setLock(t=!0,e=!0){try{if(this.getTargetChart.selectId.length>1)return;g();const s=this.fetchTargetIndex();if(s!==-1){const r=this.getComponentList[s];r.status.lock=t,e&&(t?l.createLockHistory([r]):l.createUnLockHistory([r])),this.updateComponentList(s,r),t&&this.setTargetSelectChart(void 0),i();return}}catch(s){C()}},setUnLock(t=!0){this.setLock(!1,t)},setHide(t=!0,e=!0){try{if(this.getTargetChart.selectId.length>1)return;g();const s=this.fetchTargetIndex();if(s!==-1){const r=this.getComponentList[s];r.status.hide=t,e&&(t?l.createHideHistory([r]):l.createShowHistory([r])),this.updateComponentList(s,r),i(),t&&this.setTargetSelectChart(void 0)}}catch(s){C()}},setShow(t=!0){this.setHide(!1,t)},setPageSize(t){this.setPageStyle("height",`${this.editCanvasConfig.height*t}px`),this.setPageStyle("width",`${this.editCanvasConfig.width*t}px`)},computedScale(){if(this.getEditCanvas.editLayoutDom){const t=this.getEditCanvas.editLayoutDom.clientWidth-this.getEditCanvas.offset*2-5,e=this.getEditCanvas.editLayoutDom.clientHeight-this.getEditCanvas.offset*4,s=this.editCanvasConfig.width,r=this.editCanvasConfig.height,a=parseFloat((s/r).toFixed(5));if(parseFloat((t/e).toFixed(5))>a){const u=parseFloat((e*a/s).toFixed(5));this.setScale(u>1?1:u)}else{const u=parseFloat((t/a/r).toFixed(5));this.setScale(u>1?1:u)}}else window.$message.warning("\u8BF7\u5148\u521B\u5EFA\u753B\u5E03\uFF0C\u518D\u8FDB\u884C\u7F29\u653E")},listenerScale(){const t=ot(this.computedScale,200);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},setScale(t,e=!1){(!this.getEditCanvas.lockScale||e)&&(this.setPageSize(t),this.getEditCanvas.userScale=t,this.getEditCanvas.scale=t)}}});export{E as C,Kt as E,nt as F,Yt as H,it as P,zt as a,P as b,Jt as c,qt as d,Zt as e,Pt as f,Ht as g,ct as h,B as i,o as j,d as k,Wt as l,Qt as u};
